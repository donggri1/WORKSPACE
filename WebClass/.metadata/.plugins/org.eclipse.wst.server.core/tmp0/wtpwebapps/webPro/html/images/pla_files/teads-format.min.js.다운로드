(()=>{var __webpack_modules__={7724:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,".teads-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;opacity:0;cursor:pointer}",""])},5352:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,".teads-inread{overflow:hidden;height:0;-webkit-transition:height .5s;-moz-transition:height .5s;-o-transition:height .5s;-ms-transition:height .5s;transition:height .5s;box-sizing:content-box}.teads-inread.no-transition{-webkit-transition:none;-moz-transition:none;-o-transition:none;-ms-transition:none;transition:none}div.teads-inread div:after,div.teads-inread div:before{display:none!important}div.teads-inread.teads-display{margin-bottom:10px!important}div.teads-inread.teads-third-party-display{height:auto!important}",""])},4608:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,'.teads-expand .teads-ui-components-adchoices,.teads-inread .teads-ui-components-adchoices{color:#000;font-family:arial;font-size:11px;cursor:pointer;position:absolute;top:3px;right:5px;width:15px;height:15px;line-height:15px;padding:1px;background:url("data:image/svg+xml;base64,PHN2Zw0KICB2ZXJzaW9uPSIxLjEiDQogIGJhc2VQcm9maWxlPSJmdWxsIg0KICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8c3R5bGU+DQogICAgLyogPCFbQ0RBVEFbICovDQogICAgLmFkY2hvaWNlcyB7DQogICAgICB0ZXh0LXJlbmRlcmluZzogZ2VvbWV0cmljUHJlY2lzaW9uOw0KICAgICAgZmlsbC1vcGFjaXR5OiAxLjA7DQogICAgICBmaWxsOiAjMDBhZWNkOw0KICAgICAgc3Ryb2tlOiBub25lOw0KICAgIH0NCiAgICAvKiBdXT4gKi8NCiAgPC9zdHlsZT4NCiAgPHN2ZyBjbGFzcz0iYWRjaG9pY2VzIiB4PSIwcHgiPg0KICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiByPSIwLjY3Ij48L2NpcmNsZT4NCiAgICA8cGF0aCBkPSJNNC4yLDExLjNRMy4zLDExLjgsMy4zLDEwLjc1TDMuMyw0LjFRMy4zLDMuMSw0LjMsMy41TDEwLjQsNy4wUTEyLjAsNy41LDEwLjQsOC4wTDYuNjUsMTAuMEw2LjY1LDcuNzVhMC42NSwwLjY1LDAsMSwwLC0xLjMsMEw1LjM1LDEwLjc1YTAuOSwwLjksMCwwLDAsMS4zLDAuOEwxMi43LDguMlExMy43LDcuNSwxMi43LDYuN0wzLjMsMS42UTIuMiwxLjMsMS44LDIuNUwxLjgsMTIuNVEyLjIsMTMuOSwzLjMsMTMuM0w0LjgsMTIuNUEwLjMsMC4zLDAsMSwwLDQuMiwxMS4zWiI+PC9wYXRoPg0KICA8L3N2Zz4NCjwvc3ZnPg0K");background-size:15px 15px;background-repeat:no-repeat;background-position:100%;z-index:1}.teads-expand .teads-ui-components-adchoices.expanded:first-child,.teads-inread .teads-ui-components-adchoices.expanded:first-child{border-bottom-left-radius:8px;padding:1px 17px 1px 4px;background-color:hsla(0,0%,100%,.8)}.teads-expand .teads-ui-components-adchoices.expanded,.teads-inread .teads-ui-components-adchoices.expanded{width:auto;padding-right:19px}.teads-expand .teads-ui-components-adchoices span,.teads-inread .teads-ui-components-adchoices span{display:none!important}.teads-expand .teads-ui-components-adchoices.expanded span,.teads-inread .teads-ui-components-adchoices.expanded span{display:inline!important}',""])},1352:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,"div.teads-expand div.teads-ui-components-credits,div.teads-inread div.teads-ui-components-credits{font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;color:#585858!important;text-align:right!important;padding:1px 0!important;height:26px!important;line-height:26px!important;padding-right:4px!important;letter-spacing:.3px!important}div.teads-expand div.teads-ui-components-credits a span,div.teads-inread div.teads-ui-components-credits a span{display:inline!important}div.teads-expand div.teads-ui-components-credits a,div.teads-expand div.teads-ui-components-credits a span,div.teads-inread div.teads-ui-components-credits a,div.teads-inread div.teads-ui-components-credits a span{font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;box-shadow:none!important;letter-spacing:.3px!important}div.teads-expand.sm-screen div.teads-ui-components-credits a,div.teads-expand.sm-screen div.teads-ui-components-credits a span,div.teads-expand.xs-screen div.teads-ui-components-credits a,div.teads-expand.xs-screen div.teads-ui-components-credits a span,div.teads-inread.sm-screen div.teads-ui-components-credits a,div.teads-inread.sm-screen div.teads-ui-components-credits a span,div.teads-inread.xs-screen div.teads-ui-components-credits a,div.teads-inread.xs-screen div.teads-ui-components-credits a span{font-family:Helvetica,Arial,sans-serif!important;font-size:9px!important;box-shadow:none!important;letter-spacing:.3px!important}div.teads-inread.sm-screen div.teads-ui-components-credits{font-size:9px!important;letter-spacing:.3px!important}div.teads-expand .teads-ui-components-credits a,div.teads-inread .teads-ui-components-credits a{color:#585858!important;text-decoration:none!important;font-weight:300!important;border:none!important;letter-spacing:.3px!important;background:none!important;padding:0!important}div.teads-expand.sm-screen .teads-ui-components-credits a,div.teads-expand.xs-screen .teads-ui-components-credits a,div.teads-inread.sm-screen .teads-ui-components-credits a,div.teads-inread.xs-screen .teads-ui-components-credits a{font-size:9px!important;letter-spacing:.3px!important}div.teads-expand div.teads-ui-components-credits span.teads-ui-components-credits-colored,div.teads-inread div.teads-ui-components-credits span.teads-ui-components-credits-colored{color:#025c9a!important}div.teads-inread div.teads-ui-components-credits a:after,div.teads-inread div.teads-ui-components-credits a:before,div.teads-inread div.teads-ui-components-credits span:after,div.teads-inread div.teads-ui-components-credits span:before{display:none!important}",""])},6376:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,'div.teads-display-absolute{position:absolute!important;overflow:hidden!important;z-index:99!important;pointer-events:none!important;background-repeat:repeat-y;background-attachment:fixed}.teads-display-fixed{position:fixed!important;background-repeat:repeat-y!important}.teads-display-clickzone{display:block!important;position:absolute!important;top:0!important;width:100%!important;height:100%!important}.teads-video-scroller{position:fixed;top:50%;transform:translateY(-50%)}div.teads-display-format{position:sticky;-webkit-position:sticky}div.teads-display-format .icon-close{background-size:650px 40px!important;background-image:url("{{assetsPath}}/default/player-sprite.svg")!important}div.teads-display-format .icon-close,div.teads-display-format .sm-screen .icon-close,div.teads-display-format .xs-screen .icon-close{width:11px!important;height:11px!important;background-position:-80px 0!important}div.teads-display-format .teads-ui-component-closebutton svg{display:none!important}div.teads-ui-component-closebutton .components-countdown{display:none!important;position:absolute!important;left:2px!important;bottom:20px!important}div.teads-display-format .teads-ui-component-closebutton .components-countdown .countdown-circle>li{color:#fff!important}div.teads-display-format .teads-ui-component-closebutton .components-countdown .show,div.teads-display-format .teads-ui-component-closebutton .show{display:block!important}div.teads-display-format .teads-ui-component-closebutton .show .close-button{opacity:.8!important}div.teads-display-format .teads-ui-component-closebutton .show:hover .close-button.show{opacity:1!important}div.teads-display-format .sm-screen .teads-ui-component-closebutton .closebutton,div.teads-display-format .xs-screen .teads-ui-component-closebutton .closebutton{padding:10px 10px 15px 15px!important}',""])},8724:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,".teads-inread .teads-ui-components-hpl{position:absolute;left:-1000px;display:none;z-index:-100}",""])},8508:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,"div.teads-expand div.teads-ui-components-label,div.teads-inread div.teads-ui-components-label{font-family:Helvetica,Arial,sans-serif!important;font-size:11.5px!important;color:#585858;text-align:center!important;text-transform:uppercase!important;height:21px!important;line-height:21px!important;letter-spacing:.3px!important;font-weight:300!important}div.teads-inread div.teads-ui-components-label:after,div.teads-inread div.teads-ui-components-label:before{display:none!important}div.teads-inread.sm-screen div.teads-ui-components-label,div.teads-inread.xs-screen div.teads-ui-components-label{font-size:10px!important}",""])},9400:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,'.teads-inread .teads-ui-components-smart-header{margin-bottom:2px!important;height:21px}.teads-inread .teads-ui-components-smart-header .smart-header-content{position:absolute!important;right:0!important;background-color:#434343!important;padding:1px 6px 0;line-height:21px}.smart-header-content .close-button-smart .icon-close{transition:.1s;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;-ms-transition:.1s}.smart-header-content .adChoices-button-smart,.smart-header-content .close-button-smart,.smart-header-content .sound-button-smart{display:inline-block;cursor:pointer}.smart-header-content .adChoices-button-smart,.smart-header-content .close-button-smart{margin-right:5px}.smart-header-content .close-button-smart .icon-close{width:11px;height:11px;background-position:-80px 0;background-image:url("{{assetsPath}}/default/player-sprite.svg")}.smart-header-content .adChoices-button-smart{width:13px;height:13px;background:url("data:image/svg+xml;base64,PHN2Zw0KICB2ZXJzaW9uPSIxLjEiDQogIGJhc2VQcm9maWxlPSJmdWxsIg0KICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8c3R5bGU+DQogICAgLyogPCFbQ0RBVEFbICovDQogICAgLmFkY2hvaWNlcyB7DQogICAgICB0ZXh0LXJlbmRlcmluZzogZ2VvbWV0cmljUHJlY2lzaW9uOw0KICAgICAgZmlsbC1vcGFjaXR5OiAxLjA7DQogICAgICBmaWxsOiAjRkZGOw0KICAgICAgc3Ryb2tlOiBub25lOw0KICAgIH0NCiAgICAvKiBdXT4gKi8NCiAgPC9zdHlsZT4NCiAgPHN2ZyBjbGFzcz0iYWRjaG9pY2VzIiB4PSIwcHgiPg0KICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiByPSIwLjY3Ij48L2NpcmNsZT4NCiAgICA8cGF0aCBkPSJNNC4yLDExLjNRMy4zLDExLjgsMy4zLDEwLjc1TDMuMyw0LjFRMy4zLDMuMSw0LjMsMy41TDEwLjQsNy4wUTEyLjAsNy41LDEwLjQsOC4wTDYuNjUsMTAuMEw2LjY1LDcuNzVhMC42NSwwLjY1LDAsMSwwLC0xLjMsMEw1LjM1LDEwLjc1YTAuOSwwLjksMCwwLDAsMS4zLDAuOEwxMi43LDguMlExMy43LDcuNSwxMi43LDYuN0wzLjMsMS42UTIuMiwxLjMsMS44LDIuNUwxLjgsMTIuNVEyLjIsMTMuOSwzLjMsMTMuM0w0LjgsMTIuNUEwLjMsMC4zLDAsMSwwLDQuMiwxMS4zWiI+PC9wYXRoPg0KICA8L3N2Zz4NCjwvc3ZnPg==")}.icon-muteoff{background-position:-390px 0}.icon-muteon{background-position:-445px 0}.icon-muteoff,.icon-muteon{width:16px;height:11px;background-image:url("{{assetsPath}}/default/player-sprite.svg")}',""])},2300:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,'body{margin:0;padding:0;border:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:Helvetica,Arial,sans-serif!important;font-weight:300}#layout-video-component{width:100%;height:100%;position:relative}#vpaid-container{z-index:1;background-color:#000;position:relative}.teads-ui-component-progressbar{position:absolute;bottom:0;left:0}.teads-ui-component-progressbar .progress{height:3px;width:0;background-color:#86c3f7;transition:all .4s linear}.teads-ui-component-playpausebutton{position:absolute;bottom:10px;left:10px;width:20px;height:20px;background-image:url("{{assetsPath}}/default/img/play.png");background-position:0 0;background-repeat:no-repeat;background-size:contain;cursor:pointer}.teads-ui-component-playpausebutton.playing{background-image:url("{{assetsPath}}/default/img/pause.png")}.teads-ui-component-fullscreenbutton{position:absolute;bottom:5px;right:30px;width:16px;height:16px;background-image:url("{{assetsPath}}/default/img/fullscreen.png");background-position:0 0;background-repeat:no-repeat;background-size:contain;cursor:pointer}.teads-ui-component-progresstext{height:30px;margin:0 40px 0 60px;text-align:center;padding:4px}.teads-ui-component-skipbutton{position:absolute;bottom:40px;right:4px;width:100px;height:20px;font-family:Helvetica,Arial,sans-serif!important;background-color:#ccc;text-align:center;padding:4px;border:1px solid #000}.adchoices-icon{background:url("data:image/svg+xml;base64,PHN2Zw0KICB2ZXJzaW9uPSIxLjEiDQogIGJhc2VQcm9maWxlPSJmdWxsIg0KICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8c3R5bGU+DQogICAgLyogPCFbQ0RBVEFbICovDQogICAgLmFkY2hvaWNlcyB7DQogICAgICB0ZXh0LXJlbmRlcmluZzogZ2VvbWV0cmljUHJlY2lzaW9uOw0KICAgICAgZmlsbC1vcGFjaXR5OiAxLjA7DQogICAgICBmaWxsOiAjMDBhZWNkOw0KICAgICAgc3Ryb2tlOiBub25lOw0KICAgIH0NCiAgICAvKiBdXT4gKi8NCiAgPC9zdHlsZT4NCiAgPHN2ZyBjbGFzcz0iYWRjaG9pY2VzIiB4PSIwcHgiPg0KICAgIDxjaXJjbGUgY3g9IjYiIGN5PSI2IiByPSIwLjY3Ij48L2NpcmNsZT4NCiAgICA8cGF0aCBkPSJNNC4yLDExLjNRMy4zLDExLjgsMy4zLDEwLjc1TDMuMyw0LjFRMy4zLDMuMSw0LjMsMy41TDEwLjQsNy4wUTEyLjAsNy41LDEwLjQsOC4wTDYuNjUsMTAuMEw2LjY1LDcuNzVhMC42NSwwLjY1LDAsMSwwLC0xLjMsMEw1LjM1LDEwLjc1YTAuOSwwLjksMCwwLDAsMS4zLDAuOEwxMi43LDguMlExMy43LDcuNSwxMi43LDYuN0wzLjMsMS42UTIuMiwxLjMsMS44LDIuNUwxLjgsMTIuNVEyLjIsMTMuOSwzLjMsMTMuM0w0LjgsMTIuNUEwLjMsMC4zLDAsMSwwLDQuMiwxMS4zWiI+PC9wYXRoPg0KICA8L3N2Zz4NCjwvc3ZnPg0K")}.teads-ui-component-label{font-family:Helvetica,Arial,sans-serif!important;font-size:12px;color:#999;text-align:center;padding:3px 0;text-transform:uppercase;height:21px;line-height:21px;display:none}.fullscreen .teads-ui-component-label,.fullscreen .teads-ui-component-label.show{display:none!important}.teads-ui-component-credits{font-size:12px;color:#999;text-align:right;padding:3px 0;height:26px;line-height:26px;display:none}.fullscreen .teads-ui-component-credits,.fullscreen .teads-ui-component-credits.show{display:none!important}.sm-screen .teads-ui-component-label,.xs-screen .teads-ui-component-label{font-size:10px}.teads-ui-component-credits a{color:#999;text-decoration:none}.teads-ui-component-credits-blue{color:#79bbe9}.teads-ui-component-soundbutton{position:absolute;bottom:0;right:0;padding:13px 18px 18px 6px;cursor:pointer;display:none;opacity:0;transition:opacity 175ms linear}.teads-ui-component-soundbutton.show{display:block;opacity:.8}.teads-ui-component-soundbutton:hover{opacity:1}.teads-ui-component-closebutton{position:absolute;top:0;right:0;padding:15px;cursor:pointer;display:none;transition:opacity 175ms linear}.teads-ui-component-closebutton.show{display:block}.teads-ui-component-closebutton svg{display:none}.teads-ui-component-closebutton .countdown{display:none;position:absolute;left:2px;bottom:20px}.teads-ui-component-closebutton .countdown.show{display:block}.teads-ui-component-closebutton .countdown .countdown-circle>li{color:#fff}.fullscreen .teads-ui-component-closebutton .countdown.show{display:none!important}.teads-ui-component-closebutton.show .close-button{opacity:.8}.teads-ui-component-closebutton.show:hover .close-button.show{opacity:1}.sm-screen .teads-ui-component-closebutton .closebutton,.xs-screen .teads-ui-component-closebutton .closebutton{padding:10px 10px 15px 15px}.teads-ui-component-hourglass{display:none;position:absolute;top:0;right:16px;width:18px;height:18px;transition:opacity 175ms linear}.teads-ui-component-hourglass.center{top:11px;right:11px}.teads-ui-component-hourglass.show{display:flex!important}.teads-ui-component-hourglass svg{display:none}.teads-ui-component-hourglass .countdown{display:none;flex-direction:row;justify-content:center;align-items:center;flex:1;height:100%}.teads-ui-component-hourglass .countdown.show{display:flex!important}.teads-ui-component-hourglass .countdown .countdown-circle,.teads-ui-component-hourglass .countdown .countdown-circle>li{display:flex!important;flex-direction:row;justify-content:center;align-items:center;flex:1;height:100%}.teads-ui-component-hourglass .countdown .countdown-circle>li{color:#fff}.teads-ui-component-hourglass .countdown .countdown-circle>li:after{position:relative;top:0;font-size:.7rem}.teads-ui-component-clickbutton{display:none;position:absolute;top:0;left:0;cursor:pointer;-webkit-transition:background-color .25s;transition:background-color .25s}.teads-ui-component-clickbutton .text{font-size:12px;white-space:nowrap;max-height:30px;text-align:center;background-color:rgba(0,0,0,.1);border:1px solid #fff;color:#fff;margin:10px;padding:6px 10px}.teads-ui-component-clickbutton .text:hover{background-color:rgba(0,0,0,.25)}.sm-screen .teads-ui-component-clickbutton .text,.xs-screen .teads-ui-component-clickbutton .text{margin:5px;padding:5px}.teads-ui-component-clicktoplay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;cursor:pointer;display:none;z-index:10!important}.teads-ui-component-clicktoplay .icon-watchmore{position:absolute;top:50%;left:50%;margin-left:-8px;margin-right:-10px;opacity:.8;transition:opacity 175ms linear}.sm-screen .teads-ui-component-clicktoplay .icon-watchmore,.xs-screen .teads-ui-component-clicktoplay .icon-watchmore{margin-left:-5px;margin-right:-7px}.teads-ui-component-clicktoplay:hover .icon-watchmore{opacity:1}.teads-ui-component-endscreen{position:absolute;width:100%;height:100%;top:0;left:0;z-index:10!important;background-color:#000;text-align:center;word-spacing:nowrap;opacity:0;display:none;justify-content:center;align-items:center;transition:opacity 175ms ease}.teads-ui-component-endscreen.show{display:flex!important;opacity:1!important}.teads-ui-component-endscreen .adchoices{font-family:arial;font-size:11px;cursor:pointer;position:absolute;top:0;right:0;width:15px;height:15px;line-height:15px;padding:1px;border-bottom-left-radius:8px;background-size:15px 15px;background-repeat:no-repeat;background-position:100%}.teads-ui-component-endscreen .close-button:not(.hide)~.sm-screen .teads-ui-component-endscreen .adchoices,.teads-ui-component-endscreen .close-button:not(.hide)~.xs-screen .teads-ui-component-endscreen .adchoices{top:12px;right:30px}.teads-ui-component-endscreen .close-button:not(.hide)~.adchoices{top:14px;right:35px}.teads-ui-component-endscreen .adchoices.expanded{background-color:hsla(0,0%,100%,.8)!important}.teads-ui-component-endscreen .adchoices span{display:none}.teads-ui-component-endscreen .adchoices.expanded span{display:inline}.tea .teads-ui-component-endscreen .countdown .countdown-timer svg{opacity:0}.teads-ui-component-endscreen .countdown{position:absolute;bottom:18px;left:18px;color:#fff}.sm-screen .teads-ui-component-endscreen .countdown,.xs-screen .teads-ui-component-endscreen .countdown{bottom:5px;left:5px}.teads-ui-component-endscreen .close-button{position:absolute;top:0;right:0;padding:15px;cursor:pointer}.teads-ui-component-endscreen .button-container{position:absolute}.teads-ui-component-endscreen .button{display:block;width:100%;height:70px;margin-bottom:40px;cursor:pointer;transition:opacity 175ms ease}.sm-screen .teads-ui-component-endscreen .button{margin-bottom:15px!important;height:40px}.xs-screen .teads-ui-component-endscreen .button{margin-bottom:15px!important;height:32px}.xs-screen .teads-ui-component-endscreen .button.replay-button{margin-bottom:15px!important}.teads-ui-component-endscreen .button:last-child{margin-bottom:0!important}.teads-ui-component-endscreen.show .button{opacity:.8!important}.teads-ui-component-endscreen.show .button:hover{opacity:1!important}.teads-ui-component-endscreen.show .button.edge-touch-screen,.teads-ui-component-endscreen.show .button.edge-touch-screen:hover{opacity:.8!important}.teads-ui-component-endscreen .button .icon{float:left;border-radius:35px;border:2px solid #fff;border-color:#294355;height:66px;width:66px}.sm-screen .teads-ui-component-endscreen .button .icon{height:36px;width:36px}.xs-screen .teads-ui-component-endscreen .button .icon{display:flex;justify-content:center;align-items:center;border-width:1px;height:30px;width:30px}.teads-ui-component-endscreen .button .icon span{display:block;margin:18px 22px;height:30px;width:30px}.sm-screen .teads-ui-component-endscreen .button .icon span{margin:7px 10px;height:20px;width:16px}.xs-screen .teads-ui-component-endscreen .button .icon span{margin:0;height:20px;width:16px}.teads-ui-component-endscreen .button .text{float:left;line-height:70px;height:70px;font-size:23px;color:#294355;padding-left:25px}.sm-screen .teads-ui-component-endscreen .button .text{line-height:40px;height:40px;padding-left:20px;font-size:17px}.xs-screen .teads-ui-component-endscreen .button .text{line-height:30px;height:30px;font-size:14px;padding-left:15px}.teads-ui-component-endscreen .countdown{display:none;color:#294355}.teads-ui-component-uibutton.ui-invisible{text-decoration:line-through}.teads-ui-component-uibutton{position:absolute;bottom:5px;right:5px;width:16px;height:16px;text-align:center;vertical-align:middle;border:1px solid #000;color:#000;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:pointer;text-decoration:none;background-color:#fff;font-size:12px}@-webkit-keyframes load{0%{stroke-dashoffset:0}}@keyframes load{0%{stroke-dashoffset:0}}.countdown-circle{position:relative;display:inline-block;padding:0;margin:0;text-align:center}.countdown-circle>li:after{content:attr(data-countdown);position:absolute;width:100%;top:.4rem;left:0;font-size:1rem;text-align:center}.countdown-circle>li{display:inline-block;position:relative;text-align:center;color:#93a2ac;font-family:Helvetica,Arial,sans-serif!important;font-weight:100}.countdown-circle svg{width:30px;height:30px}.countdown-circle svg:nth-child(2){position:absolute;left:0;top:0;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}.countdown-circle svg:nth-child(2) path{fill:none;stroke-width:20;stroke-dasharray:629;stroke:#999;opacity:.9}.teads-ui-component-brandlogo{display:none;opacity:.8;cursor:pointer;position:absolute;bottom:0;left:0;margin-left:10px;margin-bottom:18px;webkit-transition:background-color .25s;transition:background-color .25s;width:20%;height:10%;max-height:50px;background-repeat:no-repeat;background-position-x:left;background-position-y:bottom;background-size:contain}.sm-screen .teads-ui-component-brandlogo,.xs-screen .teads-ui-component-brandlogo{margin-left:5px;width:30%;height:15%}.teads-ui-component-adchoices{font-family:arial;font-size:11px;cursor:pointer;position:absolute;top:0;right:0;line-height:15px;border-bottom-left-radius:8px;background-size:15px 15px;background-repeat:no-repeat;background-position:100%}.teads-ui-component-adchoices.expanded{width:auto;padding:1px 17px 1px 4px;background-color:hsla(0,0%,100%,.8)}.teads-ui-component-adchoices span{display:none}.teads-ui-component-adchoices.expanded span{display:inline}.teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices{top:14px;right:35px}.sm-screen .teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices,.xs-screen .teads-ui-component-closebutton:not(.hide)~.teads-ui-component-adchoices{top:12px;right:30px}.fullscreen .teads-ui-component-adchoices,.fullscreen .teads-ui-component-adchoices.show{display:none!important}.teads-ui-component-startscreen{width:100%;height:100%;position:absolute;-webkit-box-shadow:inset 0 0 85px rgba(0,0,0,.1);-moz-box-shadow:inset 0 0 85px rgba(0,0,0,.1);box-shadow:inset 0 0 85px rgba(0,0,0,.1);background-color:#fff}.teads-ui-component-bannervideobottom .container{z-index:1000;position:absolute;bottom:0;width:100%;height:81px;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border:1px solid #dfe6e9;border-width:0 1px 1px;background-color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;cursor:pointer}.teads-ui-component-bannervideobottom .cta{overflow:hidden;text-decoration:none;display:block;background-color:#03a9f4;white-space:nowrap;text-align:center;color:#fff;padding:12px;border-radius:4px;transition:.4s}.teads-ui-component-bannervideobottom .cta:hover{background-color:#027fb7}.show{display:block!important}.show:hover{opacity:1!important}.hide{display:none;opacity:0}',""])},5168:(e,t,i)=>{(e.exports=i(7516)(void 0)).push([e.id,'.icon-book{width:26px;height:29px;background-position:0 0}.sm-screen .icon-book,.xs-screen .icon-book{width:18px;height:20px;background-position:-35px 0}.icon-close{width:15px;height:15px;background-position:-60px 0}.sm-screen .icon-close,.xs-screen .icon-close{width:11px;height:11px;background-position:-80px 0}.icon-closeendscreen{width:15px;height:15px;background-position:-100px 0}.sm-screen .icon-closeendscreen,.xs-screen .icon-closeendscreen{width:11px;height:11px;background-position:-120px 0}.icon-collapse{width:15px;height:15px;background-position:-140px 0}.icon-contact{width:28px;height:23px;background-position:-160px 0}.sm-screen .icon-contact,.xs-screen .icon-contact{width:20px;height:16px;background-position:-195px 0}.icon-download{width:20px;height:25px;background-position:-220px 0}.sm-screen .icon-download,.xs-screen .icon-download{width:14px;height:17px;background-position:-245px 0}.icon-learnmore{width:23px;height:28px;background-position:-305px 0}.sm-screen .icon-learnmore,.xs-screen .icon-learnmore{width:17px;height:20px;background-position:-335px 0}.icon-muteoff{width:22px;height:15px;background-position:-360px 0}.sm-screen .icon-muteoff,.xs-screen .icon-muteoff{width:16px;height:11px;background-position:-390px 0}.icon-muteon{width:22px;height:15px;background-position:-415px 0}.sm-screen .icon-muteon,.xs-screen .icon-muteon{width:16px;height:11px;background-position:-445px 0}.icon-replay{width:23px;height:29px;background-position:-470px 0}.sm-screen .icon-replay,.xs-screen .icon-replay{width:16px;height:20px;background-position:-500px 0}.icon-shop{width:29px;height:29px;background-position:-525px 0}.sm-screen .icon-shop,.xs-screen .icon-shop{width:20px;height:20px;background-position:-560px 0}.icon-signup{width:26px;height:31px;background-position:-585px 0}.sm-screen .icon-signup,.xs-screen .icon-signup{width:18px;height:22px;background-position:-620px 0}.icon-watchmore{width:16px;height:20px;background-position:-645px 0}.sm-screen .icon-watchmore,.xs-screen .icon-watchmore{width:11px;height:14px;background-position:-670px 0}.icon-book,.icon-close,.icon-closeendscreen,.icon-collapse,.icon-contact,.icon-download,.icon-learnmore,.icon-muteoff,.icon-muteon,.icon-replay,.icon-shop,.icon-signup,.icon-watchmore{background-size:690px 40px}.no-svg .icon-book,.no-svg .icon-close,.no-svg .icon-closeendscreen,.no-svg .icon-collapse,.no-svg .icon-contact,.no-svg .icon-download,.no-svg .icon-learnmore,.no-svg .icon-muteoff,.no-svg .icon-muteon,.no-svg .icon-replay,.no-svg .icon-shop,.no-svg .icon-signup,.no-svg .icon-watchmore{background-image:url("{{assetsPath}}/default/player-sprite.png")}.icon-book,.icon-close,.icon-closeendscreen,.icon-collapse,.icon-contact,.icon-download,.icon-learnmore,.icon-muteoff,.icon-muteon,.icon-replay,.icon-shop,.icon-signup,.icon-watchmore{background-image:url("{{assetsPath}}/default/player-sprite.svg")}',""])},832:(e,t,i)=>{(t=e.exports=i(7516)(void 0)).i(i(2300),""),t.i(i(5168),""),t.push([e.id,".teads-ui-component-earlyclickoverlay,.teads-ui-component-fullscreenbutton{position:absolute;top:0;right:0;width:100%;height:100%;background:none}.fullscreen .teads-ui-component-fullscreenbutton,.fullscreen .teads-ui-component-fullscreenbutton .show{width:45px;height:45px;z-index:10!important}.teads-ui-component-fullscreenbutton .icon-collapse{display:none;margin-top:10px;margin-left:20px}.fullscreen .teads-ui-component-fullscreenbutton .icon-collapse{display:block}.fullscreen .teads-ui-component-closebutton .icon-close{display:none}",""])},7516:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,s=e[1]||"",n=e[3];if(!n)return s;if(t&&"function"==typeof btoa){var r=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),o=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[s].concat(o).concat([r]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(s[r]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&s[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},9280:(e,t,i)=>{var s=i(7724);e.exports="string"==typeof s?s:s.toString()},2440:(e,t,i)=>{var s=i(5352);e.exports="string"==typeof s?s:s.toString()},3068:(e,t,i)=>{var s=i(4608);e.exports="string"==typeof s?s:s.toString()},8680:(e,t,i)=>{var s=i(1352);e.exports="string"==typeof s?s:s.toString()},8224:(e,t,i)=>{var s=i(6376);e.exports="string"==typeof s?s:s.toString()},1884:(e,t,i)=>{var s=i(8724);e.exports="string"==typeof s?s:s.toString()},5298:(e,t,i)=>{var s=i(8508);e.exports="string"==typeof s?s:s.toString()},2296:(e,t,i)=>{var s=i(9400);e.exports="string"==typeof s?s:s.toString()},6652:(e,t,i)=>{var s=i(832);e.exports="string"==typeof s?s:s.toString()},9368:(e,t,i)=>{"use strict";function s(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}([function(e,t){e.exports={criticalProperties:["deviceAspectRatio","devicePixelRatio","js.webGlRenderer","screenWidthHeight","rendererRef","audioRef","js.deviceMotion","html.video.ap4x","html.video.av1"]}},function(e,t,i){t.a=function(e,t){t=t||5381;for(var i=0;i<e.length;i++)t=33*t^e.charCodeAt(i);return String(t>>>0)}},function(e,t,i){t.a=function(e,t){if(void 0!==window.matchMedia)for(var i in t)if(window.matchMedia("("+e+":"+t[i]+")").matches)return t[i]+""}},function(e,t,i){t.a=function(e){if(document.createElement)try{var t=document.createElement("video");if(t.canPlayType)switch(t.canPlayType(e)){case"":return!1;case"probably":return!0}}catch(e){}}},function(e,t,i){t.a=function(){return!!window.CanvasRenderingContext2D}},function(e,t,i){i.r(t),t.default=function(){try{return window.screen.width+"/"+window.screen.height}catch(e){}}},function(e,t,i){var s={"./audioRef.js":7,"./deviceAspectRatio.js":8,"./devicePixelRatio.js":9,"./html.video.ap4x.js":10,"./html.video.av1.js":11,"./js.deviceMotion.js":12,"./js.webGlRenderer.js":13,"./rendererRef.js":14,"./screenWidthHeight.js":5};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=6},function(e,t,i){i.r(t);var s=i(1);t.default=function(e,t){if(void 0!==e)return t(e);var i=null;try{if(!(i=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,44100,44100)))return t();var n=i.createOscillator();n.type="triangle",n.frequency.value=1e4;var r=i.createDynamicsCompressor();r.threshold&&(r.threshold.value=-50),r.knee&&(r.knee.value=40),r.ratio&&(r.ratio.value=12),r.reduction&&(r.reduction.value=-20),r.attack&&(r.attack.value=0),r.release&&(r.release.value=.25),n.connect(r),r.connect(i.destination),n.start(0),i.startRendering(),i.oncomplete=function(e){for(var i=!1,n=0;n<e.renderedBuffer.length;n++)i=Object(s.a)(e.renderedBuffer.getChannelData(0)[n].toString(),i);i&&t(i),r.disconnect()}}catch(e){t()}}},function(e,t,i){i.r(t);var s=i(2),n=i(5);t.default=function(e){if(void 0!==e)return e;var t=["2/3","40/71","3/4","16/9","16/10","375/667","9/16","10/16","375/812","207/448"],i=Object(n.default)();return i&&t.push(i),Object(s.a)("device-aspect-ratio",t)}},function(e,t,i){i.r(t),t.default=function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e+""}},function(e,t,i){i.r(t);var s=i(3);t.default=function(e){return void 0!==e?e:Object(s.a)('video/quicktime; codecs="ap4x"')}},function(e,t,i){i.r(t);var s=i(3);t.default=function(e){return void 0!==e?e:Object(s.a)('video/mp4; codecs="av01.0.05M.08"')}},function(e,t,i){i.r(t),t.default=function(){return!!window.DeviceMotionEvent}},function(e,t,i){i.r(t);var s=i(4);t.default=function(e){if(void 0!==e)return e;if(Object(s.a)()){var t=document.createElement("canvas"),i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){var n=i.getExtension("WEBGL_debug_renderer_info");if(n){var r=i.getParameter(n.UNMASKED_RENDERER_WEBGL);if(r)return r}}}}},function(e,t,i){i.r(t);var s=i(4),n=i(2),r=i(1);t.default=function(e){if(void 0!==e)return e;if(Object(s.a)()){var t=document.createElement("canvas"),i=t.getContext("2d"),o="DeviceAtlas";return i.textBaseline="top",i.font="16px 'Arial'",i.textBaseline="alphabetic",i.rotate(.05),i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",i.fillText(o,2,15),i.fillStyle="rgba(102, 200, 0, 0.7)",i.fillText(o,4,17),i.shadowBlur=10,i.shadowColor="blue",i.rotate(-.15),i.fillRect(-20,25,234,5),("p3"===Object(n.a)("color-gamut",["p3"])?"1":"0")+Object(r.a)(t.toDataURL())}}},function(e,t,i){i.r(t),i.d(t,"cacheProperty",(function(){return _}));var s=i(0),n=i.n(s),r=function(){return void 0===navigator.cookieEnabled&&"string"==typeof document.cookie||!!navigator.cookieEnabled},o=function(){try{return!!localStorage.getItem}catch(e){return!1}},a=function e(t,i,s){for(var n in void 0===i&&(i=!1),void 0===s&&(s={}),t){var r=i?i+"."+n:n,o=t[n],a=typeof t[n];"object"!==a||Array.isArray(o)?"function"!==a&&"undefined"!==a&&(s[r]=o):e(o,r,s)}return s},l=function(e,t,n){void 0===t&&(t=function(e){void 0===e&&(e=["audioRef","deviceAspectRatio","devicePixelRatio","html.video.ap4x","html.video.av1","js.deviceMotion","js.webGlRenderer","rendererRef","screenWidthHeight"]);var t={};e.map((function(e){t[e]=i(6)("./"+e+".js").default}));var n=function(){};return s.criticalProperties.map((function(e){t[e]=t[e]||n})),t}()),void 0===n&&(n=!1);var r=function(i){var s,r=e[i];if(r||!t.hasOwnProperty(i))return 1;var o=t[i],a=o.length<=1;try{s=o(r,(function(e){O.cacheProperty(i,e,r)}),e)}catch(e){O.debug(e)}(n||a)&&O.cacheProperty(i,s,r)};for(var o in t)r(o)},d=(new Date).getTime(),c=window.DeviceAtlas||{},h="function"==typeof c.debug?c.debug:c.debug&&console&&console.log?console.log:function(){},u=c.properties||{},p=c.cacheKey||"DAPROPS",g=c.cookieName||"DAPROPS",m=c.cacheType||"cookie",f=c.criticalProperties||n.a.criticalProperties,v=c.waitMilliSecondsToBulkSendProperties||3e3,A=c.cookieExpiryDays||1,b=c.cacheExpiryDays||1,y=c.dontStopPropertyUpdateEvents||!1,w=c.cookieDomain||null,E=c.cookiePath||"/",C="function"==typeof c.onPropertiesUpdate?c.onPropertiesUpdate:function(){},I=!1,S=function(e,t){I&&!y||(C(e,t),I=!0)},T=[],k=!1,P=function(){return(new Date).getTime()-d+"ms"},x=function(){return function(e){var t,i,s="";for(var n in e)e.hasOwnProperty(n)&&"timeTook"!==n&&"E"!==n&&"S"!==n&&(s+=(t="boolean"==typeof(i=e[n])?"b":"number"==typeof i&&i%1==0?"i":"s")+n+":"+("b"===t?e[n]+0:e[n])+"|");return"bS:0|"+s+"bE:0"}(L)},L={csVersion:"2.4.6"},_=function(e,t,i){if(T.push(e),void 0!==t&&null!=t&&t!==i)switch("object"==typeof t?function(e,t,i){var s=a(t,e),n=void 0;for(var r in s)if(void 0!==s[r]){var o=r.indexOf("._.");i[~o?r.substring(o+3):r]=s[r],n=n||!!s[r]}}(e,t,L):L[e]=t,m){case"cookie":!function(e,t){var i=t.cookieName,s=t.cookieExpiryDays,n=t.cookieDomain,o=t.cookiePath;if(!r())return!1;var a=new Date;a.setDate(a.getDate()+s);var l="";null!=n&&(l=";domain="+n),document.cookie=i+'="'+e.replace(/;/g,"~")+'";expires='+a.toUTCString()+";path="+o+l}(x(),{cookieName:g,cookieDomain:w,cookieExpiryDays:A,cookiePath:E});break;case"local-storage":!function(e,t,i){if(!o())return!1;var s=(new Date).getTime()+864e5*i;window.localStorage.setItem(t,JSON.stringify({value:e,expiry:s}))}(x(),p,b)}L.timeTook=P(),function(e,t){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;for(var i=0;i<e.length;i++)if(!~t.indexOf(e[i]))return!1;return!0})(f,T)&&(k&&(clearTimeout(k),k=!1),S(e,t))}(L,x())},O=t.default={cookieName:g,cookieDomain:w,cookieExpiryDays:A,cookiePath:E,onPropertiesUpdate:C,csVersion:"2.4.6",getPropertiesAsString:x,getProperties:function(){return L},properties:L,debug:h,cacheProperty:_};(function(e,t,i,s,n){var a;switch(e){case"cookie":a=function(e){if(!r())return"";for(var t=e+"=",i=document.cookie.split(";"),s=0;s<i.length;s++){for(var n=i[s];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t)){var o=n.substring(t.length,n.length);'"'===o.charAt(0)&&(o=o.substr(1));var a=o.length-1;return'"'===o[a]&&(o=o.substring(0,a)),o}}return""}(s);break;case"local-storage":a=function(e){if(!o())return"";var t=window.localStorage.getItem(e);if(!t)return"";var i="";try{i=JSON.parse(t)}catch(t){return localStorage.removeItem(e),""}return(new Date).getTime()>i.expiry?(localStorage.removeItem(e),""):i.value}(t);break;default:return}!function(e,t){if(!e||""===e)return t;for(var i=e.split("|"),s=0;s<i.length;s++){var n=i[s],r=n.indexOf(":"),o=n.substr(0,1),a=n.substr(1,r-1);if("timeTook"!==a){var l=n.substring(r+1);switch(o){case"i":t[a]=1*l;break;case"b":t[a]=!!(1*l);break;default:t[a]=l}}}}(a,n)})(m,p,0,g,L),T.push.apply(T,Object.keys(L)),l(L),l(L,u,!0),k=setTimeout((function(){L.timeTook=P(),S(L,x())}),v)}]).default.getPropertiesAsString}i.d(t,{_:()=>s})},7264:(e,t,i)=>{"use strict";i.d(t,{OW:()=>a,YP:()=>l,eM:()=>g});var s=i(6300),n=i(2488),r=i(3336),o=i(5596);const a=e=>o.OW(JSON.stringify(e)),l=e=>s.cb.fromNullable(e).filter(n.Y9).match({some:d,none:c(e)}),d=e=>(0,n.ct)(e.AdParameters)?h(e.AdParameters):(0,r.Qz)(e),c=e=>()=>s.cb.fromNullable(e).filter(n.ct).match({some:h,none:()=>(0,r.WY)(new Error(`adParameters is neither an object or string: ${e}`))}),h=e=>p(u(e,o.Ih,o.YP,decodeURIComponent),JSON.parse),u=(e,t,i,s)=>t(e)?i(e):0===e.indexOf("%7B")?s(e):e,p=(e,t)=>r.AT.tryCatch((()=>t(e))).orElse((()=>(0,r.WY)(new Error(`Unable to JSON.parse adParameters string: ${e}`)))),g=(e,t)=>l(e).toOption().filter((e=>/teads-vpaid-display/.test(t))).map((e=>!0===e.viewable)).getOrValue(!0)},8036:(e,t,i)=>{"use strict";i.r(t),i.d(t,{append:()=>d,appendIf:()=>c,cArray:()=>O,difference:()=>p,exclude:()=>b,filter:()=>g,find:()=>h,flatten:()=>P,flattenOptions:()=>V,forEach:()=>u,fromArrayLike:()=>w,fromNodeList:()=>y,fromStringToNumber:()=>E,groupBy:()=>_,groupByMap:()=>L,head:()=>r,includes:()=>v,indexOf:()=>f,isEmpty:()=>T,isMemberOf:()=>A,isNotEmpty:()=>k,join:()=>l,last:()=>o,map:()=>C,partition:()=>x,reduce:()=>S,some:()=>m,tail:()=>a,unique:()=>I});var s=i(6084),n=i(2488);function r(e){return e[0]}function o(e){return e[e.length-1]}function a(e){return e.slice(1)}const l=e=>t=>t.join(e),d=e=>t=>t.concat([e]),c=(e,t)=>i=>t()?d(e)(i):i;function h(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const s=Object(e),n=s.length>>>0;let r;for(let e=0;e<n;e++)if(r=s[e],t.call(i,r,e,s))return r}function u(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const s=Object(e),n=s.length>>>0;let r,o=0;for(;o<n;)o in s&&(r=s[o],t.call(i,r,o,s)),o++}const p=(e,t=s.equals)=>O.filter((0,s.not)(A(e,t)));function g(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");const s=Object(e),n=s.length>>>0;if(n>s.length)throw new TypeError("negative length");const r=[];for(let e=0;e<n;e++)if(e in s){const n=s[e];t.call(i,n,e,s)&&r.push(n)}return r}function m(e,t,i){if(null===e)throw new TypeError("array is null or undefined");const s=Object(e),n=s.length>>>0;if(n>s.length)throw new TypeError("negative length");for(let e=0;e<n;e++)if(e in s&&t.call(i,s[e],e,s))return!0;return!1}function f(e,t,i=s.equals,n){if(null===e)throw new TypeError("array is null or undefined");const r=Object(e),o=r.length>>>0;if(0===o)return-1;let a=n||0;if(Math.abs(a)===1/0&&(a=0),a>=o)return-1;let l=Math.max(a>=0?a:o-Math.abs(a),0);try{for(;l<o;){if(l in r&&i(r[l])(t))return l;l++}}catch(e){}return-1}function v(e,t,i=s.equals){return f(e,t,i)>-1}function A(e,t=s.equals){return i=>v(e,i,t)}const b=e=>t=>g(t,(0,s.not)(A(e)));function y(e){return w(e)}function w(e){return Array.prototype.slice.call(e)}function E(e,t=10){return C(e,(e=>(0,n.ct)(e)?parseInt(e,t):NaN))}function C(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");const s=Object(e),n=s.length>>>0,r=new Array(n);let o,a,l=0;for(;l<n;)l in s&&(o=s[l],a=t.call(i,o,l,s),r[l]=a),l++;return r}function I(e){if(null===e)throw new TypeError("array is null or undefined");const t=[];for(let i of e)v(t,i)||t.push(i);return t}function S(e,t,i){if(null===e)throw new TypeError("array is null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");let s=e.length>>>0;if(0===s&&void 0===i)throw new TypeError("reduce of empty array with no initial value");let n,r=0;if(void 0!==i)n=i;else for(;;){if(r in e){n=e[r++];break}if(++r>=s)throw new TypeError("reduce of empty array with no initial value")}for(;r<s;r++)r in e&&(n=t(n,e[r],r,e));return n}function T(e){return!e.length}function k(e){return!T(e)}function P(e){return T(e)?[]:S(e,((e,t)=>[...e,...t]))}function x(e){return t=>S(t,(([t,i],s)=>e(s)?[[...t,s],i]:[t,[...i,s]]),[[],[]])}const L=(e,t)=>i=>{const s={};return i.forEach((i=>{var n;const r=e(i);s[r]=null!==(n=s[r])&&void 0!==n?n:[],s[r].push(t(i))})),s},_=e=>t=>L(e,s.identity)(t),O={map:e=>t=>C(t,e),mapWithIndex:e=>t=>C(t,e),flatMap:e=>t=>P(C(t,e)),filter:e=>t=>g(t,e),foldLeft:(e,t)=>i=>T(i)?e:S(i,t,e),forEach:e=>t=>u(t,e)};function V(e){return S(e,((e,t)=>t.match({some:t=>e.concat(t),none:()=>e})),[])}},5596:(e,t,i)=>{"use strict";i.d(t,{Ih:()=>s,OW:()=>n,YP:()=>r});const s=e=>{const t=/^(?:[A-Za-z\d+/]{4})*(?:[A-Za-z\d+/]{2}==|[A-Za-z\d+/]{3}=)?$/.exec(e);return null!==t&&t.length>0},n=e=>window.btoa(encodeURIComponent(e).replace(/%([\dA-F]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16))))),r=e=>decodeURIComponent([...window.atob(e)].map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""))},3383:(e,t,i)=>{"use strict";i.d(t,{S6:()=>o,YV:()=>a,gx:()=>r});var s=i(6300),n=i(6084);function r(e,t="application/javascript"){if(window.Blob)try{return new Blob([e],{type:t})}catch(e){}window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;let i=new window.BlobBuilder;return i.append(e),i.getBlob()}function o(){return(0,n.isFunction)(window.Blob)&&(0,n.isNative)(window.Blob)}function a(){return l(window.URL).orElse((()=>l(window.webkitURL)))}function l(e){return s.cb.fromNullable(e).filter((e=>(0,n.hasOwnProperty)(e,"createObjectURL")&&(0,n.isNative)(e.createObjectURL)))}},1104:(e,t,i)=>{"use strict";i(8036);var s=i(3336),n=i(6300),r=i(480);i(2304),i(2488),new r.Y("BusinessIds"),(0,s.Yl)({placementId:n.MB,insertionId:n.MB,connectionId:n.MB})},3840:(e,t,i)=>{"use strict";i.d(t,{M:()=>s,S:()=>n});const s="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA=",n=16/9},1228:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UABrowser:()=>u,UADevice:()=>g,UAOs:()=>p,activatePrivacySandboxRelevanceAndMeasurementFeatures:()=>Fe,cacheCanvasUsed:()=>Ue,canAutoplay:()=>Re,checkUserAgent:()=>ze,getAndroidVersion:()=>he,getBrowser:()=>Ve,getChromeVersion:()=>ue,getClientSideDeviceProperties:()=>_,getContextSummary:()=>P,getDevice:()=>_e,getEnv:()=>Me,getFacebookWebviewVersion:()=>ge,getFullContext:()=>O,getIABSafeFrameWindow:()=>ae,getIEVersion:()=>ce,getIosVersion:()=>pe,getLanguage:()=>Pe,getNetworkBandwidthInMbps:()=>Be,getOS:()=>Oe,getSafariVersion:()=>me,getShortContext:()=>Ne,getUA:()=>xe,init:()=>V,isAmp:()=>ie,isAmpInABox:()=>se,isAmpObserveIntersection:()=>re,isAmpSF:()=>ne,isAndroid:()=>$,isAndroidMobile:()=>Q,isAndroidNative:()=>G,isCanvasNeeded:()=>De,isCanvasUsed:()=>Te,isChrome:()=>Z,isChrome66Plus:()=>be,isChromeIos:()=>j,isChromeWebView:()=>J,isDesktop:()=>F,isEdge:()=>te,isEdgeTouchScreen:()=>le,isFacebookWebview:()=>z,isFacebookWebviewIOS10:()=>Ce,isFirefox:()=>ee,isGoogleSearchApp:()=>ye,isIABSafeFrame:()=>oe,isIE:()=>X,isIos:()=>q,isIos10OtherBrowser:()=>Ee,isIos10Safari:()=>we,isIosOrMacOs16_3:()=>Ie,isIosOrMacOs17_Greater:()=>Se,isIpad:()=>U,isIphone:()=>K,isMobile:()=>H,isSDK:()=>de,isSafari:()=>ve,isSafari11Plus:()=>Ae,isSamsungBrowser:()=>Y,isTablet:()=>W,isUIWebview:()=>fe,isVideo:()=>He,isVideoPortfolio:()=>We,setAppId:()=>N,setAppVersion:()=>M,setDeviceModel:()=>R,setIsSDK:()=>B,setIsVideo:()=>je,setSDKVersion:()=>D,setUA:()=>Le,startAutoplayTest:()=>Ye,videoSupport:()=>ke}),i(1068);var s=i(3336),n=i(6300),r=i(480),o=i(920),a=i(6040),l=i(4732),d=i(6084),c=i(2488),h=i(9368);class u{constructor(e){this.name=e.name||"",this.version=e.version||""}toString(){return a.separate("|",this.name,this.version).toLowerCase()}}class p{constructor(e){this.name=e.name||"",this.version=e.version||""}toString(){return a.separate("|",this.name,this.version).toLowerCase()}}class g{constructor(e){this.model=e.model||"",this.type=e.type||(g.typeRegExp.test(Oe().name)?l.iq:""),this.vendor=e.vendor||""}toString(){return a.separate("|",this.model,this.type,this.vendor).toLowerCase()}}g.typeRegExp=/^windows|mac\s+os|linux|bsd|dragonfly|chromium\s+os|haiku|ubuntu|slackware|gentoo|solaris|debian|fedora|arch|beos|mint|gnu|os|suse\/2$/i;const m=new r.Y("Context");let f,v,A,b,y,w=n.MB,E="",C="",I="";const S={},T="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==";let k=null;function P(){return[H()&&!W()?"mob":W()?"tab":"desk",$()?"android":q()?"ios":X()?"ie":Z()?"ch":ee()?"ff":"ot"].join(" ")}const x={deviceType:{mobile:"m",desktop:"d",tablet:"t"},browserName:{"Mobile Safari":"Safari M","Chrome WebView":"Chrome WV"}},L=e=>e.replace(/(\d+)\.(\d+)\.\d+/,"$1.$2");function _(){return w.map((e=>e()))}function O(e=!0){var t,i;return de()?[_e().model,Oe().name,Oe().version,E,I,Ne(),C].join("|"):[e&&null!==(t=x.deviceType[_e().type])&&void 0!==t?t:_e().type,Oe().name,e?L(Oe().version):Oe().version,e&&null!==(i=x.browserName[Ve().name])&&void 0!==i?i:Ve().name,Ve().version.split(".")[0],Ne()].join("|")}function V(e=!0){window.teads.CONTEXT_IS_INITIALIZED||(e&&ze(),function(){try{v=window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en"}catch(e){m.error("Could not get navigator language",e),v="en"}}(),b=new p(l.oF.rgx.apply(this,l.qC.os)),y=new u(l.oF.rgx.apply(this,l.qC.browser)),A=new g(l.oF.rgx.apply(this,l.qC.device)),function(){try{S.isAmp=!!window._teads_amp}catch(e){m.error("Could not check if `!!window._teads_amp`",e),S.isAmp=!1}}(),function(){var e,t,i;try{S.isAmpInABox=(0,d.isArray)(null===(e=window.top)||void 0===e?void 0:e.ampInaboxIframes)&&(0,c.am)(null===(t=window.top)||void 0===t?void 0:t.ampInaboxInitialized)&&(0,d.isArray)(null===(i=window.top)||void 0===i?void 0:i.ampInaboxPendingMessages)}catch(e){m.error("Could not check if AMP-inabox is used",e),S.isAmpInABox=!1}}(),Ge(),function(){try{if(oe()){const e=ae();S.isAmpSF=!(0,c.Y3)(e)&&!!e.AMP_CONTEXT_DATA}else S.isAmpSF=!1}catch(e){m.error("Could not check if `!!window.AMP_CONTEXT_DATA`",e),S.isAmpSF=!1}}(),function(){try{S.hasTouchPoints=!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>0)}catch(e){m.error("Could not check if `navigator.maxTouchPoints > 0`",e),S.hasTouchPoints=!1}}(),function(){try{S.isNavigatorStandalone=window.navigator.standalone}catch(e){m.error("Could not check navigator.standalone",e),S.isNavigatorStandalone=!1}}(),function(){try{S.observeIntersection=!(!window.context||!window.context.observeIntersection)}catch(e){m.error("Could not check if `!!window.context.observeIntersection`",e),S.observeIntersection=!1}}(),S.isIE="IE"===y.name||/MSIE|Trident/.test(f),S.isFirefox="Firefox"===y.name||/Firefox/i.test(f),S.isEdge="Edge"===y.name||/Edge/i.test(f),S.isGoogleSearchApp=/GSA\//i.test(f),S.isSafari=("Safari"===y.name||"Mobile Safari"===y.name)&&!ye(),S.isChromeWebView="Chrome WebView"===y.name,S.isChrome="Chrome"===y.name||J(),S.isEdgeTouchScreen=te()&&S.hasTouchPoints,S.isChromeIos=/CriOS/i.test(f),S.isAndroidNative="Android Browser"===y.name,S.isFacebookWebview="Facebook"===y.name||/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(f),S.isSamsungBrowser=/SamsungBrowser/i.test(f),S.isIpad="iPad"===A.model||/iPad/i.test(f)||/mac\s+os/i.test(b.name)&&S.hasTouchPoints,S.isIphone="iPhone"===A.model||/iPhone/i.test(f),S.isIos="iOS"===b.name||U()||K(),S.isAndroid="Android"===b.name||/Android/i.test(f),function(){let e=/(m|M)obile/.test(f);S.isTablet="tablet"===A.type||U()||$()&&!e,S.isMobile="mobile"===A.type||q()&&!U()||$()&&e,S.isDesktop=!H()&&!W()}(),S.ieVersion=X()?y.version:"",S.iOsVersion=q()?b.version:"",S.androidVersion=$()?b.version:"",S.chromeVersion=Z()?y.version:"",S.FacebookWebviewVersion=z()?y.version:"",S.safariVersion=ve()?y.version:"",S.isAndroidMobile=$()&&H(),S.isAmpObserveIntersection=S.isAmp&&S.observeIntersection,S.isUIWebview=(K()||U())&&!ve()&&!Z()&&!S.isNavigatorStandalone,S.isIos10Safari=o.In(pe(),"10")&&!fe()&&!j(),S.isIos10OtherBrowser=o.In(pe(),"10")&&o.Cc(pe(),"11")&&fe()&&j(),q()&&(w=n.cb.fromNullable(h._())),window.teads.CONTEXT_IS_INITIALIZED=!0)}function R(e){A.model=e}function D(e){I=e,k=!0}function N(e){E=e}function M(e){C=e}function B(e){S.isSDK=e}function F(){return!!S.isDesktop}function U(){return!!S.isIpad}function W(){return!!S.isTablet}function H(){return!!S.isMobile}function j(){return!!S.isChromeIos}function z(){return!!S.isFacebookWebview}function G(){return!!S.isAndroidNative}function Y(){return!!S.isSamsungBrowser}function $(){return!!S.isAndroid}function q(){return!!S.isIos}function K(){return!!S.isIphone}function Q(){return!!S.isAndroidMobile}function X(){return!!S.isIE}function Z(){return!!S.isChrome}function J(){return!!S.isChromeWebView}function ee(){return!!S.isFirefox}function te(){return!!S.isEdge}function ie(){return!!S.isAmp}function se(){return!!S.isAmpInABox}function ne(){return!!S.isAmpSF}function re(){return!!S.isAmpObserveIntersection}function oe(){return!!S.isIabsf}function ae(){return S.iabsfWindow}function le(){return!!S.isEdgeTouchScreen}function de(){return!!S.isSDK}function ce(){return S.ieVersion?S.ieVersion:""}function he(){return S.androidVersion?S.androidVersion:""}function ue(){return S.chromeVersion?S.chromeVersion:""}function pe(){return S.iOsVersion?S.iOsVersion:""}function ge(){return S.FacebookWebviewVersion?S.FacebookWebviewVersion:""}function me(){return S.safariVersion?S.safariVersion:""}function fe(){return!!S.isUIWebview}function ve(){return!!S.isSafari}function Ae(){return o.In(me(),"11")}function be(){return o.In(ue(),"66")}function ye(){return!!S.isGoogleSearchApp}function we(){return!!S.isIos10Safari}function Ee(){return!!S.isIos10OtherBrowser}function Ce(){return o.In(ge(),"87")&&o.In(pe(),"10.2")}function Ie(){return o.In(pe(),"16.3")&&o.Cc(pe(),"16.4")||o.In(me(),"16.3")&&o.Cc(me(),"16.4")}function Se(){return o.In(pe(),"17")||o.In(me(),"17")}function Te(){return!!S.isCanvasUsed}function ke(e){return!!e.createElement("video").canPlayType}function Pe(){return v}function xe(){return f}function Le(e){f=e}function _e(){return A}function Oe(){return b}function Ve(){return y}function Re(){return!1!==k}function De(){return!Re()}function Ne(){let e;return e=de()?"sdk":ie()?"amp":ne()?"ampsf":oe()?"sf":z()?"fbwv":J()||fe()?"wv":"web",Te()?`${e}-canvas`:e}function Me(){return de()?"sdk-inapp":"js-"+Ne()}function Be(){return s.AT.tryCatch((()=>window.navigator.connection.downlink)).toOption()}function Fe(){const e=document.createElement("meta");e.httpEquiv="origin-trial",e.content="A/ZN3JeVl863wk4gji5LwmyqD8tQETuBB/T7ruSp8OvPp/kIaJGhw4I8mpB3u4vvQoSH2zniTHlhvlBBOA1ZbAkAAAB+eyJvcmlnaW4iOiJodHRwczovL3RlYWRzLnR2OjQ0MyIsImZlYXR1cmUiOiJQcml2YWN5U2FuZGJveEFkc0FQSXMiLCJleHBpcnkiOjE2OTUxNjc5OTksImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9",document.head.appendChild(e)}function Ue(e){S.isCanvasUsed=e}let We=!1;function He(){return We}function je(e){We=e}function ze(){try{f=navigator.userAgent}catch(e){m.error("Could not get `navigator.userAgent`",e),f=""}}function Ge(e=window){try{e.$sf&&e.$sf.ext?(S.isIabsf=!0,S.iabsfWindow=e):e.parent!==e&&Ge(e.parent)}catch(e){m.error("Could not check if `!!window.$sf.ext`",e),S.isIabsf=!1}}function Ye(){if(null!==k)return void m.error(`Context.startAutoplayTest has already been called and autoplay is ${k}`);if(!q()&&!$())return void m.debug("Not on iOS/Android, no need to start autoplay test");const e=document.createElement("video");e.src=T,e.setAttribute("playsinline","true"),e.muted=!0,e.play().then((()=>{m.debug("Autoplay test done"),k=!0,e.pause()})).catch((e=>{"NotAllowedError"===e.name||"AbortError"===e.name?(m.debug("Not allowed to play video without user interaction, disable autoplay"),k=!1):m.error("Error when trying to play the autoplay video:",e)}))}},2132:(e,t,i)=>{"use strict";i.d(t,{_:()=>n}),i(4040);var s=i(3336);const n=(e,t=window)=>s.AT.tryCatch((()=>t.document.cookie)).map((t=>decodeURIComponent(t.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))))},4040:(e,t,i)=>{"use strict";i.d(t,{k:()=>o});var s=i(6084);const n=window.Date,r=n.prototype.getTime,o=(0,s.isNative)(n.now)?n.now:(0,s.isNative)(r)?()=>r.call(new n):()=>+new n;n.now||(n.now=o)},6932:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addEventListener:()=>P,copyBoundingClientRect:()=>g,findMatchingElement:()=>E,getAndRemoveAttributeValue:()=>I,getAttributeValue:()=>C,getBoundingClientRect:()=>p,getClientRectFromClientRectRelativeToDocument:()=>v,getClientRectRelativeToDocument:()=>f,getElementsByClassName:()=>R,getOuterHTML:()=>H,getScrollLeft:()=>O,getScrollTop:()=>V,getSize:()=>A,getTextContent:()=>b,getWindowSize:()=>T,htmlDecode:()=>U,htmlEncode:()=>W,inject:()=>k,isEmpty:()=>y,isEmptyBoundingClientRect:()=>m,isHTMLElement:()=>D,isISlotSelector:()=>F,isNodeList:()=>M,isSelfClosingTag:()=>B,onDomComplete:()=>_,onDomReady:()=>L,querySelectorAll:()=>w,removeElementFromDOM:()=>N,removeEventListener:()=>x});var s=i(4912),n=i(6300),r=i(8036),o=i(7404),a=i(1228),l=i(2488),d=i(6128);const c={IMG:" ",BR:"\n"},h=["SCRIPT","STYLE","HEAD","IFRAME","OBJECT"],u={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};function p(e,t=!0){try{const i=e.getBoundingClientRect(),s=g(i);if(t&&!a.isAmp()&&!a.isIABSafeFrame()&&(0,o.getWindow)(e)!==window.top){const t=(0,o.findFirstParentFrameNode)(e);if(t!==e){const e=p(t);e.top&&(s.top=e.top+i.top,s.bottom=e.top+i.bottom),e.left&&(s.left=e.left+i.left,s.right=e.left+i.right)}}return s}catch(e){return{left:0,top:0,right:0,bottom:0,width:0,height:0}}}function g(e){return{top:e.top||0,right:e.right||0,bottom:e.bottom||0,left:e.left||0,width:e.width||0,height:e.height||0}}function m(e){return!(0!==e.top||0!==e.right||0!==e.bottom||0!==e.left||0!==e.width||0!==e.height)}function f(e,t){return{left:e.left+t.x,top:e.top+t.y,right:e.right+t.x,bottom:e.bottom+t.y,width:e.width,height:e.height}}function v(e,t){return{left:e.left-t.x,top:e.top-t.y,right:e.right-t.x,bottom:e.bottom-t.y,width:e.width,height:e.height}}function A(e){const t=e.offsetWidth,i=e.offsetHeight,s=a.getUA().indexOf("WebKit")>-1&&!t&&!i;if((!t||s)&&e.getBoundingClientRect){const t=p(e);return{width:t.right-t.left,height:t.bottom-t.top}}return{width:t,height:i}}function b(e,t){if(r.indexOf(h,e.nodeName)>=0);else if(e.nodeType===u.TEXT&&e.nodeValue)t.push(e.nodeValue);else if(e.nodeName in c)t.push(c[e.nodeName]);else{let i=e.firstChild;for(;i;)b(i,t),i=i.nextSibling}}function y(e,t=window){const i=e.tagName.toLowerCase(),s=["iframe","object","img"];return!(r.includes(s,i)||w(s.join(","),t,e).length>0||!e.textContent||""!==e.textContent.trim())}function w(e,t,i){return(0,r.fromArrayLike)((i||t.document).querySelectorAll(e))}function E(e,t){const i=e[0];if(i){const s=i.querySelector(t);return n.cb.fromNullable(s).orElse((()=>E(e.slice(1),t)))}return n.cb.empty()}function C(e,t){return n.cb.fromNullable(e.getAttribute(t)).filter((e=>""!==e))}function I(e,t){return C(e,t).map((i=>(e.removeAttribute(t),i)))}const S={};function T(e=window,t=!1){var i,r;if(a.isAmp())return n.cb.fromNullable(null===(i=window.context)||void 0===i?void 0:i.initialIntersection.rootBounds).map((({width:e,height:t})=>({width:e,height:t}))).getOrValue({width:window.innerWidth,height:window.innerHeight});if(a.isIABSafeFrame())return n.cb.fromNullable(null===(r=a.getIABSafeFrameWindow())||void 0===r?void 0:r.$sf.ext.geom()).map((e=>({width:e.win.w,height:e.win.h}))).getOrValue({width:0,height:0});if(!t&&!a.isAmp()&&a.isIos()&&a.isSafari()){const t=e.innerWidth>e.innerHeight?"landscape":"portrait";return(0,l.Y3)(S[t])&&((0,s.QL)(e),(0,s.Ml)(e),S[t]=(0,s.El)(e),(0,s.gj)()),{width:e.innerWidth,height:S[t]}}return"number"==typeof e.innerWidth?{width:e.innerWidth,height:e.innerHeight}:e.document.documentElement&&(e.document.documentElement.clientWidth||e.document.documentElement.clientHeight)?{width:e.document.documentElement.clientWidth,height:e.document.documentElement.clientHeight}:e.document.body&&(e.document.body.clientWidth||e.document.body.clientHeight)?{width:e.document.body.clientWidth,height:e.document.body.clientHeight}:{width:1e3,height:600}}function k(e,t=window){n.cb.fromNullable(t.document.getElementsByTagName("head")[0]).orElse((()=>n.cb.fromNullable(t.document.body))).forEach((t=>t.appendChild(e)))}function P(e,t,i){d.uI(e,t,i)}function x(e,t,i){d.eA(e,t,i)}function L(e,t=window){d._8(e,t)}function _(e,t=window,i=this){d.Un(e,t,i)}function O(e){return e.pageXOffset?e.pageXOffset:"CSS1Compat"===(e.document.compatMode||"")?e.document.documentElement.scrollLeft:e.document.body.scrollLeft}function V(e){return e.pageYOffset?e.pageYOffset:"CSS1Compat"===(e.document.compatMode||"")?e.document.documentElement.scrollTop:e.document.body.scrollTop}function R(e,t,i=window){if((t=t||i.document).getElementsByClassName)return(0,r.fromArrayLike)(t.getElementsByClassName(e));const s=e.split(" ");let n="";for(let e=0,t=s.length;e<t;e++)n+="."+s[e];return w(n,i,t)}function D(e,t){return!(!e||"object"!=typeof e||M(e))&&(t||(t=(0,o.getWindow)(e)||window),"object"==typeof t.HTMLElement?e instanceof t.HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName)}function N(e){return n.cb.fromNullable(e.parentElement).forEach((t=>t.removeChild(e)))}function M(e){return!(!e||"object"!=typeof e)&&e instanceof NodeList}function B(e){if(D(e))return/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(e.nodeName)}function F(e,t){let i=!1;const s=Object.keys(t);for(const t in e)if(i=(0,r.includes)(s,t)&&((0,l.ct)(e[t])||M(e[t])||D(e[t])),!i)break;return i}function U(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}function W(e){const t=document.createElement("textarea");return t.innerText=e,t.innerHTML}function H(e){return D(e)?U(e.outerHTML):""}},6128:(e,t,i)=>{"use strict";i.d(t,{Un:()=>c,_8:()=>d,eA:()=>l,uI:()=>a});var s=i(8036);const n=new(i(480).Y)("Dom"),r=["scroll","touchstart","touchmove"];function o(e){return(0,s.includes)(r,e)}function a(e,t,i){try{t.addEventListener(e,i,{passive:o(e),capture:!0})}catch(s){n.warn(`Failed to add listener for event ${e}, fallback to Boolean form`,t,s),t.addEventListener(e,i,!0)}}function l(e,t,i){try{t.removeEventListener(e,i,!0)}catch(i){n.warn(`Failed to remove listener for event ${e}`,t,i)}}function d(e,t){const i=t.document,s=()=>{"interactive"!==i.readyState&&"complete"!==i.readyState||(l("readystatechange",i,s),e())};"interactive"===i.readyState||"complete"===i.readyState?e():a("readystatechange",i,s)}function c(e,t,i){"complete"===t.document.readyState?e.call(i):a("load",t,e.bind(i))}},4156:(e,t,i)=>{"use strict";i.d(t,{wh:()=>u});var s=i(8564),n=i(8036),r=i(3336),o=i(4456);const a=1e3,l=1,d=new s.M;let c=!1;const h=e=>(0,r.Yl)({kind:"hidden-overflow",location:e?"bottom":"top"});function u(e,t){const{windowHeight:i,viewabilityThreshold:s,offset:g=0,withClearCache:m=!0,getClientRect:f,getElementFromPoint:v,findParentElements:A,findFirstParentFrameNode:b}=e,y=f(t),w=function(e,t,i){return(e+t)/2>i/2}(y.top,y.bottom,i),E=function(e,t){return e/100*t}(s,y.height),C=(I=y.left,S=y.right,Math.round((I+S)/2));var I,S;const T=function(e,t,i,s,n){return e?Math.round(t+Math.max(l,i+l)):Math.round(Math.min(n-l,s-l)-t)}(w,g,y.top,y.bottom,i),k=(P=T,x=E,L=w,Math.round(P+(L?x-l:l-x)));var P,x,L;const _=function(e,t,i,s,n){return`${e}-${t}-${i}-${s}-${n}`}(w,g,C,T,k);return m&&(c||(c=!0,(0,o.y2)((()=>{d.clear(),c=!1}),a))),d.get(_).getOrElse((()=>v(C,T).match({none:()=>p(_,h(w)),some:i=>{const s=function(e,{top:t,bottom:i},{top:s,bottom:n}){return e?i-s:n-t}(w,f(i),y);return g===s?p(_,h(w)):v(C,k).match({none:()=>p(_,u(Object.assign(Object.assign({},e),{offset:s}),t)),some:o=>{const a=(l=[i,...A(i)],d=[o,...A(o)],c=b(t),n.includes(l,c)&&n.includes(d,c));var l,d,c;return p(_,a?r.AT.of(t):u(Object.assign(Object.assign({},e),{offset:s}),t))}})}})))}function p(e,t){return d.contains(e)||d.put(e,t),t}},4092:(e,t,i)=>{"use strict";i.d(t,{C:()=>h});var s=i(8036),n=i(6932),r=i(6300),o=i(480),a=i(2488),l=i(6084);const d={addEventListener:n.addEventListener,removeEventListener:n.removeEventListener};class c{constructor(e="EventListenerManager",t){this.adRemoveListenerStrategy=t,this.listeners={},this.logger=new o.Y(e)}add(e,t,i){(0,a.ct)(e)||this.logger.warn("First argument of EventListenerManager.add must be a string",e),this.logger.debug("Add listener to event",e),r.cb.fromNullable(this.listeners[e]).orElse((()=>r.cb.fromNullable([]))).map((e=>e.concat([{context:t,callback:i}]))).forEach((t=>{this.listeners[e]=t})),this.addEventListener(e,t,i)}addMultiple(e,t,i){(0,l.isArray)(e)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",e),s.forEach(e,(e=>this.add(e,t,i)))}remove(e){(0,a.ct)(e)||this.logger.warn("First argument of EventListenerManager.add must be a string",e),this.logger.debug("Remove listener from event",e),s.forEach(this.listeners[e],(t=>this.removeEventListener(e,t.context,t.callback))),this.listeners[e]=[]}removeMultiple(e){(0,l.isArray)(e)||this.logger.warn("First argument of EventListenerManager.addMultiple must be an array of strings",e),s.forEach(e,(e=>this.remove(e)))}removeAll(){for(const e in this.listeners)this.listeners.hasOwnProperty(e)&&s.forEach(this.listeners[e],(t=>this.removeEventListener(e,t.context,t.callback)))}addEventListener(e,t,i){this.adRemoveListenerStrategy.addEventListener(e,t,i)}removeEventListener(e,t,i){this.adRemoveListenerStrategy.removeEventListener(e,t,i)}}class h extends c{constructor(e=d){super("DOMEventListenerManager",e)}}},41:(e,t,i)=>{"use strict";i.d(t,{C:()=>n,U:()=>s});class s{constructor(e,t){this.code=e,this.error=t}static get(e,t,i){return new s({id:e,message:t},i)}getFullMessage(){return"Error #"+this.code.id+": "+this.code.message}getId(){return this.code.id}getMessage(){return this.code.message}getStackTrace(){return this.error&&this.error.stack?this.error.stack:""}toString(){return this.getFullMessage()}}class n extends s{}n.XML_PARSE={id:100,message:"XML parsing error"},n.XML_INVALID_SCHEMA={id:101,message:'VAST schema validation error: expected "%s" but found "%s"'},n.UNSUPPORTED_VERSION={id:102,message:"VAST version of response not supported. Expected VAST2 or VAST3 but VAST1 found"},n.TRAFFICKING={id:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display"},n.LINEARITY={id:201,message:"Video player expecting different linearity"},n.DURATION={id:202,message:"Video player expecting different duration"},n.SIZE={id:203,message:"Video player expecting different size"},n.WRAPPER={id:300,message:"General Wrapper error"},n.WRAPPER_TIMEOUT={id:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element (URI was either unavailable or reached a timeout as defined by the video player)"},n.WRAPPER_LIMIT={id:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},n.NO_ADS={id:303,message:"No Ads VAST response after one or more Wrappers"},n.GENERAL_LINEAR={id:400,message:"General Linear error. Video player is unable to display the Linear Ad."},n.FILE_NOT_FOUND={id:401,message:"File not found. Unable to find Linear/MediaFile from URI."},n.MEDIAFILE_TIMEOUT={id:402,message:"Timeout of MediaFile URI."},n.UNSUPPORTED_MEDIAFILE={id:403,message:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},n.MEDIAFILE_DISPLAY={id:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but could not display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},n.GENERAL_NONLINEAR={id:500,message:"General NonLinearAds error."},n.CREATIVE_DIMENSIONS={id:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},n.NONLINEAR_FETCH={id:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},n.SUPPORTED_NONLINEAR_NOT_FOUND={id:503,message:"Could not find NonLinear resource with supported type."},n.GENERAL_COMPANION={id:600,message:"General CompanionAds error."},n.COMPANION_DIMENSIONS={id:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},n.COMPANION_DISPLAY={id:602,message:"Unable to display Required Companion."},n.COMPANION_FETCH={id:603,message:"Unable to fetch CompanionAds/Companion resource."},n.SUPPORTED_COMPANION_NOT_FOUND={id:604,message:"Could not find Companion resource with supported type."},n.UNDEFINED={id:900,message:"Undefined Error"},n.GENERAL={id:901,message:"General VPAID error"}},6420:(e,t,i)=>{"use strict";i.d(t,{C:()=>n});var s=i(41);class n extends s.U{}n.INCOMPLETE_OBJECT={id:1,message:"Ad configuration is missing settings or placement"},n.OPTION_CHECKVALUE_MISSING={id:2,message:"checkValue function is missing"},n.OPTION_THRESHOLD_MISSING={id:3,message:"Option threshold is required"},n.OPTION_PARENTWINDOW_INVALID={id:4,message:"Option parentWindow is required"},n.OPTION_VAST_INVALID={id:5,message:"Option vast has to contain type and content"},n.MULTIPLE_PAGE_PROCESS={id:6,message:"Cannot process more than 1 page"},n.OPTION_PID_INVALID={id:7,message:"Option Pid must be a positive number"},n.OPTION_FORMAT_INVALID={id:8,message:"Option Format must be a known string"},n.LOADING_MEDIAFILE={id:9,message:"Error when loading mediafile"},n.RAS_REQUEST={id:10,message:"RAS request error"},n.RAS_TIMEOUT={id:11,message:"RAS request timeout"},n.RAS_CUSTOM_TIMEOUT={id:12,message:"RAS request custom timeout"},n.RAS_RESPONSE={id:13,message:"RAS response error"},n.RAS_RESPONSE_ADS_NOT_ARRAY={id:14,message:"RAS response ads is not an array"},n.EVENT_CALLBACK={id:15,message:"Callback threw an error"},n.FILTER_FUNCTION={id:16,message:"The filter function threw an error"},n.OPTION_NAME_REQUIRED={id:17,message:"Name must be a valid string"}},7404:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addClass:()=>C,appendIframeToElement:()=>f,checkElementVisibility:()=>X,checkForDisplayNone:()=>Y,checkForOverflow:()=>Q,checkForTiny:()=>$,checkIsHtmlElement:()=>G,closeFullscreen:()=>E,copyCSSRules:()=>J,createIframe:()=>p,findAllWindows:()=>R,findChildWindows:()=>V,findFirstParentFrameNode:()=>N,findFloatingHeaders:()=>j,findParentElements:()=>B,findParentFrameNode:()=>D,findParentWindows:()=>_,findTopWindow:()=>O,getCSSRules:()=>Z,getDocument:()=>b,getPercentageInView:()=>U,getTop:()=>z,getWindow:()=>A,hasClass:()=>S,isChildBoundsInParentBounds:()=>H,isChildOf:()=>W,isChildWindow:()=>x,isDisplayNoneOverParents:()=>K,isFullscreen:()=>v,isInCrossDomainIframe:()=>P,isInView:()=>F,isKarmaFrame:()=>M,isOrWillBeInViewWithTargetElement:()=>ee,isRectZeroFilled:()=>L,isStickyElementInView:()=>te,makeIframeIABFriendly:()=>g,openFullscreen:()=>w,removeClass:()=>I,replaceClass:()=>k,resetIframeBodyCSS:()=>m,toggleClass:()=>T,toggleFullscreen:()=>y,visibilityChecksOnParents:()=>q});var s=i(4156),n=i(6932),r=i(8036),o=i(6040),a=i(6084),l=i(1228),d=i(6300),c=i(3336),h=i(2488);const u=l.isDesktop()?.1:.15;function p(e){const t=document.createElement("iframe");return t.style.setProperty("margin","0","important"),t.style.setProperty("padding","0","important"),t.style.setProperty("width","0","important"),t.style.setProperty("height","0","important"),t.style.setProperty("border","0","important"),t.style.setProperty("overflow","hidden","important"),t.style.setProperty("float","none","important"),t.setAttribute("allow","autoplay; attribution-reporting 'src' https://cm.teads.tv"),t.setAttribute("scrolling","no"),t.setAttribute("title",e),t.frameBorder="0",t}function g(e){d.cb.fromNullable(e.contentWindow).forEach((e=>e.inDapIF=!0))}function m(e){var t;d.cb.fromNullable(null===(t=null==e?void 0:e.document)||void 0===t?void 0:t.body).forEach((e=>{e.style.overflow="hidden",e.style.padding="0",e.style.margin="0"}))}function f(e,t){return(0,n.isHTMLElement)(e)&&e.appendChild(t),t}function v(e){return e||(e=document),!!(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}function A(e){if(!e||(0,n.isNodeList)(e))return null;var t=b(e);return t?t.defaultView||t.parentWindow:null}function b(e){return!e||(0,n.isNodeList)(e)?null:e.ownerDocument}function y(e){v()?E(e):w(e)}function w(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function E(e){const t=b(e);t&&(t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen())}function C(e,t){(t=o.trim(t))&&!S(e,t)&&e.classList.add(t)}function I(e,t){(t=o.trim(t))&&S(e,t)&&e.classList.remove(t)}function S(e,t){return e.classList.contains(o.trim(t))}function T(e,t){e.classList.toggle(o.trim(t))}function k(e,t,i){t=o.trim(t),!S(e,i=o.trim(i))&&S(e,t)&&(a.isFunction(e.classList.replace)?e.classList.replace(t,i):(I(e,t),C(e,i)))}function P(e){return _(e).pop()!==window.top}function x(e){return e!==window.top}function L(e){return!r.some(Object.keys(e),(t=>0!==e[t]))}function _(e,t=!0){const i=[];if((0,n.isHTMLElement)(e)){let s;s=e=>{e.parent!==e&&e.parent.location&&e.parent.window&&(t&&e.parent.document,i.push(e.parent),s(e.parent))};const n=A(e);n&&i.push(n);try{s(n)}catch(e){}}return i}function O(e){return _(e).pop()||window}function V(e,t=!1){let i=[];if((0,n.isHTMLElement)(e)){const s=e.getElementsByTagName("iframe");for(let e=0;e<s.length;e++)try{d.cb.fromNullable(s[e].contentWindow).flatMap((e=>{var t;return d.cb.fromNullable(null===(t=e.document)||void 0===t?void 0:t.body).map((t=>({win:e,body:t})))})).forEach((({win:e,body:s})=>{i.push(e),t&&r.forEach(V(s,!0),(e=>{i=i.concat(e)}))}))}catch(e){}}return i}function R(e,t=!1){return _(e).concat(V(e,t))}function D(e){const t=A(e);try{if(t&&t.parent!==t&&void 0!==t.parent.Window&&t.parent instanceof t.parent.Window){const e=t.parent.document.getElementsByTagName("iframe");if(e)for(let i=0;i<e.length;i++)if(e[i].contentWindow===t)return D(e[i])}}catch(e){}return e}function N(e){const t=A(e);try{if(t&&t.parent!==t&&void 0!==t.parent.Window&&t.parent instanceof t.parent.Window){const e=t.parent.document.getElementsByTagName("iframe");if(e)for(let i=0;i<e.length;i++)if(e[i].contentWindow===t&&!M(e[i]))return e[i]}}catch(e){}return e}function M(e){return"context"===e.id&&"http://localhost:5555/context.html"===e.src&&"100%"===e.width&&"100%"===e.height}function B(e,t=!0){const i=[];if((0,n.isHTMLElement)(e)){const s=b(e);let r=e;const o=!(!r.tagName||!r.tagName.toUpperCase||"HTML"!==r.tagName.toUpperCase());for(;!o&&(t||s&&r!==s.body)&&(0,n.isHTMLElement)(r);)r=r.parentElement,r&&i.push(r)}return i}function F({element:e,elementAncestors:t,elementClientRect:i,mainWindow:s,thresholdCoefficient:n,elementHeight:r,getPercentage:o=U,envIsAmp:a=l.isAmp(),envIsIABSafeFrame:d=l.isIABSafeFrame()}){const c=o({element:e,elementAncestors:t,elementClientRect:i,mainWindow:s,elementHeight:r});return(!a&&!d||0!==c)&&c>=n}function U({element:e,elementAncestors:t,elementClientRect:i,mainWindow:s,elementHeight:r,allowNegative:o=!1,detectFloatingHeaders:a=!l.isAndroid(),getWindowSize:d=n.getWindowSize,envIsAmp:c=l.isAmp(),envIsIABSafeFrame:u=l.isIABSafeFrame(),envIabSFWindow:p=l.getIABSafeFrameWindow()}){if(c&&s._teads_amp)return s._teads_amp.change?s._teads_amp.change.intersectionRect.height/s._teads_amp.change.boundingClientRect.height:0;if(u){const e=p;if((0,h.Y3)(e))return 0;const t=e.$sf.ext.geom();return t&&t.self?t.self.yiv:0}const g=d(s,!0),m=a?z(s,j(s,e,t,i),g.height):0,f=i.top-m;let v=(f>0?g.height-i.top:f+r)/r;return o||(v=v>0?v:0,v=v<1?v:1),v}function W(e,t){return r.includes(B(e),t)}function H(e,t,i,s){const n=("bottom"===i?e.height:e.width)*s;return e[i]-n>t[i]}function j(e=window,t,i=[document.body],s,o=n.getWindowSize){let a=[];const l=o(e),d=l.width/2,c=l.height*u,h=c*u;let p,g;const m=o=>{const a=(0,n.getBoundingClientRect)(o);return"fixed"===e.getComputedStyle(o).position&&(!s||a.right>s.left&&a.left<s.right)&&!r.includes(i,o)&&!o.className.match(/teads/)&&!W(o,t)};for(let t=1;t<c;t+=h)p=e.document.elementFromPoint(d,t),p&&g!==p&&(g=p,m(p)&&a.push(p),r.forEach(B(p),(e=>{m(e)&&a.push(e)})));return r.unique(a)}function z(e,t,i){var s;let o=0;const a=null!==(s=window.FORCE_DEMO)&&void 0!==s&&s;r.forEach(t,(e=>o=Math.max(o,(0,n.getBoundingClientRect)(e,!a).bottom)));const l=(0,n.getScrollTop)(e),d=l>0?o:l+o;return Math.max(0,Math.min(i,d))}function G(e){return(0,n.isHTMLElement)(e)?c.AT.of(e):(0,c.Yl)("invalid-dom")}function Y(e){return"none"===window.getComputedStyle(e).display?(0,c.Yl)("hidden-display"):c.AT.of(e)}function $(e){const t=(0,n.getBoundingClientRect)(e),i=window.getComputedStyle(e);return(l.isCanvasUsed()?(t.height<50||t.width<50)&&("hidden"===i.overflowX||"hidden"===i.overflowY):t.height<50||t.width<50)?(0,c.Yl)("tiny"):c.AT.of(e)}function q(e){const t=e=>e.flatMap(Y).flatMap((e=>e.parentElement?q(e.parentElement):(0,c.s5)(e)));return l.isCanvasUsed()?t(G(e).flatMap($)):t(G(e))}function K(e){return e.map((e=>"none"===window.getComputedStyle(e).display||K(d.cb.fromNullable(e.parentElement)))).getOrValue(!1)}function Q(e,t){const i=(100-t)/100,s=(0,n.getBoundingClientRect)(e);let r=c.AT.of(e);const o=e=>{const t=!S(e,"teads-inread"),a=window.getComputedStyle(e);let l;return t&&"hidden"===a.overflowY&&(l=(0,n.getBoundingClientRect)(e),H(s,l,"bottom",i)||(r=(0,c.Yl)("hidden-overflow"))),r.isRight()&&t&&"hidden"===a.overflowX&&(l=l||(0,n.getBoundingClientRect)(e),H(s,l,"right",i)||(r=(0,c.Yl)("hidden-overflow"))),r.isRight()&&e.parentElement?o(e.parentElement):r};return e.parentElement?o(e.parentElement):r}function X(e,t,i=n.getWindowSize){return $(e).flatMap((()=>q(e).flatMap((()=>Q(e,t).orElse((()=>{const r=O(e);return(0,s.wh)({windowHeight:i(r).height,viewabilityThreshold:t,getClientRect:n.getBoundingClientRect,getElementFromPoint:(e,t)=>d.cb.fromNullable(r.document.elementFromPoint(e,t)),findParentElements:B,findFirstParentFrameNode:N},e)}))))))}function Z(e){const t=A(e),i=[];if(t){const s=t.document.styleSheets;if(e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,a.isFunction(e.matches))for(let t in s){let n=s[t],r=c.AT.tryCatch((()=>n.rules||n.cssRules)).getOrElse((()=>({})));for(let t in r){let s=r[t];e.matches(s.selectorText)&&i.push(s)}}}return i}function J(e,t,i){const s=Z(e);r.forEach(s,(e=>{r.forEach(i,(i=>{let s=e.style.getPropertyValue(i);!s||t.style[i]||t.getAttribute(i)||(t.style[i]=s)}))}))}function ee(e,t,i){const s=n.getBoundingClientRect(t),r=n.getBoundingClientRect(i),{clientHeight:o}=e.document.documentElement;return!(r.bottom<s.top-o||r.top>s.bottom+o)}function te(e,t){let i=t;for(;null!==i&&"BODY"!==i.tagName;){const{position:t,visibility:s}=e.getComputedStyle(i);if("fixed"===t&&!K((0,d.sx)(i))&&"hidden"!==s)return!0;i=i.parentElement}return!1}},4912:(e,t,i)=>{"use strict";i.d(t,{El:()=>h,Ml:()=>d,QL:()=>l,aA:()=>u,gj:()=>c});var s=i(480),n=i(2488),r=i(6300);let o;const a=new s.Y("IOSWindowHeight");function l(e){return(0,n.Y3)(o)&&(o=e.document.createElement("div"),o.style.setProperty("position","fixed"),o.style.setProperty("height","100vh"),o.style.setProperty("width","0"),o.style.setProperty("top","0")),o}function d(e){r.cb.fromNullable(o).match({some:t=>e.document.documentElement.appendChild(t),none:()=>a.warn("Could not insert ruler to DOM as it was not created yet")})}function c(){r.cb.fromNullable(o).match({some:e=>r.cb.fromNullable(e.parentElement).forEach((t=>t.removeChild(e))),none:()=>a.warn("Could not remove ruler from DOM as it was not created yet")})}function h(e){return r.cb.fromNullable(o).match({some:e=>e.offsetHeight,none:()=>(a.warn("Could not get ruler height value as it was not created yet, fallback to innerHeight"),e.innerHeight)})}function u(e){return Math.max(h(e)-e.innerHeight,0)}},3352:(e,t,i)=>{"use strict";i.d(t,{O:()=>s});const s=(e,t,i)=>{let s,n=i;for(;!(s=e.next()).done;)n=t(n,s.value);return n}},480:(e,t,i)=>{"use strict";i.d(t,{Y:()=>h}),i(1068),i(6896);var s,n=i(4040),r=i(8036),o=i(2132),a=[],l=[],d=!1;s=window.console&&void 0!==console.log?window.console:new class{log(...e){}};let c=!1;class h{constructor(e){this.namespace=e}static clear(){h.logs=[],window.teads.FULL_LOGS=[]}static getFullLogs(){return window.teads.FULL_LOGS}debug(...e){this._log("debug",e)}info(...e){this._log("info",e)}warn(...e){this._log("warn",e)}error(...e){this._log("error",e)}table(e,...t){s.table&&s.table(e,t.length>0?t:null)}_log(e,t){if(t.length){var i=(((0,n.k)()-window.teads.START_TIME)/1e3).toFixed(3)+"s",o="";for(let e=0;e<t.length;e++)if(e>0&&(o+=" + "),"object"==typeof t[e])try{o+=JSON.stringify(t[e])}catch(i){o+=t[e]}else o+=t[e];if(window.teads.FULL_LOGS.push({level:e,message:i+" ["+this.namespace+"] "+o}),!((0,r.indexOf)(a,e)<0)){if(!d&&l.length&&!(0,r.some)(l,(e=>0===this.namespace.indexOf(e))))return;h.logs.push({level:e,message:i+" ["+this.namespace+"] "+t.join(" ")}),t.unshift("Teads %c"+i+" "+this.namespace,"color:#7ebde5;");var c=s[e]||s.log;try{c.apply(s,t)}catch(e){Function.prototype.apply.apply(c,[s,t])}}}}}h.logs=[],c||(c=!0,(0,o._)("teadsDebugLevel").toOption().filter((e=>!!e)).map((e=>e.split(","))).forEach((e=>{a=(0,r.indexOf)(e,"all")>=0?["debug","info","warn","error"]:e})),(0,o._)("teadsDebugNamespace").toOption().filter((e=>!!e)).forEach((e=>{l=e.split(","),d="all"===String(e).toLocaleLowerCase()})),a.length&&!window.teads.Logger&&(s.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#585858;font-family:Helvetica,sans-serif;font-size:2em;"),s.log("%cv1342', 'color:#7ebde5;font-style:italic;")),window.teads.HAS_DEBUG_LOGS=!!a.length)},5512:(e,t,i)=>{"use strict";i.d(t,{AV:()=>p,Al:()=>A,Ev:()=>v,GY:()=>m,Ix:()=>f,MD:()=>b,QF:()=>u,qq:()=>g});var s=i(6300),n=i(6040),r=i(7404),o=i(3352),a=i(6084),l=i(2488),d=i(6932),c=i(5072),h=i(2304);const u=({auctionId:e=s.cb.empty(),pageId:t=s.cb.empty(),pid:i=s.cb.empty(),insertionId:n=s.cb.empty(),connectionId:r=s.cb.empty(),slotType:o=s.cb.empty(),env:a=s.cb.empty(),impressionId:l=s.cb.empty(),cachebusting:d=s.cb.empty(),headerBiddingProvider:u=s.cb.empty(),gdprIab:p=s.cb.empty(),portfolioItemId:g=s.cb.empty(),viewerId:m=s.cb.empty(),debugMetadata:f=s.cb.empty()}={})=>{const v={"[auctid]":e.getOrValue(""),"[pageId]":t.map(String).getOrValue(""),"[pid]":i.map(String).getOrValue(""),"[insertionId]":n.map(String).getOrValue(""),"[connectionId]":r.map(String).getOrValue(""),"[slotType]":o.getOrValue(""),"[env]":u.match({some:()=>"js-web",none:()=>a.getOrValue("")}),"[impressionId]":l.map(String).getOrValue(""),"[CACHEBUSTING]":d.map(String).getOrValue(""),"[headerBiddingProvider]":u.getOrValue(""),"[pfid]":g.map(String).getOrValue(""),"[viewerId]":m.getOrValue(""),"[debugMetadata]":f.getOrValue(""),"[PAGEURL]":(0,h.eU)()};return p.forEach((({status:e,consent:t,reason:i,apiVersion:s,cmpId:n})=>{v["[gdpr_status]"]=String(e),v["[gdpr_consent]"]=t,v["[gdpr_reason]"]=String(i),v["[gdpr_cmp_id]"]=n.map(String).getOrValue(""),v["[gdpr_api_version]"]=s.map(String).getOrValue(""),v["[gdpr_apply]"]=(0,c.A)((0,c.E)(e))})),v},p=({currentTime:e=s.cb.empty(),errorCode:t=s.cb.empty(),assetUrl:i=s.cb.empty(),mediaFileType:r=s.cb.empty(),viewability:o=s.cb.empty(),debugMetadata:l=s.cb.empty(),errorCause:d=s.cb.empty(),gdprApplies:c=s.cb.empty(),gdprConsent:h=s.cb.empty()}={},u=n.rand)=>{const p=c.map((e=>e?"1":"0")).getOrValue(""),g=h.getOrValue("");return{"[CONTENTPLAYHEAD]":e.filter((e=>e>=0)).match({some:a.offset,none:()=>"0"}),"[CACHEBUSTING]":u(8),"[ERRORCODE]":t.map(String).getOrValue(""),"[ASSETURI]":encodeURIComponent(i.getOrValue("")),"[MEDIAFILETYPE]":r.getOrValue("unknown"),"[VIEWABILITY]":o.map(String).getOrValue("0"),"[debugMetadata]":l.getOrValue(""),"[errorCause]":d.getOrValue(""),"[GDPR]":p,"%5BGDPR%5D":p,"${GDPR}":p,"%24%7BGDPR%7D":p,"${GDPR_CONSENT_\\d+}":g,"%24%7BGDPR_CONSENT_\\d+%7D":g,"[GDPR_CONSENT]":g,"%5BGDPR_CONSENT%5D":g,"${GDPR_CONSENT}":g,"%24%7BGDPR_CONSENT%7D":g}},g=e=>([t,i])=>e.replace(new RegExp(t.replace("[","\\[").replace("]","\\]").replace("{","\\{").replace("}","\\}").replace("$","\\$"),"gi"),i),m=(e,t=!1)=>i=>o.O(function*(e,t=!1){for(const i in e)e.hasOwnProperty(i)&&(t||""!==e[i])&&(yield[i,e[i]])}(e,t),((e,t)=>g(e)(t)),i),f=(e,t)=>(0,l.Ib)(e)&&(0,l.Ib)(t)?e-t:0,v=(e=s.MB)=>e.map((e=>e.url.toString())),A=(e=s.MB)=>e.map((e=>(0,a.getExtensionFromMimeType)(e.type))),b=(e,t,i)=>{const n=Math.ceil(100*(0,r.getPercentageInView)({element:e,elementAncestors:(0,r.findParentElements)(e),elementClientRect:(0,d.getBoundingClientRect)(e),mainWindow:s.cb.fromNullable((0,r.getWindow)(e)).getOrValue(window),elementHeight:t}));return n<0||(0,r.checkElementVisibility)(e,i).isLeft()?0:n}},3743:(e,t,i)=>{"use strict";i.d(t,{Ar:()=>a,IF:()=>d,UV:()=>l});var s=i(2495),n=i(2488),r=i(8036),o=i(6716);const a=(0,s.c)(((e,t)=>{for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}));function l(e,t){return(0,n.Y9)(e)?(0,o.Sg)(Object.keys(e),r.cArray.foldLeft({},((i,s)=>t(s,e[s])?Object.assign(Object.assign({},i),{[s]:e[s]}):i))):e}function d(e,t){return l(e,((e,i)=>t(i)))}},924:(e,t,i)=>{"use strict";i.r(t),i.d(t,{generateUuidWithRandom:()=>c,getNativeCrypto:()=>d,getRandomBytes:()=>h,getRandomValue:()=>l});var s=i(6300),n=i(3336),r=i(6084),o=i(2488);const a=4294967296;function l(e=window){return(0,r.isNative)(Math.random)?Math.random():s.cb.fromNullable(e.crypto).filter((e=>(0,r.isNative)(e.getRandomValues))).flatMap((e=>n.AT.tryCatch((()=>e.getRandomValues(new Uint32Array(1))[0])).toOption())).map((e=>e/(a-1))).getOrValue(0)}function d(e){return(0,o.Y9)(e)&&(0,r.isFunction)(e.getRandomValues)&&(0,r.isNative)(e.getRandomValues)?(0,s.sx)(e):s.MB}function c(e,t=Math.random){const i=new Array(e);for(let s=0,n=0;s<e;s++)0==(3&s)&&(n=4294967296*t()),i[s]=n>>>((3&s)<<3)&255;return i}function h(e,t=window,i=(()=>c(e))){return d(t.crypto).orElse((()=>d(t.msCrypto))).flatMap((t=>{const i=new Uint8Array(e);return t.getRandomValues(i),void 0!==i[e-1]?(0,s.sx)(i):s.MB})).getOrElse(i)}},2292:(e,t,i)=>{"use strict";function s(){let e=null;if(window.XMLHttpRequest&&(e=new XMLHttpRequest),e&&!("withCredentials"in e)&&(e=window.XDomainRequest?new window.XDomainRequest:null),!e){try{e=new window.ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(t){try{e=new window.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}e.responseType="msxml-document"}return e}function n(e){return e instanceof XMLHttpRequest}i.d(t,{U3:()=>n,vQ:()=>s})},920:(e,t,i)=>{"use strict";i.d(t,{AL:()=>l,Cc:()=>d,In:()=>c,uw:()=>h});class s{constructor(e){if(this.isValid=!0,"string"!=typeof e&&(e=`${e}`),e.length>n)return void(this.isValid=!1);const t=e.trim().match(a);if(!t)return e.split(".").length<3?new s(`${e}.0`):void(this.isValid=!1);this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0||this.minor>r||this.minor<0||this.patch>r||this.patch<0?this.isValid=!1:this.version=this.major+"."+this.minor+"."+this.patch}toString(){return this.version}}const n=256,r=9007199254740991,o="0|[1-9]\\d*",a=new RegExp("^v?("+o+")\\.("+o+")\\.("+o+").*?$");function l(e,t){let i=p(e,t);return null!==i&&i>0}function d(e,t){let i=p(e,t);return null!==i&&i<0}function c(e,t){let i=p(e,t);return null!==i&&i>=0}function h(e,t){let i=p(e,t);return null!==i&&i<=0}function u(e,t){return e<t?-1:e>t?1:0}function p(e,t){let i=new s(e),n=new s(t);return i.isValid&&n.isValid?function(e,t){return u(e.major,t.major)||u(e.minor,t.minor)||u(e.patch,t.patch)}(i,n):null}},6040:(e,t,i)=>{"use strict";i.r(t),i.d(t,{endsWith:()=>c,includesSubString:()=>p,isEmpty:()=>g,isNotEmpty:()=>m,isURL:()=>n,match:()=>h,pad:()=>r,rand:()=>a,replaceStringsWithValue:()=>u,separate:()=>d,trim:()=>l,ucfirst:()=>o});var s=i(8036);function n(e){return"string"==typeof e&&!e.match(/\s/)&&/(((((http|ftp|https):)?(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\-]+\.|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(e)}function r(e,t="00"){var i=String(e);return t.substring(0,t.length-i.length)+i}function o(e){return e.charAt(0).toUpperCase()+e.substr(1)}function a(e,t=!0){for(var i=t?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="",n=0;n<e;n++)s+=i.charAt(Math.floor(Math.random()*i.length));return s}function l(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(e="|",...t){let i=!0,s=0;for(;i&&s<t.length;)i=i&&!t[s],s++;return i?"":t.join(e)}function c(e,t){return e.slice(-t.length)===t}function h(e,t){return e.match(t)||[]}function u(e,t){return i=>s.reduce(e,((e,i)=>e.replace(i,`${t}`)),i)}function p(e,t){return-1!==e.indexOf(t)}function g(e){return""===e}function m(e){return!g(e)}},6556:(e,t,i)=>{"use strict";i.d(t,{EB:()=>b,cp:()=>y,iM:()=>A,m:()=>w});var s=i(2495),n=i(6300),r=i(6716),o=i(3336),a=i(480),l=i(1476),d=i(2488);const c=Math.random(),h="[samplingFactor][context][businessIds][logLevel] message",u=new a.Y("Sumologic"),p=(0,s.c)((({formatVersion:e,fullContext:t,bidType:i,portfolioItemId:s,headerBidding:n},r)=>{const o=s.map(String).getOrValue("");return r.replace("context",`${e}|${t}|${i}|${o}|${n?"hb":""}`)})),g=(0,s.c)(((e,t,i,s)=>{const n=e=>e.map(String).getOrValue("");return s.replace("businessIds",`${n(e)}|${n(i)}|${n(t)}`)})),m=(0,s.c)(((e,t)=>t.replace("logLevel",e))),f=(0,s.c)(((e,t)=>t.replace("samplingFactor",e.toString()))),v=(0,s.c)(((e,t)=>t.replace("message",e)));function A(e,t){o.AT.tryCatch((()=>{(new Image).src=`${e}?${encodeURIComponent(t)}`})).tapLeft((i=>{u.warn("An error occurred while sending log message to Sumologic collector",e,t,i)}))}function b(){return c}class y{constructor(e,t,i,s,n){this.collectorUrl=e,this.samplingFactor=t,this.formatVersion=i,this.placementId=s,this.options=n}log(e,t=this.samplingFactor){if(function(e,t){return l.E.isSumologicLogsEnabled&&e>0&&t<=1/e}(t,this.options.getSamplingThreshold()))this.options.sendLog(this.collectorUrl,e);else{const t=l.E.isSumologicLogsEnabled?`sampling too low: ${this.samplingFactor}, threshold: ${this.options.getSamplingThreshold().toFixed(2)}`:"SUMOLOGIC_ENABLED flag is false";u.debug(`Did not send log to Sumologic collector (reason: ${t})`,e)}}metadata(e,t=this.samplingFactor){this.logBasedOnTemplate("metadata",e,t)}info(e,t=this.samplingFactor){this.logBasedOnTemplate("info",e,t)}warning(e,t=this.samplingFactor){this.logBasedOnTemplate("warning",e,t)}error(e,t=this.samplingFactor){(0,d.C6)({fromHour:7,toHour:7})?this.logBasedOnTemplate("error",e,10):this.logBasedOnTemplate("error",e,t)}generateLogFromTemplate(e,t,{fullContext:i,bidType:s,portfolioItemId:o,headerBidding:a},l){return(0,r.cp)(p({fullContext:i,bidType:s,portfolioItemId:o,headerBidding:a,formatVersion:this.formatVersion}),g(this.placementId,n.MB,n.MB),m(e),f(t),v(l))(h)}logBasedOnTemplate(e,t,i=this.samplingFactor){this.log(this.generateLogFromTemplate(e,i,{fullContext:this.options.getFullContext(),bidType:"",portfolioItemId:n.MB,headerBidding:this.options.isHeaderBiddingTag()},t),i)}copy(e={}){const{collectorUrl:t=this.collectorUrl,samplingFactor:i=this.samplingFactor,formatVersion:s=this.formatVersion,placementId:n=this.placementId,options:r=this.options}=e;return new y(t,i,s,n,r)}}class w extends y{constructor(e="",t,i,s,n){super(n.collectorUrl,n.samplingFactor,n.formatVersion,n.placementId,n.options),this.bidType=e,this.insertionId=t,this.connectionId=i,this.portfolioItemId=s}generateLogFromTemplate(e,t,{fullContext:i,bidType:s,portfolioItemId:n,headerBidding:o},a){return(0,r.cp)(p({fullContext:i,bidType:s,portfolioItemId:n,headerBidding:o,formatVersion:this.formatVersion}),g(this.placementId,this.insertionId,this.connectionId),m(e),f(t),v(a))(h)}logBasedOnTemplate(e,t,i=this.samplingFactor){this.log(this.generateLogFromTemplate(e,i,{fullContext:this.options.getFullContext(),bidType:this.bidType,portfolioItemId:this.portfolioItemId,headerBidding:this.options.isHeaderBiddingTag()},t),i)}copy(e={}){const{bidType:t=this.bidType,insertionId:i=this.insertionId,connectionId:s=this.connectionId,portfolioItemId:n=this.portfolioItemId}=e,r=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(e,["bidType","insertionId","connectionId","portfolioItemId"]);return new w(t,i,s,n,super.copy(r))}}},4456:(e,t,i)=>{"use strict";i.d(t,{ie:()=>c,q:()=>d,qe:()=>s,y2:()=>l});var s,n=i(8576),r=i(3383),o=i(3336);!function(e){e[e.Standard=0]="Standard",e[e.Worker=1]="Worker",e[e.Precise=2]="Precise"}(s||(s={}));const a=1e3/60;function l(e,t,i=s.Standard){return o.AT.tryCatch((()=>{if(i===s.Worker&&u()){const i=h(e,'self.setTimeout(function(){self.postMessage("tick")}, '+t+")");return{clear:()=>{i.terminate()}}}if(i===s.Precise){const i=n.kX();let s,o=0;var r=()=>{const a=n.kX()-i;a<t-(0===o?o:a/o)?(o+=1,s=c(r)):e()};return r(),{clear:()=>{var e;e=s,(window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout)(e)}}}{const i=window.setTimeout((()=>{e()}),t);return{clear:()=>{clearTimeout(i)}}}})).fold((e=>({clear:()=>{}})),(e=>e))}function d(e,t,i=!1){if(i&&u()){const i=h(e,'self.setInterval(function(){self.postMessage("tick")}, '+t+")");return{clear:()=>{i.terminate()}}}{const i=window.setInterval((()=>{e()}),t);return{clear:()=>{clearInterval(i)}}}}function c(e,t=a){const i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return i?i(e):window.setTimeout(e,t)}function h(e,t){const i=r.gx(t),s=new Worker(r.YV().map((e=>e.createObjectURL(i))).getOrValue(""));return s.onmessage=t=>e(),s}function u(){return!!window.Worker&&r.YV().nonEmpty()}},8576:(e,t,i)=>{"use strict";i.d(t,{CQ:()=>g,Yn:()=>v,eA:()=>m,kX:()=>u,sD:()=>A,uk:()=>f});var s=i(6716),n=i(4040),r=i(6300),o=i(8036),a=i(3336),l=i(6084);const d=e=>a.AT.tryCatch((()=>e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance)).toOption(),c=d(window),h={tag:{name:/(^http(s)*:\/\/a\.teads\.tv\/page\/\d+\/tag|\/dist\/quality\/v3\/ms\/tag\/.+\.js)/,value:r.MB,win:r.MB},format:{name:/(^(http(s)?:)?\/\/a\.teads\.tv\/media\/format\/v3|\/dist\/format)\/teads-format(\.min)?\.js/,value:r.MB,win:r.MB}};function u(){return c.map((e=>e.now())).getOrElse(n.k)}function p(e,t=window){return d(t).filter((e=>(0,l.isFunction)(e.getEntriesByType))).map((t=>t.getEntriesByType(e))).filter(o.isNotEmpty)}function g(e=window){return p("resource",e)}function m(e,t=window){return g(t).flatMap((t=>r.cb.fromNullable((0,o.find)(t,(t=>e.test(t.name))))))}function f(e=window){return function(e=window){return p("navigation",e)}(e).match({some:e=>r.cb.fromNullable(e[0].responseStart-e[0].requestStart).map(Math.round),none:()=>d(e).flatMap((0,s.cp)((0,l.prop)("timing"),r.cb.fromNullable)).map((e=>e.responseStart-e.requestStart))})}function v(e,t){(0,o.forEach)(t,(t=>(0,o.forEach)(e,(e=>h[e].value=h[e].value.orElse((()=>(h[e].win=r.cb.fromNullable(t),m(h[e].name,t))))))))}function A(e){let t=e.length;const i=(0,o.reduce)(e,((e,{transferSize:i,responseEnd:s,responseStart:n})=>i>0&&s>0&&n>=0&&s-n>0?e+8*i/1024/((s-n)/1e3):(t--,e)),0);return t>0?i/t:0}},2304:(e,t,i)=>{"use strict";i.d(t,{Ae:()=>I,K0:()=>p,YD:()=>w,aE:()=>y,e0:()=>A,eU:()=>S,i2:()=>m,iI:()=>b,mC:()=>g,oV:()=>E,u4:()=>f,ui:()=>C,uw:()=>v});var s=i(8036),n=i(1228),r=(i(1104),i(6040)),o=i(480),a=i(6084),l=i(6300),d=i(3336),c=i(7404),h=i(2488);const u=new o.Y("URIHelper");function p(e){const t=document.createElement("a");return t.href=e,{href:t.href,protocol:t.protocol,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host}}function g(e){const t={};return"string"!=typeof e?t:(e=(0,r.trim)(e).replace(/^(\?|&)/,""))?(s.forEach(e.split("&"),(e=>{const i=e.split("="),s=i.shift();s&&(t[s]=i.length>0?i.join("="):void 0)})),t):t}function m(e){try{return new URL(e).hostname.endsWith(".teads.tv")}catch(e){return!1}}function f(e){return/itunes\.apple\.com/.test(p(e).hostname)}function v(e,t,i){var s,n;if(e.indexOf(t)<0)return e;{const r=new RegExp("[\\?&]"+t+"=([^&#]*)");return l.cb.fromNullable(null===(n=null===(s=r.exec(e))||void 0===s?void 0:s[0])||void 0===n?void 0:n.charAt(0)).match({some:s=>e.replace(r,s+t+"="+i),none:()=>(u.warn(`Tried to replace parameter "${t}" value with "${i}" on URL ${e} and failed.`),e)})}}function A(e,t){const i=s.map(Object.keys(t),(e=>e+"="+t[e])).join("&"),n=-1===e.indexOf("?")?"?":"&";return e+(""===i?"":n+i)}function b(e){return e.replace(/^http:/,(0,a.getProtocol)())}function y(e,t,i){return w(e,t)?e:A(e,{[t]:i})}function w(e,t){return e.indexOf(`?${t}=`)>-1||e.indexOf(`&${t}=`)>-1}function E(e,t,i){return w(e,t)?v(e,t,i):y(e,t,i)}function C(){return d.AT.tryCatch((()=>window.top.location.search)).getOrElse((()=>p(document.referrer).search))}function I(){var e,t;let i=(0,c.findParentWindows)(window.document.body);const s=window.teads.prebidReferer;if((0,h.ct)(s))return l.cb.fromNullable({windowDepth:i.length,windowReferrerUrl:s});let r,o;return window.top!==window?(0,n.isAmp)()&&l.cb.fromNullable(window.context).map((e=>e.sourceUrl)).nonEmpty()?(r=window.context.sourceUrl,o=window.context.canonicalUrl):(0,n.isAmpSF)()&&l.cb.fromNullable(window.AMP_CONTEXT_DATA).map((e=>e.sourceUrl)).nonEmpty()?(r=window.AMP_CONTEXT_DATA.sourceUrl,o=window.AMP_CONTEXT_DATA.canonicalUrl):r=document.referrer?(0,n.isIABSafeFrame)()&&null!==(e=window.teads.pageURL)&&void 0!==e?e:document.referrer:d.AT.tryCatch((()=>window.top.location.href)).getOrElse((()=>window.location.href)):r=window._teads_canonical_url?window._teads_canonical_url:null===(t=window.location)||void 0===t?void 0:t.href,r.match("ampproject.org")&&o&&!o.match("amproject.org")&&(r=o),l.cb.fromNullable({windowDepth:i.length,windowReferrerUrl:r})}const S=()=>encodeURIComponent(I().flatMap((e=>l.cb.fromNullable(e.windowReferrerUrl))).getOrValue(""))},4732:(e,t,i)=>{"use strict";i.d(t,{iq:()=>g,oF:()=>f,qC:()=>A});var s=i(1228);const n="model",r="name",o="type",a="vendor",l="version",d="console",c="mobile",h="tablet",u="smarttv",p="wearable",g="desktop",m={extend:function(e,t){var i={};for(var s in e)t[s]&&t[s].length%2==0?i[s]=t[s].concat(e[s]):i[s]=e[s];return i},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={rgx:function(){for(var e,t,i,n,r,o,a,l=0,d=arguments;l<d.length&&!o;){var c=d[l],h=d[l+1];if(void 0===e)for(n in e={},h)"object"==typeof(r=h[n])?e[r[0]]=void 0:e[r]=void 0;for(t=i=0;t<c.length&&!o;)if(o=c[t++].exec((0,s.getUA)()))for(n=0;n<h.length;n++)a=o[++i],"object"==typeof(r=h[n])&&r.length>0?2===r.length?"function"==typeof r[1]?e[r[0]]=r[1].call(this,a):e[r[0]]=r[1]:3===r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?e[r[0]]=a?a.replace(r[1],r[2]):void 0:e[r[0]]=a?r[1].call(this,a,r[2]):void 0:4===r.length&&(e[r[0]]=a?r[3].call(this,a.replace(r[1],r[2])):void 0):e[r]=a||void 0;l+=2}return e},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&t[i].length>0){for(var s=0;s<t[i].length;s++)if(m.has(t[i][s],e))return"?"===i?void 0:i}else if(m.has(t[i],e))return"?"===i?void 0:i;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},A={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[r,l],[/(opios)[\/\s]+([\w\.]+)/i],[[r,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[r,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[r,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[r,"IE"],l],[/(edge)\/((\d+)?[\w\.]+)/i],[r,l],[/(yabrowser)\/([\w\.]+)/i],[[r,"Yandex"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[r,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[r,"WeChat"],l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[r,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[r,/(.+)/,"$1 WebView"],l],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[l,[r,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[r,l],[/(dolfin)\/([\w\.]+)/i],[[r,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[r,"Chrome"],l],[/;fbav\/([\w\.]+);/i],[l,[r,"Facebook"]],[/fxios\/([\w\.-]+)/i],[l,[r,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[r,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,r],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[r,[l,f.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[r,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[r,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[r,l]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[n,a,[o,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[n,[a,"Apple"],[o,h]],[/(apple\s{0,1}tv)/i],[[n,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,n,[o,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[n,[a,"Amazon"],[o,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[n,f.str,v.device.amazon.model],[a,"Amazon"],[o,c]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[n,a,[o,c]],[/\((ip[honed|\s\w*]+);/i],[n,[a,"Apple"],[o,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,n,[o,c]],[/\(bb10;\s(\w+)/i],[n,[a,"BlackBerry"],[o,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[n,[a,"Asus"],[o,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[n,"Xperia Tablet"],[o,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[a,"Sony"],[n,"Xperia Phone"],[o,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,n,[o,d]],[/android.+;\s(shield)\sbuild/i],[n,[a,"Nvidia"],[o,d]],[/(playstation\s[3portablevi]+)/i],[n,[a,"Sony"],[o,d]],[/(sprint\s(\w+))/i],[[a,f.str,v.device.sprint.vendor],[n,f.str,v.device.sprint.model],[o,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,n,[o,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[a,[n,/_/g," "],[o,c]],[/(nexus\s9)/i],[n,[a,"HTC"],[o,h]],[/(nexus\s6p)/i],[n,[a,"Huawei"],[o,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,n,[o,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[n,[a,"Microsoft"],[o,d]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[a,"Microsoft"],[o,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[n,[a,"Motorola"],[o,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[n,[a,"Motorola"],[o,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,m.trim],[n,m.trim],[o,u]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[a,"Samsung"],[o,u]],[/\(dtv[\);].+(aquos)/i],[n,[a,"Sharp"],[o,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],n,[o,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[a,"Samsung"],n,[o,c]],[/smart-tv.+(samsung)/i],[a,n,[o,u]],[/sie-(\w+)*/i],[n,[a,"Siemens"],[o,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[a,"Nokia"],n,[o,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[n,[a,"Acer"],[o,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],n,[o,h]],[/(lg) netcast\.tv/i],[a,n,[o,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[n,[a,"LG"],[o,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[n,[a,"Lenovo"],[o,h]],[/linux;.+((jolla));/i],[a,n,[o,c]],[/((pebble))app\/[\d\.]+\s/i],[a,n,[o,p]],[/android.+;\s(glass)\s\d/i],[n,[a,"Google"],[o,p]],[/android.+;\s(pixel c)\s/i],[n,[a,"Google"],[o,h]],[/android.+;\s(pixel xl|pixel)\s/i],[n,[a,"Google"],[o,c]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[n,/_/g," "],[a,"Xiaomi"],[o,c]],[/android.+a000(1)\s+build/i],[n,[a,"OnePlus"],[o,c]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[o,m.lowerize],a,n]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[r,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[r,[l,f.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[r,"Windows"],[l,f.str,v.os.windows.version]],[/\((bb)(10);/i],[[r,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[r,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[r,"Symbian"],l],[/\((series40);/i],[r],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[r,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[r,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[r,"Chromium OS"],l],[/(sunos)\s?([\w\.]+\d)*/i],[[r,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[r,l],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[r,"iOS"],[l,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[r,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[r,l]]}},6084:(e,t,i)=>{"use strict";i.r(t),i.d(t,{containsKeys:()=>v,equals:()=>N,exhaustive:()=>M,getAudioContext:()=>p,getExtensionFromMimeType:()=>f,getProtocol:()=>m,hasOwnProperties:()=>I,hasOwnProperty:()=>C,hasValidProperty:()=>E,identity:()=>O,isArray:()=>b,isBoolean:()=>a.am,isFunction:()=>S,isNative:()=>L,isNull:()=>y,isNumber:()=>a.Ib,isObject:()=>a.Y9,isSizeInPx:()=>k,isString:()=>a.ct,isStudioCreative:()=>T,isUndefined:()=>a.Y3,matchesCheckers:()=>A,noop:()=>_,not:()=>w,offset:()=>u,prop:()=>V,safeProp:()=>R,seconds:()=>h,tap:()=>D,throttle:()=>g});var s=i(6300),n=i(6896),r=i(6040),o=i(3336),a=i(2488);const l=Object.prototype.toString,d=Function.prototype.toString,c=Object.prototype.hasOwnProperty;function h(e){if(!e)return NaN;const t=e.split("."),i=t[0].split(":");let s=3600*Number(i[0])+60*Number(i[1])+Number(i[2]);return 2===t.length&&(s=Number(s+"."+t[1])),s}function u(e=0){const t=e?Math.floor(e/3600):0,i=(e-=3600*t)?Math.floor(e/60):0,s=((e-=60*i)%1).toFixed(3).substr(1);return e=Math.floor(e),r.pad(t)+":"+r.pad(i)+":"+r.pad(e)+s}function p(){return window.AudioContext||window.webkitAudioContext}function g(e,t=250,i=this){let s=!1;return(...n)=>{s||(e.apply(i,n),window.setTimeout((()=>{s=!1}),t),s=!0)}}function m(){return location&&location.protocol&&0===location.protocol.indexOf("http:")?location.protocol:"https:"}function f(e){if(!e)return"";let t=e.split("/")[1]||e;switch(t){case"javascript":case"x-javascript":t="js";break;case"mpeg":t="mpg"}return t}function v(e,t){let i=!1;if(!t)return!1;for(let s in e)if(C(e,s)){if(void 0===typeof t[s])return!1;i=!0}return i}function A(e){return t=>{let i=!0;for(const s in e)if(e.hasOwnProperty(s)&&((0,a.Y3)(t[s])||!e[s](t[s]))){i=!1;break}return i}}function b(e){return"[object Array]"===l.call(e)}function y(e){return null===e}function w(e){return t=>!e(t)}const E=(e,t,i)=>C(e,t)&&i(e[t]);function C(e,t){return c.call(e,t)}function I(e,t){return t.every((t=>C(e,t)))}function S(e){return!!e&&"function"==typeof e&&"[object Function]"===l.call(e)}function T(){var e;return s.cb.fromNullable(null===(e=window.teads)||void 0===e?void 0:e.api).map((e=>(0,n.m)(e.getStudioData,e))).filter(S).map((e=>e())).existsIf(a.Y9)}function k(e){return!!e.match(/px$/)&&(0,a.Ib)(parseFloat(e))}const P=/^\[object .+?Constructor\]$/,x=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L(e){const t=typeof e;return o.AT.tryCatch((()=>"function"===t?x.test(d.call(e)):!(!e||"object"!==t||!P.test(l.call(e))))).getOrElse((()=>!1))}function _(){}const O=e=>e,V=e=>t=>t[e],R=e=>t=>s.cb.fromNullable(t[e]),D=e=>t=>(e(t),t);function N(e){return t=>t===e}const M=e=>e},8520:(e,t,i)=>{"use strict";i.r(t),i.d(t,{bytesToUuid:()=>d,generateUuid:()=>h,getUuid:()=>u,getUuidFromBlobUrl:()=>c,toUuid:()=>a});var s=i(3383),n=i(6300),r=i(3336),o=i(924);const a=e=>e,l=[];for(let e=0;e<256;++e)l[e]=(e+256).toString(16).slice(1);function d(e,t=0){let i=t;return a([l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],"-",l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]],l[e[i++]]].join(""))}function c(e){const t=e.match(/blob:(.*)/),i=t?t[1]:e;return a(i.substring(i.lastIndexOf("/")+1).toLowerCase())}function h(e,t=window){return e.flatMap((e=>{const i=new t.Blob,s=e.createObjectURL(i);return e.revokeObjectURL(s),n.cb.fromNullable(s)})).map(c).getOrElse((()=>d((0,o.getRandomBytes)(16,t))))}function u(){return r.AT.tryCatch((()=>{const e=(0,s.S6)()?(0,s.YV)():n.MB;return[h(e),h(e)]})).flatMap((([e,t])=>e!==t?(0,r.Qz)(e):(0,r.WY)(new Error("Same auctid generated twice"))))}},3588:(e,t,i)=>{"use strict";i.d(t,{uu:()=>A,kZ:()=>b,gt:()=>y}),i(1068);var s=i(1228),n=i(4040),r=i(6932),o=i(7404),a=i(8036),l=i(480),d=i(2292),c=i(6084),h=i(3336),u=i(2304),p=i(6040),g=i(6300),m=i(6884),f=i.n(m),v=i(2488);const A="wigo.teads.tv";class b{constructor(){if(this.settings=g.MB,this.color="blue",this.statusDetails="",this.bottomPxPosition=10,this.position=1,this.buttonHeight=0,window.teads.WIGO_DEBUG_KEY=!window.teads.WIGO_DEBUG_KEY&&window.teads.HAS_DEBUG_LOGS?"debug":window.teads.WIGO_DEBUG_KEY,this.elapsedTime=0,this.logfile={context:((0,s.getDevice)().toString()+"-"+(0,s.getOS)().toString()+"-"+(0,s.getBrowser)().toString()).replace(/\|/g," "),url:location.href,steps:[],logs:[],timeline:[],vasts:[]},g.cb.fromNullable(b.reportPromise).forEach((e=>e.then((e=>this.report=e)))),this.topWindow=(0,o.findTopWindow)(document.body),window.teads.WIGO_DEBUG_KEY)this.createDebugButton(this.color),this.recordUserActions();else{const e=e=>{const t=e.data.wigoLiveDebug;t&&t.length&&t.length>1&&this.enableWigo(t[1])};try{this.topWindow.addEventListener("message",e)}catch(t){this.topWindow=window,this.topWindow.addEventListener("message",e)}}b.storeInstance(this)}static getInstances(){return b.instances}static loadAndStoreReportIfNeeded(e){const t=(0,u.ui)(),i=(0,u.mC)(t),s=i.teadsWigoDebug||i.teadswigodebug;s&&(e.info(`wigo debug ${s} on ${location.href}`,1),b.reportPromise=b.loadReport(s))}static isCeltraParameterSet(e){return"true"===(0,u.mC)(e).celtra}static storeInstance(e){b.instances.push(e)}static loadReport(e){return new Promise(((t,i)=>{const s=(0,d.vQ)();s.open("GET",`${(0,c.getProtocol)()}//wigo.teads.tv/livedebug/upload/${e}.json`),s.onload=()=>{h.AT.tryCatch((()=>JSON.parse(s.response))).orElse((()=>h.AT.tryCatch((()=>JSON.parse(s.responseText))))).tapLeft((e=>{new l.Y("WIGO").error(e)})).orElse((()=>(0,h.WY)(new Error("report is not available from xhr response")))).fold(i,t)},s.onerror=i,s.send()}))}enableWigo(e="enableFromAdSettings"){window.teads.WIGO_DEBUG_KEY=e,this.createDebugButton(this.color),this.recordUserActions()}setPlayerContainer(e){this.playerContainer=e,this.setElementToFollow(this.playerContainer)}setElementToFollow(e){this.elementToFollow=e,this.elementToFollowRelativeRect=(0,r.getClientRectRelativeToDocument)((0,r.getBoundingClientRect)(e),{x:(0,r.getScrollLeft)(this.topWindow),y:(0,r.getScrollTop)(this.topWindow)})}valid(e,t,i,s){if(this.addValidEvent(e,t,{store:i,type:s}),"error"===s){const e=g.cb.fromNullable(i),t=e.filter(v.ct).orElse((()=>e.filter((e=>!!e.message)).map((e=>g.cb.fromNullable(e.id).filter((e=>!!e)).map((t=>`${t} - ${e.message}`)).getOrValue(`${e.message}`))))).orElse((()=>e.filter((e=>e.length>0)).map(String))).getOrElse((()=>JSON.stringify(i)));this.setStatus(!1,t)}else 3===e&&2===t?this.setStatus(!0,"AdLoaded"):3===e&&3===t&&this.setStatus(!0,"AdStarted")}vastEvent(e,t,i,s){if(this.addValidEvent(0,0,{store:{name:e,time:t,percent:i,pixels:s},type:"vastEvent"}),"complete"===e)this.setStatus(!0,"AdComplete");else if("pause"===e)this.setStatus(!0,"AdPaused"),this.lastTracking="pause";else if("pause"===this.lastTracking)this.lastTracking=null;else if("progress"===e){const e=t?t.split(".")[0]+"s":"";this.setStatus(!0,"AdPlaying: "+e)}}setStatus(e,t=""){const i=e?"green":"red";this.button?(this.status.style.setProperty("background-color",i),this.status.style.setProperty("display","block"),this.loader.style.setProperty("display","none"),this.status.innerHTML=t):(this.color=i,this.statusDetails=t)}moveButton(e){this.bottomPxPosition=b.initialBottomPosition+(e-1)*b.bottomPxInterval,this.position=e,this.button&&this.button.style.setProperty("bottom",this.bottomPxPosition+"px")}followElement(){if(this.isActivated()){const e=(0,r.getBoundingClientRect)(this.elementToFollow);this.elementToFollowRelativeRect=(0,r.isEmptyBoundingClientRect)(e)?this.elementToFollowRelativeRect:(0,r.getClientRectRelativeToDocument)(e,{x:(0,r.getScrollLeft)(this.topWindow),y:(0,r.getScrollTop)(this.topWindow)});const t=(0,r.getClientRectFromClientRectRelativeToDocument)(this.elementToFollowRelativeRect,{x:(0,r.getScrollLeft)(this.topWindow),y:(0,r.getScrollTop)(this.topWindow)}),i=this.topWindow.innerHeight-this.buttonHeight-(b.initialBottomPosition+(b.instances.length-this.position)*b.bottomPxInterval);let s=this.topWindow.innerHeight-t.bottom+t.height/2-this.buttonHeight/2,n=10;s<this.bottomPxPosition?s=this.bottomPxPosition:s>i?s=i:n=50,this.button.style.setProperty("bottom",s+"px"),this.button.style.setProperty("right",n+"px")}}forceReportWithKey(e){window.teads.WIGO_DEBUG_KEY=e,this.sendLogsToWigo((()=>{}))}isActivated(){return!(!window.teads.WIGO_DEBUG_KEY||!this.button)}setVast(e,t,i=""){this.logfile.vasts.push({url:e,content:t,uploadedUrl:i})}getVastUrl(e){var t;return g.cb.fromNullable(null===(t=this.report)||void 0===t?void 0:t.vasts).map((t=>(0,a.filter)(t,(t=>t.url===e)))).filter(a.isNotEmpty).map((e=>e[0].uploadedUrl)).getOrValue(e)}saveVast(e){this.sendLogsToWigo((()=>{}),e)}recordUserActions(){this.elapsedTime<3e5&&setTimeout((()=>{const e=this.logfile.timeline[this.logfile.timeline.length-1],t=(0,r.getWindowSize)(this.topWindow),i=(0,r.getScrollLeft)(this.topWindow),s=(0,r.getScrollTop)(this.topWindow);if(!e||this.hasInteracted(e,t,i,s)){const e={time:this.elapsedTime,scrollX:i,scrollY:s,screenWidth:t.width,screenHeight:t.height,player:{top:0,height:0,left:0,width:0}};if(this.playerContainer){const t=(0,r.getBoundingClientRect)(this.playerContainer);e.player={top:t.top,height:t.height,left:t.left,width:t.width}}this.logfile.timeline.push(e)}this.elapsedTime+=b.recordUserActionsTiming,this.recordUserActions()}),b.recordUserActionsTiming)}addValidEvent(e,t,i){this.logfile.steps.push({step:e,substep:t,info:i})}createDebugButton(e){if(window.teads.WIGO_DEBUG_KEY&&!this.button){const t=this.topWindow.document.createElement("div");t.innerHTML=b.TEMPLATE,this.button=t.firstChild,this.button.onclick=e=>{this.openWigoReport(),e.stopPropagation()},this.button.style.setProperty("bottom",this.bottomPxPosition+"px"),this.topWindow.document.body.appendChild(this.button),this.status=this.button.firstChild,this.status.style.setProperty("background-color",e),this.status.innerHTML=this.statusDetails,this.loader=this.status.nextSibling,"blue"!==this.color?(this.status.style.setProperty("display","block"),this.loader.style.setProperty("display","none")):(this.status.style.setProperty("display","none"),this.loader.style.setProperty("display","block")),this.buttonHeight=(0,r.getBoundingClientRect)(this.button).height,(0,s.isAmp)()&&teads.helper.AmpResize&&("red"===e&&(teads.helper.AmpResize.ratio=4),setTimeout((()=>this.forceAmpOpen()),1e3))}}forceAmpOpen(){if(!teads.helper.AmpResize.isVisible()){const e=setTimeout((()=>this.forceAmpOpen()),1e3);teads.helper.AmpResize.open((()=>{this.button.style.setProperty("display","none"),setTimeout((()=>this.button.style.setProperty("display","block")),100),clearTimeout(e)}))}}openWigoReport(){if(window.teads.WIGO_DEBUG_KEY){this.button.onclick=e=>{e.stopPropagation()};const e=e=>{setTimeout((()=>{this.button.onclick=e=>{this.openWigoReport(),e.stopPropagation()}}),500)};window.open(this.sendLogsToWigo(e))}}sendLogsToWigo(e,t=`${window.teads.WIGO_DEBUG_KEY}_${(0,n.k)()}.json`){this.logfile.logs=l.Y.getFullLogs(),this.sendVastsToWigo(this.logfile.vasts);const i=(0,d.vQ)();var s,r,o;return i.open("PUT",b.serviceUrl+"/livedebug/upload/"+t,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onload=e,i.onerror=e,i.send(JSON.stringify((s=this.logfile,r=[],o=[],function e(t,i){var s,n;return"object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String?t:(s=(0,a.indexOf)(r,t))>=0?{$ref:o[s]}:(r.push(t),o.push(i),Array.isArray(t)?(n=[],(0,a.forEach)(t,(function(t,s){n[s]=e(t,i+"["+s+"]")}))):(n={},(0,a.forEach)(Object.keys(t),(function(s){n[s]=e(t[s],i+"["+JSON.stringify(s)+"]")}))),n)}(s,"$")))),b.serviceUrl+"/livedebug/1e5be8207477d3ae7c5a946e7e0f5d1a.html?file="+t}sendVastsToWigo(e){(0,a.forEach)((0,a.filter)(e,(e=>!e.uploadedUrl)),(e=>{const t=`${b.serviceUrl}/livedebug/upload/${(0,p.rand)(20,!1)}.xml`,i=(0,d.vQ)();i.open("PUT",t,!0),i.setRequestHeader("Content-Type","application/xml; charset=UTF-8"),i.send(e.content),e.uploadedUrl=t,delete e.content}))}hasInteracted(e,t,i,s){return e.scrollY!==s||e.scrollX!==i||e.screenHeight!==t.height||e.screenWidth!==t.width}}b.bottomPxInterval=80,b.recordUserActionsTiming=1e3,b.serviceUrl=location.hostname.match(/(sandbox\.teads\.net|par2\.teads\.tech|wigo|localhost)$/)?(0,c.getProtocol)()+"//"+location.hostname+":18091":"https://"+A,b.instances=[],b.initialBottomPosition=10,b.TEMPLATE=f();const y=({wigo:e,durationPlayed:t,totalDuration:i})=>({event:s,trackingUrls:n})=>{const r=((e,t)=>t>0?Math.floor(100*e/t):0)(t.getOrValue(0),i.getOrValue(0));e.vastEvent(s,(e=>e.map((e=>e.toFixed(2))).getOrValue(""))(t),r,(0,a.map)(n,(e=>({url:e}))))}},4616:(e,t,i)=>{"use strict";i.d(t,{Q:()=>r,S:()=>n});var s=i(2488);const n=e=>e,r=e=>(0,s.ct)(e)},8708:(e,t,i)=>{"use strict";i.d(t,{E:()=>r,Y:()=>n});var s=i(2488);const n=e=>e,r=e=>(0,s.ct)(e)},2495:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});var s=i(6896);const n=function(e){const t=e.length;return function i(...n){return n.length<t?(0,s.m)(i,null,...n):e.call(null,...n)}}},3336:(e,t,i)=>{"use strict";i.d(t,{AT:()=>r,I:()=>n,Qz:()=>h,WY:()=>c,Yl:()=>a,s5:()=>d});var s=i(6300);const n={filterOrElse:(e,t)=>i=>i.filterOrElse(e,t),fold:(e,t)=>i=>i.fold(e,t)};class r{constructor(e,t){this._isRight="right"===t,this.value=e}static tryCatch(e){try{return d(e())}catch(e){return a(e)}}static of(e){return d(e)}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&this.value===e}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:a(t(this.value)):this}flatMap(e){return this._isRight?e(this.value):this}fold(e,t){return this._isRight?t(this.value):e(this.value)}getOrElse(e){return this._isRight?this.value:e()}getOrValue(e){return this._isRight?this.value:e}orElse(e){return this._isRight?this:e(this.value)}map(e){return this._isRight?d(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}tap(e){return this._isRight&&e(this.value),this}tapLeft(e){return this._isRight||e(this.value),this}toOption(){return this._isRight?s.cb.fromNullable(this.value):s.MB}}class o extends r{constructor(e){super(e,"left")}}function a(e){return new o(e)}class l extends r{constructor(e){super(e,"right")}}function d(e){return new l(e)}const c=a,h=d},6300:(e,t,i)=>{"use strict";i.d(t,{MB:()=>o,cb:()=>n,cv:()=>s,sx:()=>r});const s={filter:e=>t=>t.filter(e),map:e=>t=>t.map(e),flatMap:e=>t=>t.flatMap(e),forEach:e=>t=>t.forEach(e),getOrValue:e=>t=>t.getOrValue(e),orElse:e=>t=>t.orElse(e),fold:(e,t)=>i=>i.match({none:e,some:t})};class n{constructor(e,t){this.value=e,this._isEmpty=t}static of(e){return r(e)}static fromNullable(e){return null==e?o:n.of(e)}static fromPredicate(e,t){return t(e)?n.of(e):o}static empty(){return o}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}getOrElse(e){return this._isEmpty?e():this.value}getOrNull(){return this._isEmpty?null:this.value}getOrValue(e){return this._isEmpty?e:this.value}orElse(e){return this._isEmpty?e():this}map(e){return this._isEmpty?o:n.of(e(this.value))}flatMap(e){return this._isEmpty?o:e(this.value)||o}filter(e){return this._isEmpty||!e(this.value)?o:n.of(this.value)}existsIf(e){return!this._isEmpty&&e(this.value)}forEach(e){this._isEmpty||e(this.value)}match(e){return this._isEmpty?e.none():e.some(this.value)}}function r(e){return new n(e,!1)}const o=new n(null,!0)},6716:(e,t,i)=>{"use strict";function s(e,t,i,s,n,r,o,a,l,d){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return i(t(e));case 4:return s(i(t(e)));case 5:return n(s(i(t(e))));case 6:return r(n(s(i(t(e)))));case 7:return o(r(n(s(i(t(e))))));case 8:return a(o(r(n(s(i(t(e)))))));case 9:return l(a(o(r(n(s(i(t(e))))))));case 10:return d(l(a(o(r(n(s(i(t(e)))))))))}}i.d(t,{Sg:()=>s,cp:()=>n});const n=function(e,t,i,s,n,r,o,a,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return i(t(e.apply(this,arguments)))};case 4:return function(){return s(i(t(e.apply(this,arguments))))};case 5:return function(){return n(s(i(t(e.apply(this,arguments)))))};case 6:return function(){return r(n(s(i(t(e.apply(this,arguments))))))};case 7:return function(){return o(r(n(s(i(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(r(n(s(i(t(e.apply(this,arguments))))))))};case 9:return function(){return l(a(o(r(n(s(i(t(e.apply(this,arguments)))))))))}}}},8564:(e,t,i)=>{"use strict";i.d(t,{M:()=>o});var s=i(8036),n=i(6300),r=i(2488);class o{constructor(e){this.length=0,this.keys=[],this.values=[],(0,r.Y3)(e)||(0,s.forEach)(e,(e=>this.put(e[0],e[1])))}contains(e){return(0,s.indexOf)(this.keys,e)>-1}get(e){const t=(0,s.indexOf)(this.keys,e);return t>-1?(0,n.sx)(this.values[t]):n.MB}put(e,t){const i=(0,s.indexOf)(this.keys,e);if(i>-1){const e=this.values[i];return this.values[i]=t,(0,n.sx)(e)}return this.keys.push(e),this.values.push(t),this.length=this.values.length,n.MB}remove(e){const t=(0,s.indexOf)(this.keys,e);if(t>-1){const e=this.values[t];return this.keys.splice(t,1),this.values.splice(t,1),this.length=this.values.length,(0,n.sx)(e)}return n.MB}clear(){this.keys.splice(0,this.length),this.values.splice(0,this.length),this.length=0}size(){return this.length}}},392:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s});const s={bimap:(e,t)=>([i,s])=>[e(i),t(s)],fstMap:e=>([t,i])=>[e(t),i],sndMap:e=>([t,i])=>[t,e(i)],biforeach:(e,t)=>([i,s])=>{e(i),t(s)},fstForeach:e=>([t])=>e(t),sndForeach:e=>([,t])=>e(t),zip:([[e,t],[i,s]])=>[[e,i],[t,s]]}},1040:(e,t,i)=>{"use strict";i.d(t,{c:()=>a});var s=i(1228),n=i(6300),r=i(6556),o=i(1476);const a=new r.cp("https://s8t.teads.tv/logs/format/http-source",20,o.E.isQA?"HEAD#a04c753cc":"1342",n.MB,{getSamplingThreshold:r.EB,sendLog:r.iM,getFullContext:s.getFullContext,isHeaderBiddingTag:()=>!1})},1068:(e,t,i)=>{"use strict";var s=i(4040);const n=window.teads||{};n.START_TIME=n.START_TIME||(0,s.k)(),n.FULL_LOGS=n.FULL_LOGS||[],n.HAS_DEBUG_LOGS=n.HAS_DEBUG_LOGS||!1,n.CONTEXT_IS_INITIALIZED=!1,n.WIGO_DEBUG_KEY=n.WIGO_DEBUG_KEY||null,window.teads=n},5764:(e,t,i)=>{"use strict";i(1068);var s=i(8036),n=i(1228),r=i(6932),o=i(7404),a=i(924),l=i(6040),d=i(6084),c=i(8520);n.init();const h=window.teads||{};h.ArrayHelper=s,h.Context=n,h.Dom=r,h.HTMLHelper=o,h.Random=a,h.StringHelper=l,h.Utils=d,h.Uuid=c,window.teads=h},5072:(e,t,i)=>{"use strict";i.d(t,{A:()=>r,E:()=>n});var s=i(6300);const n=e=>{switch(e){case 0:return(0,s.sx)(!1);case 11:case 12:return(0,s.sx)(!0);default:return s.MB}},r=e=>e.map((e=>e?"1":"0")).getOrValue("")},6896:(e,t,i)=>{"use strict";i.d(t,{m:()=>n});var s=i(6084);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});const n=function(e,t,...i){if((0,s.isNative)(e.bind))return e.bind(t,...i);const n=s.noop,r=function(...s){return e.apply(this instanceof n?this:t,i.concat(s))};return n.prototype=e.prototype,r.prototype=new n,r}},4080:(e,t,i)=>{"use strict";i.d(t,{O0:()=>n,QD:()=>r,sD:()=>o});var s=i(8036);const n=e=>(0,s.includes)([36,37,38,39],e),r=e=>(0,s.includes)([25],e),o=e=>(0,s.includes)([22,23],e)},8248:(e,t,i)=>{"use strict";i.d(t,{Sg:()=>a,WM:()=>r,aK:()=>s,kL:()=>n,tX:()=>o});const s=new RegExp("/videoplayback/id/(\\w+)/itag/"),n={xs:{className:"xs-screen",size:480},sm:{className:"sm-screen",size:640}},r=0,o=2147483647,a=[125,128]},5880:(e,t,i)=>{"use strict";i.d(t,{uC:()=>Ns,IN:()=>Ms,YN:()=>Bs,Yd:()=>Fs,uK:()=>Ds});var s={};i.r(s),i.d(s,{abort:()=>li,canplay:()=>di,canplaythrough:()=>ci,durationchange:()=>hi,emptied:()=>ui,encrypted:()=>pi,ended:()=>gi,error:()=>mi,interruptbegin:()=>fi,interruptend:()=>vi,loadeddata:()=>Ai,loadedmetadata:()=>bi,loadstart:()=>yi,pause:()=>wi,play:()=>Ei,playing:()=>Ci,progress:()=>Ii,ratechange:()=>Si,seeked:()=>Ti,seeking:()=>ki,stalled:()=>Pi,suspend:()=>xi,timeupdate:()=>Li,volumechange:()=>_i,waiting:()=>Oi});var n={};i.r(n),i.d(n,{TEMPLATE:()=>ns,expandTemplate:()=>rs,inread:()=>os});var r={};i.r(r),i.d(r,{AdChoices:()=>Os,Bench:()=>Cs,ClickThrough:()=>Ss,Extensions:()=>ks,Responsive:()=>Ps,Tracker:()=>_s});var o=i(7264),a=i(8036),l=i(6300),d=i(6716),c=i(480),h=i(6084),u=i(1476),p=i(4616),g=i(8576),m=i(1228),f=i(6932),v=i(4092),A=i(7404),b=i(920),y=i(6040),w=i(4456),E=i(2304),C=i(2488);class I{constructor(e,t,i){if(this.win=e,this.onVisible=t,this.onHidden=i,this.prefixes=["","webkit","ms","moz"],this.props=["VisibilityState","visibilitychange","Hidden"],this.isInitialState=!0,this.enabled=!0,this.isAmpVisible=!0,this.windows=[],I.logger.debug("init"),this.eventListenerManager=new v.C,m.isAmp()){I.logger.debug("Init AMP visibility plugin");let e=e=>{window.context&&(window.context.hidden&&this.isAmpVisible?(I.logger.debug("AMP visibility, window is hidden, call hidden callback"),this.isAmpVisible=!1,this.onHiddenCallback()):window.context.hidden||this.isAmpVisible||(I.logger.debug("AMP visibility, window is visible, call visibile callback"),this.isAmpVisible=!0,this.onVisibleCallback()))};this.eventListenerManager.add("amp:visibilitychange",window,e)}else if(m.isIABSafeFrame()){let e,t=!0;this.intervalIABSafeFrame=setInterval((()=>{e=this.isVisible(),e&&!t?(t=!0,this.onVisibleCallback()):!e&&t&&(t=!1,this.onHiddenCallback())}),500)}else this.prefix=this.getPrefix(),this.addWindow(this.win),this.visibleWindow=this.win}static listenWindow(e,t,i){return new I(e,t,i)}destroy(){try{if(m.isAmp())return void this.eventListenerManager.remove("amp:visibilitychange");m.isIABSafeFrame()&&clearInterval(this.intervalIABSafeFrame),clearInterval(this.intervalFocus),this.eventListenerManager.removeAll(),a.forEach(this.windows,(e=>{e.focus(),this.removeWindow(e,!1)})),I.logger.debug("destroy")}catch(e){I.logger.error("Visibility could not be fully destroyed.",e)}finally{this.disable(),this.windows=[]}}enable(){this.enabled=!0}disable(){this.enabled=!1}isEnabled(){return this.enabled}isVisible(){let e;if(m.isAmp())e=this.isAmpVisible;else if(m.isIABSafeFrame()){const t=m.getIABSafeFrameWindow();e=!(0,C.Y3)(t)&&t.$sf.ext.winHasFocus?t.$sf.ext.winHasFocus():!document.hidden}else e=!!this.visibleWindow;return e}addWindow(e){-1===a.indexOf(this.windows,e)&&(this.windows.push(e),this.addListener(e,(()=>this.setWindowVisible(e)),(()=>this.setWindowHidden(e))))}removeWindow(e,t=!0,i=!0){if(a.indexOf(this.windows,e)>-1){var s=this.isVisible();i&&this.windows.splice(a.indexOf(this.windows,e),1),t&&s&&!this.isVisible()&&this.onHiddenCallback()}}getWindows(){return this.windows}addListener(e,t,i){try{const r=e.document;if(this.prefixesSupported(r)){const e=()=>{r[this.getPrefixedMethodName(this.props[2])]?i():t()};this.eventListenerManager.add(this.getPrefixedMethodName(this.props[1]),r,e)}else if(r.hasFocus)I.logger.debug("Add listener on hasFocus method with an interval of 100ms"),clearInterval(this.intervalFocus),this.intervalFocus=setInterval((()=>{r.hasFocus()?t():i()}),100);else{const r=A.findAllWindows(this.win.document.body,!0);a.forEach(r,(e=>{this.addWindow(e)})),I.logger.debug("Add listener on focus and blur events");var s=e=>{I.logger.debug("Exec callback visible"),t()},n=t=>{I.logger.debug("Exec callback hidden"),e===t.target&&i()};e.tt_visibility_visible=s,e.tt_visibility_hidden=n,e.hasOwnProperty("onpageshow")&&(this.eventListenerManager.add("pageshow",e,(e=>{I.logger.debug("pageshow event received"),s()})),this.eventListenerManager.add("pagehide",e,(e=>{I.logger.debug("pagehide event received"),n(e)}))),this.eventListenerManager.add("focus",e,(e=>{I.logger.debug("focus event received"),clearTimeout(this.eventTimeout),s()})),this.eventListenerManager.add("blur",e,(e=>{I.logger.debug("blur event received"),this.eventTimeout=setTimeout((()=>{n(e)}),10)}))}}catch(e){}}setWindowVisible(e){this.isInitialState||this.isVisible()||(this.visibleWindow=e,I.logger.debug("onVisible callback exec"),this.onVisibleCallback())}setWindowHidden(e){this.isInitialState=!1,m.isIABSafeFrame()&&this.isVisible()||this.isVisible()&&(this.visibleWindow=null,I.logger.debug("onHidden callback exec"),this.onHiddenCallback())}onVisibleCallback(){this.enabled&&this.onVisible()}onHiddenCallback(){this.enabled&&this.onHidden()}getPrefixedMethodName(e,t){return l.cb.fromNullable(t).orElse((()=>l.cb.fromNullable(this.prefix))).match({some:t=>t+e,none:()=>e.toLowerCase()})}getPrefix(e){e||(e=window.document);for(let t=0,i=this.prefixes.length;t<i;t++){const i=this.getPrefixedMethodName(this.props[2],this.prefixes[t]);if(null!==e[i]&&void 0!==e[i])return this.prefixes[t]}}prefixesSupported(e){if(m.isDesktop())return!1;let t=!1;return a.forEach(this.props,(i=>{t=t||this.getPrefixedMethodName(i,this.prefix)in e})),t}}I.logger=new c.Y("Visibility");var S=i(3588),T=i(4080);const k="{{",P="}}";function x(e,t){if(t)for(var i in t)e=e.replace(new RegExp(k+i+P,"g"),t[i]);return e}class L{constructor(e,t){this.className=e,this.css=t}initElement(){this.element=document.createElement("div"),this.element.className=this.className,this.element.style.setProperty("margin-bottom","0","important"),this.element.innerHTML=this.getInnerHtml()}getElement(){return this.element}getHTML(){let e=this.getInnerHtml();if(e)return`<div class="${this.className}">${e}</div>`}getCSS(){return x(this.css,{assetsPath:u.E.assetsUrl})}getInnerHtml(){return this.isEnabled()?this.innerHTML:""}hide(){this.element&&this.element.style.setProperty("display","none")}show(){this.element&&this.element.style.setProperty("display","block")}}var _=i(6896),O=i(8680),V=i.n(O),R=i(5298),D=i.n(R),N=i(3068),M=i.n(N),B=(i(3044),i(1884)),F=i.n(B),U=i(8224),W=i.n(U),H=(i(6148),i(2296)),j=i.n(H),z=i(9740),G=i.n(z),Y=i(9548);class $ extends L{constructor(e){super("teads-ui-components-adchoices",M()),this.getVpaidAd=e,this.innerHTML="<span>AdChoices</span>",this.initElement(),m.isMobile()||(f.addEventListener("mouseover",this.getElement(),(0,_.m)(this.onMouseOver,this)),f.addEventListener("mouseout",this.getElement(),(0,_.m)(this.onMouseOut,this))),f.addEventListener("click",this.getElement(),(0,_.m)(this.onClick,this))}onMouseOver(){A.addClass(this.getElement(),"expanded")}onMouseOut(){A.removeClass(this.getElement(),"expanded")}onClick(){this.getVpaidAd().forEach((e=>e.dispatchCustomEvent(Y.c.AdChoicesClickRequest)))}isEnabled(){return!0}}class q extends L{constructor(e){super("teads-ui-components-hpl",F());const t=e.match({some:e=>`&auctid=${e}`,none:()=>""});this.innerHTML=`<a href="https://t.teads.tv/track?action=hpl-register${t}"></a>`,this.initElement()}isEnabled(){return!0}}class K extends L{constructor(e){super("teads-ui-components-credits",V()),this.config=e;let t=this.config.getText().replace(/\[([^\]]*)\]/g,'<span class="teads-ui-components-credits-colored">$1</span>'),i=this.config.getLink()||"https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads";this.innerHTML=`<a href="${i}" rel="nofollow" target="_blank">${t}</a>`,this.initElement()}isEnabled(){return this.config.isEnabled()}}class Q extends L{constructor(e){super("teads-ui-components-label",D()),this.label=e,this.innerHTML=this.label.getText(),this.initElement()}isEnabled(){return this.label.isEnabled()}}class X extends L{constructor(){super("close-button icon-close",""),this.WIDTH_WHEN_VISIBLE=11,this.eventListenerManager=new v.C,this.innerHTML="",this.initElement(),this.eventListenerManager.add("click",this.getElement(),(e=>this.onClick(e)))}isEnabled(){return!0}hide(){this.element&&this.element.style.setProperty("width","0")}show(){this.element&&this.element.style.setProperty("width",`${this.WIDTH_WHEN_VISIBLE}px`)}onClick(e){(0,h.isFunction)(this.onClickAction)&&this.onClickAction()}}var Z=i(5696);function J(e){const t=Number(e.getAdDuration()),i=e.getAdRemainingTime()>0?e.getAdRemainingTime():t;return t>0?t-i:0}function ee(e){return!(e.getAdVolume()>0)}var te=i(8172);const ie="teads-ui-component-",se="main-container",ne="layout-video-component";class re{constructor(e,t,i,s,n){if(this.ui=e,this.element=t,this.vpaid=i,this.config=s,this.globalVpaidEventHandler=n,this.eventHandler=new te.c,this.showOnVideoStart=!0,this.isCountdownEnded=!1,s.style){var r=t.getAttribute("style");t.setAttribute("style",(r?r+";":"")+s.style)}let o=new RegExp(ie+"([a-z]*)"),a=t.className.match(o);this.id=a&&a[1]?a[1]:"",this.logger=new c.Y("teads.ui.Component"+(this.id?"."+this.id:"")),t.style.zIndex||t.style.setProperty("z-index","2"),this.hide(),this.vpaid.subscribe((()=>{this.onVideoStart()}),Z.c.AdVideoStart);const l=s.startOffset;if(!(0,C.Y3)(l)&&l>0){this.showOnVideoStart=!1;const e=()=>{J(this.vpaid)>=l&&(this.vpaid.unsubscribe(e,Z.c.AdRemainingTimeChange),this.isCountdownEnded=!0,this.isEnabled()&&this.show())};this.vpaid.subscribe(e,Z.c.AdRemainingTimeChange)}else this.isCountdownEnded=!0;this.bindClick()}init(){}setShowOnVideoStart(e){this.showOnVideoStart=e}getShowOnVideoStart(){return this.showOnVideoStart}getConfig(){return this.config}isEnabled(){return!this.config.disable}getElement(){return this.element}show(){this.isCountdownEnded&&(A.removeClass(this.getElement(),"hide"),A.addClass(this.getElement(),"show"))}hide(){A.removeClass(this.getElement(),"show"),A.addClass(this.getElement(),"hide")}isVisible(){return this.getElement().className.indexOf("show")>-1}getVpaid(){return this.vpaid}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}getOverridenEvents(){return[]}getOverridenMethods(){return[]}restoreOnClickAction(){}onMethod(e,t=[]){}onOverridenMethod(e,t=[]){}remove(){l.cb.fromNullable(this.getElement().parentNode).forEach((e=>e.removeChild(this.getElement())))}onVideoStart(){this.showOnVideoStart&&this.show()}dispatchVpaidEvent(e,t){if(this.globalVpaidEventHandler)try{this.globalVpaidEventHandler({type:e,data:t})}catch(i){this.logger.error("error calling dispatchVpaidEvent "+e,t)}else this.logger.error("no globalVpaidEventHandler given. Dispatch "+e+" failed",t)}bindClick(){f.addEventListener("click",this.getElement(),(e=>{this.onClick(e)}))}onClick(e){this.dispatchUiEvent(this.eventName)}dispatchUiEvent(e){e&&(this.logger.info("dispatch UI event "+e),this.dispatchVpaidEvent(e))}}class oe extends re{constructor(){super(...arguments),this.lastVolume=1}init(){this.isMuted=ee(this.vpaid),this.eventName=Y.c.SoundToggleRequest,this.vpaid.subscribe((()=>{this.isMuted=ee(this.vpaid),this.onMuteChange()}),Z.c.AdStarted),this.vpaid.subscribe((()=>{this.isMuted=ee(this.vpaid)}),Z.c.AdVideoStart),this.vpaid.subscribe((()=>{this.hide()}),Z.c.AdStopped),this.ui.subscribe((()=>{this.hide()}),Y.c.EndscreenInit),this.vpaid.subscribe((()=>{(!this.isMuted&&ee(this.vpaid)||this.isMuted&&!ee(this.vpaid))&&(this.lastVolume=ee(this.vpaid)?this.lastVolume:this.vpaid.getAdVolume(),this.isMuted=ee(this.vpaid),this.onMuteChange())}),Z.c.AdVolumeChange),this.onMuteChange(),super.init()}onMuteChange(){A[ee(this.vpaid)?"addClass":"removeClass"](this.getElement(),"muted")}setAdVolume(){this.vpaid.setAdVolume(this.isMuted?this.lastVolume:0)}onClick(e){super.onClick(e),this.setAdVolume(),this.isMuted=!this.isMuted,this.onMuteChange()}}class ae{}ae.OFF="icon-muteoff",ae.ON="icon-muteon";class le extends L{constructor(){super("teads-ui-components-smart-header",j()),this.isMuted=!0,this.eventListenerManagerAdChoices=new v.C,this.eventListenerManagerSound=new v.C,this.innerHTML=G()}init(e,t){this.vpaidAd=e,this.volumeController=t,this.initElement(),this.hide(),this.smartCloseButton=new X,this.closeButtonContainer=this.element.getElementsByClassName("close-button-smart")[0],this.closeButtonContainer.appendChild(this.smartCloseButton.getElement()),this.hideCloseButton();const i=this.element.getElementsByClassName("adChoices-button-smart")[0];this.eventListenerManagerAdChoices.add("click",i,(()=>this.onClickAdChoicesButton())),this.smartSoundButton=this.element.getElementsByClassName("sound-button-smart")[0],this.eventListenerManagerSound.add("click",this.smartSoundButton,(()=>this.onClickSoundButton())),this.vpaidAd.subscribe((()=>this.onVolumeChange()),Z.c.AdVolumeChange)}showCloseButton(){this.closeButtonContainer.style.setProperty("display","inline-block"),w.ie((()=>this.smartCloseButton.show()))}hideCloseButton(){this.closeButtonContainer.style.setProperty("display","none"),this.smartCloseButton.hide()}isEnabled(){return!0}toggleSoundButtonIcon(){const e=this.smartSoundButton.firstElementChild,t=this.isMuted?ae.OFF:ae.ON,i=this.isMuted?ae.ON:ae.OFF;(0,A.replaceClass)(e,t,i)}onClickSoundButton(){this.volumeController.toggleVolume()}onClickAdChoicesButton(){this.vpaidAd.dispatchCustomEvent(Y.c.AdChoicesClickRequest)}onVolumeChange(){this.isMuted=ee(this.vpaidAd),this.toggleSoundButtonIcon()}}class de{constructor(e){this.components=e}getComponent(e){return this.components.hasOwnProperty(e)?this.components[e]:null}getComponents(){return this.components}showComponent(e){this.components.hasOwnProperty(e)&&this.components[e].show()}hideComponent(e){this.components.hasOwnProperty(e)&&this.components[e].hide()}showAllComponents(){for(let e in this.components)this.components.hasOwnProperty(e)&&this.components[e].show()}hideAllComponents(){for(let e in this.components)this.components.hasOwnProperty(e)&&this.components[e].hide()}}var ce=i(9280),he=i.n(ce),ue=i(2440),pe=i.n(ue);const ge="teads-format-css";function me(e,t,i){l.cb.fromNullable(null==t?void 0:t.document).forEach((t=>{if(!t.getElementById(i)){const s=x(e,{assetsPath:u.E.assetsUrl}),n=t.createElement("style");n.setAttribute("id",i),n.setAttribute("class","teads-inline-style"),n.appendChild(t.createTextNode(s)),t.head.appendChild(n)}}))}var fe=i(5351);const ve=[{name:"DoubleVerify",domain:/cdn\.doubleverify\.com/,appendRule:(e,{playerContainer:t})=>{t.parentElement.appendChild(e)}},{name:"ComScore",domain:/sb\.voicefive\.com/,appendRule:(e,{playerContainer:t})=>{t.insertBefore(e,t.firstChild)}},{name:"IAS",domain:/pixel\.adsafeprotected\.com/,appendRule:(e,{parentContainer:t})=>{t.insertBefore(e,t.firstChild)}},{name:"MOAT",domain:/\.moatads\.com/,appendRule:(e,{playerContainer:t})=>{t.insertBefore(e,t.firstChild)}}];let Ae;const be=()=>{if(void 0!==Ae)return Ae;if("undefined"==typeof DOMParser||"function"!=typeof DOMParser)Ae=!1;else{const e=new DOMParser;try{const t=e.parseFromString("<div>Hello</div>","text/html");Ae="DIV"===t.body.firstElementChild.nodeName&&"Hello"===t.body.firstElementChild.innerHTML}catch(e){Ae=!1}}return Ae},ye=(e,{onEnterElement:t})=>{if(!0!==t(e))for(let i=e.firstElementChild;i;i=i.nextElementSibling)ye(i,{onEnterElement:t})},we=e=>{const t=e.getAttribute("src");return!("SCRIPT"!==e.nodeName||!t||!a.some(ve,(e=>e.domain.test(t))))},Ee=e=>t=>e.parseFromString((e=>`<div>${e}</div>`)(t),"text/html").body.firstElementChild;class Ce{constructor(e,t,i,s=l.MB){this.sumologicLogger=e,this.connectionType=t,this.win=i,this.containers=s,this.thresholdReached=!1,this.thresholdReachedCallbacks=[],be()}appendViewabilityTags(e,t){a.forEach(e,(e=>{this.containers.match({some:t=>{var i;(i=e.provider,a.find(ve,(e=>e.name===i))).appendRule((e=>{const t=document.createElement("script");for(let i=0;i<e.attributes.length;i++){const{name:s,value:n}=e.attributes[i];t.setAttribute(s,n)}return t})(e.script),t)},none:()=>this.sumologicLogger.error("ViewabilityTags.appendViewabilityTags called with no containers")})}))}getCreativeTag(e,t=l.MB){if(be()&&this.connectionType.isDisplay()){(e=>{const t=new DOMParser,i=Ee(t)(e);a.forEach(((e,t)=>{const i=[];return ye(e,{onEnterElement:e=>{if(t(e))return i.push(e),!0}}),i})(i,we),(e=>{(new Image).src=e.getAttribute("src")}))})(e);const{creative:i,viewabilityTags:s}=(e=>{const t=new DOMParser,i=Ee(t)(e),s=a.map(((e,t)=>{const i=[];return ye(e,{onEnterElement:e=>{if(t(e))return i.push(e),!0}}),a.forEach(i,(e=>{e.parentElement&&e.parentElement.removeChild(e)})),i})(i,we),(e=>{const t=e.getAttribute("src"),i=(e=>a.find(ve,(t=>t.domain.test(e))))(t);return{provider:i.name,source:t,script:e}}));return{creative:i.innerHTML,viewabilityTags:s}})(e);return this.onceThresholdReached((()=>this.appendViewabilityTags(s,t))),i}return e}onceThresholdReached(e){this.thresholdReached?e():this.thresholdReachedCallbacks.push(e)}onPercentageVisibilityChange(e){this.thresholdReached||.25<=e&&this.resolveThresholdReach()}onScroll(){this.thresholdReached||this.containers.match({some:({playerContainer:e})=>{const t=(0,A.getPercentageInView)({element:e,elementAncestors:(0,A.findParentElements)(e),elementClientRect:(0,f.getBoundingClientRect)(e),mainWindow:this.win,elementHeight:(0,f.getSize)(e).height,allowNegative:!0});this.onPercentageVisibilityChange(t)},none:()=>this.sumologicLogger.error("ViewabilityTags.onScroll called with no containers")})}resolveThresholdReach(){!0!==this.thresholdReached&&(this.thresholdReached=!0,a.forEach(this.thresholdReachedCallbacks,(e=>e())),this.thresholdReachedCallbacks=[])}}class Ie{constructor(){this.lastUserInteractionSound=0,this.cursorCoords={x:0,y:0},this.currentVolume=0,this.muteCallbacks=[],this.unmuteCallbacks=[],this.eventListenerManager=new v.C}init(e){this.abstractFormat=e,this.vpaidAd=e.getVpaidAd(),this.formatConfig=e.formatConfig,this.formatConfig.soundStart.isMute()?this.hasStarted=!1:this.formatConfig.soundStart.isUnmute()?this.hasStarted=!0:this.formatConfig.soundStart.isCountdown()&&(this.hasStarted=!1)}getVolume(){return-1===this.vpaidAd.getAdVolume()?this.currentVolume:this.vpaidAd.getAdVolume()}setVolume(e){this.getVolume()!==e&&(this.currentVolume=e,this.vpaidAd.setAdVolume(e))}toggleVolume(){if(this.getVolume()>0)this.mute(),this.lastUserInteractionSound=1,a.forEach(this.muteCallbacks,(e=>e()));else{let e=this.formatConfig.volume.getMain();this.setVolume(e),this.lastUserInteractionSound=2,a.forEach(this.unmuteCallbacks,(e=>e()))}}userAlreadyInteracted(){return 0!==this.lastUserInteractionSound}startAt(e){let t=()=>{this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()>=e&&(this.vpaidAd.unsubscribe(t,Z.c.AdRemainingTimeChange),this.hasStarted||(this.hasStarted=!0,this.setVolume(this.formatConfig.volume.getMain())))};this.vpaidAd.subscribe(t,Z.c.AdRemainingTimeChange)}mute(){this.setVolume(0)}isMuted(){return 0===this.getVolume()}onAdVideoStart(){this.formatConfig.soundStart.isUnmute()?this.setVolume(this.formatConfig.volume.getMain()):this.formatConfig.soundStart.isCountdown()?this.startAt(this.formatConfig.soundStart.getCountdown()):this.setVolume(0)}replay(){let e=(0,f.getBoundingClientRect)(this.abstractFormat.parentContainer);(0,m.isDesktop)()&&(this.cursorCoords={x:Math.floor(e.left+e.width/2),y:Math.floor(e.top+e.height/2)},this.eventListenerManager.add("mousemove",this.abstractFormat.placement.placementConfig.parentWindow.getWindow().document.body,(e=>{this.cursorCoords={x:e.clientX,y:e.clientY}})))}startInView(){this.userAlreadyInteracted()||this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&(this.formatConfig.soundStart.isCountdown()||this.formatConfig.soundStart.isUnmute())&&this.setVolume(this.formatConfig.volume.getMain())}endInView(){!this.userAlreadyInteracted()&&this.formatConfig.soundMute.isThreshold()&&this.hasStarted&&this.setVolume(0)}addMuteCallback(e){a.indexOf(this.muteCallbacks,e)<0&&this.muteCallbacks.push(e)}addUnmuteCallback(e){a.indexOf(this.unmuteCallbacks,e)<0&&this.unmuteCallbacks.push(e)}}var Se,Te=i(7064),ke=i(188),Pe=i(9516),xe=i(7236),Le=i(708),_e=i(1776),Oe=i(9168),Ve=i(6388),Re=i(8536),De=i(2456);!function(e){e.AD_VERIFICATIONS="AdVerifications",e.MOAT_JS="MoatJs",e.VISIBILITY="Visibility",e.HTML="Html",e.IFRAME="Iframe",e.SCRIPT="Script",e.ALENTY="Alenty",e.TEADS_IAS="teads-IAS",e.TEADS_CONTEXT="teads-context"}(Se||(Se={}));var Ne,Me=i(41);!function(e){e[e.JS=2]="JS",e[e.POSTMESSAGE=3]="POSTMESSAGE"}(Ne||(Ne={}));const Be=Ne;let Fe=8e3,Ue=1e4;var We=i(896);function He(e,t){return function(...i){var s=i[0];switch(t){case Z.c.AdClickThru:s={url:i[0],id:i[1],playerHandles:i[2]};break;case Z.c.AdError:s={message:i[0],id:i[1]}}e({type:t,data:s})}}function je(e,t){switch(e){case"initAd":if(t>=We.c.LOADING)throw"VPAID already initalized, cannot call initAd twice";break;case"startAd":if(t<We.c.LOADED)throw"VPAID not started, use initAd, and wait for AdLoaded event before call startAd method";if(t>=We.c.STARTING)throw"Ad already started, cannot call startAd twice"}}const ze=new c.Y("VPAIDJSGuard");class Ge{getVPAID(){return this.vpaid}initAd(e,t,i,s,n,r){this.vpaidguard("initAd",[e,t,i,s,n,r])}skipAd(){this.vpaidguard("skipAd")}resizeAd(e,t,i="normal"){this.vpaidguard("resizeAd",[e,t,i])}handshakeVersion(e){return this.vpaidguard("handshakeVersion",[e])}startAd(){this.vpaidguard("startAd",[])}stopAd(){this.vpaidguard("stopAd",[])}pauseAd(){this.vpaidguard("pauseAd",[])}resumeAd(){this.vpaidguard("resumeAd",[])}expandAd(){this.vpaidguard("expandAd",[])}collapseAd(){this.vpaidguard("collapseAd",[])}getAdLinear(){return this.vpaidguard("getAdLinear",[])}getAdWidth(){return this.vpaidguard("getAdWidth",[])}getAdHeight(){return this.vpaidguard("getAdHeight",[])}getAdExpanded(){return this.vpaidguard("getAdExpanded",[])}getAdSkippableState(){return this.vpaidguard("getAdSkippableState",[])}getAdRemainingTime(){return this.vpaidguard("getAdRemainingTime",[])}getAdDuration(){return this.vpaidguard("getAdDuration",[])}getAdVolume(){return this.vpaidguard("getAdVolume",[])}getAdCompanions(){return this.vpaidguard("getAdCompanions",[])}getAdIcons(){return this.vpaidguard("getAdIcons",[])}setAdVolume(e){return this.vpaidguard("setAdVolume",[e])}subscribe(e,t,i){this.vpaidguard("subscribe",[e,t,i])}unsubscribe(e,t){this.vpaidguard("unsubscribe",[e,t])}setVPAID(e){this.vpaid=e}vpaidguard(e,t=[]){try{return this.callVPAIDMethod(e,t)}catch(e){ze.error(`VPAID method guard error: "${e}"`)}}callVPAIDMethod(e,t=[]){return this.vpaid[e].apply(this.vpaid,t)}}class Ye extends Ge{constructor(){super(...arguments),this.status=We.c.READY,this.type=Be.JS,this.environmentVars=l.cb.empty(),this.timeoutId={},this.dispatchedEvents={},this.wigo=l.cb.empty(),this.eventHandler=new te.c}static log(e){a.indexOf(Ye.hasLogged,e)<0&&(Ye.logger.info(e),Ye.hasLogged.push(e))}initAd(e,t,i,s,n="",r){try{je("initAd",this.status)}catch(e){return this.dispatchEvent(Z.c.AdLog,e)}this.status=We.c.LOADING,this.environmentVars=l.cb.fromNullable(r),super.initAd(e,t,i,s,n,r)}handleAdCallTimeout(e){const t=Fe-e,i=()=>{this.dispatchedEvents[Z.c.AdLoaded]||this.dispatchEvent(Z.c.AdError,{message:"Creative did not initiated after "+Fe+"ms (current status "+this.status+")",id:Me.C.GENERAL.id})};!this.timeoutId.initAd&&t>0?this.timeoutId.initAd=setTimeout(i,t):t<0&&i()}startAd(){try{je("startAd",this.status)}catch(e){return this.dispatchEvent(Z.c.AdLog,e)}this.status=We.c.STARTING,this.timeoutId.startAd=setTimeout((()=>{this.dispatchedEvents[Z.c.AdStarted]||this.dispatchEvent(Z.c.AdError,{message:"Creative did not start after 8000ms",id:Me.C.GENERAL.id})}),8e3),super.startAd()}stopAd(){this.status>We.c.STOPPING&&(this.status=We.c.STOPPING,this.clearAllTimeout(),this.timeoutId.stopAd=setTimeout((()=>{this.dispatchedEvents[Z.c.AdStopped]||(this.dispatchEvent(Z.c.AdLog,"Creative did not stop after 1000ms, force stop !"),this.dispatchEvent(Z.c.AdStopped))}),1e3),this.environmentVars.forEach((e=>l.cb.fromNullable(e.videoSlot).forEach((e=>e.volume=0)))),super.stopAd())}skipAd(){if(this.status>We.c.SKIPPING){this.status=We.c.SKIPPING,this.timeoutId.skipAd=setTimeout((()=>{this.status>=We.c.SKIPPING&&(this.dispatchEvent(Z.c.AdLog,"Creative did not skip after 1000ms, force skip !"),this.dispatchEvent(Z.c.AdSkipped),this.stopAd())}),1e3);try{super.skipAd()}catch(e){this.dispatchEvent(Z.c.AdLog,"SkipAd throw an exception "+e)}}}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}getAdWidth(){const e=this.vpaid.getAdWidth(),t=this.environmentVars.flatMap((e=>l.cb.fromNullable(e.slot).map((e=>e.offsetWidth))));return String(e).indexOf("%")>-1&&t.nonEmpty()?t.getOrValue(0):String(e).indexOf("px")?parseInt(String(e).replace("px",""),10):e}getAdHeight(){const e=this.vpaid.getAdHeight(),t=this.environmentVars.flatMap((e=>l.cb.fromNullable(e.slot).map((e=>e.offsetHeight))));return(String(e).indexOf("%")>-1||parseInt(String(e),10)<=0)&&t.nonEmpty()?t.getOrValue(0):String(e).indexOf("px")?parseInt(String(e).replace("px",""),10):e}setWigo(e){this.wigo=l.cb.fromNullable(e)}getTeadsEnvironmentVars(){return this.vpaid.getTeadsEnvironmentVars?this.vpaid.getTeadsEnvironmentVars():this.environmentVars}vpaidguard(e,t=[]){try{if(this.status!==We.c.REMOVED)return this.callVPAIDMethod(e,t)}catch(t){switch(e){case"initAd":case"startAd":this.dispatchEvent(Z.c.AdError,{message:"error call "+e+": "+t,id:Me.C.GENERAL.id});break;default:this.dispatchEvent(Z.c.AdLog,"error call "+e+": "+t)}Ye.logger.error(`vpaidguard -> vpaid creative threw an error for ${e}`,t)}}dispatchEvent(e,t){return this.handleVpaidEvent(new Z.c(e,t))}handleVpaidEvent(e){if(this.status===We.c.REMOVED)return;let t=[Z.c.AdLoaded,Z.c.AdStarted,Z.c.AdVideoStart,Z.c.AdVideoComplete,Z.c.AdSkipped,Z.c.AdStopped,Z.c.AdError];if(!(a.indexOf(t,e.type)>-1&&this.dispatchedEvents[e.type])){if(this.status>We.c.STOPPED)switch(e.type){case Z.c.AdLoaded:this.status=We.c.LOADED,this.clearTimeout("initAd"),Ye.log("AdLoaded - Response from initAd"),this.wigo.forEach((e=>e.valid(3,2)));break;case Z.c.AdStarted:this.status=this.status<We.c.STARTED?We.c.STARTED:this.status,this.clearTimeout("startAd"),Ye.log("AdStarted - Response from startAd"),this.wigo.forEach((e=>e.valid(3,3)));break;case Z.c.AdVideoStart:case Z.c.AdPlaying:this.status=We.c.PLAYING;break;case Z.c.AdPaused:this.status=We.c.PAUSED;break;case Z.c.AdVideoComplete:this.status=We.c.COMPLETE;break;case Z.c.AdSkipped:this.status=We.c.SKIPPED,this.clearAllTimeout();break;case Z.c.AdStopped:this.status=We.c.STOPPED,this.clearAllTimeout();break;case Z.c.AdError:Ye.logger.info("AdError - ",e.data),this.wigo.forEach((t=>t.valid(3,4,e.data,"error")))}this.dispatchedEvents[e.type]||(this.dispatchedEvents[e.type]=0),this.dispatchedEvents[e.type]++,this.eventHandler.handleEvent(e),e.type===Z.c.AdError&&this.stopAd()}}clearTimeout(e){this.timeoutId[e]&&clearTimeout(this.timeoutId[e])}clearAllTimeout(){for(let e in this.timeoutId)this.timeoutId.hasOwnProperty(this.timeoutId[e])&&this.clearTimeout(this.timeoutId[e])}}Ye.logger=new c.Y("vpaid.BaseVPAIDJSWrapper"),Ye.hasLogged=[];var $e=i(3720),qe=i(6712);const Ke=(e,t)=>t.reduce(((e,t)=>e+f.getBoundingClientRect(t.getElement()).height),0)+e;class Qe{constructor(e,t,i,s,n,r){this.placement=e,this.formatConfig=t,this.player=i,this.auctionId=s,this.viewerId=n,this.sumologicLogger=r,this.states={hasOpened:!1,isReady:!1,hasRequestedStartAd:!1,hasStarted:!1,hasStopped:!1,hasCompleted:!1,isReplay:!1,isPlaying:!1,isCollapsed:!1,shouldBePaused:!1},this.hasMoatExtension=!1,this.adWidth=0,this.adHeight=0,this.adDuration=-2,this.adRemainingTime=NaN,this.isVertical=!1,this.realVisibilityInterval=l.cb.empty(),this.wigo=l.cb.empty(),this.initAdTimingMark=l.cb.empty(),this.customTrackingsFromTtcAdded=!1,this.trackHeavyAdInterventionWarning=e=>{const{sumologicLogger:t,logger:i,auctionId:s,viewerId:n,slotType:r,placement:{key:o,wigo:a,pageId:l,pid:d,placementConfig:{headerBiddingProvider:c}},formatConfig:{portfolioItemId:h,insertionId:u,connectionId:p,adSourceId:g,dspCampaignId:m,dspCreativeId:f,scenarioId:v}}=this,{studioCreativeId:A}=(0,qe.o7)(o);(0,Re.eg)({sumologicLogger:t,wigo:a,logger:i,placementKey:o})({headerBiddingProvider:c,pageId:l,placementId:d,slotType:r,auctionId:s,viewerId:n,insertionId:u,connectionId:p,portfolioItemId:h,adSourceId:g,creativeId:String(this.linearAd.creativeId),dspCampaignId:m,dspCreativeId:f,scenarioId:v,studioCreativeId:A,errorCause:"HeavyAdIntervention "+e})},this.logger=new c.Y("format"),this.logger.debug("new",t.formatName.get()),this.linearAd=this.player?this.player.getLinearAd():null,this.hasMoatExtension=!!this.player&&this.player.hasMoatExtension(this.linearAd),Pe.mc(this.linearAd),this.slotType=this.placement.slotType,this.parentContainer=this.placement.getParentContainer(),this.playerContainer=this.placement.getPlayerContainer(),this.win=e.placementConfig.parentWindow.getWindow(),this.eventListenerManager=new v.C,this.volumeController=new Ie,this.viewabilityTagsHelper=new Ce(this.sumologicLogger,this.formatConfig.adType,this.win,(0,l.sx)({parentContainer:this.parentContainer,playerContainer:this.playerContainer})),this.initComponents(),this.vpaidApi=this.player.getConfig().vpaidApi}setWigo(e){this.wigo=l.cb.fromNullable(e)}getWigo(){return this.wigo.getOrNull()}initComponents(){if(!this.placement.getElectedSlot())return void this.logger.debug("Could not init components because no elected slot");const e=new Q(this.formatConfig.label),t=new K(this.formatConfig.credits),i=new q(this.auctionId),s={label:e,credits:t,honeyPotLink:i};if(this.shouldInstanciateSmartHeader()&&(s.smartHeader=new le),!this.placement.isSliderEnabled()){s.adChoices=new $((()=>l.cb.fromNullable(this.getVpaidAd())));const e=this.formatConfig.smartPosition.isTop()||this.formatConfig.smart6Behavior.isTop()||!this.formatConfig.label.isEnabled()?0:1;1===e&&this.playerContainer.parentNode.insertBefore(s.adChoices.getElement(),this.playerContainer),l.cb.fromNullable(this.player).forEach((t=>t.getConfig().adChoicesIconLocation=e))}this.components=new de(s),(e=>{for(const t in e)l.cb.fromNullable(e[t]).filter((e=>!!e.getHTML())).filter((e=>!!e.getCSS())).forEach((e=>me(e.getCSS(),(0,A.getWindow)(this.parentContainer),`teads-inline-${(0,y.rand)(5)}`)))})(s),e.getHTML()&&!this.placement.isSliderEnabled()&&this.playerContainer.parentNode.insertBefore(e.getElement(),this.playerContainer),t.getHTML()&&!this.placement.isSliderEnabled()&&this.playerContainer.parentNode.appendChild(t.getElement()),this.playerContainer.parentNode.appendChild(i.getElement()),this.placement.placementConfig.css.applyRulesOn(this.parentContainer)}getBrandingMode(){return this.brandingMode}getTemplateName(){throw new Error("getTemplateName must be implemented in child class")}getVpaidAd(){return this.vpaidAd}getVolumeController(){return this.volumeController}getFullscreenHelper(){return this.fullscreenHelper}exit(e){switch(this.vpaidAd&&this.vpaidAd.stopAd(),this.smartPositionHelper&&this.smartPositionHelper.disableBehavior(),this.eventListenerManager.removeAll(),this.scrollListener&&(0,_e.c)(this.scrollListener),this.vpaidApi&&this.vpaidApi.close(),this.responsive&&this.responsive.unsetResponsive(),this.parentContainer&&this.parentContainer.parentNode&&w.y2((()=>{this.parentContainer&&this.parentContainer.parentNode&&(this.parentContainer.parentNode.removeChild(this.parentContainer),this.unsetVisibility())}),2e3),e){case 4:this.logger.info("Format successfully exited after displaying an ad");break;case 5:this.logger.info("Format successfully exited without displaying an ad");break;case 6:this.logger.info("Format successfully exited because the VAST contains a MOAT extension while the player is hidden by CSS");break;case 1:this.logger.error("Format exited with an ad error");break;case 2:this.logger.error("Format exited due to resize denied on opening by AMP framework");break;case 3:this.logger.error("Format exited due to an exception thrown during replay");break;default:this.logger.warn("Format exited with unknown status")}if(window.location.hostname!==S.uu){let e=Te.Q1[this.formatConfig.formatName.get()];for(let t=0,i=e.length;t<i;t++)if(e[t]===this){e.splice(t,1);break}}m.isAmp()&&(5!==e?Pe.iE():this.placement.placementConfig.fallback.hasValue()||(Pe.iE(),Pe.GO())),m.isIABSafeFrame()&&Le.Yp()}getCurrentTime(){return this.adDuration>0&&this.adRemainingTime>=0?this.adDuration-this.adRemainingTime:0}getEnvironmentVars(){return l.cb.fromNullable(this.vpaidAd).flatMap((e=>e.getTeadsEnvironmentVars())).getOrValue({})}load(e,t){const i=e=>{this.logger.error("VPAID play:",e);const{cid:i,studioCid:s}=this.getCidAndStudioCid();this.sumologicLogger.error(`loading-mediafile cid=${i} scid=${s} ${(0,xe.q)(e)}`),t&&t(e)},s=(t,i)=>{this.vpaidAd=t,this.initAdConfig=i,e&&(this.formatConfig.callbacks.trigger("adAvailable"),e())},n=(0,T.QD)(this.formatConfig.portfolioItemId)?()=>!0:e=>this.placement.placementConfig.allowedRatio.mediafileRatioIsValid(e,De.cp.getRatio);!this.player&&e?e():this.mediafile?this.player.loadMediaFile(this.mediafile,s,i):this.player.loadOptimalMediaFile(s,i,n)}close(e){this.states.hasStopped||(this.states.hasStopped=!0,!this.states.hasOpened||b.uw(m.getIEVersion(),"9")||m.isAmp()||this.states.isCollapsed?(this.collapse(),this.exit(e)):(this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.parentContainer,(()=>this.exit(e))),this.collapse()))}collapse(){this.states.isCollapsed||(this.states.isCollapsed=!0,this.components.hideAllComponents(),this.formatConfig.animations.setCollapseDuration(this.parentContainer),this.parentContainer.style.setProperty("height","0"))}start(){this.customTrackingsFromTtcAdded||(this.customTrackingsFromTtcAdded=!0,this.addCustomTracking(window._ttc)),this.logger.debug("VPAID started",this.vpaidAd,this.initAdConfig),this.mediafile=this.player.getMediafile(),this.onVpaidReady(),((0,T.O0)(this.formatConfig.portfolioItemId)||this.formatConfig.friendly)&&((0,A.makeIframeIABFriendly)(this.vpaidAd.getContainer()),(0,A.makeIframeIABFriendly)(this.vpaidAd.getCreativeContainer())),this.initAdTimingMark=l.cb.of((0,g.kX)()),this.vpaidAd.initAd(this.initAdConfig.width,this.initAdConfig.height,this.initAdConfig.mode,this.initAdConfig.bitrate,this.initAdConfig.parameters)}onAdLoaded(){this.states.isReady=!0,function(e){const t=[];for(const i in e)e.hasOwnProperty(i)&&t.push(Object.assign({hostname:i},e[i]));window.teads.vastDomains=t}(function(e,t){const i={},s=(e,t)=>{i[e]||(i[e]={origins:[t],count:0}),i[e].count++,a.includes(i[e].origins,t)||i[e].origins.push(t)};a.forEach(e.mediaFiles,(e=>s((0,E.K0)(e.url).hostname,"mediafile"))),a.forEach(e.wrappers,(e=>s((0,E.K0)(e).hostname,"wrapperurl"))),e.url&&s((0,E.K0)(e.url).hostname,"vasturl");for(const t in e.tracking)e.tracking.hasOwnProperty(t)&&a.forEach(e.tracking[t],(e=>s((0,E.K0)(e.url).hostname,"tracking")));return a.forEach(e.extensions,(e=>{switch(e.type){case Se.MOAT_JS:s(("https:"===(0,h.getProtocol)()?"z":"js")+".moatads.com","extension");break;case Se.AD_VERIFICATIONS:const i=t.getPlugin("Extensions").retrieveCreativePrefetchAdVerificationScriptUrls(e);a.forEach(i,(({url:e})=>s((0,E.K0)(e).hostname,"extension")))}})),i}(this.linearAd,this.player)),m.isAmp()&&!Pe.kT()&&(Pe.kD(),Pe.eU(Ke(this.vpaidAd.getAdHeight(),[this.components.getComponent("label"),this.components.getComponent("credits")])||this.fitContainerToContent(!0),(e=>{if(e)this.initInternalResponsive();else{this.close(2),(0,_e.c)(this.scrollListener);const e="AMP resize open request denied";this.logger.info("AdLoaded",e),this.wigo.forEach((t=>t.valid(3,4,e,"error")))}}),(()=>{let e=window._teads_amp.change;return!(e.boundingClientRect.top>=e.rootBounds.height)}))),this.volumeController.mute(),this.updateAdSize(),this.vpaidAd.render(this.vpaidAd.getVPAID())}onAdVideoStart(){this.states.hasCompleted=!1,this.states.isPlaying=!0,this.volumeController.onAdVideoStart()}onAdStarted(){const e=performance.getEntries().find((e=>/\/page\/(\d+)\/tag$/.test(e.name)));e&&this.sumologicLogger.info(`page-tag-entry-duration ${e.duration}`,1e3),this.states.hasStarted=!0,this.vpaidApi.getStudioData()?this.brandingMode.deinit():this.brandingMode.init(),this.volumeController.mute(),this.updateAdSize(),this.states.shouldBePaused&&this.requestPauseAd()}onAdPaused(){this.states.isPlaying=!1}onAdPlaying(){this.states.isPlaying=!0}onAdStopped(){this.states.isPlaying=!1,this.close(4)}onAdSkipped(){this.collapse()}onAdVideoComplete(){this.states.hasCompleted=!0}onAdError(e){var t,i;const s=(0,C.ct)(e)?e:(0,xe.k)(e),n=null!==(i=null===(t=this.player.getLinearAd())||void 0===t?void 0:t.id)&&void 0!==i?i:-1,{cid:r,studioCid:o}=this.getCidAndStudioCid();this.sumologicLogger.error(`aderror aid=${n} cid=${r} scid=${o} ${s}`),this.logger.error("AdError: ",s),this.close(1)}onAdSizeChange(){this.updateAdSize()}onAdRemainingTimeChange(){this.adRemainingTime=this.vpaidAd.getAdRemainingTime()}onAdDurationChange(){this.adDuration=this.vpaidAd.getAdDuration(),this.onAdRemainingTimeChange()}onCollapseRequest(){this.formatConfig.callbacks.trigger("CollapseRequest"),this.collapse()}onSoundToggleRequest(){const e=this.getEnvironmentVars();e.videoSlot&&e.videoSlot.audio&&!e.videoSlot.audio.authorized?e.videoSlot.audio.authorizeAudio((()=>this.volumeController.toggleVolume())):this.volumeController.toggleVolume()}onReplayRequest(){this.replay()}onEndscreenInit(){this.getInViewState()||(this.logger.debug("The video completed but it's not in view, pause it."),this.requestPauseAd()),this.visibility&&!this.visibility.isEnabled()&&(this.visibility.enable(),this.visibility.isVisible()||this.onHidden())}onEarlyClick(){const{sumologicLogger:e,logger:t,auctionId:i,viewerId:s,slotType:n,placement:{key:r,wigo:o,pageId:a,pid:l,placementConfig:{headerBiddingProvider:d}},formatConfig:{portfolioItemId:c,insertionId:h,connectionId:u}}=this;(0,Re.yM)({sumologicLogger:e,wigo:o,logger:t,placementKey:r})({headerBiddingProvider:d,pageId:a,placementId:l,slotType:n,auctionId:i,viewerId:s,insertionId:h,connectionId:u,portfolioItemId:c,creativeId:String(this.linearAd.creativeId)})}onVisible(){if(this.logger.debug("Format is visible",this.playerContainer.id),!this.states.hasStopped&&this.states.hasOpened&&this.states.hasStarted){let e;e=this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?!this.getInViewState():!this.formatConfig.videoPause.isNo(),e||this.requestResumeAd(),this.logger.debug("onVisible mustPause",e)}}onHidden(){this.logger.debug("Format is hidden",this.playerContainer.id),this.states.hasStarted&&this.states.isPlaying&&(!this.formatConfig.videoPause.isNo()||this.states.hasCompleted?this.requestPauseAd():!this.formatConfig.soundMute.isNo()&&this.volumeController.getVolume()>0&&this.volumeController.mute())}onCreateWigoReport(e){try{const t=`${e}_${this.auctionId.getOrNull()}.json`;this.wigo.forEach((e=>e.saveVast(t))),Ve.c.debug.track(this.placement.key)("wigo-report-collector",{baseUrl:u.E.trackingUrl,referer:(0,Re.ID)(),queryParameters:{env:m.getEnv(),pageId:this.placement.pageId.toString(),pid:this.placement.pid.toString(),hb_provider:this.placement.placementConfig.headerBiddingProvider.getOrValue(""),auctid:this.auctionId.getOrValue((0,p.S)(""))},trackingUrl:l.MB},l.cb.of(`${t}`))}catch(e){this.sumologicLogger.info(`wigo report collector error  ${e}`,1)}}initInternalResponsive(e=!0){this.player&&this.vpaidAd&&(this.player.getPlugin("Responsive").deinit(),this.responsive=new fe.C(this),e&&this.responsive.resizeOnStart())}onVpaidReady(){m.isAmp()||this.initInternalResponsive(),this.isVertical=this.player.getMediafile().height>Qe.VERTICAL_MARGIN*this.player.getMediafile().width,this.volumeController.init(this);const e=(0,A.findTopWindow)(this.playerContainer);this.visibility=I.listenWindow(e,(()=>this.onVisible()),(()=>this.onHidden())),this.vpaidAd.subscribe((()=>this.onAdLoaded()),Z.c.AdLoaded),this.vpaidAd.subscribe((()=>this.onAdVideoStart()),Z.c.AdVideoStart),this.vpaidAd.subscribe((()=>this.onAdStarted()),Z.c.AdStarted),this.vpaidAd.subscribe((()=>this.onAdPaused()),Z.c.AdPaused),this.vpaidAd.subscribe((()=>this.onAdPlaying()),Z.c.AdPlaying),this.vpaidAd.subscribe((()=>this.onAdSizeChange()),Z.c.AdSizeChange),this.vpaidAd.subscribe((()=>this.onAdDurationChange()),Z.c.AdDurationChange),this.vpaidAd.subscribe((()=>this.onAdRemainingTimeChange()),Z.c.AdRemainingTimeChange),this.vpaidAd.subscribe((()=>this.onAdVideoComplete()),Z.c.AdVideoComplete),this.vpaidAd.subscribe((()=>this.onAdStopped()),Z.c.AdStopped),this.vpaidAd.subscribe((()=>this.onAdSkipped()),Z.c.AdSkipped),this.vpaidAd.subscribe((e=>this.onAdError(e)),Z.c.AdError),this.wigo.forEach((e=>e.settings.forEach((({reportEvent:e,reportName:t})=>this.vpaidAd.subscribe((()=>this.onCreateWigoReport(t)),e))))),this.vpaidAd.subscribe(this.trackHeavyAdInterventionWarning,$e.c.AdWarningHeavyAdIntervention),this.vpaidAd.subscribe((t=>{const i="HeavyAdIntervention "+t;this.wigo.forEach((e=>e.valid(3,4,i,"error"))),(0,E.i2)(e.location.href)?(this.scrollListener&&(0,_e.c)(this.scrollListener),this.clearRealVisibilityInterval(),this.unsetVisibility()):this.close(1)}),$e.c.AdRemovedHeavyAdIntervention);for(const e in Z.c)Z.c.hasOwnProperty(e)&&this.vpaidAd.subscribe((()=>{this.formatConfig.callbacks.trigger(e,this.volumeController,this.fullscreenHelper)}),e);this.linearAd.clickThrough&&this.linearAd.clickThrough.length&&this.vpaidAd.subscribe((()=>{this.onHidden()}),Z.c.AdClickThru),this.vpaidAd.subscribe((()=>this.onCollapseRequest()),Y.c.CollapseRequest),this.vpaidAd.subscribe((()=>this.onSoundToggleRequest()),Y.c.SoundToggleRequest),this.vpaidAd.subscribe((()=>this.onReplayRequest()),Y.c.ReplayRequest),this.vpaidAd.subscribe((()=>this.onEndscreenInit()),Y.c.EndscreenInit),this.vpaidAd.subscribe((()=>this.onEarlyClick()),Y.c.EarlyClickRequest),this.formatConfig.vtpEvent.getEvent()&&this.vpaidAd.subscribe((()=>this.onVtpEvent()),this.formatConfig.vtpEvent.getEvent())}triggerOnVtpEvent(){this.formatConfig.videoPause.setToNo(),this.states.isPlaying||this.requestResumeAd()}onVtpEvent(){if(!this.formatConfig.videoPause.isNo())if(this.formatConfig.vtpEvent.getEvent()===Z.c.AdRemainingTimeChange){const e=this.vpaidAd.getAdDuration(),t=this.vpaidAd.getAdRemainingTime(),i=Math.floor(e-t);!isNaN(i)&&i>0&&i>=this.formatConfig.vtpEvent.getOffset()&&this.triggerOnVtpEvent()}else this.triggerOnVtpEvent()}updateAdSize(){this.adWidth=this.vpaidAd.getAdWidth(),this.adHeight=this.vpaidAd.getAdHeight()}replay(){this.logger.debug("replay called");const{sumologicLogger:e,logger:t,auctionId:i,viewerId:s,slotType:n,placement:{key:r,wigo:o,pageId:a,pid:l,placementConfig:{headerBiddingProvider:d}},formatConfig:{portfolioItemId:c,insertionId:h,connectionId:u}}=this;(0,Re.iC)({sumologicLogger:e,wigo:o,logger:t,placementKey:r})({headerBiddingProvider:d,pageId:a,placementId:l,slotType:n,auctionId:i,viewerId:s,insertionId:h,connectionId:u,portfolioItemId:c}),this.sumologicLogger.info(`click-replay ${m.getContextSummary()}`,1),this.volumeController.replay();try{this.player.getPlugin("Responsive").unsetResponsive(),Ve.c.vast.resetTrackedEvents(this.placement.key),this.player.setLinearAd(this.linearAd),this.responsive&&this.responsive.unsetResponsive(),this.unsetVisibility(),this.states.isReady=!1,this.states.hasOpened=!0,this.states.hasRequestedStartAd=!1,this.states.hasStarted=!1,this.states.hasStopped=!1,this.states.hasCompleted=!1,this.states.isReplay=!0,this.vpaidAd=null,Ye.hasLogged=[],m.isDesktop()&&this.formatConfig.videoStart.isClick()&&(this.formatConfig.videoStart=new ke.c(ke.c.DEFAULT)),this.load((()=>this.start()))}catch(e){this.logger.error("Replay callback threw an exception",e),this.close(3)}}unsetVisibility(){this.visibility&&(this.visibility.destroy(),this.visibility=null)}isWindowVisible(){return m.isAmp()?!!this.visibility&&this.visibility.isVisible()&&Pe.kT():!this.visibility||!this.visibility.isEnabled()||this.visibility.isVisible()}isElementVisibleForMoat(){return!(!m.isAmp()&&!m.isIABSafeFrame())||(0,A.checkElementVisibility)(this.playerContainer,this.formatConfig.threshold.get()).fold((e=>{const{sumologicLogger:t,logger:i,auctionId:s,viewerId:n,slotType:r,placement:{key:o,wigo:a,pageId:l,pid:d,placementConfig:{headerBiddingProvider:c}},formatConfig:{portfolioItemId:h,insertionId:u,connectionId:p}}=this;return(0,Re.Mx)({sumologicLogger:t,wigo:a,logger:i,placementKey:o})({headerBiddingProvider:c,pageId:l,placementId:d,slotType:r,auctionId:s,viewerId:n,insertionId:u,connectionId:p,portfolioItemId:h,notVisibleReason:e}),!1}),(()=>this.isWindowVisible()))}getInViewState(){return this.getViewportInViewState()&&(!this.states.hasOpened||this.getFullscreenHelper().isActive()||this.isElementVisibleForMoat())}clearRealVisibilityInterval(){this.realVisibilityInterval.forEach((e=>e.clear())),this.realVisibilityInterval=l.cb.empty()}requestPauseAd(){this.states.hasStarted?this.vpaidAd.pauseAd():this.states.shouldBePaused=!0}requestResumeAd(){this.states.hasStarted?this.vpaidAd.resumeAd():this.states.shouldBePaused=!1}requestStopAd(){this.states.hasStarted?this.vpaidAd.stopAd():this.states.shouldBePaused=!0}onScroll(e){this.wigo.forEach((e=>e.followElement()))}startAd(){this.states.hasRequestedStartAd||(this.states.hasRequestedStartAd=!0,this.vpaidAd.startAd())}getCidAndStudioCid(){var e;const t=l.cb.fromNullable(null===(e=this.vpaidApi.getContextData())||void 0===e?void 0:e.tracking);return{cid:t.map((e=>`${e.cid}`)).getOrValue(""),studioCid:t.map((e=>`${e.studio_cid}`)).getOrValue("")}}addCustomTracking(e={}){var t;(0,h.hasOwnProperty)(e,this.placement.pageId)&&(0,d.Sg)(null!==(t=e[this.placement.pageId].trackings)&&void 0!==t?t:[],Oe.wB,(0,h.tap)((e=>this.logger.debug("Custom trackings from _ttc handled",e))),a.cArray.forEach(Ve.c.vast.addVastCustomTrackings(this.placement.key)))}shouldInstanciateSmartHeader(){return this.formatConfig.smartPosition.isEnabled()||this.formatConfig.sliderBehavior.isEnabled()||this.formatConfig.smart6Behavior.isEnabled()}}Qe.VERTICAL_MARGIN=1.05;var Xe=i(4136),Ze=i(3336),Je=i(8248);const et=(e,t,i,s)=>{a.forEach(t,(e=>{i.properties.push(tt.getPropertyToSave(s,e))})),a.forEach(t,(t=>{s.style.setProperty(t,e,"important")}))};class tt{constructor(e,t,i,s,n,r){if(this.formatContainer=e,this.vpaidAd=t,this.components=i,this.responsive=s,this.win=n,this.fullscreenElement=r,this.originalVpaidSize={width:0,height:0},this.fullscreenFormatStyle={width:"100%",height:"100%",top:"0",left:"0",position:"fixed","z-index":String(Je.tX),"background-color":"#000000",margin:"0","max-width":"none",padding:"0"},this.originalFormatStyle={width:"",height:"",top:"",left:"",position:"","z-index":"","background-color":"",margin:"","max-width":"",padding:""},this.canvasTag=null,this.active=!1,this.isVideoPaused=!1,this.wasVideoPaused=!1,this.eventListenerManager=new v.C,this.beforeOpenEventListeners=[],this.closeEventListeners=[],this.logger=new c.Y("FullscreenHelper"),this.parentsPropertiesList=[],this.logger.debug("new"),this.vpaidAd.subscribe((()=>this.isVideoPaused=!0),Z.c.AdPaused),this.vpaidAd.subscribe((()=>this.isVideoPaused=!1),Z.c.AdPlaying),!m.isIos()){const e=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];this.eventListenerManager.addMultiple(e,this.win,(e=>{A.isFullscreen(this.win.document)?this.vpaidAd.resizeAd(this.win.screen.width,this.win.screen.height,"fullscreen"):(a.forEach(this.closeEventListeners,(e=>{e()})),this.close())})),this.vpaidAd.subscribe((()=>this.eventListenerManager.removeMultiple(e)),Z.c.AdStopped)}this.responsive&&this.responsive.addOrientationChangeListener((()=>this.handleOrientationChange())),m.isIos()&&Ze.AT.tryCatch((()=>{var e;l.cb.fromNullable(null===(e=this.vpaidAd.getCreativeContainer())||void 0===e?void 0:e.contentWindow).forEach((e=>{this.eventListenerManager.add("touchmove",e,(e=>{this.isActive()&&e.preventDefault()}))}))})).tapLeft((e=>this.logger.debug("Error when trying to access creative window to prevent touchmove on iOS",e)))}static getPropertyToSave(e,t){return{name:t,value:e.style.getPropertyValue(t),priority:e.style.getPropertyPriority(t)}}handleOrientationChange(){this.active&&(this.logger.debug("orientation change, resizeAd"),this.responsive.resize(!0))}isActive(){return this.active}init(e){this.vpaidEnvironmentVars=e,this.vpaidEnvironmentVars.videoSlot&&(this.canvasTag=this.vpaidEnvironmentVars.videoSlot.canvas)}addBeforeOpenEventListener(e){a.indexOf(this.beforeOpenEventListeners,e)<0&&this.beforeOpenEventListeners.push(e)}addCloseEventListener(e){a.indexOf(this.closeEventListeners,e)<0&&this.closeEventListeners.push(e)}open(){this.active||(this.active=!0,a.forEach(this.beforeOpenEventListeners,(e=>{e()})),A.addClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),m.isIos()?(this.overrideParentsProperties(),this.originalVpaidSize.width=(0,f.getBoundingClientRect)(this.formatContainer).width,this.originalVpaidSize.height=this.vpaidAd.getAdHeight(),A.addClass(this.formatContainer,"no-transition"),this.applyStyleRules(),this.components.hideAllComponents()):A.openFullscreen(this.fullscreenElement),this.responsive.resize(!0),this.isVideoPaused?(this.vpaidAd.resumeAd(),this.wasVideoPaused=!0):this.wasVideoPaused=!1)}close(){this.active&&(A.removeClass(this.vpaidAd.getMainComponentsContainer(),"fullscreen"),m.isIos()?(this.restoreParentsProperties(),A.removeClass(this.formatContainer,"no-transition"),this.components.showAllComponents(),this.restoreStyleRules()):m.isAndroid()?setTimeout((()=>A.closeFullscreen(this.vpaidAd.getContainer())),100):A.closeFullscreen(this.fullscreenElement),this.wasVideoPaused&&this.vpaidAd.pauseAd(),this.active=!1,this.responsive.resize(!0),this.canvasTag&&this.resetCanvas(),a.forEach(this.closeEventListeners,(e=>{e()})))}applyStyleRules(){for(let e in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(e)&&(this.originalFormatStyle[e]=this.formatContainer.style.getPropertyValue(e));for(let e in this.fullscreenFormatStyle)this.fullscreenFormatStyle.hasOwnProperty(e)&&this.formatContainer.style.setProperty(e,this.fullscreenFormatStyle[e])}restoreStyleRules(){for(let e in this.originalFormatStyle)this.originalFormatStyle.hasOwnProperty(e)&&this.formatContainer.style.setProperty(e,this.originalFormatStyle[e])}resetCanvas(){this.logger.debug("reset canvas"),this.canvasTag.style.setProperty("position","relative"),this.canvasTag.style.setProperty("top","0"),this.canvasTag.style.setProperty("left","0")}overrideParentsProperties(){this.parentsPropertiesList=[];let e=A.findParentElements(this.formatContainer);a.forEach(e,(e=>{let t={element:e,properties:[]};const i=this.win.getComputedStyle(e);i.zIndex&&"auto"!==i.zIndex&&(t.properties.push(tt.getPropertyToSave(e,"z-index")),e.style.setProperty("z-index","auto","important")),et("none",["transform","-webkit-transform","transition","-webkit-transition"],t,e),et("auto",["will-change"],t,e),this.parentsPropertiesList.push(t)})),this.parentsPropertiesList.push({element:this.win.document.body,properties:[tt.getPropertyToSave(this.win.document.body,"overflow")]}),this.win.document.body.style.setProperty("overflow","hidden")}restoreParentsProperties(){a.forEach(this.parentsPropertiesList,(e=>{a.forEach(e.properties,(t=>{e.element.style.removeProperty(t.name),e.element.style.setProperty(t.name,t.value,t.priority)}))}))}}var it=i(4912);const st=({sliderIsEnabled:e,orientationIsLandscape:t,parentContainerIsInView:i})=>!!e||t&&!i,nt=(e,t)=>e>t,rt=["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],ot=["","-webkit-","-moz-","-o-","-ms-"],at=e=>{a.forEach(ot,(t=>{e.element.style.setProperty(`${t}transition`,`${e.property} ${e.duration}s ${e.effect}`)}))},lt=e=>{a.forEach(ot,(t=>e.style.removeProperty(`${t}transition`)))},dt=e=>{e.style.removeProperty("transform-origin"),e.style.removeProperty("transform")},ct=e=>{e.style.removeProperty("bottom"),e.style.removeProperty("right")},ht=e=>{e.style.setProperty("z-index",String(Je.tX)),e.style.setProperty("position","fixed")};class ut{constructor(e){this.format=e,this.originalPlayerZIndex=String(Je.WM),this.behaviorIsEnabled=!1,this.transitionEndListenerManager=new v.C,this.transitionInProgress=!1,this.midpointIsReached=!1,this.timeoutSlotIsReached=!1,this.remainingTimeLastSmartInSec=0,this.timerOutOfSlot=null,this.timerSmart6=null,this.smartElapsedTimeInSec=0,this.detachedSlotState=l.cb.empty(),this.currentTop=0,this.iOSRuler=l.cb.empty(),this.window=e.placement.placementConfig.parentWindow.getWindow(),this.originalPlayerZIndex=this.format.playerContainer.style.getPropertyValue("z-index")}get isInDetachedSlot(){return this.detachedSlotState.nonEmpty()}toggleSmartPositionIfNeeded(){this.behaviorIsEnabled&&this.orientationIsLandscape===this.isOrientationLandscape()&&!this.transitionInProgress?(this.windowTopLimit=this.getWindowTopLimit(),this.detachedSlotState.match({some:e=>{switch(e){case"top":this.windowTopLimit<=this.creativeTopLimit&&this.transitionFromTopToNativeSlot();break;case"corner":this.isParentContainerInView()&&this.transitionFromCornerToNativeSlot()}},none:()=>{switch((({deviceIsDesktop:e,sliderIsEnabled:t,orientationIsLandscape:i})=>e||t||i?e||!e&&i||t?"corner":void 0:"top")({deviceIsDesktop:(0,m.isDesktop)(),sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape()})){case"corner":this.format.formatConfig.smart6Behavior.isCorner()&&(this.startSmart6Timer(),this.format.player.smartPosition.hideCloseButton()),st({sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape(),parentContainerIsInView:this.isParentContainerInView()})&&this.transitionFromNativeSlotToCorner();break;case"top":this.updateCreativeTopLimit(),this.format.formatConfig.smart6Behavior.isTop()&&(this.startSmart6Timer(),this.format.player.smartPosition.hideCloseButton()),nt(this.windowTopLimit,this.creativeTopLimit)&&this.transitionFromNativeSlotToTop()}}})):this.orientationIsLandscape=this.isOrientationLandscape()}enableBehavior(){this.nativeSlotPlaceholder=this.initNativeSlotPlaceholder(),this.format.getFullscreenHelper().addBeforeOpenEventListener((()=>this.onFullScreenOpen())),this.format.getFullscreenHelper().addCloseEventListener((()=>this.onFullScreenClose())),this.format.responsive.addOrientationChangeListener((()=>this.onOrientationChange())),this.orientationIsLandscape=this.isOrientationLandscape(),this.format.player.smartPosition.init(this.format.formatConfig.sliderBehavior.isEnabled(),this.format.formatConfig.smart6Behavior.isEnabled(),this.format.formatConfig.label.isEnabled(),(()=>{this.showCloseButtonAtMidPoint()})),this.updateCreativeTopLimit(),this.behaviorIsEnabled=!0}disableBehavior(){this.behaviorIsEnabled&&(this.behaviorIsEnabled=!1,this.detachedSlotState.forEach((e=>{switch(e){case"top":this.transitionFromTopToNativeSlot();break;case"corner":this.transitionFromCornerToNativeSlot()}})),this.format.formatConfig.sliderBehavior.isEnabled()||this.nativeSlotPlaceholder.parentNode.removeChild(this.nativeSlotPlaceholder),(0,it.gj)(),this.iOSRuler=l.MB)}moveToCornerPosition(){this.detachedSlotState=(0,l.sx)("corner"),this.header||this.createSmartHeader();const e=this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.formatConfig.slider.closeButtonEnabled();this.format.player.smartPosition.setCornerPositionPlayerComponents({shouldShowCloseButton:e||this.timeoutSlotIsReached||this.midpointIsReached,showHeaderCloseButton:()=>this.header.showCloseButton()}),this.updateCloseButtonTimers(),ht(this.format.playerContainer),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive((()=>this.handleDetachedSlotResize("corner"))),(0,A.addClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.CORNER),this.executeNativeSlotPlaceholderFadeAnimation("#000000","#ffffff"),this.executeOncePlayerTransitionEnded().then((()=>{this.listenIOSNativeHeaderBarMovements(),this.setPlayerCornerPosition({withMarginFromEdge:!0}),lt(this.format.playerContainer),dt(this.format.playerContainer),this.transitionInProgress=!1})),this.slideInUpCornerPosition()}getOptimalDimension(e,t){return"corner"===t?this.format.responsive.getOptimalDimensionBasedOnSurface():this.format.responsive.getOptimalDimension(e)}slideOutDownCornerPosition(){const e=f.getBoundingClientRect(this.format.playerContainer).height;this.format.playerContainer.style.setProperty("transform-origin","bottom"),this.format.playerContainer.style.setProperty("transform",`translateY(${e+ut.MARGIN_FROM_EDGES_IN_PX}px)`),at({element:this.format.playerContainer,property:"transform",duration:ut.TRANSITION_DURATION_IN_SECONDS,effect:"ease-in"})}transitionFromNativeSlotToCorner(){this.transitionInProgress=!0,this.showCompensationDiv(),this.moveToCornerPosition()}transitionFromNativeSlotToTop(){this.transitionInProgress=!0,this.showCompensationDiv(),this.updateCloseButtonTimers(),this.moveToTopPosition(),this.transitionInProgress=!1}createSmartHeader(){this.header=new le,this.header.init(this.format.getVpaidAd(),this.format.getVolumeController()),this.header.smartCloseButton.onClickAction=()=>{this.disableBehavior(),this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.getVpaidAd().skipAd()},this.format.playerContainer.insertBefore(this.header.getElement(),this.format.playerContainer.firstChild)}shouldUpdateCloseButtonTimer(){return!(this.timeoutSlotIsReached||this.midpointIsReached||this.format.player.smartPosition.isCloseButtonMode(2)||this.format.formatConfig.smart6Behavior.isEnabled())}updateCloseButtonTimers(){this.shouldUpdateCloseButtonTimer()&&(this.remainingTimeLastSmartInSec=this.format.getVpaidAd().getAdRemainingTime(),this.timerOutOfSlot=this.showCloseButtonHandler())}startSmart6Timer(){this.timerSmart6||(this.timerSmart6=this.ensureSmart6DisabledOnComplete())}moveToTopPosition(){this.detachedSlotState=(0,l.sx)("top"),(0,A.addClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.TOP),this.format.player.smartPosition.setTopPositionPlayerComponents({shouldShowCloseButton:this.timeoutSlotIsReached||this.midpointIsReached,onCloseButtonClick:()=>this.disableBehavior()}),ht(this.format.playerContainer),this.handleFloatingHeaders(),this.format.playerContainer.style.setProperty("top",`${this.currentTop}px`),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive((()=>this.handleDetachedSlotResize("top")))}slideInUpCornerPosition(){const e=f.getBoundingClientRect(this.format.playerContainer).height;this.header.show(),this.format.playerContainer.style.setProperty("bottom",`-${e}px`),this.format.playerContainer.style.setProperty("right",`${ut.MARGIN_FROM_EDGES_IN_PX}px`),this.format.playerContainer.style.setProperty("transform-origin","bottom"),this.format.playerContainer.style.setProperty("transform",`translateY(-${e+ut.MARGIN_FROM_EDGES_IN_PX}px)`),at({element:this.format.playerContainer,property:"transform",duration:ut.TRANSITION_DURATION_IN_SECONDS,effect:"ease-out"})}executeNativeSlotPlaceholderFadeAnimation(e,t){this.nativeSlotPlaceholder.style.setProperty("background-color",e),at({element:this.nativeSlotPlaceholder,property:"background-color",duration:ut.TRANSITION_DURATION_IN_SECONDS,effect:"linear"}),this.nativeSlotPlaceholder.style.setProperty("background-color",t)}updateCreativeTopLimit(){var e;const t=this.detachedSlotState.isEmpty()?this.format.playerContainer:this.nativeSlotPlaceholder,i=null!==(e=window.FORCE_DEMO)&&void 0!==e&&e,{top:s,bottom:n}=f.getBoundingClientRect(t,!i),r=i?(0,A.getTop)(this.window,(0,A.findFloatingHeaders)(this.window,this.format.playerContainer,[this.format.playerContainer]),f.getWindowSize(this.window).height*ut.MAX_FLOATING_TOP):0,o=f.getScrollTop(this.window);this.creativeTopLimit=s===n?o:o+s-r}getWindowTopLimit(){return f.getScrollTop(this.window)+this.currentTop}transitionFromCornerToNativeSlot(){this.transitionInProgress=!0,(0,A.removeClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.CORNER),this.executeNativeSlotPlaceholderFadeAnimation("#ffffff","#000000"),this.executeOncePlayerTransitionEnded().then((()=>{this.format.player.smartPosition.cleanupCornerPositionSpecificUI((()=>this.header.showCloseButton())),this.header.hide(),ct(this.format.playerContainer),this.moveToNativeSlotPosition(),lt(this.format.playerContainer),this.format.formatConfig.sliderBehavior.isEnabled()||dt(this.format.playerContainer),this.stopScrollListener(),this.transitionInProgress=!1})),this.slideOutDownCornerPosition()}transitionFromTopToNativeSlot(){(0,A.removeClass)(this.format.playerContainer,ut.CUSTOMIZATION_CSS_CLASS.TOP),this.transitionInProgress=!0,this.format.playerContainer.style.removeProperty("top"),this.format.player.smartPosition.cleanupTopPositionSpecificUI(),this.moveToNativeSlotPosition(),this.transitionInProgress=!1}moveToNativeSlotPosition(){this.detachedSlotState=l.MB,(this.timerOutOfSlot||this.timerSmart6)&&(this.smartElapsedTimeInSec+=this.remainingTimeLastSmartInSec-this.format.getVpaidAd().getAdRemainingTime(),this.clearTimerOutOfSlot()),this.format.playerContainer.style.setProperty("position","relative"),this.format.playerContainer.style.setProperty("z-index",this.originalPlayerZIndex),this.nativeSlotPlaceholder.style.setProperty("display","none"),this.format.responsive.unsetResponsive(),this.format.responsive.setResponsive()}isParentContainerInView(){return(0,A.getPercentageInView)({element:this.format.parentContainer,elementAncestors:(0,A.findParentElements)(this.format.parentContainer),elementClientRect:(0,f.getBoundingClientRect)(this.format.parentContainer),mainWindow:this.window,elementHeight:this.format.parentContainer.offsetHeight})>=this.format.formatConfig.threshold.percentage()}showCompensationDiv(){const e=this.format.responsive.getOptimalDimension(this.format.parentContainer).height;this.nativeSlotPlaceholder.style.setProperty("display","block"),this.nativeSlotPlaceholder.style.setProperty("height",`${e}px`)}handleFloatingHeaders(){if(this.detachedSlotState.existsIf((e=>"top"===e))){const e=(0,A.getTop)(this.window,(0,A.findFloatingHeaders)(this.window,this.format.playerContainer,[this.format.playerContainer]),f.getWindowSize(this.window).height*ut.MAX_FLOATING_TOP);this.currentTop!==e&&(this.currentTop=e,this.format.playerContainer.style.setProperty("top",`${this.currentTop}px`))}}handleDetachedSlotResize(e){const{width:t,height:i}=this.getOptimalDimension(this.format.parentContainer,e);this.format.getVpaidAd().resizeAd(t,i),this.handleFloatingHeaders()}initNativeSlotPlaceholder(){const e=this.window.document.createElement("div");return e.className="teads-player teads-compensation-div",e.style.setProperty("-webkit-box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("-moz-box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("box-shadow","inset 0px 0px 85px rgba(0, 0, 0, 0.1)"),e.style.setProperty("background-color","#000000"),this.format.formatConfig.sliderBehavior.isEnabled()||(this.format.playerContainer.nextSibling?this.format.playerContainer.parentNode.insertBefore(e,this.format.playerContainer.nextSibling):this.format.playerContainer.parentNode.appendChild(e)),e}isOrientationLandscape(){if((0,m.isDesktop)())return!0;const e=f.getWindowSize(this.window);return e.width>e.height}setPlayerCornerPosition(e){const t=e.withMarginFromEdge?ut.MARGIN_FROM_EDGES_IN_PX:0;this.format.playerContainer.style.setProperty("bottom",`${t}px`),this.format.playerContainer.style.setProperty("right",`${t}px`),this.handleIOSNativeHeaderBar(!0)}onFullScreenOpen(){this.detachedSlotState.existsIf((e=>"corner"===e))&&this.setPlayerCornerPosition({withMarginFromEdge:!1})}onFullScreenClose(){this.detachedSlotState.forEach((e=>{"corner"===e&&this.setPlayerCornerPosition({withMarginFromEdge:!0}),this.handleDetachedSlotResize(e)}))}clearTimerOutOfSlot(){this.timerOutOfSlot&&(this.timerOutOfSlot.clear(),this.timerOutOfSlot=null)}showCloseButtonAtMidPoint(){if(this.timeoutSlotIsReached)return;this.midpointIsReached=!0;const e=this.format.getVpaidAd().getAdRemainingTime()-1,t=()=>this.format.getVpaidAd().unsubscribe(i,Z.c.AdRemainingTimeChange),i=()=>{this.format.getVpaidAd().getAdRemainingTime()<e&&(this.showCloseButton(),t())};this.format.getVpaidAd().subscribe(i,Z.c.AdRemainingTimeChange)}showCloseButtonHandler(){return w.q((()=>{this.midpointIsReached||(this.format.formatConfig.sliderBehavior.isEnabled()?this.format.getVpaidAd().getAdDuration()-this.format.getVpaidAd().getAdRemainingTime():this.remainingTimeLastSmartInSec+this.smartElapsedTimeInSec-this.format.getVpaidAd().getAdRemainingTime())>=ut.TIME_IN_SEC_BEFORE_CLOSE_BUTTON&&(this.showCloseButton(),this.clearTimerOutOfSlot(),this.timeoutSlotIsReached=!0)}),ut.INTERVAL_DELAY_IN_MS)}ensureSmart6DisabledOnComplete(){return w.q((()=>{this.format.getVpaidAd().getAdDuration()-this.format.getVpaidAd().getAdRemainingTime()>ut.SMART_6_COUNTER&&this.disableBehavior(),this.behaviorIsEnabled||this.timerSmart6.clear()}),ut.INTERVAL_DELAY_IN_MS)}showCloseButton(){this.detachedSlotState.forEach((e=>{"top"===e&&this.format.player.smartPosition.showCloseButton(),"corner"===e&&this.header.showCloseButton()}))}executeOncePlayerTransitionEnded(){return new Promise((e=>{this.transitionEndListenerManager.addMultiple(rt,this.format.playerContainer,(()=>{this.transitionEndListenerManager.removeAll(),e()}))}))}onOrientationChange(){this.detachedSlotState.filter((e=>!this.format.getFullscreenHelper().isActive())).match({some:e=>{const t=st({sliderIsEnabled:this.format.formatConfig.sliderBehavior.isEnabled(),orientationIsLandscape:this.isOrientationLandscape(),parentContainerIsInView:this.isParentContainerInView()});switch(e){case"top":t&&this.transitionFromTopToCorner();break;case"corner":nt(this.windowTopLimit,this.creativeTopLimit)&&!t?(this.updateCreativeTopLimit(),this.transitionFromCornerToTop()):nt(this.windowTopLimit,this.creativeTopLimit)||t?this.format.formatConfig.sliderBehavior.isEnabled()&&this.isOrientationLandscape()?(this.handleIOSNativeHeaderBar(),this.listenIOSNativeHeaderBarMovements()):this.format.formatConfig.sliderBehavior.isEnabled()&&!this.isOrientationLandscape()&&(this.handleIOSNativeHeaderBar(),this.stopScrollListener()):this.transitionFromCornerToNativeSlot()}},none:()=>{this.format.responsive.resize(),this.isOrientationLandscape()||this.updateCreativeTopLimit()}})}transitionFromTopToCorner(){this.format.playerContainer.style.removeProperty("top"),this.showCompensationDiv(),this.moveToCornerPosition()}transitionFromCornerToTop(){this.stopScrollListener(),this.header.hide(),ct(this.format.playerContainer),this.showCompensationDiv(),this.moveToTopPosition()}listenIOSNativeHeaderBarMovements(){if((0,m.isIos)()&&this.isOrientationLandscape()&&!this.scrollListener){const e=this.format.placement.placementConfig.scrollSelector.getSlot();this.scrollListener=(0,_e.K)((()=>this.handleIOSNativeHeaderBar()),e,this.window.context),this.iOSRuler=(0,l.sx)((0,it.QL)(window)),(0,it.Ml)(window)}}stopScrollListener(){this.scrollListener&&((0,_e.c)(this.scrollListener),this.scrollListener=null)}handleIOSNativeHeaderBar(e=!1){if(this.behaviorIsEnabled&&this.iOSRuler.nonEmpty()){const t=!this.isOrientationLandscape()||e&&this.getWindowTopLimit()>0?ut.MARGIN_FROM_EDGES_IN_PX:(0,it.aA)(window)+ut.MARGIN_FROM_EDGES_IN_PX;this.format.formatConfig.sliderBehavior.isEnabled()&&this.format.parentContainer.style.setProperty("bottom",`${t}px`),this.format.playerContainer.style.setProperty("bottom",`${t}px`)}}}ut.MARGIN_FROM_EDGES_IN_PX=5,ut.TRANSITION_DURATION_IN_SECONDS=.4,ut.MAX_FLOATING_TOP=(0,m.isDesktop)()?.25:.2,ut.TIME_IN_SEC_BEFORE_CLOSE_BUTTON=5,ut.SMART_6_COUNTER=6.5,ut.INTERVAL_DELAY_IN_MS=300,ut.CUSTOMIZATION_CSS_CLASS={TOP:"smart-position-top",CORNER:"smart-position-corner"};var pt,gt=i(5512);class mt{constructor(e){this.format=e,this.initialized=!1,this.active=!1,this.logger=new c.Y("BrandingMode")}isActive(){return this.active}isInitialized(){return this.initialized}init(){if(this.logger.debug("init called"),this.initialized)return void this.logger.warn("Branding mode helper has already been initialized");this.initialized=!0,this.vpaidEnvironmentVars=this.format.getEnvironmentVars();let e=this.format.getVpaidAd();e.showComponent("fullscreenbutton"),this.format.getFullscreenHelper().init(this.vpaidEnvironmentVars);let t=()=>{this.isFullscreenSupported()&&this.stop()};e.subscribe(t,Z.c.AdClickThru,this),e.subscribe((()=>e.unsubscribe(t,Z.c.AdClickThru)),Z.c.AdStopped),e.subscribe(this.toggle,Y.c.FullscreenRequest,this),e.subscribe((()=>e.unsubscribe(this.toggle,Y.c.FullscreenRequest)),Z.c.AdStopped),this.format.vpaidApi.getStudioData()||e.subscribe(this.stop,Y.c.AdVideoComplete,this),e.subscribe(this.stop,Y.c.EndscreenInit,this),e.subscribe(this.stop,Y.c.AdStopped,this),this.format.getVolumeController().addUnmuteCallback((()=>this.onUnmute())),this.format.getVolumeController().addMuteCallback((()=>this.onMute()))}deinit(){this.logger.debug("deinit called"),this.initialized=!1;let e=this.format.getVpaidAd(),t=()=>{this.isFullscreenSupported()&&this.stop()};e.subscribe(t,Z.c.AdClickThru,this),e.subscribe((()=>e.unsubscribe(t,Z.c.AdClickThru)),Z.c.AdStopped),e.unsubscribe(this.toggle,Y.c.FullscreenRequest),e.unsubscribe(this.stop,Y.c.AdVideoComplete),e.unsubscribe(this.stop,Y.c.EndscreenInit),e.unsubscribe(this.stop,Y.c.AdStopped),e.hideComponent("fullscreenbutton")}toggle(){this.initialized?this.active?this.stop():this.start():this.logger.warn("Cannot toggle branding mode helper before its initialization")}start(){this.active||(this.logger.debug("start"),this.initialVolume=this.format.getVolumeController().getVolume(),this.setVolume(this.format.formatConfig.volume.getMain()),this.isFullscreenSupported()?(this.format.getFullscreenHelper().open(),this.format.getVpaidAd().showComponent("fullscreenbutton")):this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!0)}stop(){this.active&&(this.logger.debug("stop"),this.format.getVolumeController().isMuted()&&(this.initialVolume=0),this.setVolume(this.initialVolume),this.isFullscreenSupported()?this.format.getFullscreenHelper().close():this.format.getVpaidAd().showComponent("fullscreenbutton"),this.format.getVpaidAd().hideComponent("fullscreenbutton"),this.active=!1)}setVolume(e){const t=()=>this.format.getVolumeController().setVolume(e);this.vpaidEnvironmentVars.videoSlot&&this.vpaidEnvironmentVars.videoSlot.audio&&!this.vpaidEnvironmentVars.videoSlot.audio.authorized?this.vpaidEnvironmentVars.videoSlot.audio.authorizeAudio((0,_.m)(t,this)):t()}isFullscreenSupported(){let e=this.format.getVpaidAd(),t=this.format.getFullscreenHelper().isActive()||e.getAdWidth()>e.getAdHeight();return!m.isDesktop()&&!m.isAmp()&&!m.isIABSafeFrame()&&t}onUnmute(){this.isFullscreenSupported()||this.start()}onMute(){this.isFullscreenSupported()||this.stop()}}class ft{}ft.READY="ready",ft.ERROR="error",ft.WAITING="waiting",function(e){e[e.ERROR=-1]="ERROR",e[e.UNSTARTED=0]="UNSTARTED",e[e.WAITING=1]="WAITING",e[e.READY=2]="READY"}(pt||(pt={}));const vt=pt,At=e=>e;var bt;function yt(e,t,i,s){return`https://cm.teads.tv/v3/register-source?type=${e}&auction_id=${t}&creative_id=${i}&line_item_id=${s}`}function wt(){var e,t;const i=null===(t=null===(e=document.featurePolicy)||void 0===e?void 0:e.allowedFeatures)||void 0===t?void 0:t.call(e);return i&&a.includes(i,"attribution-reporting")||!1}!function(e){e.Navigation="navigation",e.Event="event"}(bt||(bt={}));var Et=i(7960),Ct=i(6568);const It=["1834magazine.co.uk","afar.com","allure.com","anothermag.com","architecturaldigest.com","billboard.com","bustle.com","cntraveler.com","cntraveller.com","complex.com","cosmopolitan.com","countryandtownhouse.co.uk","countryliving.co.uk","countryliving.com","coveteur.com","creativereview.co.uk","crfashionbook.com","dazeddigital.com","digitalspy.co.uk","elitedaily.com","elle.co.uk","elle.com","elle.com","elledecor.com","elledecoration.co.uk","empireonline.com","esquire.co.uk","esquire.com","essence.com","fashionista.com","forbes.com","glamour.com","goodhousekeeping.co.uk","gq-magazine.co.uk","harpersbazaar.co.uk","harpersbazaar.com","harpersbazaar.com","hypebae.com","hypebeast.com","hypebeast.com","i-d.vice.com","inc.com","independent.co.uk","instyle.com","inverse.com","latimes.com","livingly.com","marieclaire.co.uk","menshealth.co.uk","mic.com","nylon.com","oprahdaily.com","oprahmag.com","pitchfork.com","popsugar.com","purewow.com","redbookmag.com","redonline.co.uk","refinery29.com","robbreport.com","rollingstone.com","self.com","seventeen.com","shape.com","stylecaster.com","surfacemag.com","tatler.com","teenvogue.com","thecut.com","thefashionspot.com","them.us","thezoereport.com","townandcountrymag.com","travelandleisure.com","vanityfair.com","variety.com","vibe.com","vice.com","vogue.com","vogue.co.uk","whowhatwear.com","wired.co.uk","wired.com","wmagazine.com","womenshealth.co.uk","ybw.com"];class St extends Qe{constructor(e,t,i,s,n,r,o){super(e,t,i,n,r,o),this.placement=e,this.formatConfig=t,this.player=i,this.adCallTrackOpts=s,this.hasLoggedPlayProblem=!1,this.adCallTracked=!1,this.currentAdOverlapData=null,this.shouldContinueCheckingOverlapStatus=!0,this.getFunnelMacros=()=>{const e=l.cb.fromNullable(this.slotType);return gt.QF({slotType:e})},this.formatConfig.adType.isDisplay()&&(0,A.addClass)(this.parentContainer,"teads-display"),(0,T.O0)(this.formatConfig.portfolioItemId)&&((0,A.addClass)(this.parentContainer,"teads-third-party-display"),a.includes([37,39],this.formatConfig.portfolioItemId)&&m.isIos()&&this.parentContainer.style.setProperty("-webkit-clip-path","inset(0)")),this.windowReferenceForViewability=this.getReferenceWindowForViewability(this.playerContainer)}load(e,t){var i;!m.isIABSafeFrame()||(i=this.formatConfig.portfolioItemId,this.placement.placementConfig.headerBiddingProvider.nonEmpty()&&(0,a.includes)([42,6],i))?super.load(e,t):Le.oV((()=>super.load(e,t)))}getTemplateName(){return"inread"}start(){const e=this.placement.placementConfig.scrollSelector.getSlot();this.scrollListener=(0,_e.K)((e=>this.onScroll(e)),e,this.win.context),m.isDesktop()&&this.setRealVisibilityInterval(),this.isInView=this.getInViewState(),this.formatConfig.vast.getContent()&&this.player.getMediafile()?super.start():this.onScroll()}onAdLoaded(){if(super.onAdLoaded(),this.extensions=l.cb.fromNullable(this.player).map((e=>e.getPlugin("Extensions"))),this.extensions.forEach((e=>this.loadAdVerificationScripts(e))),this.fullscreenHelper.addCloseEventListener((()=>{this.isSmartPositioned()||this.responsive&&this.responsive.resize(!0)})),this.isVertical){let e=()=>{this.responsive.unsetResponsive(),this.parentContainer.style.setProperty("display","none"),this.isInView=!1,this.requestPauseAd()};this.responsive.addOrientationChangeListener((t=>{this.isFullscreen()||(this.responsive.isLandscape?e():(this.parentContainer.style.setProperty("display","block"),this.responsive.setResponsive(),this.onScroll(t)))})),this.fullscreenHelper.addCloseEventListener((()=>{this.responsive&&this.responsive.isLandscape&&e()}))}m.isDesktop()||this.vpaidAd.render(this.vpaidAd.getVPAID()),m.isIABSafeFrame()&&!this.states.hasOpened&&this.openFormat(),this.onScroll(),this.isInView=this.getInViewState()}onAdVideoStart(){super.onAdVideoStart(),this.smartPositionHelper&&this.smartPositionHelper.enableBehavior(),this.states.hasStarted&&this.states.hasOpened&&this.fitContainerToContent()}onAdSizeChange(){if(super.onAdSizeChange(),this.states.hasOpened){const e=this.fitContainerToContent();m.isAmp()&&Pe.eU(e)}}onAdVideoComplete(){super.onAdVideoComplete(),this.smartPositionHelper&&this.smartPositionHelper.disableBehavior()}onVpaidReady(){super.onVpaidReady(),this.fullscreenHelper=new tt(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new mt(this),this.shouldInstanciateSmart()&&(this.smartPositionHelper=new ut(this)),this.vpaidAd.subscribe((()=>this.pauseAdIfShouldNotBePlaying()),Z.c.AdStarted),this.vpaidAd.subscribe((()=>this.pauseAdIfShouldNotBePlaying()),Z.c.AdRemainingTimeChange),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Z.c.AdError),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Z.c.AdStopped),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Z.c.AdSkipped),this.vpaidAd.subscribe((()=>this.clearRealVisibilityInterval()),Z.c.AdVideoComplete),wt()&&this.vpaidAd.subscribe((()=>this.registerAttributionReportingEvent()),Z.c.AdImpression)}close(e){super.close(e),this.clearRealVisibilityInterval()}startInView(){this.states.hasStarted&&(this.formatConfig.videoPause.isThreshold()||this.isVertical||this.states.hasCompleted)&&this.requestResumeAd(),this.volumeController.startInView()}endInView(){this.formatConfig.videoPause.isThreshold()||this.states.hasCompleted?this.requestPauseAd():this.volumeController.endInView()}fitContainerToContent(e=!1){var t;const i=this.getEnvironmentVars();if(this.vpaidApi.isStudioDisplay());else if(m.isIos()&&!l.cb.fromNullable(null===(t=i.videoSlot)||void 0===t?void 0:t.mediaProxy).isEmpty()&&i.videoSlot.mediaProxy.getStatus()!==vt.READY)return;if((this.states.hasOpened||e)&&!this.isFullscreen()){let e=f.getBoundingClientRect(this.placement.getInnerContainer()).height;return this.parentContainer.style.setProperty("height",`${e}px`),e}}manageInView(e){e!==this.isInView&&(e?this.startInView():this.endInView()),this.isInView=e}openFormat(){var e;m.isIABSafeFrame()||(this.states.hasOpened=!0),this.formatConfig.animations.setExpandDuration(this.parentContainer);const t=this.getEnvironmentVars();if(this.vpaidApi.isStudioDisplay()||!this.formatConfig.adType.isVideo());else if(m.isIos()&&!l.cb.fromNullable(null===(e=t.videoSlot)||void 0===e?void 0:e.mediaProxy).isEmpty()){let e=t.videoSlot.mediaProxy,i=e.getStatus();if(i===vt.READY)this.logger.debug("mediaProxy is ready !",t.videoSlot.src);else{if(i===vt.ERROR)return void this.logger.error("mediaProxy error, video is not available for the moment",t.videoSlot.src);if(!t.videoSlot.src||i<vt.READY)return this.logger.debug("mediaProxy not ready or video.src not setted, delay inread opening",t.videoSlot.src),void e.listen(ft.READY,(()=>{this.openFormat()}),!1)}}const i=this.fitContainerToContent(!0);this.logger.debug(`Format (pageId = ${this.formatConfig.pageId}, placementId = ${this.formatConfig.placementId}) has been opened`),this.responsive&&!this.isSmartPositioned()&&this.responsive.setResponsive(),m.isIABSafeFrame()&&Le.eU(Ke(this.vpaidAd.getAdHeight(),[this.components.getComponent("label"),this.components.getComponent("credits")])||i,(e=>{this.states.hasOpened=e,this.vpaidApi.adMetadata.forEach((e=>this.responsive.updateAndResizeWithAdVideoMetadata(e)))}))}trackAdCall(e){!e||this.states.hasStopped||this.adCallTracked||(this.adCallTracked=!0,(0,Re.q_)({placementKey:this.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placement.wigo,logger:this.logger,headerBiddingProvider:this.placement.placementConfig.headerBiddingProvider,baseUrlWithQueryParameters:this.adCallTrackOpts}),this.initAdTimingMark.forEach((e=>{const t=Math.round((0,g.kX)()-e);(0,h.isFunction)(this.vpaidAd.getVPAID().handleAdCallTimeout)&&this.vpaidAd.getVPAID().handleAdCallTimeout(t),this.logger.info("Duration between initAd and adCall",t)})))}onScroll(e){if(super.onScroll(e),!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.toggleSmartPositionIfNeeded();const e=this.getInViewState();this.trackAdCall(e);const t=this.formatConfig.exclusiveAdOnScreen&&(0,Ct.AT)().some((e=>e.includes("chanel")));if(!this.isSmartPositioned()&&this.states.isReady){if(!this.states.hasOpened&&this.isWindowVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&e)){const{auctionId:e,placement:{key:i,pageId:s,pid:n,placementConfig:{headerBiddingProvider:r}},formatConfig:{insertionId:o}}=this;if(this.formatConfig.exclusiveAdOnScreen&&(()=>{try{const e=(0,E.Ae)().map((e=>e.windowReferrerUrl)).getOrNull(),{hostname:t}=new URL(e);return It.some((e=>t.includes(e)))}catch(e){return!1}})()){const t=this.checkAdsInViewportRange();if(Ve.c.debug.track(i)(Xe.IR.OtherAdsInViewportRange,{baseUrl:u.E.trackingUrl,referer:(0,Re.ID)(),queryParameters:{env:m.getEnv(),pageId:s.toString(),pid:n.toString(),hb_provider:r.getOrValue(""),gid:(0,Et.e4)(o),auctid:e.getOrValue((0,p.S)(""))},trackingUrl:l.MB},!0===t.isSafe?l.MB:l.cb.of(t.reason)),!t.isSafe)return Ve.c.debug.track(i)(Xe.IR.AdClosed,{baseUrl:u.E.trackingUrl,referer:(0,Re.ID)(),queryParameters:{env:m.getEnv(),pageId:s.toString(),pid:n.toString(),hb_provider:r.getOrValue(""),gid:(0,Et.e4)(o),auctid:e.getOrValue((0,p.S)(""))},trackingUrl:l.MB},l.MB),void this.close(5)}if(t)return Ve.c.debug.track(i)(Xe.IR.ClientAdCollision,{baseUrl:u.E.trackingUrl,referer:(0,Re.ID)(),queryParameters:{env:m.getEnv(),pageId:s.toString(),pid:n.toString(),hb_provider:r.getOrValue(""),gid:(0,Et.e4)(o),auctid:e.getOrValue((0,p.S)(""))},trackingUrl:l.MB},l.cb.of(Ct.Ht.ExcludeAfterRAS)),void this.close(5);this.openFormat()}if(this.states.hasOpened&&!this.states.hasStopped){const{auctionId:t,placement:{key:i,pageId:s,pid:n,placementConfig:{headerBiddingProvider:r}},formatConfig:{insertionId:o}}=this;if(this.states.hasStarted){if(this.manageInView(e),this.isInView&&this.shouldContinueCheckingOverlapStatus){const e=this.checkAdsInViewportRange();null!==this.currentAdOverlapData&&!0===this.currentAdOverlapData.isSafe&&!1===e.isSafe&&(Ve.c.debug.track(i)(Xe.IR.OtherAdsAfterStart,{baseUrl:u.E.trackingUrl,referer:(0,Re.ID)(),queryParameters:{env:m.getEnv(),pageId:s.toString(),pid:n.toString(),hb_provider:r.getOrValue(""),gid:(0,Et.e4)(o),auctid:t.getOrValue((0,p.S)(""))},trackingUrl:l.MB},l.cb.of(e.reason)),this.shouldContinueCheckingOverlapStatus=!1)}}else this.viewabilityTagsHelper.onScroll(),this.canStart(e)&&(this.startAd(),m.isDesktop()||this.setRealVisibilityInterval())}}}}canStart(e){return!this.formatConfig.videoStart.isThreshold()||e||this.states.isReplay||this.shouldBypassDeepVisibilityCheck()}canPlay(e){return this.formatConfig.videoPause.isNo()||e}isFullscreen(){return!!this.fullscreenHelper&&this.fullscreenHelper.isActive()}isSmartPositioned(){return this.smartPositionHelper&&this.smartPositionHelper.isInDetachedSlot}getReferenceWindowForViewability(e){var t;return null!==(t=this.win.FORCE_DEMO)&&void 0!==t&&t?(0,A.getWindow)(e):(0,A.findTopWindow)(e)}getViewportInViewState(){var e;const t=this.vpaidAd?this.vpaidAd.getAdHeight():St.DEFAULT_AD_HEIGHT,i=null!==(e=this.win.FORCE_DEMO)&&void 0!==e&&e;return!!this.isSmartPositioned()||(0,A.isInView)({element:this.playerContainer,elementAncestors:(0,A.findParentElements)(this.playerContainer),elementClientRect:f.getBoundingClientRect(this.playerContainer,!i),mainWindow:this.windowReferenceForViewability,thresholdCoefficient:this.formatConfig.threshold.get()/100,elementHeight:t})}setRealVisibilityInterval(){this.realVisibilityInterval=this.realVisibilityInterval.orElse((()=>l.cb.fromNullable(w.q((()=>this.checkRealVisibility()),250))))}checkRealVisibility(){if(!this.isFullscreen()&&!this.isVerticalLandscape()){this.smartPositionHelper&&this.smartPositionHelper.toggleSmartPositionIfNeeded();const e=this.getInViewState();this.trackAdCall(e),this.states.isReady&&(this.states.hasOpened?this.states.hasOpened&&!this.states.hasStopped&&(this.states.hasStarted?(this.manageInView(e),(0,T.sD)(this.formatConfig.portfolioItemId)&&this.fitContainerToContent()):(this.viewabilityTagsHelper.onScroll(),this.canStart(e)&&this.startAd())):this.isWindowVisible()&&(this.formatConfig.launch.isAuto()||this.formatConfig.launch.isThreshold()&&e)&&this.openFormat())}}checkAdsInViewportRange(){try{if("videojs"in window.top){const e=window.top.videojs.getPlayers(),t=Object.keys(e);if(t.length>0){const i=e[t[0]],s=i.el(),n=(0,A.isOrWillBeInViewWithTargetElement)(this.windowReferenceForViewability,this.playerContainer,s);if(i.usingPlugin("ads")&&i.ads.inAdBreak()&&n)return{reason:"videojs",isSafe:!1}}}return this.checkGoogleAdsInViewportRange()}catch(e){return e instanceof DOMException&&"SecurityError"===e.name?{reason:"xoerror",isSafe:!1}:{reason:"error",isSafe:!1}}}checkGoogleAdsInViewportRange(){const e=window.top.document.querySelectorAll("iframe");for(const t of e)if(t.id.startsWith("google_ads_iframe")&&t!==frameElement){if(window.teads.stickyBanner)return{reason:"sticky",isSafe:!1};if((0,A.isStickyElementInView)(this.windowReferenceForViewability,t))return window.teads.stickyBanner=!0,{reason:"sticky",isSafe:!1};if((0,A.isOrWillBeInViewWithTargetElement)(this.windowReferenceForViewability,this.playerContainer,t))return{reason:"gam",isSafe:!1}}return{isSafe:!0}}pauseAdIfShouldNotBePlaying(){if(this.states.isPlaying){const e=this.getInViewState();if(!(this.states.hasStarted?this.canPlay(e):this.canStart(e))&&(this.isInView=!1,this.requestPauseAd(),!this.hasLoggedPlayProblem)){this.hasLoggedPlayProblem=!0;const e=this.linearAd&&this.linearAd.id?this.linearAd.id:"0",t=this.linearAd&&this.linearAd.creativeId?this.linearAd.creativeId:"0";this.sumologicLogger.info(`shouldnt-be-playing ${this.placement.pid} ${t} ${e}`)}}}shouldBypassDeepVisibilityCheck(){var e;const t=this.getEnvironmentVars();return m.isIos()&&m.isCanvasUsed()&&!l.cb.fromNullable(null===(e=t.videoSlot)||void 0===e?void 0:e.mediaProxy).isEmpty()&&this.getViewportInViewState()}isVerticalLandscape(){return this.isVertical&&this.responsive&&this.responsive.isLandscape}shouldInstanciateSmart(){return!this.isVertical&&(this.formatConfig.smartPosition.isEnabled()||this.formatConfig.smart6Behavior.isEnabled())}insertViewabilityScripts(e,t){a.forEach(e,(({vendor:e,url:i})=>{const s=document.createElement("script");s.type="text/javascript",s.src=i,s.async=!0,"IAS"===e?this.parentContainer.insertBefore(s,this.parentContainer.firstChild):"DoubleVerify"===e?t.parentElement.appendChild(s):t.insertBefore(s,this.playerContainer.firstChild)}))}loadAdVerificationScripts(e){e.getExtension(Se.AD_VERIFICATIONS).map((t=>e.retrieveCreativePrefetchAdVerificationScriptUrls(t))).map((e=>{const t=this.getFunnelMacros();return a.map(e,(({vendor:e,url:i})=>({vendor:e,url:gt.GY(t)(i)})))})).forEach((e=>{const[t,i]=a.partition((e=>"Lumen"===e.vendor))(e),s=()=>{this.insertViewabilityScripts(i,this.playerContainer)};(0,o.eM)(this.player.getLinearAd().adParameters,this.player.getMediafile().url)?(this.viewabilityTagsHelper.onceThresholdReached(s),t.length>0&&(this.vpaidAd.subscribe((()=>{this.insertViewabilityScripts(t,this.playerContainer)}),Z.c.AdVideoStart),t.forEach((e=>{let t=!1;const i=new URL(e.url).searchParams.get("cp_auctionId");this.vpaidAd.subscribe((()=>{t||(t=!0,(e=>{let t=window;for(;void 0===t.attn&&t.parent&&t!==t.parent;)t=t.parent;t.attn&&((e,t)=>{for(const i in t){const s=t[i];s.config.customParams.auctionId===e&&s.destroy()}})(e,t.attn.trackers)})(i))}),Z.c.AdStopped)})))):s()}))}registerAttributionReportingEvent(){const e=this.auctionId.getOrNull(),t=this.linearAd.creativeId,i=At(this.formatConfig.insertionId);if(e&&t&&i){const s=yt(bt.Event,e,t,i),n=new Image(1,1);n.id="attribution-reporting",n.setAttribute("attributionsrc",s),n.style.display="none",this.vpaidAd.getMainComponentsContainer().appendChild(n)}}}St.DEFAULT_AD_HEIGHT=1;class Tt extends Qe{constructor(e,t,i,s,n,r){super(e,t,i,s,n,r),this.placement=e,this.config=t,this.player=i}load(e,t){super.load(e,t)}getTemplateName(){return"inread"}onAdLoaded(){super.onAdLoaded(),this.smartPositionHelper.enableBehavior(),this.smartPositionHelper.moveToCornerPosition();const e=this.smartPositionHelper.getOptimalDimension(this.parentContainer,"corner");this.parentContainer.style.setProperty("position","fixed"),this.parentContainer.style.setProperty("overflow","visible"),this.parentContainer.style.setProperty("width",`${e.width}px`),this.parentContainer.style.setProperty("height",`${e.height}px`),this.parentContainer.style.setProperty("right",`${ut.MARGIN_FROM_EDGES_IN_PX}px`),this.parentContainer.style.setProperty("bottom",`${ut.MARGIN_FROM_EDGES_IN_PX}px`),this.startAd()}onAdVideoStart(){super.onAdVideoStart(),this.openFormat()}fitContainerToContent(e){return null}getViewportInViewState(){return!0}initInternalResponsive(){super.initInternalResponsive(!1)}onVpaidReady(){super.onVpaidReady(),this.fullscreenHelper=new tt(this.parentContainer,this.vpaidAd,this.components,this.responsive,this.win,this.playerContainer),this.brandingMode=new mt(this),this.formatConfig.smartPosition.setValue({corner:!0,top:!1,mustBypassWhitelist:!1}),this.smartPositionHelper=new ut(this)}openFormat(){this.states.hasOpened=!0,this.placement.placementConfig.css.applyRulesOn(this.parentContainer)}}const kt=e=>(0,a.includes)([70],e);function Pt(e,t,i=null,s){var n;const r=s&&s.display||e.adType.isDisplay()||e.adType.isNative(),o=function(e,t,i){let s={disable:!e.closeButton.isEnabled(),countdown:e.closeButton.getCountdown(),listenSkippableState:!1};return(e.closeButton.hasToGetValueFromVast()||s.disable&&e.smartPosition.isTop())&&(s.disable=!1,t&&t.skipDelay?s.countdown=t.skipDelay:s.listenSkippableState=!0),i.isSliderEnabled()&&(s.disable=!0,s.listenSkippableState=!1),s}(e,i,t),a=function(e,t){let i={disable:e.disable,listenSkippableState:e.listenSkippableState};return t.isSliderEnabled()&&(i.disable=!0,i.listenSkippableState=!1),i}(o,t);return{clicktoplay:{disable:!e.videoStart.isClick()},closebutton:{disable:o.disable,countdown:o.countdown,listenSkippableState:o.listenSkippableState},soundbutton:{disable:!!(r||e.sliderBehavior.isEnabled()||t.isSliderEnabled())||!e.soundButton.isEnabled,startOffset:e.soundButton.countdown,type:e.soundButton.type},progressbar:{disable:r||kt(e.portfolioItemId)||!e.progressBar.isEnabled()},clickbutton:{disable:!!s||kt(e.portfolioItemId)||!e.callButton.isEnabled(),startOffset:e.callButton.getCountdown(),text:e.callButton.getText()},label:{disable:!0,html:e.label.getHTML()},credits:{formatName:e.formatName.get(),disable:!0,text:e.credits.getText(),url:e.credits.getLink()},endscreen:{disable:!!(r||e.sliderBehavior.isEnabled()||t.isSliderEnabled())||e.end.isCollapse()||e.end.isEndScreen()&&!e.endScreen.isEnabled(),countdown:e.endScreen.getCountdown(),callButton:e.endScreen.getCallButton(),closeButton:{disable:a.disable,listenSkippableState:a.listenSkippableState},replayButton:e.endScreen.getReplayButton(),autoClose:e.endScreen.getAutoClose()},fullscreenbutton:{disable:r||!e.playerClick.isFullscreen(),preventDefault:!0},brandlogo:{disable:!e.brandLogo.isEnabled(),url:e.brandLogo.getUrl()},startscreen:{disable:!e.adType.isVideo()},earlyclickoverlay:{displayTime:null!==(n=e.earlyClickProtectionDuration)&&void 0!==n?n:0},bannervideobottom:{disable:!(e.adType.isVideo()&&kt(e.portfolioItemId)),text:e.bannerVideoBottom.getText()},hourglass:{disable:!e.smart6Behavior.isEnabled()}}}var xt=i(9632);const Lt="teads-studio";function _t(e){let t;return e&&e.extensions&&e.extensions.length>0&&a.forEach(e.extensions,(e=>{e.type===Lt&&(t=Ot(e.content))})),t}function Ot(e){try{return JSON.parse(e)}catch(e){new c.Y("TeadsStudioExtension").error(Lt+" extension throw an exception",e)}}function Vt({instancesStore:e,placement:t,formatConfig:i,vastPlayer:s,sumologicLogger:n,adCallTrackOpts:r,auctionId:o,viewerId:a}){i.sliderBehavior.isEnabled()?t.enableSlider():t.isSliderEnabled()&&i.sliderBehavior.setValue({enable:!0});const l=i.sliderBehavior.isEnabled()?new Tt(t,i,s,o,a,n):new St(t,i,s,r,o,a,n);return function(e,t,i){const s=i.formatConfig.formatName.get();e[s]||(e[s]=[]),e[s].push(i),i.setWigo(t)}(e,t.wigo,l),xt.o(),l}let Rt=!1;function Dt({coords:{accuracy:e,latitude:t,longitude:i}}){return{accuracy:e,latitude:t,longitude:i}}class Nt{constructor(e,t){this.api=e,this.playerWindow=t,this.eventListenerManager=new v.C}startListening(){this.eventListenerManager.add("message",this.playerWindow,(e=>{if((0,C.Y9)(e.data)){const t=e.data;if(!t.method)return;if(t.method===Nt.INIT_MESSAGE)this.pairedAdWindow=e.source,this.sendMessage({method:Nt.INIT_MESSAGE});else try{if((0,h.isFunction)(this.api[t.method]))if("getUserLocation"===t.method)this.handleGetUserLocationRequest(t);else{const e=this.api[t.method](...t.methodArgs);this.sendMessage({method:t.method,methodReturn:e})}else this.sendMessage({method:t.method,error:`Method ${t.method} does not exist on api`})}catch(e){this.sendMessage({method:t.method,error:e.toString()})}}}))}stopListening(){this.eventListenerManager.remove("message")}sendMessage(e){this.pairedAdWindow&&this.pairedAdWindow.postMessage(e,"*")}handleGetUserLocationRequest(e){this.api[e.method]((t=>{this.sendMessage({method:e.method,methodReturn:Dt(t)})}),(t=>{this.sendMessage({method:e.method,methodReturn:t.message||t.toString()})}))}}Nt.INIT_MESSAGE="studio-ad--format-RPC",Nt.SENSOR_UPDATE="-studio-ad--sensors-update";var Mt=i(8808);function Bt(){return m.isDesktop()}class Ft{constructor(){this.resize=h.noop,this.logger=new c.Y("FixedBackground"),this.initialized=!1,this.loaded=!1,this.loadListeners=[],this.resizeContainer=e=>{e&&"orientationchange"===e.type&&(this.center=null);const t=f.getBoundingClientRect(this.container,!1),i=f.getWindowSize(this.win),s=Math.round(t.width),n=this.image.height*s/this.image.width;if(this.baseContainer.style.setProperty("width",`${s}px`),this.baseContainer.style.setProperty("height",`${Math.round(t.height)}px`),Bt())this.center=this.center||(i.height-n)/2,this.baseContainer.style.setProperty("background-size",`${Math.round(s)}px ${Math.round(n)}px`),this.baseContainer.style.setProperty("background-position",`${Math.round(t.left)}px ${this.center}px`);else{this.fixedContainer.style.setProperty("width",`${Math.round(s)}px`),this.fixedContainer.style.setProperty("height",`${Math.round(1.2*(i.height+n))}px`),this.fixedContainer.style.setProperty("background-size",`${Math.round(s)}px ${Math.round(n)}px`),this.fixedContainer.style.setProperty("left",`${Math.round(t.left)}px`),this.center=this.center||(i.height-n)/2%n;const e=this.center>0?this.center-n:this.center;this.fixedContainer.style.setProperty("top",`${e}px`)}},this.resizeVideoContainer=e=>{const t=f.getBoundingClientRect(this.container,!1),i=Math.round(t.width),s=Math.round(this.video.videoHeight*i/this.video.videoWidth);this.baseContainer.style.setProperty("width",`${i}px`),this.baseContainer.style.setProperty("height",`${Math.round(t.height)}px`),this.video.style.setProperty("width",`${i}px`),this.video.width=i,this.video.style.setProperty("height",`${s}px`),this.video.height=s,this.video.style.setProperty("left",`${Math.round(t.left)}px`)}}init(e,t){this.initialized||(this.initialized=!0,this.container=e,this.win=A.getWindow(this.container),A.addClass(t,"teads-display-format"),this.eventListenerManager=new v.C,this.eventListenerManager.addMultiple(["resize","orientationchange"],this.win,(()=>this.resize())),this.eventListenerManager.addMultiple(["transitionend","otransitionend","oTransitionEnd","webkitTransitionEnd"],this.container,(()=>this.resize())))}loadImage(e,t){new Promise((t=>{this.image=new Image,this.image.onerror=e=>t([!1,l.cb.empty()]),this.image.onload=e=>{this.image.naturalWidth&&this.image.naturalHeight?t([!0,l.cb.fromNullable(this.image)]):(this.logger.error("setFixedBackgroundImage: Asset size error: cannot retrieve image dimensions"),t([!1,l.cb.fromNullable(this.image)]))},this.image.src=e})).then((([e,i])=>{t(e,i),e&&this.triggerLoadListeners()}))}loadVideo(e,t,i){this.video&&this.destroy(),this.video=t.videoSlot,new Promise((t=>{this.video.addEventListener(Mt.g.ERROR,(()=>{t([!1,l.cb.empty()])})),this.video.addEventListener(Mt.g.LOADED_METADATA,(()=>{this.video.videoWidth&&this.video.videoHeight?t([!0,l.cb.fromNullable(this.video)]):(this.logger.error("setFixedBackgroundVideo: Asset size error: cannot retrieve video dimensions"),t([!1,l.cb.fromNullable(this.video)]))})),this.video.src===e?(this.video.currentTime=0,t([!0,l.cb.fromNullable(this.video)])):(this.video.setAttribute("preload","auto"),this.video.src=e)})).then((([e,t])=>{i(e,t),e&&this.triggerLoadListeners()}))}initContainer(){var e,t;this.resize=this.resizeContainer,me(Ft.CSS,this.win,Ft.STYLE_NODE_ID),this.baseContainer=null!==(e=this.baseContainer)&&void 0!==e?e:this.win.document.createElement("div"),this.baseContainer.className=Ft.CSSCLASSES.absolute,Bt()?this.baseContainer.style.setProperty("background-image",`url(${this.image.src})`):(this.fixedContainer=null!==(t=this.fixedContainer)&&void 0!==t?t:this.win.document.createElement("div"),this.fixedContainer.style.setProperty("background-image",`url(${this.image.src})`),this.fixedContainer.className=Ft.CSSCLASSES.fixed,this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important"),this.baseContainer.appendChild(this.fixedContainer)),this.resize()}initVideoContainer(e){var t;this.resize=this.resizeVideoContainer,me(Ft.CSS,this.win,Ft.STYLE_NODE_ID),this.baseContainer=null!==(t=this.baseContainer)&&void 0!==t?t:this.win.document.createElement("div"),this.baseContainer.className=Ft.CSSCLASSES.absolute,this.baseContainer.style.setProperty("-webkit-clip-path","inset(1px 0px)","important"),this.baseContainer.style.setProperty("clip-path","inset(1px 0px)","important"),(this.baseContainer.style.getPropertyValue("-webkit-clip-path")||this.baseContainer.style.getPropertyValue("clip-path"))&&A.addClass(this.video,Ft.CSSCLASSES.videoScroller),e.subscribe((()=>this.video.play()),Z.c.AdPlaying),e.subscribe((()=>this.video.pause()),Z.c.AdPaused),this.eventListenerManager.add("scroll",this.win,(()=>{const t=this.isInView(this.container,e)?1:0;this.video.style.setProperty("opacity",`${t}`,"important")})),this.baseContainer.appendChild(this.video),this.resize()}append(){this.container.style.setProperty("position","relative"),this.container.style.setProperty("z-index","100"),this.container.parentNode.insertBefore(this.baseContainer,this.container)}destroy(){this.baseContainer.parentNode.removeChild(this.baseContainer),this.eventListenerManager.removeAll()}getBaseContainer(){return this.baseContainer}getFixedContainer(){return this.fixedContainer}getImage(){return this.image}getVideo(){return this.video}isInView(e,t){return A.isInView({element:e,elementAncestors:A.findParentElements(e),elementClientRect:f.getBoundingClientRect(e),mainWindow:this.win,thresholdCoefficient:.001,elementHeight:t.getAdHeight()})}get isLoaded(){return this.loaded}onLoad(e){this.loaded?e():this.loadListeners.push(e)}triggerLoadListeners(){this.loaded=!0;for(const e of this.loadListeners)e()}}Ft.CSS=W(),Ft.CSSCLASSES={absolute:"teads-display-absolute",fixed:"teads-display-fixed",clickZone:"teads-display-clickzone",videoScroller:"teads-video-scroller"},Ft.STYLE_NODE_ID="teads-inread-display";var Ut,Wt,Ht,jt=i(5072),zt=i(6768),Gt=i(2152);!function(e){e[e.InreadCarouselLandscape=15]="InreadCarouselLandscape",e[e.InreadCarouselSquare=16]="InreadCarouselSquare",e[e.SingleImagePerformanceLandscape=43]="SingleImagePerformanceLandscape",e[e.SingleImagePerformanceSquare=56]="SingleImagePerformanceSquare",e[e.SingleImagePerformanceVertical=57]="SingleImagePerformanceVertical",e[e.CarouselPerformanceLandscape=58]="CarouselPerformanceLandscape",e[e.CarouselPerformanceSquare=59]="CarouselPerformanceSquare",e[e.CarouselPerformanceVertical=60]="CarouselPerformanceVertical",e[e.SingleVideoPerformanceLandscape=65]="SingleVideoPerformanceLandscape",e[e.SingleVideoPerformanceSquare=66]="SingleVideoPerformanceSquare",e[e.SingleVideoPerformanceVertical=67]="SingleVideoPerformanceVertical",e[e.SingleImagePerformanceBanner=68]="SingleImagePerformanceBanner",e[e.CarouselPerformanceBanner=71]="CarouselPerformanceBanner",e[e.SingleVideoPerformanceBanner=72]="SingleVideoPerformanceBanner"}(Ut||(Ut={})),function(e){e[e.InreadSocialVideoLandscape=44]="InreadSocialVideoLandscape",e[e.InreadSocialVideoSquare=45]="InreadSocialVideoSquare",e[e.InreadSocialVideoVertical=46]="InreadSocialVideoVertical",e[e.InreadSocialImageLandscape=47]="InreadSocialImageLandscape",e[e.InreadSocialImageSquare=48]="InreadSocialImageSquare",e[e.InreadSocialImageVertical=49]="InreadSocialImageVertical",e[e.InreadSocialVideo=50]="InreadSocialVideo",e[e.InreadSocialImage=51]="InreadSocialImage"}(Wt||(Wt={})),function(e){e[e.BannerVideo=70]="BannerVideo"}(Ht||(Ht={}));class Yt{constructor(e,t,i){this.placement=e,this.format=t,this.gdprIab=i,this.adMetadata=l.MB,this.logger=new c.Y("VPAIDApi"),this.fixedBackgroundImage=new Ft,this.fixedBackgroundVideo=new Ft,this.allowedSafeFrameHeight=null;const s=this.placement.getPlayerContainer(),n=A.getWindow(s);this.communicationBridge=new Nt(this,n),this.communicationBridge.startListening()}close(){this.communicationBridge&&this.communicationBridge.stopListening()}setStudioData(e){const t=this.format.getVpaidAd();this.studioData=e,t.status>=We.c.STARTED?this.applyStudioDataOnUI():t.subscribe((0,_.m)(this.applyStudioDataOnUI,this),Z.c.AdStarted)}applyStudioDataOnUI(){if(this.studioData)try{Ve.c.vast.setStudioCreativeId(this.format.placement.key)(this.studioData.studio_cid);const e=this.format.getVpaidAd(),t=e.getComponent("soundbutton");t&&t.setShowOnVideoStart(!this.studioData.display);const i=e.getComponent("progressbar");i&&(i.setShowOnVideoProgress(!this.studioData.display),i.setShowOnVideoStart(!this.studioData.display)),this.setSoundControlVisibility(!this.studioData.display),this.setProgressControlVisibility(!this.studioData.display)}catch(e){this.logger.error(`setStudioData error ${e.message}`)}else this.logger.error("applyStudioDataOnUI error","studioData needed to apply them on UI")}getSumologicOption(){return{enabled:u.E.isSumologicLogsEnabled,pid:this.placement.pid,formatVersion:"1342"}}isStudioDisplay(){return this.studioData&&this.studioData.display}getStudioData(){try{this.studioData=this.studioData||_t(this.format.linearAd)}catch(e){this.logger.error("getStudioData error","format has not been instantiated yet",e)}return this.studioData}getContextData(){return e=this.format.linearAd,t=this.gdprIab,Object.assign(Object.assign({},function(e){let t;return e&&e.extensions&&e.extensions.length>0&&a.forEach(e.extensions,(e=>{e.type===Se.TEADS_CONTEXT&&(t=function(e){try{return JSON.parse(e)}catch(e){new c.Y("ITeadsContextExtension").error(Se.TEADS_CONTEXT+" extension throw an exception",e)}}(e.content))})),t}(e)),{gdpr:{applies:(0,jt.A)((0,jt.E)(t.status)),consent:t.consent}});var e,t}isReplay(){return this.format.states.isReplay}activateTapMode(e=!0){}performTapMode(e){let t=this.format.getBrandingMode();t&&(void 0===e&&(e=!t.isActive()),e?t.isInitialized()?t.isActive()||t.start():(t.init(),t.start()):t.isActive()?(t.stop(),t.deinit()):t.isInitialized()&&t.deinit())}isFullscreen(){return this.format.getFullscreenHelper().isActive()}requestFullscreen(){try{this.format.getVpaidAd().dispatchCustomEvent("FullscreenRequest")}catch(e){this.logger.error(`requestFullscreen error ${e.message}`)}}setSoundControlVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("soundbutton"):t.hideComponent("soundbutton")}catch(e){this.logger.error(`setSoundControlVisibility error ${e.message}`)}}setFullscreenButtonVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("fullscreenbutton"):t.hideComponent("fullscreenbutton")}catch(e){this.logger.error(`setFullscreenButtonVisibility error ${e.message}`)}}setProgressControlVisibility(e){try{const t=this.format.getVpaidAd();e?t.showComponent("progressbar"):t.hideComponent("progressbar")}catch(e){this.logger.error(`setProgressControlVisibility error ${e.message}`)}}setStartScreenVisibility(e){var t,i;try{const s=this.format.getVpaidAd(),n="startscreen";if(s.isRendered)e?s.showComponent(n):s.hideComponent(n);else{const r=s.getConfig();null!==(t=(i=r.components)[n])&&void 0!==t||(i[n]={}),r.components[n].disable=!e}}catch(e){this.logger.error(`setStartScreenVisibility error ${e.message}`)}}isVideoBanner(){return this.format.formatConfig.portfolioItemId in Ht}getCreativeSize(){return this.format.formatConfig.creativeSize}getSlotBounds(){var e;const t=!(null!==(e=window.FORCE_DEMO)&&void 0!==e&&e);return Ze.AT.tryCatch((()=>{var e,i,s;const n=this.placement.getPlayerContainer(),r=A.getWindow(n),o=f.getBoundingClientRect(n,t);if((0,h.isNull)(this.allowedSafeFrameHeight)&&((0,m.isIABSafeFrame)()||(0,m.isAmpSF)())&&Le.IL){const t=l.cb.fromNullable(null===(e=this.format.components.getComponent("label"))||void 0===e?void 0:e.getElement()).map((e=>f.getBoundingClientRect(e).height)).getOrValue(0);this.allowedSafeFrameHeight=Le.IL.self.h+Le.IL.exp.b-t}const a=null!==(s=null===(i=this.format.responsive)||void 0===i?void 0:i.getContainerWidth())&&void 0!==s?s:o.width,d=this.allowedSafeFrameHeight?this.allowedSafeFrameHeight:Math.max(o.height,r.innerHeight);return Object.assign(Object.assign({},o),{viewportHeight:r.innerHeight,viewportWidth:r.innerWidth,maxWidth:a,maxHeight:d})})).orElse((e=>(this.logger.error(`getSlotBounds error ${e.message}`),(0,Ze.WY)(e)))).toOption().getOrNull()}sendAdClickThru(e){Ze.AT.tryCatch((()=>{this.format.getVpaidAd().dispatchCustomEvent(Z.c.AdClickThru,e)})).tapLeft((e=>this.logger.error(`sendAdClickThru error ${e.message}`)))}sendVideoMetadata(e){var t;((t=this.format.formatConfig.portfolioItemId)in Ut||t in Wt)&&(this.adMetadata=l.cb.fromNullable(e)),Ze.AT.tryCatch((()=>{this.format.getVpaidAd().dispatchCustomEvent($e.c.AdVideoMetadata,e)})).tapLeft((e=>this.logger.error(`sendVideoMetadata error ${e.message}`)))}hideCredits(){Ze.AT.tryCatch((()=>{var e;return l.cb.fromNullable(null===(e=this.format.components.getComponent("credits"))||void 0===e?void 0:e.getElement()).forEach((e=>{e.style.display="none"}))})).tapLeft((e=>this.logger.error("Something went wrong when trying to hide the credits",e)))}sendReplayRequest(){Ze.AT.tryCatch((()=>{this.format.getVpaidAd().dispatchCustomEvent(Y.c.ReplayRequest)})).tapLeft((e=>this.logger.error(`sendReplayRequest error ${e.message}`)))}setFixedBackgroundImage(e,t=h.noop){this.fixedBackgroundImage.init(this.placement.getPlayerContainer(),this.placement.getParentContainer());const i=this.format.getVpaidAd();this.setBackgroundColor("transparent"),this.hideVideoContainer(),m.isUIWebview()||i.subscribe((()=>this.fixedBackgroundImage.resize()),Z.c.AdSizeChange),i.subscribe((()=>this.fixedBackgroundImage.resize()),Z.c.AdStarted),i.subscribe((()=>this.fixedBackgroundImage.destroy()),Z.c.AdStopped),i.subscribe((()=>this.fixedBackgroundImage.destroy()),Z.c.AdError),this.fixedBackgroundImage.loadImage(e,(()=>{this.fixedBackgroundImage.initContainer(),this.logger.debug("background image ready !"),i.status>=We.c.LOADED?(this.fixedBackgroundImage.append(),this.checkTouchOverflow(this.fixedBackgroundImage)):i.subscribe((()=>{this.fixedBackgroundImage.append(),this.checkTouchOverflow(this.fixedBackgroundImage)}),Z.c.AdLoaded),t()}))}setFixedBackgroundVideo(e,t=h.noop){this.fixedBackgroundVideo.init(this.placement.getPlayerContainer(),this.placement.getParentContainer());const i=this.format.getVpaidAd();this.setBackgroundColor("transparent"),this.hideVideoContainer(),m.isUIWebview()||i.subscribe((()=>this.fixedBackgroundVideo.resize()),Z.c.AdSizeChange),i.subscribe((()=>this.fixedBackgroundVideo.resize()),Z.c.AdStarted),i.subscribe((()=>this.fixedBackgroundVideo.destroy()),Z.c.AdStopped),i.subscribe((()=>this.fixedBackgroundVideo.destroy()),Z.c.AdError),this.fixedBackgroundVideo.loadVideo(e,this.format.getEnvironmentVars(),(e=>{e&&(this.fixedBackgroundVideo.initVideoContainer(i),this.logger.debug("background video ready !"),i.status>=We.c.LOADED?(this.fixedBackgroundVideo.append(),this.checkTouchOverflow(this.fixedBackgroundVideo)):i.subscribe((()=>{this.fixedBackgroundVideo.append(),this.checkTouchOverflow(this.fixedBackgroundVideo)}),Z.c.AdLoaded)),t()}))}hideVideoContainer(){var e;(e=this.format.getVpaidAd().getCreativeContainer(),((0,m.isAmp)()||(0,m.isIABSafeFrame)())&&"IFRAME"!==e.tagName?e.ownerDocument:e.contentDocument).getElementById("video-container").style.setProperty("display","none")}setBackgroundColor(e){try{this.format.getVpaidAd().getVPAIDContainer().style.setProperty("background-color",e)}catch(e){this.logger.error(`setBackgroundColor error ${e.message}`)}}addDeviceOrientationListener(){var e,t;e=this.communicationBridge,(t=A.getWindow(this.placement.getPlayerContainer()))&&t.DeviceOrientationEvent&&!Rt&&(Rt=!0,f.addEventListener("deviceorientation",t,(t=>{e.sendMessage({method:Nt.SENSOR_UPDATE,methodReturn:{alpha:t.alpha,beta:t.beta,gamma:t.gamma,absolute:t.absolute}})})))}getUserLocation(e,t){!function(e,t,i){Ze.AT.tryCatch((()=>{e.navigator.geolocation.getCurrentPosition(t,i)})).orElse((e=>(i({code:1,message:e.message,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3}),(0,Ze.WY)(e))))}(A.getWindow(this.placement.getPlayerContainer()),e,t)}customizeUI(e){const t="vpaid-ui-custom-css";l.cb.fromNullable(this.placement).match({some:i=>l.cb.fromNullable(this.format).match({some:i=>l.cb.fromNullable(i.getVpaidAd()).match({some:i=>{const s=A.getWindow(i.getMainComponentsContainer());!function(e,t){l.cb.fromNullable(null==t?void 0:t.document).flatMap((t=>l.cb.fromNullable(t.getElementById(e)))).forEach((e=>l.cb.fromNullable(e.parentNode).forEach((t=>t.removeChild(e)))))}(t,s),me(e,s,t)},none:()=>this.logger.error("customizeUI: getVpaidAd() returned undefined or null")}),none:()=>this.logger.error("customizeUI: getFormat() returned undefined or null")}),none:()=>this.logger.error("customizeUI: this.placement is undefined or null")})}getTeadsInfo(){return{placementId:this.format.formatConfig.placementId||null,connectionId:this.format.formatConfig.connectionId||null,insertionId:this.format.formatConfig.insertionId||null,creativeId:parseInt(this.format.linearAd.creativeId,10)||null,clickPixels:(0,a.map)(this.format.linearAd.tracking.click,(({url:e})=>e)),slotType:this.format.slotType,environment:m.getEnv()}}triggerViewabilityTag(e){try{this.format.viewabilityTagsHelper.onceThresholdReached(e)}catch(e){this.logger.error(`triggerViewabilityTag error ${e.message}`)}}isMobile(){return m.isMobile()||m.isTablet()}isSDK(){return(0,m.isSDK)()}getCreativeTag(e){var t,i;try{return this.format.viewabilityTagsHelper.getCreativeTag(e,l.cb.fromNullable(null===(i=null===(t=this.format)||void 0===t?void 0:t.formatConfig)||void 0===i?void 0:i.portfolioItemId))}catch(t){return this.logger.error(`"Unable to get creative tag: "${t}"`),e}}requestInterscroller(){(0,Gt.y)()&&(this.interscroller||(this.logger.info("[Interscroller] Enable behavior"),this.interscroller=new zt.c(this.format),this.interscroller.enableBehavior(),this.setStartScreenVisibility(!1)))}checkTouchOverflow(e){const t=(e,i)=>e===i||!(!i||!i.parentElement)&&t(e,i.parentElement);try{const i=this.placement.getParentContainer(),s=e.getBaseContainer();((e,i)=>{const s=f.getBoundingClientRect(e),n=A.getDocument(e).elementFromPoint(s.left+s.width/2,s.top+-10);return n===e||t(e,n)})(i)&&s.style.setProperty("z-index","-1")}catch(e){}}}Yt.STUDIO_CID_MACRO_METADATA="[STUDIO_CID]";var $t=i(3215);class qt{constructor(e){this.ui=e}init(e,t,i,s){this.closeButton=l.cb.fromNullable(this.ui.getComponent("closebutton")),this.closeButtonMode=this.closeButton.map((e=>e.mode)).getOrNull(),this.soundButton=l.cb.fromNullable(this.ui.getComponent("soundbutton")),this.clickButton=l.cb.fromNullable(this.ui.getComponent("clickbutton")),this.adChoicesButton=l.cb.fromNullable(this.ui.getComponent("adchoices")),this.hourglass=l.cb.fromNullable(this.ui.getComponent("hourglass")),this.labelIsEnabled=i,(0,m.isDesktop)()&&this.hourglass.forEach((e=>e.center(this.labelIsEnabled))),!this.closeButton||2===this.closeButtonMode||e||t||this.ui.subscribe(s,Z.c.AdVideoMidpoint)}setCornerPositionPlayerComponents(e){this.clickButton.forEach((e=>{e.hide(),e.getConfig().disable=!0})),this.soundButton.forEach((e=>e.hide())),this.closeButton.forEach((e=>e.hide())),this.adChoicesButton.forEach((e=>e.hide())),this.hourglass.forEach((e=>e.center(this.labelIsEnabled))),2===this.closeButtonMode&&this.closeButton.forEach((t=>t.changeOnCountdownEnded((()=>{t.show(),e.showHeaderCloseButton()})))),e.shouldShowCloseButton&&e.showHeaderCloseButton()}setTopPositionPlayerComponents(e){this.clickButton.forEach((e=>{e.hide(),e.getConfig().disable=!0})),this.closeButton.forEach((t=>t.onClickAction=(0,l.sx)(e.onCloseButtonClick))),this.adChoicesButton.forEach((e=>e.show())),1===this.closeButtonMode&&e.shouldShowCloseButton&&this.closeButton.forEach((e=>e.show()))}cleanupCornerPositionSpecificUI(e){this.clickButton.forEach((e=>{e.show(),e.getConfig().disable=!1})),this.adChoicesButton.forEach((e=>e.show())),this.soundButton.forEach((e=>e.show())),1!==this.closeButtonMode&&this.closeButton.forEach((e=>e.show())),this.hourglass.forEach((e=>e.center(this.labelIsEnabled))),2===this.closeButtonMode&&this.closeButton.forEach((t=>t.changeOnCountdownEnded((()=>{t.show(),e()}))))}cleanupTopPositionSpecificUI(){this.clickButton.forEach((e=>{e.show(),e.getConfig().disable=!1})),this.closeButton.forEach((e=>e.restoreOnClickAction())),1===this.closeButtonMode&&this.closeButton.forEach((e=>e.hide()))}isCloseButtonMode(e){return e===this.closeButtonMode}showCloseButton(){this.closeButton.forEach((e=>e.show()))}hideCloseButton(){this.closeButton.forEach((e=>e.hide()))}showHourglass(){this.hourglass.forEach((e=>e.show()))}}const Kt={id:100,message:"callback success function throw an exception "},Qt={id:200,message:"You must specify the bundle asset you want to use with teads.vpaid.BundledContainer.(CANVAS|VIDEO)"},Xt={id:400,message:"VPAIDJS getVPAIDAd throw an exception"},Zt={id:500,message:"Unable to load VPAID ad, file doesn't exists"},Jt={id:501,message:"Unable to load VPAID ad, timeout error"};var ei=i(3419),ti=i(1040),ii=i(2292);class si extends ei.c{constructor(){super(...arguments),this.status=vt.UNSTARTED}static getFileExtension(e){return E.K0(e).pathname.split(".").pop()}getStatus(){return this.status}getVideoUrl(){return this.videoUrl}load(e,t){if(a.indexOf(si.alreadyEncoded,si.getFileExtension(e))>-1)return this.videoUrl=e,this.status=vt.READY,void this.dispatch(ft.READY,{errorCode:200});this.status=vt.WAITING,this.dispatch(ft.WAITING);const i=location.hostname.match(/.+\.sandbox\.teads\.net|localdocker/),s="https://[HOST]/transcode?url=[URL]&bitrate=[BITRATE]".replace(/\[HOST\]/,i?i[0]+":18088":"mp.teads.tv").replace(/\[URL\]/,encodeURIComponent(e)).replace(/\[BITRATE\]/,t.toString()),n=ii.vQ();let r=!1;n.open("GET",s,!0),n.onreadystatechange=()=>{4!==n.readyState||r||(200===n.status?(this.videoUrl=n.responseText,this.status=vt.READY,this.dispatch(ft.READY,{errorCode:n.status}),r=!0):(this.status=vt.ERROR,this.dispatch(ft.ERROR,{errorCode:n.status}),r=!0),ti.c.info(`proxy resp ${n.status}`))},n.send(),ti.c.info("proxy call")}}si.alreadyEncoded=["tv","mpg","mpeg"];var ni,ri=i(3092);!function(e){e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(ni||(ni={}));const oi=ni;function ai(e,t,i,s){Object.defineProperty(e,t,function(){let e={enumerable:!0,configurable:!0,get:function(){return i.call(this)},set:function(e){}};return s&&(e.set=function(e){s.call(this,e)}),e}())}const li="abort",di="canplay",ci="canplaythrough",hi="durationchange",ui="emptied",pi="encrypted",gi="ended",mi="error",fi="interruptbegin",vi="interruptend",Ai="loadeddata",bi="loadedmetadata",yi="loadstart",wi="pause",Ei="play",Ci="playing",Ii="progress",Si="ratechange",Ti="seeked",ki="seeking",Pi="stalled",xi="suspend",Li="timeupdate",_i="volumechange",Oi="waiting",Vi={poster:!0,width:!0,height:!0,videoHeight:!1,videoWidth:!1,buffered:!1,duration:!1,ended:!1,error:!1,networkState:!1,paused:!1,played:!1,readyState:!1,seekable:!1,seeking:!1,currentSrc:!1,autoplay:!0,controls:!0,currentTime:!0,loop:!0,muted:!1,defaultMuted:!0,playbackRate:!1,defaultPlaybackRate:!1,preload:!1,src:!0,volume:!0,audioTracks:!1,textTracks:!1,videoTracks:!1},Ri=function(e){this._wrappedVideo=e};Ri.prototype=Object.create(HTMLElement.prototype);let Di=function(e,t){ai(Ri.prototype,e,(function(){return this._wrappedVideo[e]}),(function(i){t&&(this._wrappedVideo[e]=i)}))};for(var Ni in Vi)Vi.hasOwnProperty(Ni)&&Di(Ni,Vi[Ni]);Ri.prototype.addEventListener=function(e,t,i=!1){this._wrappedVideo.addEventListener(e,t,i)},Ri.prototype.canPlayType=function(e){return this._wrappedVideo.canPlayType()},Ri.prototype.load=function(){this._wrappedVideo.load()},Ri.prototype.pause=function(){this._wrappedVideo.pause()},Ri.prototype.play=function(){this._wrappedVideo.play()},Ri.prototype.getVideoPlaybackQuality=function(){return this._wrappedVideo.getVideoPlaybackQuality()},Ri.prototype.webkitEnterFullscreen=function(){return this._wrappedVideo.webkitEnterFullscreen()},Ri.prototype.webkitExitFullscreen=function(){this._wrappedVideo.webkitExitFullscreen()},Ri.prototype.webkitEnterFullScreen=function(){this.webkitEnterFullscreen()},Ri.prototype.webkitExitFullScreen=function(){this.webkitExitFullscreen()};class Mi{constructor(){this.ranges=[]}get length(){return this.ranges.length}addRange(e,t){this.ranges.push({start:e,end:t})}start(e){return this.ranges[e].start}end(e){return this.ranges[e].end}}var Bi=i(3288);function Fi(){this.logger=new c.Y("HTMLVideoCanvas"),this._mainContainer=document.createElement("div"),this._mainContainer.style.backgroundColor="black",this._mainContainer.style.position="relative",this._mainContainer.style.width="100%",this._mainContainer.style.height="100%",this._mainContainer.style.zIndex=1,this.appendChild(this._mainContainer),this._videoContainer=document.createElement("div"),this._videoContainer.style.position="absolute",this._videoContainer.style.top=0,this._videoContainer.style.left=0,this._videoContainer.style.zIndex=2,this._videoContainer.style.width="100%",this._videoContainer.style.height="100%",this._mainContainer.appendChild(this._videoContainer),this.canvasPlayer=new ri.c(this._videoContainer,1,1,{type:"CANVAS"}),this.mediaProxy=new si,this.mediaProxy.listen(ft.READY,(()=>{this.logger.debug("MediaProxy return video url",this.mediaProxy.getVideoUrl()),this.canvasPlayer.src=this.mediaProxy.getVideoUrl(),this.autoplay&&this.canvasPlayer.play(),this.volume=this._volume})),this.mediaProxy.listen(ft.ERROR,(()=>{this.logger.debug("MediaProxy didn't return video url"),this._error={code:oi.MEDIA_ERR_NETWORK},this.canvasPlayer.dispatch(mi)})),this.canvasPlayer.canvas.style.position="absolute",this.canvasPlayer.canvas.style.maxHeight="none",this.canvasPlayer.canvas.style.maxWidth="none",this.canvasPlayer.canvas.style.top="0",this.canvasPlayer.canvas.style.left="0",Ri.call(this,this.canvasPlayer),this.listeners={};let e=t=>{if(this.listeners[t.type]&&this.listeners[t.type].length){for(let e=0,i=this.listeners[t.type].length;e<i;e++)try{this.listeners[t.type][e].call(this,t)}catch(e){this.logger.error(`Error in Canvas event handler: "${e}"`)}"loadedmetadata"===t.type&&e(new CustomEvent("durationchange")),"playing"!==t.type||this.attachedCallbackCalled||this.attachedCallback()}};for(var t in s){let i=s[t];this.canvasPlayer.addEventListener(i,(t=>{e(t)}))}this.canvasPlayer.addEventListener(bi,(e=>{this._handleResize()})),this.canvasPlayer.addEventListener(hi,(e=>{void 0!==this._volume&&(this.canvasPlayer.volume=this._volume)})),this.canvasPlayer.addEventListener(Ci,(t=>{let i=()=>{this._width&&this._height||(this.logger.debug("component got no width/height, try to adapt to container"),this._width=this._mainContainer.offsetWidth,this._height=this._mainContainer.offsetHeight),this._width&&this._height?(this.logger.debug("component have dimensions, force resize",this._width,this._height),this._handleResize()):setTimeout(i,100)};i(),e(new CustomEvent("timeupdate"))})),this._ended=!1,this.canvasPlayer.addEventListener(gi,(t=>{this._ended=!0,this._paused=!0,e(new CustomEvent("timeupdate")),e(new CustomEvent("ended")),this.loop&&(this.currentTime=0,this.play())})),this._paused=!0,this.canvasPlayer.addEventListener(wi,(e=>{this._paused=!0})),this.canvasPlayer.addEventListener(Li,(e=>{this._paused=!1})),this._seeking=!1,this.canvasPlayer.addEventListener(ki,(e=>{this._seeking=!0})),this.canvasPlayer.addEventListener(Ti,(e=>{this._seeking=!1})),this.canvasPlayer.addEventListener(mi,(e=>{this._error=e.error}))}Fi.prototype=Object.create(Ri.prototype),ai(Fi.prototype,"src",(function(){return this._src}),(function(e){if(this.logger.debug("set src",e),(this.src||e)&&e!==this.src&&""!==e){if((0,y.isURL)(e)){let d=a.indexOf(si.alreadyEncoded,si.getFileExtension(e))>-1;if(!Bi.gR("video/mp4")&&"mp4"!==si.getFileExtension(e)&&!d&&(this.error=4,this.logger.error("only mp4,"+si.alreadyEncoded.join(",")+" files are supported, try to set "+e+" as src"),this.listeners.error))return void a.forEach(this.listeners.error,(e=>e()));d?this.mediaProxy.load(e,512):(t=e,i=(t,i)=>{this.mediaProxy.load(e,i)},r=ii.vQ(),o=Date.now(),l=e=>{s||(clearTimeout(n),s=Date.now()-o,i(0,s<=100?1e3:s<200?700:s<400?500:300))},n=setTimeout((()=>l()),500),r.open("HEAD",t+(t.indexOf("?")>-1?"&":"?")+o,!0),r.addEventListener("load",(()=>l())),r.addEventListener("error",(()=>l())),r.send())}this._src=e,this.setAttribute("src",String(e))}var t,i,s,n,r,o,l})),a.forEach(["width","height"],(function(e){ai(Fi.prototype,e,(function(){return this["_"+e]||0}),(function(t){this.logger.debug("set property "+e,t),isNaN(t)||this["_"+e]===t||(this["_"+e]=t,"width"===e&&!this.height&&this.videoWidth&&this.videoHeight?this._height=t*(this.videoHeight/this.videoWidth):"height"===e&&!this.width&&this.videoWidth&&this.videoHeight&&(this._width=t*(this.videoWidth/this.videoHeight))),this._handleResize()}))})),ai(Fi.prototype,"volume",(function(){return void 0!==this._volume?this._volume:0}),(function(e){this._volume=e,this.canvasPlayer.audio&&this.canvasPlayer.audio.authorizeAudio((()=>{this.canvasPlayer.volume=this._volume})),this.canvasPlayer.volume=this._volume})),ai(Fi.prototype,"currentTime",(function(){return this._ended?this.canvasPlayer.duration:isNaN(this.canvasPlayer.currentTime)?0:this.canvasPlayer.currentTime}),(function(e){this.canvasPlayer.currentTime=e})),ai(Fi.prototype,"seekable",(function(){return!0})),ai(Fi.prototype,"readyState",(function(){return 4})),ai(Fi.prototype,"networkState",(function(){return 1})),ai(Fi.prototype,"autoplay",(function(){return void 0!==this._autoplay&&this._autoplay}),(function(e){this._autoplay=e})),ai(Fi.prototype,"videoWidth",(function(){return this.canvasPlayer.videoWidth||0})),ai(Fi.prototype,"videoHeight",(function(){return this.canvasPlayer.videoHeight||0})),ai(Fi.prototype,"preload",(function(){return!0}),(function(e){})),ai(Fi.prototype,"seeking",(function(){return this._seeking})),ai(Fi.prototype,"muted",(function(){return 0===this._volume})),ai(Fi.prototype,"ended",(function(){return this._ended})),ai(Fi.prototype,"error",(function(){return this._error})),ai(Fi.prototype,"paused",(function(){return this._paused})),ai(Fi.prototype,"currentSrc",(function(){return this._src})),ai(Fi.prototype,"played",(function(){let e=new Mi;return e.addRange(0,this.currentTime),e})),ai(Fi.prototype,"buffered",(function(){let e=new Mi;return e.addRange(0,this.currentTime),e})),ai(Fi.prototype,"loop",(function(){return void 0!==this._loop&&this._loop}),(function(e){this._loop=e,this.setAttribute("loop",String(e))})),ai(Fi.prototype,"controls",(function(){return!1}),(function(e){})),Fi.prototype.load=h.noop,Fi.prototype.canPlayType=function(e){return"video/mp4"===e?"probably":""},Fi.prototype.addEventListener=function(e,t,i=!1){s[e]&&(0,C.Y9)(this.listeners)?(this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)):HTMLElement.prototype.addEventListener.call(this,e,t,i)},Fi.prototype.removeEventListener=function(e,t,i){if(s[e]){let i=this.listeners[e].indexOf(t);i>=0&&(this.listeners[e][i]=()=>{})}else HTMLElement.prototype.removeEventListener.call(this,e,t,i)},Fi.prototype._handleResize=function(){this.canvasPlayer.width=this.width,this.canvasPlayer.height=this.height,this.style.backgroundColor="black"},Fi.prototype.createdCallback=function(){Fi.call(this)},Fi.prototype.attributeChangedCallback=function(e,t,i){this.logger.debug("attributeChangedCallback",e,t,i),function(e,t){const i=e.getAttribute(t);switch(t){case"width":case"height":e.style[t]=i+(function(e){return String(e).indexOf("%")>-1}(i)||function(e){return String(e).indexOf("px")>-1}(i)?"":"px");break;case"src":case"preload":e[t]=i;break;case"autoplay":case"loop":e[t]=function(e){return"true"===e||"false"!==e&&!!e}(i)}}(this,e)},Fi.prototype.detachedCallback=function(){this.logger.debug("detached callback called"),this.canvasPlayer.pause()},Fi.prototype.attachedCallback=function(){this.logger.debug("attachedCallback called"),this.attachedCallbackCalled=!0;try{this.style.display="block",this.style.overflow="hidden",this.style.objectFit="contain";let e=["width","height","position","top","left"],t=window.originalCreateElement?window.originalCreateElement.call(this.ownerDocument,"video"):this.ownerDocument.createElement("video");this.parentNode.appendChild(t),A.copyCSSRules(t,this,e),t.parentNode.removeChild(t),this.style.width&&"auto"!==this.style.width||(this.style.width="100%"),this.style.height&&"auto"!==this.style.height||(this.style.height="100%"),this._handleResize(),this._iframeResizer=document.createElement("iframe"),this._iframeResizer.style.zIndex=0,this._iframeResizer.style.width="100%",this._iframeResizer.style.height="100%",this._iframeResizer.style.border="none",this._iframeResizer.style.margin="0",this._iframeResizer.style.padding="0",this._mainContainer.appendChild(this._iframeResizer),this._iframeResizer.contentWindow.document.write("<html><body></body></html>"),this._iframeResizer.contentWindow.document.close();let i=()=>{this._width=this._iframeResizer.contentWindow.innerWidth,this._height=this._iframeResizer.contentWindow.innerHeight,this.logger.debug("component resized",this.width,this.height),this._handleResize()};this._iframeResizer.contentWindow.addEventListener("resize",i,!1),this._handleResize(),this.style.backgroundColor="black"}catch(e){this.logger.debug("attachedCallback throw an exception",e)}},i(8872);const Ui=window.teads||{},Wi=window.teads.video||{};Wi.HTMLVideoCanvas=(()=>{if(!(0,m.isDesktop)())try{const e=Wi.HTMLVideoCanvas;return new e,e}catch(e){try{return document.registerElement("video-canvas",{prototype:Fi.prototype})}catch(e){new c.Y("Video globals").warn(e)}}})(),Wi.HTMLVideoCanvas&&Wi.HTMLVideoCanvas.prototype&&(Wi.HTMLVideoCanvas.prototype.addEventListener=Fi.prototype.addEventListener),Ui.video=Wi,window.teads=Ui;const Hi=window.teads||{};window.teads=Hi;var ji=i(3840),zi=i(3743);class Gi{constructor(e,t){this.container=e,this.config=t,this.logger=new c.Y("vpaid.BaseVPAIDContainer"),this.backgroundColor="#000000",this.id=t.id||(0,y.rand)(20,!1)}setBackground(e){this.backgroundColor=e}destroy(){try{!this.isDetroyed&&this.creativeContainer?(this.isDetroyed=!0,l.cb.fromNullable(this.creativeContainer.parentNode).forEach((e=>e.removeChild(this.creativeContainer))),this.creativeContainer=null,this.vpaid=null):this.isDetroyed&&this.logger.error("Cannot call destroy twice !")}catch(e){this.logger.error("unable to remove VPAID creative container: "+e)}}getVPAID(){return this.logger.info("getVPAIDAd - Retrieve ad from creative"),this.vpaid}getCreativeContainer(){return this.creativeContainer}}const Yi=e=>Math.round(e/ji.S);class $i extends Gi{constructor(){super(...arguments),this.getCreativeWindow=e=>e.contentWindow||A.getWindow(e)}loadVpaid(e,t,i){this.url=e;const s=l.cb.fromNullable(A.getWindow(this.container));let n=!1;const r=e=>{s.forEach((e=>e[this.callbackName]=h.noop)),i(e),this.destroy()};this.callbackName="vpaidjsload_"+this.id,s.forEach((e=>e[this.callbackName]=i=>{if(n=!0,clearTimeout(this.loadTimeoutId),e[this.callbackName]=h.noop,i){const e=this.getCreativeWindow(this.creativeContainer);try{this.vpaid=e.getVPAIDAd()}catch(e){let t=Xt;return t.message+=" "+e,r(t)}this.logger.info("getVPAIDAd - Retrieve ad from creative"),t(this.vpaid)}else r(Zt)})),this.setUpCreativeContainers(this.container,e),this.loadTimeoutId=setTimeout((()=>{n||r(Jt)}),Ue)}setUpCreativeContainers(e,t){this.mainContainer=document.createElement("div"),this.mainContainer.style.setProperty("position","relative"),e.appendChild(this.mainContainer);const i=A.createIframe("vpaid-container-"+this.id);(m.isIosOrMacOs16_3()||m.isIosOrMacOs17_Greater())&&(i.srcdoc=""),this.creativeContainer=i,this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer),l.cb.fromNullable(this.getCreativeWindow(this.creativeContainer)).forEach((e=>{e.teads=Object.assign(Object.assign({},window.teads),{api:this.config.api}),e.document.write(this.getCreativeTemplate(t,this.callbackName,this.backgroundColor)),e.document.close(),this.vpaidContainer=e.document.getElementById("vpaid-container"),this.videoContainer=e.document.getElementById("video-container")}))}getCreativeTemplate(e,t,i){return`\n      <!DOCTYPE html>\n      <html>\n        <body style="margin:0px;padding:0px;overflow:hidden">\n          <script type="text/javascript">\n            var target = window.parent;\n            var script = document.createElement("script");\n            script.onload = function() {\n              target["${t}"](true)\n            };\n            script.onerror = function() {\n              target["${t}"](false)\n            };\n            script.async = true;\n            script.src = "${e}";\n            document.body.appendChild(script);\n          <\/script>\n          <div id="video-container"\n            style="position:absolute;top:0px;left:0px;z-index:1;background-color:${i}">\n          </div>\n          <div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div>\n        </body>\n      </html>\n    `}getEnvironmentVars(e={}){return l.cb.fromNullable(this.environmentVars).getOrElse((()=>(this.environmentVars=Object.assign(Object.assign({},(0,zi.IF)({slot:this.vpaidContainer,videoSlot:this.initVideo(this.getCreativeWindow(this.creativeContainer)||window,this.config.useCustomVideo&&window.teads.video.HTMLVideoCanvas),videoSlotCanAutoPlay:!0},(0,h.not)(h.isNull))),e),this.environmentVars)))}destroy(){super.destroy(),this.mainContainer&&this.mainContainer.parentNode&&(this.mainContainer.parentNode.removeChild(this.mainContainer),this.mainContainer=null,this.videoContainer=null)}resize(e,t){var i,s;this.currentWidth=e,this.currentHeight=t;const n=(null===(s=null===(i=this.config)||void 0===i?void 0:i.api)||void 0===s?void 0:s.isVideoBanner())?Yi(e):t;if(this.mainContainer&&(this.mainContainer.style.setProperty("width",`${e}px`),this.mainContainer.style.setProperty("height",`${t}px`)),this.creativeContainer&&(this.creativeContainer.style.setProperty("width",`${e}px`,"important"),this.creativeContainer.style.setProperty("height",`${t}px`,"important")),this.videoContainer){this.videoContainer.style.setProperty("width",`${e}px`),this.videoContainer.style.setProperty("height",`${n}px`);var r=this.videoContainer.getElementsByTagName("video")[0];r&&(r.width=e,r.height=t,r.style.setProperty("width",`${e}px`),r.style.setProperty("height",`${n}px`))}this.vpaidContainer&&(this.vpaidContainer.style.setProperty("width",`${e}px`),this.vpaidContainer.style.setProperty("height",`${n}px`))}setBackground(e){var t;super.setBackground(e),null===(t=this.videoContainer)||void 0===t||t.style.setProperty("background-color",this.backgroundColor)}getType(){return Be.JS}registerVPAIDEventHandler(e){this.callback=e;const t=zi.Ar((t=>l.cb.fromNullable(this.vpaid).forEach((i=>i.subscribe(He(e,t),t,this)))));t(Z.c),t($e.c)}overrideCreateElement(e){const t=l.cb.fromNullable(this.creativeContainer.contentDocument||this.creativeContainer.ownerDocument);window.originalCreateElement=window.originalCreateElement||t.map((e=>e.createElement)).getOrNull();const i=this;t.forEach((t=>{t.createElement=function(s){return"video"===s.toLowerCase()?(i.logger.debug("createElement overriden for",s),e):window.originalCreateElement.call(t,s)}}))}initVideo(e,t){const i=t?this.initCustomVideo(e):this.initClassicVideo(e);return t&&this.overrideCreateElement(i),l.cb.fromNullable(this.videoContainer).forEach((e=>e.appendChild(i))),this.resize(this.currentWidth,this.currentHeight),i}initCustomVideo(e){e.document.registerElement=e.document.registerElement||document.registerElement,e.teads=e.teads||window.teads,e.teads.video=window.teads.video;const t=new e.teads.video.HTMLVideoCanvas;return t.addEventListener(mi,(e=>{if(this.logger.error("receive video error event",e,t.error),this.callback){this.logger.debug("callback ready to handle video error");const e=t.error&&t.error.code===oi.MEDIA_ERR_NETWORK?"MediaProxy not ready":"unknow video error";this.logger.error(e),this.callback(new Z.c(Z.c.AdError,{message:e,id:Me.C.UNSUPPORTED_MEDIAFILE.id}))}else this.logger.error("callback not ready to handle video error")}),!1),t}initClassicVideo(e){const t=e.document.createElement("video");return t.setAttribute("webkit-playsinline","true"),t.setAttribute("playsinline","true"),t.setAttribute("muted","true"),m.isAndroid()&&m.isChromeWebView()&&t.setAttribute("poster",ji.M),t}}var qi,Ki=i(9840),Qi=i.n(Ki);class Xi extends $i{loadVpaid(e,t,i){e===Xi.CANVAS?this.loadBundled(Xi.CANVAS,t,i):e===Xi.VIDEO?this.loadBundled(Xi.VIDEO,t,i):super.loadVpaid(e,t,i)}loadBundled(e,t,i){this.setUpCreativeContainers(this.container,e),l.cb.fromNullable(this.getCreativeWindow(this.creativeContainer)).forEach((t=>{switch(e){case Xi.VIDEO:this.vpaid=new t.teads.video.VPAIDVideo;break;case Xi.CANVAS:this.vpaid=new t.teads.video.VPAIDCanvas;break;default:return i(Qt)}})),l.cb.fromNullable(this.vpaid).forEach((e=>t(e)))}getCreativeTemplate(e,t,i){return`\n      <!DOCTYPE html>\n      <html>\n        <head>\n            ${Qi()}\n        </head>\n        <body style="margin:0px;padding:0px;overflow:hidden">\n          <div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color:${i}"></div>\n          <div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div>\n        </body>\n      </html>\n    `}}Xi.CANVAS="canvas",Xi.VIDEO="video",function(e){e[e.UNLOADED=-1]="UNLOADED",e[e.READY=0]="READY",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(qi||(qi={}));const Zi=qi;class Ji extends Xi{setUpCreativeContainers(e,t){if(window.teads.api=this.config.api,this.mainContainer=document.createElement("div"),this.mainContainer.style.setProperty("position","relative"),e.appendChild(this.mainContainer),this.creativeContainer=document.createElement("div"),this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer),this.creativeContainer.innerHTML=this.getCreativeTemplate(t,this.callbackName,this.backgroundColor),this.vpaidContainer=l.cb.fromNullable((0,A.getDocument)(this.creativeContainer)).flatMap((e=>l.cb.fromNullable(e.getElementById("vpaidjs-container")))).getOrNull(),this.videoContainer=l.cb.fromNullable((0,A.getDocument)(this.creativeContainer)).flatMap((e=>l.cb.fromNullable(e.getElementById("video-container")))).getOrNull(),!(0,a.includes)([Xi.CANVAS,Xi.VIDEO],t)){const e=document.createElement("script");l.cb.fromNullable((0,A.getWindow)(this.container)).forEach((t=>{e.onload=()=>t[this.callbackName](!0),e.onerror=()=>t[this.callbackName](!1)})),e.src=t,this.creativeContainer.appendChild(e)}}getCreativeTemplate(e,t,i){return`\n      <div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color:${i}"></div>\n      <div id="vpaidjs-container" style="position:absolute;top:0px;left:0px;z-index:2"></div>\n    `}}class es extends Ye{constructor(e,t){super(),this.config=t,this.lastAdRemainingTime=-1,l.cb.fromNullable(e.getVPAID()).forEach((e=>this.setVPAID(e))),this.type=e.getType(),this.container=e,this.container.registerVPAIDEventHandler((e=>{switch(e.type){case Z.c.AdRemainingTimeChange:case Z.c.AdDurationChange:return}this.handleVpaidEvent(e)}))}initAd(e,t,i,s,n,r){this.container.resize(e,t),this.type===Be.JS&&"string"==typeof n&&(n={AdParameters:n}),super.initAd(e,t,i,s,n,this.type===Be.JS?this.getEnvironmentVars(r):null)}setAdVolume(e){return this.environmentVars.forEach((t=>{l.cb.fromNullable(t.videoSlot).forEach((t=>{let i=e=>{e.type===_i&&this.dispatchEvent(Z.c.AdVolumeChange),f.removeEventListener(_i,t,i)};f.addEventListener(_i,t,i),t.volume=e,t.muted=!e}))})),super.setAdVolume(e),this.dispatchEvent(Z.c.AdVolumeChange),e}getAdVolume(){return this.environmentVars.flatMap((e=>l.cb.fromNullable(e.videoSlot))).filter((e=>!(0,C.Y3)(e.volume))).match({some:e=>e.muted?0:e.volume,none:()=>super.getAdVolume()})}resizeAd(e,t,i){var s,n;const r=(null===(n=null===(s=this.config)||void 0===s?void 0:s.api)||void 0===n?void 0:n.isVideoBanner())?Yi(e):t;this.isResizing=!0,this.container.resize(e,t),super.resizeAd(e,r,i)}getEnvironmentVars(e){return this.container.getEnvironmentVars(e)}handleVpaidEvent(e){switch(e.type){case Z.c.AdSizeChange:this.isResizing||this.container.resize(this.getAdWidth(),this.getAdHeight()),this.isResizing=!1;break;case Z.c.AdStarted:this.startTimer();break;case Z.c.AdStopped:this.stopTimer()}super.handleVpaidEvent(e),this.status===We.c.STOPPED&&(this.status=We.c.REMOVING,setTimeout((()=>{this.status=We.c.REMOVED,this.container.destroy()}),500))}startTimer(){this.timerId||(this.timerId=setInterval((()=>{let e=this.getAdRemainingTime();this.status<We.c.COMPLETE&&e>=0&&this.lastAdRemainingTime!==e&&(this.lastAdRemainingTime=e,this.dispatchEvent(Z.c.AdRemainingTimeChange),this.dispatchEvent(Z.c.AdDurationChange))}),250))}stopTimer(){this.timerId&&clearInterval(this.timerId)}}class ts{constructor(e,t){this.container=e,this.config=t,this.status=Zi.READY,this.wigo=l.cb.empty()}load(e,t,i){var s,n;this.status>Zi.READY||(e=(0,E.iI)(e),n=this.findContainerConstructor(e),this.creativeType=Be.JS,this.container.innerHTML="",this.status=Zi.LOADING,s=new n(this.container,this.config),this.config.background&&s.setBackground(this.config.background),s.loadVpaid(e,(e=>{this.status=We.c.LOADED,this.wrapperClass||(this.wrapperClass=es);const n=new this.wrapperClass(s,this.config);try{t(n)}catch(e){let t=Kt;t.message+=e,i(t)}let r=function(e){return Number(e.handshakeVersion("2.0"))>=2}(e)?"2.0":"1.0";ts.logger.info("handshakeVersion - Creative vpaid version "+r),this.wigo.forEach((e=>e.valid(3,1,r,"string")))}),i))}findContainerConstructor(e){return(0,m.isAmp)()||(0,m.isIABSafeFrame)()?Ji:e===Xi.VIDEO||e===Xi.CANVAS?Xi:$i}setWigo(e){this.wigo=l.cb.fromNullable(e)}}ts.logger=new c.Y("vpaid.VPAIDLoader");var is=i(5992),ss=i.n(is);const ns=ss();function rs(e){var t=[];return t.length>0&&(e=e.replace('id="'+se+'"','id="'+se+'" class="'+t.join(" ")+'"')),e}const os=rs(ss());function as(e,t,i=!0){const s=e[t];s&&s.isEnabled()&&(i?s.show():s.hide())}function ls(e,t=!0){a.forEach(e,(function(e){e.isEnabled()&&(t?e.show():e.hide())}))}var ds=i(7356),cs=i.n(ds);class hs extends re{constructor(){super(...arguments),this.timerClass="countdown-timer"}initAutoCountdown(e=0){this.initTimer(!0,e)}initManualCountdown(){this.initTimer(!1,0)}stopTimer(){this.timerInterval&&clearInterval(this.timerInterval)}setCountdown(e){this.countdown=e,this.updateDisplay()}resume(){this.paused=!1}pause(){this.paused=!0}isPaused(){return this.paused}isEnded(){return this.ended}setEndedCallback(e){this.callback=e}removeEndedCallback(){this.callback=null}initTimer(e,t){if(super.init(),this.countdown=t,!(0,C.Ib)(this.countdown)||e&&t<=0)return void this.onEnded();const i=x(hs.TEMPLATE,{"countdown-duration":e?this.countdown.toString():"","countdown-id":"countdown-"+y.rand(10)});if(this.getElement().innerHTML=i,this.countdownTextElement=this.getElement().querySelector("."+this.timerClass),e){const e=()=>{this.isPaused()||this.countdown--,this.countdown<=0?(this.hide(),this.onEnded()):this.updateDisplay()};this.timerInterval=setInterval(e,1e3)}}updateDisplay(){this.countdownTextElement&&this.countdownTextElement.setAttribute&&this.countdownTextElement.setAttribute("data-countdown",this.countdown.toString())}onEnded(){if(this.timerInterval&&clearInterval(this.timerInterval),this.ended=!0,this.hide(),this.callback&&"function"==typeof this.callback)try{this.callback()}catch(e){this.logger.error("countdown ended callback failled",e)}}}function us(e){var t="00";return e>60&&(t=Math.floor(e/60)<10?"0":""),t+":"+(e<10?"0":"")+e}hs.TEMPLATE=cs();class ps extends re{constructor(){super(...arguments),this.placeholders=["currentTime","totalTime","remainingTime","countdown"]}init(){this.setText(this.config.text)}setText(e=""){this.renderText(e),this.havePlaceholder(e)&&!this.haveProgressCallback&&(this.haveProgressCallback=!0,this.vpaid.subscribe((()=>{this.renderText(e)}),Z.c.AdRemainingTimeChange))}renderText(e){this.textNode&&this.getElement().removeChild(this.textNode),this.textNode=document.createElement("span"),this.textNode.innerHTML=this.havePlaceholder(e)?this.replacePlaceholders(e):e,this.getElement().appendChild(this.textNode)}replacePlaceholders(e){const t={};return(0,a.forEach)(this.placeholders,(e=>{t[e]=this.getPlaceholderValue(e)})),x(e,t)}havePlaceholder(e){const t=new RegExp("({{"+this.placeholders.join("}}|{{")+"}})","g");return!!e.match(t)}getPlaceholderValue(e){let t=J(this.vpaid);t=t<0||isNaN(t)?0:Math.floor(t);const i=Math.floor(this.vpaid.getAdRemainingTime());switch(e){case"currentTime":return us(t);case"totalTime":return us(Math.floor(this.vpaid.getAdDuration()));case"remainingTime":return us(i);case"countdown":return String((this.config.countdown||0)-t)}}}var gs=i(4192),ms=i.n(gs);class fs extends re{init(){this.logger.debug("init endscreen"),this.showOnVideoStart=!1;var e=this.element.getAttribute("style");this.element.setAttribute("style",(e?e+";":"")+" opacity: 0.8!important; background-color: #ffffff;"),this.getElement().innerHTML=fs.TEMPLATE,this.vpaid.subscribe((()=>{if(this.logger.debug("video complete"),this.videoComplete=!0,this.dispatchVpaidEvent(Z.c.AdVideoComplete),this.ui.getConfig().noAutoStop){this.show(),this.initLayout();let e=this.ui.getVPAIDContainer();e.style.setProperty("filter","blur(3px)"),e.style.setProperty("webkit-filter","blur(3px)"),this.dispatchVpaidEvent(Y.c.EndscreenInit)}}),Z.c.AdVideoComplete),this.vpaid.subscribe((()=>{this.videoComplete&&!this.ui.getConfig().noAutoStop&&(this.show(),this.initLayout(),this.dispatchVpaidEvent(Y.c.EndscreenInit))}),Z.c.AdStopped),this.hide()}getOverridenEvents(){return this.videoComplete?[Z.c.AdStopped]:[Z.c.AdVideoComplete]}getOverridenMethods(){return this.isVisible()?["pauseAd","resumeAd"]:[]}onOverridenMethod(e,t){this.countdown&&("pauseAd"===e?this.countdown.pause():"resumeAd"===e&&this.countdown.resume())}onMethod(e,t=[]){"resizeAd"===e&&this.videoComplete&&(this.logger.debug("resizeAd from endscreen",t),this.resize(t[0],t[1]),this.dispatchVpaidEvent(Z.c.AdSizeChange))}initLayout(){var e;if(this.replayButton=f.getElementsByClassName("replay-button",this.getElement(),this.ui.getContentWindow())[0],this.replayButton){f.addEventListener("click",this.replayButton,(()=>{this.onReplayClick()}));try{l.cb.fromNullable(null===(e=this.config.replayButton)||void 0===e?void 0:e.text).forEach((e=>{f.getElementsByClassName("text",this.replayButton,this.ui.getContentWindow())[0].innerHTML=e}))}catch(e){this.logger.error("No text on replay button")}m.isEdgeTouchScreen()&&(this.replayButton.className="button edge-touch-screen replay-button")}else this.logger.debug("No replayButton on endscreen !");if(this.callButton=f.getElementsByClassName("call-button",this.getElement(),this.ui.getContentWindow())[0],this.callButton&&this.config.callButton&&this.ui.getConfig().clickthrough){if(f.addEventListener("click",this.callButton,(()=>{this.dispatchUiEvent(Y.c.ClickRequest),this.onActionClick()})),this.config.callButton.text){var t=this.callButton.querySelector(".icon span");if(t){let e=fs.CSSClassMapping[this.config.callButton.type]||(()=>{for(let e in fs.CSSClassMapping)return fs.CSSClassMapping[e]})();A.addClass(t,e)}try{f.getElementsByClassName("text",this.callButton,this.ui.getContentWindow())[0].innerHTML=this.config.callButton.text}catch(e){this.logger.error("No text on callButton")}m.isEdgeTouchScreen()&&(this.callButton.className="button edge-touch-screen call-button")}}else this.callButton&&this.callButton.parentNode&&this.callButton.parentNode.removeChild(this.callButton),this.logger.debug("No callButton on endscreen !");this.adChoicesButton=f.getElementsByClassName("adchoices",this.getElement(),this.ui.getContentWindow())[0],this.adChoicesButton?this.ui.getConfig().showAdChoicesIcon?(m.isMobile()||(f.addEventListener("mouseover",this.adChoicesButton,(()=>{A.addClass(this.adChoicesButton,"expanded"),this.adChoicesButton.style.setProperty("width","auto"),this.adChoicesButton.style.setProperty("height","15px"),this.adChoicesButton.style.setProperty("padding","0px 17px 1px 4px")})),f.addEventListener("mouseout",this.adChoicesButton,(()=>{A.removeClass(this.adChoicesButton,"expanded")}))),f.addEventListener("click",this.adChoicesButton,(()=>{this.dispatchUiEvent(Y.c.AdChoicesClickRequest)}))):(A.removeClass(this.adChoicesButton,"show"),A.addClass(this.adChoicesButton,"hide")):this.logger.debug("No adChoicesButton on endscreen !"),this.closeButton=f.getElementsByClassName("close-button",this.getElement(),this.ui.getContentWindow())[0],this.closeButton?!this.config.closeButton||this.config.closeButton.disable||this.config.closeButton.listenSkippableState&&!this.vpaid.getAdSkippableState()?(A.removeClass(this.closeButton,"show"),A.addClass(this.closeButton,"hide")):f.addEventListener("click",this.closeButton,(()=>{this.dispatchVpaidEvent(Z.c.AdUserClose),this.closeAd()})):this.logger.debug("No closeButton on endscreen !");var i=f.getElementsByClassName("countdown",this.getElement(),this.ui.getContentWindow())[0];i?(this.countdown=new hs(this.ui,i,this.vpaid,{}),this.config.autoClose&&this.countdown.setEndedCallback((()=>{this.logger.debug("Countdown ended and autoClose on, close ad"),this.closeAd()})),this.countdown.initAutoCountdown(this.config.countdown),this.countdown.show()):this.logger.debug("No countdown on endscreen"),this.resize(this.ui.getAdWidth(),this.ui.getAdHeight())}resize(e,t){}onClick(e){}onReplayClick(){this.clearCloseInterval(),this.ui.getConfig().noAutoStop&&this.vpaid.stopAd(),this.videoComplete=!1,this.dispatchUiEvent(Y.c.ReplayRequest)}onActionClick(){var e=this.ui.getConfig().clickthrough||null;this.dispatchVpaidEvent(Z.c.AdClickThru,{url:e,id:null,playerHandles:!0})}clearCloseInterval(){this.countdown&&(this.countdown.removeEndedCallback(),this.countdown.stopTimer())}closeAd(){this.clearCloseInterval(),this.ui.stopAd()}}fs.CSSClassMapping={learnMore:"icon-learnmore",shopNow:"icon-shop",contactUs:"icon-contact",signUp:"icon-signup"},fs.TEMPLATE=ms();const vs={fullscreenbutton:class extends re{init(){this.eventName=Y.c.FullscreenRequest,this.showOnVideoStart=!1,super.init(),this.show()}bindClick(){f.addEventListener("mousedown",this.getElement(),(e=>{this.onClick(e)}))}},earlyclickoverlay:class extends re{constructor(){super(...arguments),this.startTimer=()=>{setTimeout((()=>this.hide()),this.config.displayTime),this.vpaid.unsubscribe(this.startTimer,Z.c.AdStarted)}}init(){this.config.displayTime>0&&(this.eventName=Y.c.EarlyClickRequest,this.vpaid.subscribe(this.startTimer,Z.c.AdStarted),super.init(),this.show())}onVideoStart(){}},mutebutton:oe,progressbar:class extends re{constructor(){super(...arguments),this.showOnVideoProgress=!0}init(){if(this.progressbar=f.getElementsByClassName("progress",this.getElement(),this.ui.getContentWindow())[0],this.progressBarContainer=this.getElement(),this.progressBarContainer.style.setProperty("width","100%"),!this.progressbar)return this.hide();this.vpaid.subscribe((()=>{this.onProgress()}),Z.c.AdRemainingTimeChange),this.vpaid.subscribe((()=>{this.hide()}),Z.c.AdVideoComplete),super.init()}setShowOnVideoProgress(e){this.showOnVideoProgress=e}getShowOnVideoProgress(){return this.showOnVideoProgress}onProgress(){var e=J(this.vpaid);this.vpaid.getAdDuration()>0&&e>0?(!this.isVisible()&&this.showOnVideoProgress&&this.show(),this.progressbar.style.setProperty("width",e/this.vpaid.getAdDuration()*100+"%")):this.hide()}},hourglass:class extends re{init(){this.createCountdown(),super.init()}show(){void 0!==this.countdown&&this.countdown.show(),this.vpaid.subscribe((()=>{this.onAdRemainingTimeChange()}),Z.c.AdRemainingTimeChange),this.vpaid.subscribe((()=>{this.onAdVideoComplete()}),Z.c.AdVideoComplete),super.show()}hide(){void 0!==this.countdown&&this.countdown.hide(),this.vpaid.unsubscribe((()=>{this.onAdRemainingTimeChange()}),Z.c.AdRemainingTimeChange),this.vpaid.unsubscribe((()=>{this.onAdVideoComplete()}),Z.c.AdVideoComplete),super.hide()}center(e){const t=this.getElement().classList;e?t.add("center"):t.remove("center")}createCountdown(){const e=document.createElement("div");e.className="countdown",this.getElement().appendChild(e),this.countdown=new hs(this.ui,e,this.vpaid,{}),this.countdown.initManualCountdown()}onAdRemainingTimeChange(){this.isVisible()&&(0,C.Ib)(this.vpaid.getAdRemainingTime())&&this.countdown.setCountdown(Math.ceil(this.vpaid.getAdRemainingTime()))}onAdVideoComplete(){this.hide()}},playpausebutton:class extends re{init(){this.eventName=Y.c.PlayPauseRequest,this.vpaid.subscribe((()=>{this.onPause()}),Z.c.AdPaused),this.vpaid.subscribe((()=>{this.onPause()}),Z.c.AdVideoComplete),this.vpaid.subscribe((()=>{this.onPlay()}),Z.c.AdPlaying),this.vpaid.subscribe((()=>{this.onPlay()}),Z.c.AdVideoStart),super.init()}onClick(e){super.onClick(e),this.isPlaying?this.vpaid.pauseAd():this.vpaid.resumeAd()}onPlay(){this.isPlaying=!0,A.addClass(this.getElement(),"playing")}onPause(){this.isPlaying=!1,A.removeClass(this.getElement(),"playing")}},progresstext:class extends re{init(){this.vpaid.subscribe((()=>{var e=this.vpaid.getAdRemainingTime();isNaN(e)&&(e=this.vpaid.getAdDuration()),this.getElement().innerHTML="Your video in "+Math.ceil(e)+" sec"}),Z.c.AdRemainingTimeChange)}},skipbutton:class extends re{init(){const e=l.cb.fromNullable(this.ui.getConfig().skipoffset);if(this.eventName=Y.c.SkipRequest,this.config.listenSkippableState)return void this.hide();const t=setInterval((()=>{this.vpaid.getAdSkippableState()?this.vpaid.getAdSkippableState()&&(clearInterval(t),this.getElement().style.setProperty("cursor","pointer"),this.getElement().innerHTML="Skip Ad >>",this.show()):e.filter((e=>e>0)).forEach((e=>{const t=Math.floor(e-J(this.vpaid));this.getElement().innerHTML="Skip in "+(isNaN(t)?e:t<0?0:t)+" sec",this.show()}))}),1e3);super.init()}onClick(e){super.onClick(e),this.vpaid.getAdSkippableState()&&this.vpaid.skipAd()}},closebutton:class extends re{constructor(){super(...arguments),this.onClickAction=l.MB}init(){if(this.countdownValue=l.cb.fromNullable(this.config.countdown).filter((e=>e>=0)).getOrElse((()=>this.ui.getConfig().skipoffset)),this.eventName=Y.c.CollapseRequest,this.vpaid.subscribe((()=>{this.videoEnded=!0}),Z.c.AdVideoComplete),this.config.listenSkippableState)this.mode=1,this.vpaid.subscribe((()=>{this.vpaid.getAdSkippableState()?this.show():this.hide()}),Z.c.AdSkippableStateChange);else if((0,C.Ib)(this.countdownValue)&&this.countdownValue>0){this.mode=2;const e=this.insertCountDownElement();this.countdown=new hs(this.ui,e,this.vpaid,{}),this.countdown.setEndedCallback((()=>this.onCountdownEnded()))}else 0===this.countdownValue&&(this.mode=3,this.countdownEnded=!0,this.show())}onMethod(e,t){this.countdown&&this.countdownInitiated&&!this.countdownEnded&&l.cb.fromNullable({pauseAd:()=>this.countdown.pause(),resumeAd:()=>this.countdown.resume()}[e]).forEach((e=>e()))}show(){super.show();const e=this.getElement().getElementsByClassName("close-button icon-close")[0];this.countdown&&!this.countdownEnded||A.removeClass(e,"hide")}restoreOnClickAction(){this.onClickAction=l.MB}changeOnCountdownEnded(e){this.countdown.setEndedCallback((()=>{this.countdown.hide(),this.countdownEnded=!0,e()}))}onVideoStart(){this.countdownInitiated||this.config.listenSkippableState||(super.onVideoStart(),this.countdown.initAutoCountdown(this.countdownValue),this.countdown.show(),this.countdownInitiated=!0)}onClick(e){this.onClickAction.match({some:e=>{e()},none:()=>{this.countdownEnded&&(this.videoEnded?super.onClick(e):(this.dispatchUiEvent(Y.c.CollapseRequest),this.vpaid.skipAd()))}})}insertCountDownElement(){const e=document.createElement("div");return e.className="countdown",this.getElement().appendChild(e),e}onCountdownEnded(){this.countdown.hide(),this.countdownEnded=!0,this.show()}},uibutton:class extends re{init(){var e=!0;this.eventName=Y.c.UIButtonRequest,f.addEventListener("click",this.getElement(),(t=>{this.onClick(t),e?this.ui.hideAllComponents():this.ui.showAllComponents(),this.ui.showComponent("uibutton"),e=!e,A.toggleClass(this.getElement(),"ui-invisible")}))}},textfield:ps,clicktoplay:class extends re{init(){this.showOnVideoStart=!1,this.eventName=Y.c.ClickToPlayRequest}onMethod(e,t=[]){"startAd"===e&&(this.show(),this.dispatchVpaidEvent(Z.c.AdStarted))}getOverridenEvents(){return[Z.c.AdStarted]}getOverridenMethods(){return["startAd"]}onClick(e){super.onClick(e),A.addClass(this.getElement(),"loading"),this.vpaid.subscribe((()=>{this.remove()}),Z.c.AdStarted),this.remove(),this.vpaid.startAd()}},clickbutton:class extends ps{init(){if(this.clickthrough=this.ui.getConfig().clickthrough,this.eventName=Y.c.ClickRequest,this.config.text&&this.clickthrough){const e=document.createElement("div");e.className="text",e.innerHTML=this.config.text,this.getElement().appendChild(e)}else this.hide();this.vpaid.subscribe((()=>{this.hide()}),Z.c.AdVideoComplete)}onVideoStart(){this.showOnVideoStart&&this.config.text&&this.clickthrough&&this.show()}onClick(e){super.onClick(e),this.dispatchVpaidEvent(Z.c.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})}},soundbutton:class extends oe{init(){super.init(),this.eventName=Y.c.SoundToggleRequest;const e=document.createElement("div");e.className=ae.OFF,this.getElement().appendChild(e);const t=()=>{(0,A.replaceClass)(e,this.vpaid.getAdVolume()>0?ae.ON:ae.OFF,this.vpaid.getAdVolume()>0?ae.OFF:ae.ON)};this.vpaid.subscribe(t,Z.c.AdVolumeChange),this.vpaid.subscribe(t,Z.c.AdStarted)}setAdVolume(){}onClick(e){super.onClick(e)}},label:class extends re{constructor(){super(...arguments),this.defaultText="Advertising"}init(){let e=this.config.html&&""!==this.config.html?this.config.html:this.config.text||this.defaultText;this.getElement().innerHTML=e,this.getElement().setAttribute("style",this.config.style||""),this.show()}},credits:class extends re{constructor(){super(...arguments),this.defaultLink="https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads"}init(){this.config.text=this.config.text||"Ads by [Teads]";const e=this.config.text.replace(/\[([^\]]*)\]/g,'<span class="teads-ui-component-credits-blue">$1</span>'),t=this.config.url||this.defaultLink;this.getElement().innerHTML='<a href="'+t+'" target="_blank">'+e+"</a>",this.show()}},endscreen:fs,brandlogo:class extends re{init(){this.clickthrough=l.cb.fromNullable(this.ui.getConfig().clickthrough),this.eventName=Y.c.ClickRequest,this.load((()=>{this.getElement().style.setProperty("background-image","url("+this.config.url+")")}))}load(e){l.cb.fromNullable(this.config.url).forEach((t=>{const i=new Image;i.onload=()=>e(),i.onerror=e=>this.hide(),i.src=t}))}onVideoStart(){this.showOnVideoStart&&this.show()}onClick(e){super.onClick(e),this.clickthrough.forEach((e=>{this.dispatchVpaidEvent(Z.c.AdClickThru,{url:e,id:this.config.id,playerHandles:!0})}))}},countdown:hs,startscreen:class extends re{init(){this.showOnVideoStart=!1,this.element.style.setProperty("z-index","2"),this.show(),this.vpaid.subscribe((()=>this.hide()),Z.c.AdStarted)}},adchoices:class extends re{init(){if(this.ui.getConfig().showAdChoicesIcon){this.eventName=Y.c.AdChoicesClickRequest,m.isMobile()||(f.addEventListener("mouseover",this.getElement(),(0,_.m)(this.onMouseOver,this)),f.addEventListener("mouseout",this.getElement(),(0,_.m)(this.onMouseOut,this)));const e=this.getElement().style;e.setProperty("width","auto"),e.setProperty("height","15px"),e.setProperty("padding","1px 17px 1px 4px"),this.vpaid.subscribe((()=>{this.hide()}),Z.c.AdVideoComplete)}else this.remove()}onMouseOver(){A.addClass(this.getElement(),"expanded")}onMouseOut(){A.removeClass(this.getElement(),"expanded")}},bannervideobottom:class extends ps{init(){if(this.clickthrough=this.ui.getConfig().clickthrough,this.config.text&&this.clickthrough){const e=document.createElement("div");e.className="container";const t=document.createElement("a");t.className="cta",t.innerHTML=this.config.text,e.appendChild(t),this.getElement().appendChild(e),this.show()}else this.hide()}onClick(e){super.onClick(e),this.dispatchVpaidEvent(Z.c.AdClickThru,{url:this.clickthrough,id:this.config.id,playerHandles:!0})}}};class As extends Ye{constructor(e,t,i,s){if(super(),this.mainContainer=e,this.config=i,this.loaderConfig=s,this.isFullscreen=!1,this.components=[],this.componentsByName={},this.logger=new c.Y("ui.VPAIDUI"),this.initAdStartTime=0,this.logger.debug("Init Layout",e,i),this.config.container){this.container=this.config.container;let e=this.mainContainer.firstElementChild;e&&e.id===se&&this.mainContainer.removeChild(e)}else this.container=A.createIframe("vpaid-ui");this.container.parentNode||this.mainContainer.appendChild(this.container),l.cb.fromNullable(this.container.contentWindow).forEach((e=>{e.document.write(t),e.document.close(),this.initHeavyAdInterventionListener(e),m.isAmp()||m.isIABSafeFrame()||f.addEventListener("resize",e,(()=>{this.logger.debug("resize on player Iframe detected, trigger an AdSizeChange VPAID event"),this.dispatchEvent(Z.c.AdSizeChange)})),this.mainComponentsContainer=e.document.getElementById(se)})),(m.isAmp()||m.isIABSafeFrame())&&(this.mainContainer.appendChild(this.mainComponentsContainer),this.mainContainer.removeChild(this.container)),l.cb.fromNullable(this.mainComponentsContainer.ownerDocument).forEach((e=>{this.videoComponentsContainer=e.getElementById(ne)}))}get isRendered(){return this.rendered}initAd(e,t,i,s,n="",r={}){if(this.vpaid)return this.resize(e,t,i),this.initAdStartTime=(0,g.kX)(),this.logger.debug("initAd"),super.initAd(e,t,i,s,n,r);this.logger.error("You must register vpaid creative to be wrapped using setVPAID() method")}startAd(){this.status<We.c.LOADED?this.dispatchEvent(Z.c.AdLog,"VPAID not started, use initAd(), and wait for AdLoaded event before call startAd() method"):this.status>=We.c.STARTING?this.dispatchEvent(Z.c.AdLog,"cannot call startAd() twice, already started"):(this.render(this.getVPAID()),this.logger.debug("startAd"),super.startAd())}resizeAd(e,t,i="normal"){e<=0||t<=0||(this.resize(e,t,i),super.resizeAd(e,t,i))}stopAd(){const e=()=>{w.y2((()=>{this.container.parentNode&&this.container.parentNode.removeChild(this.container)}),2e3),this.dispatchedEvents[Z.c.AdStopped]||this.dispatchEvent(Z.c.AdStopped)};this.isStopped?(this.logger.debug("Wrapped vpaid already stopped, remove UI"),e()):(this.logger.debug("Wrapped vpaid not stopped, try to stop it"),this.vpaid.subscribe(e,Z.c.AdStopped),super.stopAd())}pauseAd(){this.callVPAIDMethod("pauseAd")}resumeAd(){this.callVPAIDMethod("resumeAd")}getAdWidth(){return this.isRendered&&!this.isStopped&&super.getAdWidth()?super.getAdWidth():f.getBoundingClientRect(this.getMainComponentsContainer()).width}getAdHeight(){return this.isRendered&&!this.isStopped&&super.getAdHeight()?super.getAdHeight():f.getBoundingClientRect(this.getMainComponentsContainer()).height}setAdVolume(e){return isNaN(e)?(this.logger.warn("setAdVolume: volume argument is NaN"),this.getAdVolume()):super.setAdVolume(e)}getAdExpanded(){return this.isFullscreen}setVPAID(e){if(this.vpaid)this.logger.warn("setVPAID() : vpaid ad already register, can't use twice");else{this.logger.debug("setVPAID() : Register vpaid ad"),super.setVPAID(e),e.subscribe((()=>{this.isStopped=!0}),Z.c.AdStopped);var t=e=>{var t=function(e,t){return a.filter(e,(function(e){return e.isEnabled()&&-1!==a.indexOf(e.getOverridenEvents(),t)}))}(this.components,e.type);0===t.length&&this.handleVpaidEvent(e)};for(var i in Z.c)if(Z.c.hasOwnProperty(i)){var s=Z.c[i];e.subscribe(He(t,s),s)}for(var i in $e.c)$e.c.hasOwnProperty(i)&&(s=$e.c[i],e.subscribe(He(t,s),s))}}getVPAID(){return this.vpaid}getVPAIDContainer(){return this.mainComponentsContainer.ownerDocument.getElementById("vpaid-container")}getMainContainer(){return this.mainContainer}getMainComponentsContainer(){return this.mainComponentsContainer.ownerDocument.getElementById(se)}getCreativeContainer(){return this.getVPAID().container.getCreativeContainer()}getVideoComponentsContainer(){return this.videoComponentsContainer=this.videoComponentsContainer||this.mainComponentsContainer.ownerDocument.getElementById(ne)}getComponent(e){return this.componentsByName[e]}getConfig(){return this.config}getContainer(){return this.container}getContentWindow(){return this.getContainer().contentWindow||window}render(e){var t,i,s,n;if(!this.isRendered){this.rendered=!0,this.show(),this.resize(e.getAdWidth(),e.getAdHeight());var r,o=e=>{this.handleVpaidEvent(e)};for(var a in this.logger.debug("init components:",this.config.components),vs)if(vs.hasOwnProperty(a)&&vs[a])for(var d=ie+a,c=f.getElementsByClassName(d,this.getMainComponentsContainer(),this.getContentWindow()),h=0,u=c.length;h<u;h++)if(this.config.components&&this.config.components[a]&&this.config.components[a].disable||this.config.disableAllComponents&&this.config.components&&!1!==this.config.components[a].disable)l.cb.fromNullable(c[h]).forEach((e=>l.cb.fromNullable(e.parentNode).forEach((t=>t.removeChild(e))))),this.logger.debug("disable component "+a);else{var p=new vs[a](this,c[h],e,this.config.components&&this.config.components[a]?this.config.components[a]:{},o);if(this.components.push(p),this.componentsByName[a]=p,null===(i=null===(t=this.loaderConfig)||void 0===t?void 0:t.api)||void 0===i?void 0:i.isVideoBanner()){const e=null===(n=null===(s=this.loaderConfig)||void 0===s?void 0:s.api)||void 0===n?void 0:n.getCreativeSize();this.config.clickthrough||this.getVPAIDContainer().style.setProperty("background-color","transparent"),"soundbutton"===a&&p.getElement().style.setProperty("bottom",(r=e).height-Yi(r.width)+"px"),"endscreen"===a&&p.getElement().style.setProperty("height",`${Yi(e.width)}px`)}try{p.init(),this.logger.debug("init component "+a,this.config.components&&this.config.components[a]?this.config.components[a]:null)}catch(e){this.logger.error('error init component "'+a+'"',e.toString())}}}}showAllComponents(){ls(this.components,!0)}hideAllComponents(){ls(this.components,!1)}showComponent(e){as(this.componentsByName,e,!0)}hideComponent(e){as(this.componentsByName,e,!1)}dispatchCustomEvent(e,t){this.dispatchEvent(e,t)}getProperties(){return{adLinear:this.getAdLinear(),adWidth:this.getAdWidth(),adHeight:this.getAdHeight(),adExpanded:this.getAdExpanded(),adSkippableState:this.getAdSkippableState(),adRemainingTime:this.getAdRemainingTime(),adDuration:this.getAdDuration(),adVolume:this.getAdVolume()}}toJSON(){return JSON.stringify(this.getProperties())}handleVpaidEvent(e){switch(e.type){case Z.c.AdSizeChange:this.getAdWidth()&&this.getAdHeight()&&this.isStopped&&(this.logger.debug("resize with AdSizeChange event"),this.resize(this.getAdWidth(),this.getAdHeight(),this.isFullscreen?"fullscreen":"normal"));break;case Z.c.AdLoaded:if(this.initAdStartTime>0)try{const e=l.cb.fromNullable(this.config.vpaidUrl).map((e=>E.K0(e).hostname)).getOrNull(),t=(0,g.kX)()-this.initAdStartTime,i=(0,g.eA)(/t.teads.tv\/track\?action=adCall/).map((e=>e.startTime)).map(Math.round).getOrValue(0);this.logger.info("initAd response time",t,e,i)}catch(e){}}super.handleVpaidEvent(e)}callVPAIDMethod(e,t=[]){a.forEach(this.components,(i=>{i.onMethod(e,t)}));var i,s=function(e,t){return a.filter(e,(function(e){return e.isEnabled()&&-1!==a.indexOf(e.getOverridenMethods(),t)}))}(this.components,e);return 0===s.length?super.callVPAIDMethod(e,t):(a.forEach(s,(s=>{i=s.onOverridenMethod(e,t)})),i)}resize(e,t,i="normal"){if(e<=0||t<=0)return;let s=e+"px",n=t+"px";this.getVideoComponentsContainer().style.getPropertyValue("width")===s&&this.getVideoComponentsContainer().style.getPropertyValue("height")===n&&this.container.style.getPropertyValue("width")===s&&this.container.style.getPropertyValue("height")===n||(this.getVideoComponentsContainer().style.setProperty("width",s),this.getVideoComponentsContainer().style.setProperty("height",n),this.container.style.setProperty("width",s,"important"),this.container.style.setProperty("height",n,"important"),this.container.style.setProperty("max-height",n,"important"),this.logger.debug("vpaidui resize",e,t,i),!this.isFullscreen&&"fullscreen"===i||this.isFullscreen&&"normal"===i?(this.isFullscreen="fullscreen"===i,this.dispatchEvent(Z.c.AdExpandedChange)):this.logger.debug("no fullscreen exit or enter"));let r=this.getVPAIDContainer();r.style.setProperty("width",s),r.style.setProperty("height",n);let o="l-screen";e<=480?o="xs-screen":e<=640&&(o="sm-screen"),a.forEach(["l-screen","xs-screen","sm-screen"],(e=>{e!==o&&A.removeClass(this.mainComponentsContainer,e)})),A.addClass(this.mainComponentsContainer,o)}show(){this.container.style.setProperty("display","block")}hide(){this.container.style.setProperty("display","none")}initHeavyAdInterventionListener(e){window.addEventListener("message",(e=>{l.cb.of(e).map((({data:e})=>e)).filter((({event:e})=>"heavyAdIntervention"===e)).forEach((({report:e})=>{this.logger.error("Fetched a heavy ad intervention event",e),Ze.AT.tryCatch((()=>l.cb.of(JSON.parse(e)).map((({body:e})=>e)).filter((({id:e})=>"HeavyAdIntervention"===e)).map((({message:e})=>e)))).fold((e=>this.logger.error("Something went wrong during the parsing of the intervention report:",e)),(e=>e.forEach((e=>{const t=e.indexOf("Ad was removed")>-1?$e.c.AdRemovedHeavyAdIntervention:$e.c.AdWarningHeavyAdIntervention,i=e.indexOf("CPU")>-1?"CPU":"Network";this.dispatchCustomEvent(t,{id:Me.C.GENERAL_LINEAR.id,message:`HeavyAdIntervention ${i}`})}))))}))}),!0),e.postMessage({event:"reportingObserverSource"},"*")}}var bs=i(3540),ys=i(9696),ws=i(3064),Es=i(724);class Cs{constructor(e,t,i,s,n){this.container=e,this.config=t,this.vpaidAd=i,this.bufferingTimer=null,this.bufferingDone=!1,this.elapseTime=0,this.logger=new c.Y("player.plugin.Bench");try{let e=A.findTopWindow(this.container);this.visibility=I.listenWindow(e,(()=>{this.elapseTime>1e3&&0===this.getCurrentTime()&&(this.clearBufferingTimer(!0),this.visibility.destroy())}),(()=>{}))}catch(e){this.logger.error("Error with visibility init",e)}(0,a.forEach)([Z.c.AdStopped,Z.c.AdSkipped,Z.c.AdError],(e=>{this.vpaidAd.subscribe((()=>this.visibility.destroy()),e)})),this.vpaidAd.subscribe((()=>{this.getBuffering()}),Z.c.AdStarted),this.vpaidAd.subscribe((()=>{this.clearBufferingTimer()}),Z.c.AdPaused),this.vpaidAd.subscribe((()=>{this.getBuffering()}),Z.c.AdPlaying)}init(){}deinit(){}getBuffering(e=500){this.bufferingDone||(this.bufferingTimer=setTimeout((()=>{try{this.elapseTime=e;let t=this.getCurrentTime();if(t>0){let i=e-1e3*t>0?e-1e3*t:0;"number"==typeof i&&i>=0&&this.logger.debug("Buffering: "+i+"ms"),this.bufferingDone=!0,this.visibility.destroy()}else this.getBuffering(e+=500)}catch(e){this.logger.error("Error with buffering method",e)}}),500))}clearBufferingTimer(e=!1){try{this.bufferingTimer&&(clearTimeout(this.bufferingTimer),this.bufferingTimer=null,e&&(this.logger.warn("Stop buffering calculation"),this.bufferingDone=!0))}catch(e){this.logger.error("An error occured while cleaning the buffering timer",e)}}getCurrentTime(){return this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime()?this.vpaidAd.getAdDuration()-this.vpaidAd.getAdRemainingTime():0}}var Is=i(152);class Ss{constructor(e,t,i,s,n,r){this.config=t,this.vpaidAd=i,this.linearAd=n,this.dependenciesFromPlayer=r}init(){this.vpaidAd.subscribe(this.onClickThrough,Z.c.AdClickThru,this)}deinit(){this.vpaidAd.unsubscribe(this.onClickThrough,Z.c.AdClickThru)}onClickThrough(e,t,i){const s=(0,Is.A)(e)||this.linearAd.clickThrough[0],n=this.config.auctionId;if(a.includes(Je.Sg,this.config.formatConfig.adSourceId)){let e=null;window.addEventListener("message",(t=>{var i,s;const r=!e||e===(null===(i=t.data)||void 0===i?void 0:i.host);t.source&&"TEADS_PIXEL_LOADED"===(null===(s=t.data)||void 0===s?void 0:s.type)&&r&&(e=t.data.host,t.source.postMessage({type:"TEADS_SDK_PARAMETERS",teadsClickId:n},t.origin))}))}const r=this.linearAd.creativeId,o=this.config.insertionId;i&&s?Ze.AT.tryCatch((()=>{const e=(0,ys.kD)([(0,ys.YN)(this.dependenciesFromPlayer.gdprIab.status),...(0,ys.AP)(this.dependenciesFromPlayer.gdprIab.consent)])(s),t=(0,m.isChromeIos)()&&(0,E.u4)(e)?"_parent":"_blank";if(n&&r&&o&&wt()){const i=encodeURIComponent(yt(bt.Navigation,n,r,o));window.open(e,t,`attributionsrc=${i}`)}else window.open(e,t)})).tapLeft((e=>{this.dependenciesFromPlayer.sumologicLogger.error(`plugin-onclickthrough ${(0,xe.k)(e)}`)})):s&&n&&r&&o&&wt()&&this.dependenciesFromPlayer.sumologicLogger.info(`attribution-reporting-missed ${n}|${o}|${r}`,1)}}var Ts=i(2495);class ks{constructor(e,t,i,s,n,r){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=s,this.linearAd=n,this.trackVastEventDependencies=r,this.logger=new c.Y("player.plugin.Extensions"),this.getVastMacros=()=>{var e;const t=l.cb.fromNullable(gt.Ix(this.linearAd.duration,this.vpaidAd.getAdRemainingTime())),i=gt.Ev(l.cb.fromNullable(this.mediaFile)),s=gt.Al(l.cb.fromNullable(this.mediaFile)),n=(0,f.getBoundingClientRect)(this.container).height,r=l.cb.fromNullable(null===(e=this.config.formatConfig)||void 0===e?void 0:e.threshold).map((e=>e.get())).getOrValue(100),o=l.cb.fromNullable(gt.MD(this.container,n,r)),a=(0,jt.E)(this.trackVastEventDependencies.gdprIab.status),d=l.cb.fromNullable(this.trackVastEventDependencies.gdprIab.consent);return gt.AV({currentTime:t,assetUrl:i,mediaFileType:s,viewability:o,gdprApplies:a,gdprConsent:d})},this.getFunnelMacros=()=>{var e;return l.cb.fromNullable(null===(e=this.config)||void 0===e?void 0:e.formatConfig).match({some:e=>{const t=l.cb.fromNullable(e.pageId),i=l.cb.fromNullable(e.placementId),s=l.cb.fromNullable(e.insertionId),n=l.cb.fromNullable(m.getEnv());return gt.QF({pageId:t,pid:i,insertionId:s,env:n})},none:()=>gt.QF()})}}init(){a.forEach(this.linearAd.extensions,(e=>{switch(e.type){case Lt:const t=Ot(e.content);t&&t.width&&t.height&&(this.mediaFile.width=t.width,this.mediaFile.height=t.height);break;case Se.AD_VERIFICATIONS:if((0,o.eM)(this.linearAd.adParameters,this.mediaFile.url)){const t=this.retrieveCreativePrefetchAdVerificationScriptUrls(e);this.prefetchAdVerificationScripts(t)}break;case Se.MOAT_JS:this.initMoatTracking(e);break;case Se.VISIBILITY:case Se.HTML:case Se.IFRAME:this.injectIframe(e.content);break;case Se.SCRIPT:case Se.ALENTY:this.injectJs(e.content);break;default:this.logger.warn("Unhandled extension type",e)}}))}deinit(){}getExtension(e){return l.cb.fromNullable(a.find(this.linearAd.extensions,(t=>t.type===e)))}retrieveCreativePrefetchAdVerificationScriptUrls(e){const t=a.fromNodeList(e.xml.querySelectorAll("Verification")),i=a.map(t,(e=>[e.getAttribute("vendor"),e.querySelector("JavaScriptResource")])),s=a.filter(i,(([,e])=>"creative-prefetch"===e.getAttribute("apiFramework"))),n=/src="([^"]+)/gi,r=(0,Ts.c)(((e,t)=>a.map(t,(({vendor:t,url:i})=>({vendor:t,url:gt.GY(e,!0)(i)}))))),o=e=>r(this.getVastMacros())(r(this.getFunnelMacros())(e)),d=a.map(s,(([e,t])=>l.cb.fromNullable(t.textContent).map(y.trim).map((t=>{let i;const s=[];for(;null!==(i=n.exec(t));)s.push(i[1]);let r;return r="DoubleVerify"===e?a.map(s,(e=>(e.includes("btreg")||(e=`${e}&btreg=`),E.uw(e,"btreg",this.container.getAttribute("id"))))):s,a.map(r,(t=>({vendor:e,url:t})))})).map(o)));return a.reduce(d,((e,t)=>t.map((t=>e.concat(t))).getOrValue(e)),[])}prefetchAdVerificationScripts(e){a.forEach(e,(e=>{(new Image).src=e.url}))}initMoatTracking(e){let t=this.vpaidAd.getAdDuration();t<=0&&(t=this.linearAd.duration);const i=JSON.parse(e.content);let s=[];const n={adData:{ids:i,duration:t,url:this.mediaFile.url},dispatchEvent(e){if(this.sendEvent){let t=e;s&&(s.push(e),t=s,s=null),this.sendEvent(t)}else s.push(e)}};this.logger.debug("intialized MOAT with",n.adData),a.forEach(["AdStarted","AdImpression","AdStopped","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdPaused","AdPlaying","AdVolumeChange"],(e=>{this.vpaidAd.subscribe((()=>{let t={type:e,adVolume:this.vpaidAd.getAdVolume()};this.logger.debug("sending MOAT event",t),n.dispatchEvent(t)}),e)}));let r="_moatApi"+y.rand(8);A.getWindow(this.container)[r]=n;let o=A.getDocument(this.container).createElement("script");const l=(0,h.getProtocol)();let d="https:"===l?"z":"js";o.src=l+"//"+d+".moatads.com/"+ks.MOAT_PARTNER_CODE+"/moatvideo.js#"+r,this.container.insertBefore(o,this.container.childNodes[0])}injectJs(e){let t=document.createElement("script");t.async=!0,t.src=e,this.container.appendChild(t)}injectIframe(e){const t=A.createIframe("extension");t.srcdoc=e,document.body.appendChild(t)}}ks.MOAT_PARTNER_CODE="teads245638586802";class Ps{constructor(e,t,i,s){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=s,this.logger=new c.Y("player.plugin.Responsive")}init(){this.logger.debug("init plugin"),this.vpaidAd.subscribe(this.onVideoMetadata,$e.c.AdVideoMetadata,this),this.vpaidAd.subscribe(this.onVpaidStart,Z.c.AdStarted,this)}deinit(){this.logger.debug("deinit plugin"),this.vpaidAd.unsubscribe(this.onVpaidStart,Z.c.AdStarted),this.vpaidAd.unsubscribe(this.onVideoMetadata,$e.c.AdVideoMetadata),this.unsetResponsive()}resize(e){if(!A.isFullscreen())try{let n=f.getBoundingClientRect(this.container).width;if(n!==this.vpaidAd.getAdWidth()||e){let e=this.config.vpaidApi&&this.config.vpaidApi.getStudioData();var t=De.cp.getOptimalHeight(this.mediaFile,n,!!this.metadata||!!e),i=this.vpaidAd.getAdWidth(),s=this.vpaidAd.getAdHeight();i===n&&s===t||(this.vpaidAd.resizeAd(n,t,"normal"),this.logger.debug("container width change, resize from "+i+"x"+s+" to "+n+"x"+t))}}catch(e){this.logger.error("resize throw an Exception",e),this.unsetResponsive()}}setResponsive(){return!this.iframe&&(this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),Z.c.AdError),this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),Z.c.AdStopped),this.resize(),this.iframe=document.createElement("iframe"),this.iframe.setAttribute("title","responsive plugin"),this.iframe.style.setProperty("height","0"),this.iframe.style.setProperty("width","100%"),this.iframe.style.setProperty("border","none"),this.iframe.style.setProperty("margin","0"),this.iframe.style.setProperty("padding","0"),this.container.appendChild(this.iframe),this.iframe.contentWindow.document.write("<html><body></body></html>"),this.iframe.contentWindow.document.close(),this.resizeCallback=()=>this.resize(),f.addEventListener("resize",this.iframe.contentWindow,this.resizeCallback),!0)}unsetResponsive(){try{return!!this.iframe&&(f.removeEventListener("resize",this.iframe.contentWindow,this.resizeCallback),this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,!0)}catch(e){return!1}}onVideoMetadata(e){this.logger.debug("Receive metadata from video",e),e.width&&e.height&&(this.metadata=e,this.mediaFile.width=e.width,this.mediaFile.height=e.height,Math.ceil(this.vpaidAd.getAdWidth()/this.vpaidAd.getAdHeight())!==Math.ceil(e.width/e.height)&&(this.logger.debug("vpaid ratio differ from mediafile ratio, force resize !"),this.resize(!0)))}onVpaidStart(){if(!this.config.width)try{this.logger.debug("set player responsive !"),this.setResponsive()}catch(e){this.logger.error("Exception raised while trying to initialize",e)}}}var xs=i(3463),Ls=i(5180);class _s{constructor(e,t,i,s,n,r){this.container=e,this.config=t,this.vpaidAd=i,this.mediaFile=s,this.linearAd=n,this.trackVastEventDependencies=r,this.logger=new c.Y("player.plugin.Tracker"),this.tracked={},this.trackedProgress=[],this.trackOnce=[xs.c.Skip,xs.c.CreativeView,xs.c.Start,xs.c.Impression,xs.c.FirstQuartile,xs.c.Midpoint,xs.c.ThirdQuartile,xs.c.Complete,xs.c.Error],this.dispatchingCompleteOnAMP=!1,this.isMuted=!1;const o=[Z.c.AdLoaded,Z.c.AdStarted,Z.c.AdSkipped,Z.c.AdImpression,Z.c.AdVideoStart,Z.c.AdVideoFirstQuartile,Z.c.AdVideoMidpoint,Z.c.AdVideoThirdQuartile,Z.c.AdVideoComplete,Z.c.AdClickThru,Z.c.AdUserClose],d=[Z.c.AdDurationChange,Z.c.AdRemainingTimeChange],h=Object.keys(Z.c);for(const e in $e.c)h.push(e);this.vpaidAd.subscribe(((...e)=>{this.trackError(e)}),$e.c.AdRemovedHeavyAdIntervention),a.forEach(h,(e=>{a.indexOf(o,e)>-1&&this.vpaidAd.subscribe((t=>{e===Z.c.AdImpression?this.trackVastEventDependencies.sumologicLogger.info(`${e}|classic`,40):this.trackVastEventDependencies.sumologicLogger.info(`${e}|${l.cb.fromNullable(t).filter(C.ct).getOrValue("")}`,40)}),e),-1===a.indexOf(d,e)&&this.vpaidAd.subscribe(((t="")=>{this.logger.info(`${e} ${t}`)}),e)}))}init(){this.logger.debug("init");try{this.previousRemainingTime=this.vpaidAd.getAdRemainingTime(),this.vpaidAd.subscribe((()=>this.onTimeChange()),Z.c.AdDurationChange),this.vpaidAd.subscribe((()=>this.onTimeChange()),Z.c.AdRemainingTimeChange);for(let e in this.linearAd.tracking)this.addTrackingCallback(e);let e;this.vpaidAd.subscribe((()=>this.onAdStarted()),Z.c.AdStarted),this.vpaidAd.subscribe((()=>this.onVolumeChange()),Z.c.AdVolumeChange),this.vpaidAd.subscribe((()=>{const t=this.vpaidAd.getAdExpanded();!e&&t?(this.trackVastEvent(xs.c.Fullscreen),this.trackVastEvent(xs.c.Expand)):e&&!t&&(this.trackVastEvent(xs.c.ExitFullscreen),this.trackVastEvent(xs.c.Collapse)),e=t}),Z.c.AdExpandedChange)}catch(e){const{placementKey:t,sumologicLogger:i,wigo:s,logger:n,slotType:r,creativeSize:o}=this.trackVastEventDependencies,a=l.cb.fromNullable(this.adDuration),d=a.flatMap((e=>l.cb.fromNullable(this.adRemainingTime).map((t=>e-t))));(0,Re.Ax)({placementKey:t,wigo:s,sumologicLogger:i,logger:n,durationPlayed:d,totalDuration:a,errorCode:bs.j.Undefined,errorCause:"plugin tracker exception init",slotType:r,creativeSize:o,macros:[(0,ys.zD)(d.getOrValue(0)),(0,ys._8)(),(0,ys.Y9)(l.cb.fromNullable(this.mediaFile)),(0,ys.Sq)(l.cb.fromNullable(this.mediaFile)),(0,ys.Ej)(0),(0,ys.YN)(this.trackVastEventDependencies.gdprIab.status),...(0,ys.AP)(this.trackVastEventDependencies.gdprIab.consent)]})}}deinit(){this.logger.debug("deinit")}onTimeChange(){this.adDuration=this.vpaidAd.getAdDuration(),this.adRemainingTime=this.vpaidAd.getAdRemainingTime(),this.previousRemainingTime<0&&(this.previousRemainingTime=this.adRemainingTime)}onVolumeChange(){this.isMuted&&this.vpaidAd.getAdVolume()>0?this.trackVpaidEvent(xs.c.Unmute):this.isMuted||0!==this.vpaidAd.getAdVolume()||this.trackVpaidEvent(xs.c.Mute),this.isMuted=!this.vpaidAd.getAdVolume()}onAdStarted(){this.isMuted=!this.vpaidAd.getAdVolume()}addTrackingCallback(e){const t=Ls.a[e]||Ls.A[e];this.vpaidAd.subscribe(((...t)=>{e===xs.c.Error?this.trackError(t):this.trackVpaidEvent(e)}),t)}buildTrackingDependencies(e){var t;const i=(0,f.getBoundingClientRect)(this.container).height,s=l.cb.fromNullable(null===(t=this.config.formatConfig)||void 0===t?void 0:t.threshold).map((e=>e.get())).getOrValue(100),n=(0,gt.MD)(this.container,i,s),{placementKey:r,wigo:o,logger:a}=this.trackVastEventDependencies,d=[(0,ys.zD)(e),(0,ys._8)(),(0,ys.Y9)(l.cb.fromNullable(this.mediaFile)),(0,ys.Sq)(l.cb.fromNullable(this.mediaFile)),(0,ys.Ej)(n),(0,ys.Qf)(this.trackVastEventDependencies.sumologicLogger),(0,ys.YN)(this.trackVastEventDependencies.gdprIab.status),...(0,ys.AP)(this.trackVastEventDependencies.gdprIab.consent)];return{trackOpts:{referer:(0,Re.ID)(),slotType:this.trackVastEventDependencies.slotType,creativeSize:this.trackVastEventDependencies.creativeSize,macros:d},trackingsDependencies:{placementKey:r,wigo:o,logger:a,durationPlayed:(0,l.sx)(e),totalDuration:l.cb.fromNullable(this.adDuration),sumologicLogger:this.trackVastEventDependencies.sumologicLogger}}}trackEvent(e,t){const i=t.filter((e=>!isNaN(e))).getOrValue(this.adDuration-this.adRemainingTime||0),s=Math.floor(i);if(e===xs.c.Progress){if(this.trackedProgress[s])return;if(this.previousRemainingTime===this.adRemainingTime&&!this.dispatchingCompleteOnAMP)return;this.previousRemainingTime=this.adRemainingTime}switch(e){case xs.c.Start:this.tracked[xs.c.Impression]||this.trackVastEvent(xs.c.Impression);break;case xs.c.Complete:(0,m.isAmp)()?(this.dispatchingCompleteOnAMP=!0,this.trackProgress(s+2)):this.trackProgress(s+1);case xs.c.FirstQuartile:case xs.c.Midpoint:case xs.c.ThirdQuartile:this.tracked[xs.c.Start]||this.trackVastEvent(xs.c.Start);break;case xs.c.Progress:this.trackedProgress[s]=!0;const e=s-1;e>0&&!this.trackedProgress[e]&&(this.logger.debug("track missing previous progress "+e),this.trackProgress(e));break;case xs.c.Mute:if(!this.tracked[xs.c.Impression])return}if(!a.includes(this.trackOnce,e)||!this.tracked[e]){if((0,a.isMemberOf)(xs.E)(e)&&e!==xs.c.Billable){const{placementKey:t}=this.trackVastEventDependencies,{trackOpts:n,trackingsDependencies:r}=this.buildTrackingDependencies(i);if(e===xs.c.Progress)s>0&&(0,Re.GD)(r)(e,(()=>Ve.c.vast.trackProgress(t)(s,n)));else{const i=e;(0,Re.GD)(r)(i,(()=>Ve.c.vast.track(t)(i,n)))}}else this.logger.error(`Could not track unsupported VAST event: ${e}. Supported names: ${xs.E.join(", ")}.`),this.trackVastEventDependencies.sumologicLogger.error(`cant-track-vast-event ${e}`);this.tracked[e]=!0}}trackVastEvent(e){this.trackEvent(e,l.cb.empty())}trackVpaidEvent(e){this.trackEvent(e,l.cb.empty())}trackProgress(e){this.trackEvent(xs.c.Progress,l.cb.fromNullable(e))}trackError(e){if(this.tracked[xs.c.Error])return;const t=e&&e[1]&&"number"==typeof e[1]&&!isNaN(e[1])?e[1]:Me.C.GENERAL.id,i=(0,a.isMemberOf)(bs.a)(t)?t:bs.j.Undefined,s=e[0],n=this.adDuration-this.adRemainingTime||0,{trackOpts:r,trackingsDependencies:o}=this.buildTrackingDependencies(n);(0,Re.Ax)(Object.assign(Object.assign(Object.assign({},o),{errorCode:i,errorCause:s}),r))}}class Os{constructor(e,t,i,s,n,r){this.config=t,this.vpaidAd=i,this.linearAd=n,this.trackVastEventDependencies=r}init(){this.vpaidAd.subscribe(this.onClickAdChoices,Y.c.AdChoicesClickRequest,this)}deinit(){this.vpaidAd.unsubscribe(this.onClickAdChoices,Y.c.AdChoicesClickRequest)}onClickAdChoices(){var e;(0,Re.GD)({placementKey:this.trackVastEventDependencies.placementKey,sumologicLogger:this.trackVastEventDependencies.sumologicLogger,wigo:this.trackVastEventDependencies.wigo,logger:this.trackVastEventDependencies.logger,durationPlayed:l.MB,totalDuration:l.MB})(xs.c.ClickIcon,(()=>Ve.c.vast.track(this.trackVastEventDependencies.placementKey)(xs.c.ClickIcon,{referer:(0,Re.ID)(),slotType:this.trackVastEventDependencies.slotType,creativeSize:this.trackVastEventDependencies.creativeSize,macros:(0,ys._u)()}))),window.open((e=this.linearAd,l.cb.fromNullable(e).flatMap((e=>e.adChoicesIconClickThrough)).getOrValue("https://privacy-policy.teads.tv?utm_source=inread&utm_medium=icon&utm_campaign=adchoices")),"_blank")}}class Vs{constructor(e,t,i,s,n,r,o){this.container=e,this.config=t,this.slotType=i,this.wigo=s,this.gdprIab=n,this.placementKey=r,this.logger=new c.Y("player.VASTPlayer"),this.plugins={},this.logger.info("new VASTPlayer",this.container,this.config),this.sumologicLogger=o.copy({collectorUrl:"https://s8t.teads.tv/logs/player/http-source"}),this.wigo.valid(2,0),this.wigo.setPlayerContainer(this.container),this.wigo.elementToFollow=this.container}setLinearAd(e){this.linearAd=e,this.logger.info("setLinearAd",e),this.wigo.valid(2,1,e,"modal")}setVpaidApi(e){this.config.vpaidApi=e}getLinearAd(){return this.linearAd}getMediafile(){return this.mediafile}getConfig(){return this.config}showCloseButton(){this.ui.showComponent("closebutton")}setConfigUI(e){this.config.ui=e}getOptimalMediaFile(e,t,i=(e=>!0)){return De.cp.getOptimalMediaFile(this.linearAd.duration,this.linearAd.mediaFiles,((s,n)=>{const r=l.cb.fromNullable(s);r.match({some:s=>{r.filter(i).match({some:t=>{e(t),this.wigo.valid(2,2,t.url+n,"string")},none:()=>{this.onVastError(t,Me.U.get(Me.C.MEDIAFILE_DISPLAY.id,"Mediafile filtered by the custom filter"),this.linearAd),this.wigo.valid(2,2,"405 - Mediafile filtered by the custom filter","error")}})},none:()=>{const e=Me.U.get(Me.C.UNSUPPORTED_MEDIAFILE.id,"VASTPlayer.getOptimalMediaFile didn't find mediafile");this.wigo.valid(2,2,n,"error"),this.onVastError(t,e,this.linearAd)}}),De.cp.sendMediasToSumologic(this.linearAd,s?1:0,this.sumologicLogger)}),this.config,this.sumologicLogger)}playOptimalMediaFile(e,t,i){this.getOptimalMediaFile((i=>{this.playMediaFile(i,e,t)}),t,i)}loadOptimalMediaFile(e,t,i){this.getOptimalMediaFile((i=>{this.loadMediaFile(i,e,t)}),t,i)}playMediaFile(e,t,i){if(!e){let e=Me.U.get(Me.C.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.playMediaFile");return this.onVastError(i,e,this.linearAd)}this.loadMediaFile(e,(function(e,i){t(e,i),e.subscribe((function(){e.startAd()}),Z.c.AdLoaded),e.initAd(i.width,i.height,i.mode,i.bitrate,i.parameters)}),i)}loadMediaFile(e,t,i){let s=e=>{this.onVastError(i,e,this.linearAd)};if(!e)return s(Me.U.get(Me.C.UNSUPPORTED_MEDIAFILE.id,"no mediafile provided in VASTPlayer.loadMediaFile"));this.mediafile=e;const o=De.cp.getMediaProvider(e);let a=e.url;const l=this.config.creativeSize.map((e=>e.width)).getOrValue(this.container.offsetWidth);var d={width:l,height:this.config.creativeSize.map((e=>e.height)).getOrValue(De.cp.getOptimalHeight(e,l)),mode:"normal",bitrate:e.bitrate||512,parameters:this.linearAd.adParameters},c=this.linearAd.clickThrough.length?this.linearAd.clickThrough[0]:null;let h=this.config.useCustomVideo||!1;var u,p,g=!1;switch(o){case Es.S.VPAID:if(c=null,"display"===this.config.adType||"native"===this.config.adType)break;"vpaid"===e.api&&e.type.indexOf("javascript")>-1&&(this.config.type===ws.e.CANVAS&&(h=!0),m.cacheCanvasUsed(h));break;case Es.S.JS:case Es.S.CANVAS:a=this.config.path+"/"+De.cp.getAssetFromMediaProvider(o),o===Es.S.JS?a=Xi.VIDEO:o===Es.S.CANVAS&&(a=Xi.CANVAS);var f=this.config.path.match("/dist")||0===this.config.path.indexOf("http")?this.config.path.match("/dist")&&0!==this.config.path.indexOf("http")?window.location.protocol+window.location.host+this.config.path:this.config.path:window.location.protocol+this.config.path;g=(()=>{try{return!this.config.ui.config.components.endscreen.disable}catch(e){return this.logger.error(`Couldn't autostop: "${e}"`),!1}})(),d.parameters={url:e.url,debug:this.config.debug,clickThrough:c,skippable:this.linearAd.skippable,skipoffset:this.linearAd.skipDelay,assetsPath:f,type:ws.e[this.config.type],pid:this.sumologicLogger.placementId.getOrNull(),noAutoStop:g,timeout:Vs.MEDIAFILE_TIMEOUT_DELAY},d.parameters={AdParameters:JSON.stringify(d.parameters)},p=Vs.MEDIAFILE_TIMEOUT_DELAY+2e3,Fe=p;break;case Es.S.UNSUPPORTED:default:return u="media not supported "+e.type,void s(Me.U.get(Me.C.UNSUPPORTED_MEDIAFILE.id,u))}var v={path:this.config.path,useCustomVideo:h,api:this.config.vpaidApi};!function(e){Ue=e}(Vs.MEDIAFILE_TIMEOUT_DELAY),this.config.background&&(v.background=this.config.background);var A=this.container;if(this.config.ui){var b;if(this.config.ui.template)b=this.config.ui.template;else{if(!n[this.config.ui.name]){let e=Me.U.get(Me.C.UNDEFINED.id,"VASTPlayer: cannot find template for VPAID-UI");return s(e)}b=x(n[this.config.ui.name],{assetsPath:this.config.path+"/assets"})}this.config.ui.config.showAdChoicesIcon=0===this.config.adChoicesIconLocation,this.config.ui.config=this.config.ui.config||{},this.config.ui.config.clickthrough=c,o===Es.S.VPAID&&(this.config.ui.config.vpaidUrl=e.url),this.config.ui.config.noAutoStop=g,this.ui&&this.ui.getContainer()&&(this.config.ui.config.container=this.ui.getContainer()),this.ui=new As(this.container,b,this.config.ui.config,v),A=this.ui.getVPAIDContainer(),this.smartPosition=new qt(this.ui)}var y=new ts(A,v);y.setWigo(this.wigo),y.load(a,(i=>{for(var n in this.wigo.valid(3,0),this.config.ui?(this.ui.setVPAID(i),this.vpaidAd=this.ui):this.vpaidAd=i,this.vpaidAd.setWigo(this.wigo),r)try{var a=r[n];this.plugins[n]&&this.plugins[n].deinit(),this.plugins[n]=new a(this.container,this.config,this.vpaidAd,e,this.linearAd,{placementKey:this.placementKey,sumologicLogger:this.sumologicLogger,wigo:this.wigo,slotType:this.slotType,logger:this.logger,gdprIab:this.gdprIab,creativeSize:this.config.creativeSize}),this.plugins[n].init()}catch(e){this.logger.error("Could not initialize plugin "+n,e)}try{t(this.vpaidAd,d)}catch(e){let t=Me.U.get(Me.C.UNDEFINED.id,"loadMediaFile success callback failled "+e,e);s(t)}this.logger.info("loadMediaFile",Es.S[o]),this.wigo.valid(2,3,Es.S[o],"string")}),(e=>{let t=Me.C.UNDEFINED.id;switch(e.id){case Xt.id:t=Me.C.GENERAL.id;break;case Zt.id:t=Me.C.FILE_NOT_FOUND.id;break;case Jt.id:t=Me.C.MEDIAFILE_TIMEOUT.id}let i=e.message||"vpaidloader error";s(Me.U.get(t,i))}))}getPlugin(e){return this.plugins[e]}getPlugins(){return this.plugins}hasMoatExtension(e=this.linearAd){return!!e&&a.filter(e.extensions||[],(e=>"MoatJs"===e.type)).length>0}onVastError(e,t,i){const s=t.getId(),n=(0,a.isMemberOf)(bs.a)(s)?s:bs.j.Undefined;(0,Re.Ax)({placementKey:this.placementKey,sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,errorCode:n,errorCause:t.getMessage(),slotType:this.slotType,creativeSize:this.config.creativeSize,macros:[(0,ys.zD)(0),(0,ys._8)(),(0,ys.Y9)(l.cb.fromNullable(this.mediafile)),(0,ys.Sq)(l.cb.fromNullable(this.mediafile)),(0,ys.Ej)(0)]}),e(t,i)}}Vs.MEDIAFILE_TIMEOUT_DELAY=15e3;const Rs=new c.Y("FunnelFormatSync"),Ds=window.teads.tagManagerResourcesList||[];function Ns(e,t){return l.cb.fromNullable((0,a.find)(t,(t=>t.tagManager===e)))}function Ms(e){return Ns(e,Ds).flatMap((({vastPlayer:e})=>e.flatMap((e=>l.cb.fromNullable(e.getMediafile()))))).map((()=>Bs(e))).getOrValue(!0)}function Bs(e){return(0,$t.YN)(e,Ds)}function Fs({sumologicLogger:e,placementAd:t,linearAdWithFormatConfig:{linearAd:i,formatConfig:s},tagIsCampaignTag:n,tagManagerPackage:r,adCallTrackOpts:a,auctionId:c,viewerId:p,gdprIab:g}){const{placement:m}=t;if(m){m.getElectedSlot()&&function(e){if(!A.getDocument(e).getElementById(ge)){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("id",ge),t.innerText=he()+pe(),f.inject(t,A.getWindow(e))}}(m.getElectedSlot().getElement());const v=new Vs(m.getPlayerContainer(),function(e,t){const i=l.cb.fromNullable(e).filter((e=>!e.adType.isVideo())).flatMap((0,d.cp)((0,h.prop)("creativeSize"),l.cb.fromNullable));return{path:u.E.basePathUrl,type:e.allowedPlayer.getValue(),formatConfig:e,background:"transparent",vpaidApi:null,pageId:e.pageId,adType:e.adType.get(),auctionId:t,creativeSize:i,width:i.map((e=>e.width)).getOrNull(),height:i.map((e=>e.height)).getOrNull(),insertionId:At(e.insertionId)}}(s,c.getOrNull()),m.slotType,m.wigo,g,m.key,e);v.setLinearAd(i);const b=function(e,t,i){return{name:"inread",config:{components:Pt(e,i,t,_t(t))}}}(s,i,m);v.setConfigUI(b),e.log(`Early-click: ${b.config.components.earlyclickoverlay.displayTime}, Ad-source-id: ${s.adSourceId}, Connection-id: ${s.connectionId}, Insertion-id: ${s.insertionId}, Auction-id: ${c}`,1e3);const{portfolioItemId:y,adType:w}=s;if(y&&((0,T.O0)(y)||w.isDisplay())){const e=v.getLinearAd();e.adParameters=o.YP(e.adParameters).map((e=>o.OW(Object.assign(Object.assign({},e),{portfolioItemId:y})))).getOrElse((()=>e.adParameters))}r.match({some:i=>function({sumologicLogger:e,placementAd:t,formatConfig:i,vastPlayer:s,tagIsCampaignTag:n,tagManagerPackage:r,adCallTrackOpts:o,auctionId:a,viewerId:d,gdprIab:c}){const{tagManagerInstance:h,onFormatLoaded:u,done:p}=r;(function(e,t,i,s){Ds.push({tagManager:e,placementAd:t,vastPlayer:(0,l.sx)(i),tagIsCampaignTag:s})})(h,t,s,n),h.logger.debug("load -> loadAd","ok"),h.wigo.setStatus(!0,"Ready to serve"),t.placement.initDom(t.placement.electedSlot),h.formatInstance=(0,l.sx)(Vt({instancesStore:window.teads.instances,placement:t.placement,formatConfig:i,vastPlayer:s,sumologicLogger:e,adCallTrackOpts:o,auctionId:a,viewerId:d})),h.formatInstance.forEach((n=>{const r=new Yt(t.placement,n,c);s.setVpaidApi(r),n.vpaidApi=r,n.load((()=>{Bs(h)?(h.logger.error("same ad detected"),(0,Re.yC)({placementKey:t.placement.key,sumologicLogger:e,logger:Rs,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:a,viewerId:d,slotType:t.placement.slotType,portfolioItemId:l.cb.fromNullable(i.portfolioItemId),insertionId:l.cb.fromNullable(i.insertionId),connectionId:l.cb.fromNullable(i.connectionId)}),n.close(5),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:l.cb.fromNullable(i.portfolioItemId),adCallTrackOpts:o,auctionId:a,viewerId:d})):(0,Re.Ke)({placementKey:t.placement.key,sumologicLogger:e,logger:Rs,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:a,viewerId:d,slotType:t.placement.slotType,portfolioItemId:l.cb.fromNullable(i.portfolioItemId),insertionId:l.cb.fromNullable(i.insertionId),connectionId:l.cb.fromNullable(i.connectionId)}),u(!0),p()}),(s=>{u(!1),Us({sumologicLogger:e,formatConfig:i,placement:t.placement,auctionId:a,viewerId:d,vastExceptionId:s.getId()}),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:l.cb.fromNullable(i.portfolioItemId),adCallTrackOpts:o,auctionId:a,viewerId:d}),p()}))}))}({sumologicLogger:e,placementAd:t,formatConfig:s,vastPlayer:v,tagIsCampaignTag:n,tagManagerPackage:i,adCallTrackOpts:a,auctionId:c,viewerId:p,gdprIab:g}),none:()=>function({sumologicLogger:e,placementAd:t,formatConfig:i,vastPlayer:s,adCallTrackOpts:n,auctionId:r,viewerId:o,gdprIab:a}){t.placement.initDom(t.placement.electedSlot);const d=Vt({instancesStore:window.teads.instances,placement:t.placement,formatConfig:i,vastPlayer:s,sumologicLogger:e,adCallTrackOpts:n,auctionId:r,viewerId:o}),c=new Yt(t.placement,d,a);s.setVpaidApi(c),d.vpaidApi=c,d.load((()=>{(0,Re.Ke)({placementKey:t.placement.key,sumologicLogger:e,logger:Rs,wigo:t.placement.wigo})({headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,pageId:t.placement.pageId,placementId:t.placement.pid,auctionId:r,viewerId:o,slotType:t.placement.slotType,portfolioItemId:l.cb.fromNullable(i.portfolioItemId),insertionId:l.cb.fromNullable(i.insertionId),connectionId:l.cb.fromNullable(i.connectionId)}),d.start()}),(s=>{Us({sumologicLogger:e,formatConfig:i,placement:t.placement,auctionId:r,viewerId:o,vastExceptionId:s.getId()}),t.placement.handleNoAd({sumologicLogger:e,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:l.cb.fromNullable(i.portfolioItemId),adCallTrackOpts:n,auctionId:r,viewerId:o})}))}({sumologicLogger:e,placementAd:t,formatConfig:s,vastPlayer:v,adCallTrackOpts:a,auctionId:c,viewerId:p,gdprIab:g})})}else Rs.warn("Placement object is empty in placementAd, cannot loadAd",t)}const Us=({sumologicLogger:e,formatConfig:t,placement:i,auctionId:s,viewerId:n,vastExceptionId:r})=>{const{pageId:o,pid:l,key:c,slotType:u,wigo:p,placementConfig:{headerBiddingProvider:g}}=i;(0,Re.K)({placementKey:c,sumologicLogger:e,wigo:p,logger:Rs,headerBiddingProvider:g,code:(0,a.isMemberOf)(bs.a)(r)?r:bs.j.Undefined,pageId:o,placementId:l,auctionId:s,viewerId:n,slotType:u,portfolioItemId:(0,d.Sg)(t,(0,h.prop)("portfolioItemId"),Et.e4),insertionId:(0,d.Sg)(t,(0,h.prop)("insertionId"),Et.e4),connectionId:(0,d.Sg)(t,(0,h.prop)("connectionId"),Et.e4)})}},7064:(e,t,i)=>{"use strict";i.d(t,{Et:()=>u,I9:()=>g,Q1:()=>h,_6:()=>p,c5:()=>m});var s=i(6300),n=i(4456),r=i(952),o=i(8036),a=i(480),l=i(6932),d=i(3336);const c=new a.Y("Format main");let h={};function u(){window.teads.instances=h={}}function p(){s.cb.fromNullable(window.teads.instances).forEach((e=>h=e))}function g(){for(let e in r.q0)if(r.q0.hasOwnProperty(e)&&h[e]&&h[e].length)for(;h&&h[e]&&h[e].length;){const t=h[e].pop();s.cb.fromNullable(t.getWigo()).forEach((e=>e.setStatus(!0,"Cleaned up"))),t.close(4)}}function m(){c.warn("teads.cleanup()"),d.AT.tryCatch((()=>{const e=(0,o.flatten)((0,o.map)([".teads-inline-style","script.teads","iframe#teadsConsensu","#teadsusersync","#teads-format-css"],(e=>(0,o.fromArrayLike)(document.querySelectorAll(e)))));(0,o.forEach)(e,l.removeElementFromDOM),g(),delete window.teadsscript,(0,n.y2)((()=>{for(const e in window.teads)window.teads.hasOwnProperty(e)&&!(0,o.includes)(["WIGO_DEBUG_KEY","FULL_LOGS"],e)&&delete window.teads[e]}),3e3)})).tapLeft((e=>c.error("Error when using cleanup()",e)))}},6768:(e,t,i)=>{"use strict";i.d(t,{c:()=>m});var s=i(480),n=i(2152);const r=e=>((e,t,i)=>Math.min(Math.max(e,0),1))(e),o=(e,t,i=1e-4)=>Math.abs(e-t)<i;class a{constructor(e){this.config=e,this.lastInViewPercent=0,this.targetScrollY=0,this.targetTop=0,this.timeoutStartedAt=null,this.animationStartedAt=null,this.animationStarted=!1,this.update=()=>{this.slotTop=this.config.slot.getBoundingClientRect().top,this.inViewPercent=this.calculatePercent(),this.updateTarget(),this.canAnimate()&&(this.animationStarted||this.startAnimation(),this.animate())}}calculatePercent(){const e=(0,n._4)(this.config.win),t=Math.abs(this.slotTop);return r((e-t)/e)}canAnimate(){if(this.animationStarted)return!0;const e=this.inViewPercent>=this.config.triggerAt&&this.inViewPercent<1,t=this.timeoutStartedAt&&Date.now()-this.timeoutStartedAt>=this.config.timeout;return e&&t}animate(){let e=r((Date.now()-this.animationStartedAt)/this.config.duration);o(e,1)&&(e=1,this.stopAnimation());const t=this.targetScrollY+e*this.targetTop;this.config.win.scrollTo({top:t,behavior:"auto"})}startAnimation(){this.animationStarted=!0,this.animationStartedAt=Date.now()}stopAnimation(){this.animationStarted=!1,this.timeoutStartedAt=null}updateTarget(){this.animationStarted||o(this.inViewPercent,this.lastInViewPercent)||(this.timeoutStartedAt=Date.now(),this.targetScrollY=this.config.win.scrollY,this.targetTop=this.slotTop),this.lastInViewPercent=this.inViewPercent}}var l=i(6932),d=i(4456),c=i(5696),h=i(6556),u=i(6300),p=i(1228);const g=e=>`${e}px`;class m{constructor(e){this.format=e,this.logger=new s.Y(`Interscroller[${Math.floor(1e3*Math.random())}]`),this.isLandscape=!1,this.onResize=()=>{const e=(0,n.CW)(this.win);this.isLandscape!==e&&(this.isLandscape=e,(0,n.En)()),this.format.responsive.resize(!0),this.setupPlayerContainer()},this.setupPlayerContainer=()=>{const e=this.format.playerContainer,t=e.querySelector(":scope > iframe");Object.assign(e.style,{left:g(-this.horizontalOffset),maxWidth:"none"}),t&&Object.assign(t.style,{maxWidth:"none"})},this.win=this.format.placement.placementConfig.parentWindow.getWindow()}static get isEnabled(){return m.enabled}enableBehavior(){this.logger.info("enableBehavior"),m.enabled=!0,this.magnet=new a({timeout:400,duration:200,triggerAt:.85,slot:this.format.playerContainer,win:this.win}),this.isLandscape=(0,n.CW)(this.win),this.startLoop(),l.addEventListener("resize",this.win,this.onResize);const e=this.format.getVpaidAd();e.subscribe(this.setupPlayerContainer,c.c.AdSizeChange),e.subscribe(this.setupPlayerContainer,c.c.AdStarted),this.setupFixedBackgroundImage(),this.setupFixedBackgroundVideo(),this.setupParentContainer(),this.setupPlayerContainer(),this.format.responsive.resize(!0),this.validateIntegration()}startLoop(){const e=()=>{window.requestAnimationFrame(e),this.isLandscapeWithVerticalAd||this.magnet.update()};e()}get isLandscapeWithVerticalAd(){const e=this.format.player.getMediafile();return e.width/e.height<.8&&(0,n.CW)(this.win)}get screenWidth(){return(0,n._O)(this.win)}get screenHeight(){return(0,n._4)(this.win)}get horizontalOffset(){return this.format.parentContainer.querySelector(":scope > div").getBoundingClientRect().left}setupFixedBackgroundImage(){const e=this.format.vpaidApi.fixedBackgroundImage;e.onLoad((()=>{e.resize=()=>{const t=e.getBaseContainer(),i=e.getFixedContainer(),s=e.getImage(),n=this.isLandscapeWithVerticalAd,r=n?0:this.screenWidth,o=n?0:this.screenHeight,a=r*(s.naturalHeight/s.naturalWidth);Object.assign(i.style,{width:g(r),height:g(o),top:"unset",bottom:g(0),left:g(0),backgroundSize:`${g(r)} ${g(a)}`,backgroundPosition:"center center"}),i.style.setProperty("background-repeat","no-repeat","important"),this.setupFixedBackgroundContainer(r,o,t)},e.resize()}))}setupFixedBackgroundVideo(){const e=this.format.vpaidApi.fixedBackgroundVideo;e.onLoad((()=>{e.resize=()=>{const t=e.getBaseContainer(),i=e.getVideo(),s=this.isLandscapeWithVerticalAd,n=s?0:this.screenWidth,r=s?0:this.screenHeight,o=n*(i.videoHeight/i.videoWidth);Object.assign(i.style,{width:g(n),height:g(o),top:"unset",bottom:g(r/2),left:g(0),transform:`translateY(${g(o/2)})`}),i.width=n,i.height=o,this.setupFixedBackgroundContainer(n,r,t)},e.resize()}))}setupFixedBackgroundContainer(e,t,i){Object.assign(i.style,{width:g(e),height:g(t),left:g(-this.horizontalOffset),maxWidth:"none"}),i.style.setProperty("-webkit-clip-path","inset(-1px 0px)","important"),i.style.setProperty("clip-path","inset(-1px 0px)","important")}setupParentContainer(){this.format.parentContainer.style.setProperty("overflow","visible")}validateIntegration(){const e=new h.cp("https://s8t.teads.tv/logs/format/http-source",10,"1342",u.cb.of(this.format.placement.pid),{getSamplingThreshold:h.EB,sendLog:h.iM,getFullContext:p.getFullContext,isHeaderBiddingTag:()=>!1}),t=t=>{this.logger.info(t),e.info(`Interscroller: validateIntegration | ${t}`)},i=t=>{this.logger.error(t),e.error(`Interscroller: validateIntegration | ${t}`)},s=(e,t)=>Math.abs(e-t)<1,n=()=>{const e=this.screenHeight,t=this.format.playerContainer.getBoundingClientRect();s(t.left,0)||i(`playerBounds.left | expected 0 | actual ${t.left}`),s(t.height,e)||i(`playerBounds.height | expected ${e} | actual ${t.height}`)},r=()=>{const e=this.screenHeight,t=this.format.parentContainer.getBoundingClientRect();t.height<e&&i(`parentBounds.height | expected ${e} | actual ${t.height}`)},o=(e,t)=>{e.onLoad((()=>{const n=this.screenWidth,r=this.screenHeight,o=e.getBaseContainer().getBoundingClientRect();s(o.left,0)||i(`${t}Bounds.left | expected 0 | actual ${o.left}`),s(o.width,n)||i(`${t}Bounds.width | expected ${n} | actual ${o.width}`),s(o.height,r)||i(`${t}Bounds.height | expected ${r} | actual ${o.height}`)}))};this.format.getVpaidAd().subscribe((()=>{d.y2((()=>{t("Impression"),this.isLandscapeWithVerticalAd?t("Skip validation because the device is in landscape"):(n(),r(),o(this.format.vpaidApi.fixedBackgroundImage,"fixedBackgroundImage"),o(this.format.vpaidApi.fixedBackgroundVideo,"fixedBackgroundVideo"))}),500)}),c.c.AdStarted)}}m.enabled=!1},2152:(e,t,i)=>{"use strict";i.d(t,{CW:()=>c,En:()=>r,_4:()=>l,_O:()=>o,iK:()=>d,y:()=>h});var s=i(1228);let n=0;function r(){n=0}function o(e){var t,i,s,n;const r=null!==(i=null===(t=e.screen)||void 0===t?void 0:t.availWidth)&&void 0!==i?i:e.innerWidth,o=null!==(n=null===(s=e.visualViewport)||void 0===s?void 0:s.width)&&void 0!==n?n:e.innerWidth;return Math.min(r,o)}function a(e){var t,i,s,n;const r=null!==(i=null===(t=e.screen)||void 0===t?void 0:t.availHeight)&&void 0!==i?i:e.innerHeight,o=null!==(n=null===(s=e.visualViewport)||void 0===s?void 0:s.height)&&void 0!==n?n:e.innerHeight;return Math.min(r,o)}function l(e){const t=a(e);return n=Math.max(n,t),n}function d(e){return{width:o(e),height:l(e)}}function c(e){return o(e)>a(e)}function h(){return!(0,s.isTablet)()&&!(0,s.isAmp)()&&!(0,s.isIABSafeFrame)()}},5351:(e,t,i)=>{"use strict";i.d(t,{C:()=>w});var s=i(6716),n=i(7404),r=i(3840),o=i(3743),a=i(4080),l=i(1228),d=i(6084),c=i(480),h=i(8248),u=i(6300),p=i(8036),g=i(6932),m=i(3720),f=i(2456),v=i(5696),A=i(2152),b=i(6768);const y=(0,l.isDesktop)()?.08:.15;class w{constructor(e){if(this.abstractFormat=e,this.isLandscape=!1,this.logger=new c.Y("Format.Responsive"),this.orientationChangeListeners=[],this.manualMaxWidth=!1,this.vpaidAd=e.getVpaidAd(),this.mainContainer=e.parentContainer,this.formatContainer=e.placement.getInnerContainer(),this.mediafile=e.player.getMediafile(),this.win=e.placement.placementConfig.parentWindow.getWindow(),this.linearAd=e.linearAd,this.portfolioItemId=e.formatConfig.portfolioItemId,this.resizeCallback=()=>{this.resize(),this.setResponsiveCssClass(this.mainContainer)},this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),v.c.AdError),this.vpaidAd.subscribe((()=>{this.unsetResponsive()}),v.c.AdStopped),(0,l.isMobile)()||(0,l.isTablet)()){const e=e=>{const t=g.getWindowSize(this.win);this.isLandscape=t.width>t.height};e(),this.addOrientationChangeListener(e),this.setResponsiveCssClass(this.mainContainer),this.addOrientationChangeListener((()=>{this.isNativeFullscreen()&&this.resize()}));const t=e=>{this.win.setTimeout((()=>{this.onOrientationChange(e)}),200)};g.addEventListener("orientationchange",this.win,t),this.vpaidAd.subscribe((()=>{g.removeEventListener("orientationchange",this.win,t)}),v.c.AdStopped)}}static findOptimalCreativeSizeBasedOnWindowSurface(e,t){const i=t.width*t.height*y,s=e.map(f.cp.getRatio).getOrValue(r.S),n=Math.sqrt(i/s);return{width:s*n,height:n}}updateAndResizeWithAdVideoMetadata(e){e.width&&e.height&&(this.mediafile.width!==e.width||this.mediafile.height!==e.height)&&(this.logger.debug("video size is different from VAST mediafile, force resize to good dimensions"),this.mediafile.width=e.width,this.mediafile.height=e.height,this.resize(!0))}resizeOnStart(){this.vpaidAd.subscribe((e=>{this.logger.debug("Receive metadata from video",e),this.updateAndResizeWithAdVideoMetadata(e)}),m.c.AdVideoMetadata),this.vpaidAd.subscribe((()=>this.resize(!0)),v.c.AdVideoStart),this.vpaidAd.subscribe((()=>this.resize(!0)),v.c.AdStarted)}setResponsive(e=this.resizeCallback){!this.iframeForSlotWidth&&(this.iframeForSlotWidth=document.createElement("iframe"),this.iframeForSlotWidth.className="teads-resize",this.iframeForSlotWidth.setAttribute("title","teads-resize"),this.iframeForSlotWidth.style.setProperty("height","0","important"),this.iframeForSlotWidth.style.setProperty("min-height","0","important"),this.iframeForSlotWidth.style.setProperty("width","100%","important"),this.iframeForSlotWidth.style.setProperty("border","none","important"),this.iframeForSlotWidth.style.setProperty("margin","0","important"),this.iframeForSlotWidth.style.setProperty("padding","0","important"),this.iframeForSlotWidth.style.setProperty("display","block","important"),(0,a.O0)(this.portfolioItemId))&&(this.logger.debug("Third party display detected, adding iframe for height detection"),this.iframeForCreativeHeight=(0,n.createIframe)("teads-resize"),this.iframeForCreativeHeight.className="teads-resize-for-height",this.iframeForCreativeHeight.style.setProperty("position","absolute","important"),this.iframeForCreativeHeight.style.setProperty("top","0","important"),this.iframeForCreativeHeight.style.setProperty("bottom","0","important"),this.iframeForCreativeHeight.style.setProperty("left","0","important"),this.iframeForCreativeHeight.style.setProperty("right","0","important"),this.iframeForCreativeHeight.style.setProperty("background-color","transparent","important"),this.iframeForCreativeHeight.style.setProperty("z-index","-1","important"),this.iframeForCreativeHeight.style.setProperty("opacity","0","important"),this.iframeForCreativeHeight.style.setProperty("height","100%","important"),this.iframeForCreativeHeight.style.setProperty("width","100%","important"),this.iframeForCreativeHeight.style.setProperty("border","none","important"),this.iframeForCreativeHeight.style.setProperty("margin","0","important"),this.iframeForCreativeHeight.style.setProperty("padding","0","important"),this.iframeForCreativeHeight.style.setProperty("display","block","important"),this.abstractFormat.placement.getPlayerContainer().appendChild(this.iframeForCreativeHeight),g.addEventListener("resize",this.iframeForCreativeHeight.contentWindow,(()=>e()))),this.abstractFormat.placement.getElectedSlot().getElement().appendChild(this.iframeForSlotWidth),g.addEventListener("resize",this.iframeForSlotWidth.contentWindow,(()=>e())),e()}unsetResponsive(){return!(!this.iframeForSlotWidth||!this.iframeForSlotWidth.parentNode||(g.removeEventListener("resize",this.iframeForSlotWidth.contentWindow,this.resizeCallback),this.iframeForSlotWidth.parentNode.removeChild(this.iframeForSlotWidth),0))}addOrientationChangeListener(e){p.indexOf(this.orientationChangeListeners,e)<0&&this.orientationChangeListeners.push(e)}getOptimalDimension(e=this.mainContainer){if(b.c.isEnabled)return(0,A.iK)(this.win);const t=!!this.abstractFormat.vpaidApi.getStudioData(),i={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()},n=g.getWindowSize(this.win),r=this.getContainerWidth(e),o=p.includes([25],this.portfolioItemId),a=t||o,l=f.cp.getOptimalHeight(this.mediafile,r,a);return((e,t,i,s,n,r)=>{const o=e.orElse((()=>((e,t,i)=>{if(!t||e<=t)return u.MB;const s=t/e;return(0,u.sx)({width:s*i,height:t})})(i,s.height,n))).orElse((()=>((e,t,i,s,n)=>u.cb.fromNullable(s).filter((t=>t.width!==i||t.height!==e)).map((s=>({width:i,height:n?t.height:e}))))(i,s,n,t,r))).getOrValue(t);return Object.assign(Object.assign({},o),{width:Math.round(o.width),height:Math.round(o.height)})})(u.cb.fromNullable(this.abstractFormat.formatConfig).flatMap((0,s.cp)((0,d.prop)("creativeSize"),u.cb.fromNullable)),i,l,n,r,this.isFullscreen())}getOptimalDimensionBasedOnSurface(){const e=g.getWindowSize(this.win),t=w.findOptimalCreativeSizeBasedOnWindowSurface(u.cb.fromNullable(this.mediafile),e),i={width:this.vpaidAd.getAdWidth(),height:this.vpaidAd.getAdHeight()};return i.width===t.width&&i.height===t.height||(i.width=t.width,i.height=this.isFullscreen()?e.height:t.height),{width:Math.round(i.width),height:Math.round(i.height)}}resize(e=!1,t=this.mainContainer){const i=this.vpaidAd.getAdWidth(),s=this.vpaidAd.getAdHeight();this.setMaxWidth(t);const n=this.getOptimalDimension(t);if(p.includes([37,39],this.portfolioItemId)&&this.handleMaxHeight(t,this.formatContainer,n),this.isNativeFullscreen()||this.isFullscreen()&&e){const t=g.getWindowSize(this.win);s===t.height&&i===t.width||(this.logger.debug(`fullscreen resize from ${i}x${s} to ${t.width}x${t.height}  (forced: ${e})`),this.vpaidAd.resizeAd(t.width,t.height,"fullscreen"))}else(e||s!==n.height||i!==n.width)&&(this.repositionFormatContainer(n,t),this.logger.debug(`resize from ${i}x${s} to ${n.width}x${n.height} (forced: ${e})`),this.vpaidAd.resizeAd(n.width,n.height,this.isFullscreen()?"fullscreen":"normal"))}repositionFormatContainer(e,t=this.mainContainer){const i=this.getContainerWidth(t),s=e.width>=i?0:(i-e.width)/2;this.formatContainer.style.marginLeft=`${s}px`,this.formatContainer.style.marginRight=`${s}px`}isFullscreen(){return(0,n.hasClass)(this.vpaidAd.getMainComponentsContainer(),"fullscreen")}isNativeFullscreen(){return(0,n.isFullscreen)(this.win.document)}handleMaxHeight(e,t,i){const s=g.getBoundingClientRect(t).height;if(this.isFullscreen())e.style.setProperty("max-height","none");else{const t=s>=i.width?i.height:s;this.logger.debug(`Celtra miniscroller detected, setting max-height property on teads-inread to ${t}px`),e.style.setProperty("max-height",Math.round(t)+"px"),e.style.setProperty("clip-path","inset(0)")}}getContainerWidth(e=this.mainContainer){if(this.isFullscreen())return g.getWindowSize(this.win).width;{const t=this.win.getComputedStyle(e),i=t.getPropertyValue("width");if((0,d.isSizeInPx)(i))return Math.round(parseFloat(i));{const i=parseFloat(t.getPropertyValue("padding-left"))||0,s=parseFloat(t.getPropertyValue("padding-right"))||0;return Math.round(g.getBoundingClientRect(e).width-(i+s))}}}onOrientationChange(e){p.forEach(this.orientationChangeListeners,(t=>{t(e)}))}setMaxWidth(e=this.mainContainer){var t;if(this.isFullscreen())e.style.setProperty("max-width","none");else if(!e.style.getPropertyValue("max-width")||this.manualMaxWidth){const i=g.getBoundingClientRect(e),s=g.getBoundingClientRect(null===(t=this.iframeForSlotWidth)||void 0===t?void 0:t.parentElement);e.style.setProperty("max-width",Math.round(s.width-Math.max(i.left-s.left,i.right-s.right))+"px"),this.manualMaxWidth=!0}}setResponsiveCssClass(e){const t=g.getBoundingClientRect(e).width;let i;(0,o.Ar)(((s,r)=>{var o,a;(0,n.removeClass)(e,r.className),t<=r.size&&(o=i,a=r.size,!o||o.size>a)&&(i=r)}))(h.kL),i&&(0,n.addClass)(e,i.className)}}},3215:(e,t,i)=>{"use strict";i.d(t,{YN:()=>h,wV:()=>c});var s=i(6300),n=i(8036),r=i(480),o=i(5880),a=i(8248);const l=new r.Y("SameAd"),d={playedMediaFileUIDs:[]};function c(e,t){d.playedMediaFileUIDs=d.playedMediaFileUIDs.concat({tagManager:e,uid:p(t)})}function h(e,t){return(0,o.uC)(e,t).match({some:u,none:()=>(l.warn("Could not find a matching TagManagerResources for this TagManager",e),!1)})}function u({tagIsCampaignTag:e,vastPlayer:t,tagManager:i}){const r=(0,n.map)((0,n.filter)(d.playedMediaFileUIDs,(o=i,e=>e.tagManager!==o&&o.pageId===e.tagManager.pageId)),(e=>e.uid));var o;return t.flatMap((e=>{var t;return s.cb.fromNullable(null===(t=e.getLinearAd())||void 0===t?void 0:t.mediaFiles)})).match({some:t=>!e&&(0,n.some)(t,(e=>function(e,t){return(0,n.some)(t,(t=>t===p(e)))}(e,r))),none:()=>(l.debug("No player, or if any, no elected media file was found for this TagManager",i),!1)})}function p(e){var t;return function(e){var t,i;return null!==(i=null===(t=e.match(a.aK))||void 0===t?void 0:t[1])&&void 0!==i?i:e}(e.url)+(null!==(t=e.adParameters)&&void 0!==t?t:"")}},8544:(e,t,i)=>{"use strict";var s=i(5880),n=i(3215),r=i(7064);const o=window.teads||{};o.instances=o.instances||r.Q1,o.tagManagerResourcesList=s.uK,o.clearInstances=r.I9,o.destroyPageRelatedVariables=r.Et,o.loadAd=s.Yd,o.isNoAd=s.IN,o.isSameAd=n.YN,o.cleanup=r.c5;const a=window.teads||{};a.helper=a.helper||{},window.teads=a,(0,r._6)()},188:(e,t,i)=>{"use strict";i.d(t,{c:()=>r});var s=i(3804),n=i(2488);class r extends s.c{constructor(e=r.DEFAULT){super("VideoStart"),this.value=e,this.checkValue()}checkValue(){(0,n.ct)(this.value)&&r.VALUES[this.value.toUpperCase()]||(this.value=r.DEFAULT)}isThreshold(){return this.value===r.VALUES.THRESHOLD}isClick(){return this.value===r.VALUES.CLICK}getValue(){return this.value}}r.VALUES={THRESHOLD:"threshold",CLICK:"click"},r.DEFAULT=r.VALUES.THRESHOLD},1476:(e,t,i)=>{"use strict";i.d(t,{E:()=>n});var s=i(6300);const n=new class{constructor(e={}){this.protocol="https:",this.basePathUrl=`${this.protocol}//a.teads.tv/media/format/v3`,this.assetsUrl=`${this.basePathUrl}/assets`,this.richAdServerUrl=`${this.protocol}//a.teads.tv/page/{id}/ad`,this.buyingEngineUrl=`${this.protocol}//a.teads.tv/vast/get`,this.trackingUrl=`${this.protocol}//t.teads.tv/track`,this.userSyncUrl=`${this.protocol}//sync.teads.tv/iframe`,this.wigoIframeUrl=`${this.protocol}//sync.teads.tv/wigo-no-slot`,this.consensuIframeUrl=`${this.protocol}//cmp.teads.mgr.consensu.org/index.html`,this.isSumologicLogsEnabled=!0,this.isRichAdServerRequestEnabled=!0,this.isQA=!1,this.richAdServerRequestTimeout=5e3,this.timestampMacroNames=["[RANDOM]","[RANDOMNUM]","[TIMESTAMP]","[CACHE_BREAKER]","[CACHEBREAKER]","[CACHEBUSTING]","[CACHE_BUSTING]","[CACHEBUSTER]","[CACHE_BUSTER]"],this.refresh(e)}refresh(e={}){s.cb.fromNullable(e.ASSETS_URL).forEach((e=>{this.basePathUrl=e,this.assetsUrl=`${e}/assets`})),s.cb.fromNullable(e.RAS_URL).forEach((e=>this.richAdServerUrl=e)),s.cb.fromNullable(e.BE_URL).forEach((e=>this.buyingEngineUrl=e)),s.cb.fromNullable(e.TRACKING_URL).forEach((e=>this.trackingUrl=e)),s.cb.fromNullable(e.USER_SYNC_URL).forEach((e=>this.userSyncUrl=e)),s.cb.fromNullable(e.WIGO_IFRAME_URL).forEach((e=>this.wigoIframeUrl=e)),s.cb.fromNullable(e.SUMOLOGIC_ENABLED).forEach((e=>this.isSumologicLogsEnabled=e)),s.cb.fromNullable(e.WITH_RAS_REQUEST).forEach((e=>this.isRichAdServerRequestEnabled=e)),s.cb.fromNullable(e.IS_QA).forEach((e=>this.isQA=e)),s.cb.fromNullable(e.TEADS_CONSENSU_URL).forEach((e=>this.consensuIframeUrl=e))}}(window.teads)},952:(e,t,i)=>{"use strict";i.d(t,{Gs:()=>r,WA:()=>l,cA:()=>d,e2:()=>o,m4:()=>a,q0:()=>n});var s=i(2488);const n={inread:"inread"},r={limitedCapabilities:"limitedCapabilities",placementCall:"placementCall",fallback:{integration:"passback-integration",noAd:"passback-noAd"},noSlot:{selector:"noSlot-selector",hbSelector:"hbNoSlot-selector",filter:"noSlot-filter",avoid:"noSlot-avoid",size:"noSlot-size",btf:"noSlot-BTF",minimum:"noSlot-minimum",minimumBelow:"noSlot-minimumBelow",content:"noSlot-content",position:"noSlot-position",videoArticle:"noSlot-videoArticle",videoSlot:"noSlot-videoSlot",imageSlot:"noSlot-imageSlot",safeFrame:"noSlot-safeFrame"},incompatibility:{browser:"incompatibility-browser",context:"incompatibility-context",format:"incompatibility-format",video:"incompatibility-video"},slotAvailable:"slotAvailable",hbSlotAvailable:"hbSlotAvailable",adReceived:"adReceived",adNotAvailable:{networkError:"adNotAvailable-networkError",serverError:"adNotAvailable-serverError"},adAvailable:{error:{parseTimeout:"adAvailable-error-parseTimeout",badResponse:"adAvailable-error-badResponse",vast:"adAvailable-error-vast-{code}",settings:"adAvailable-error-settings",sameAd:"adAvailable-error-sameAd"},success:"adAvailable-success"},adCall:"adCall",errorBeforeAdReached:"errorBeforeAdReached",adReached:"adReached",noAd:{serverError:"noAd-serverError",networkError:"noAd-networkError",vastError:"noAd-vastError-{code}",parseTimeout:"noAd-parseTimeout",settingsError:"noAd-settingsError",badResponse:"noAd-badResponse",sameAd:"noAd-sameAd",ivt:{doubleVerify:"noAd-ivt-doubleVerify",tag:"noAd-ivt-tag"},blockedSite:{doubleVerify:"noAd-blockedSite-doubleVerify",teads:"noAd-blockedSite-teads"}},impression:"impression",openExpand:"open-expand",open:"open",visible:"visible",click:"click",clickReplay:"click-replay",ivt:{doubleVerify:"IVT DoubleVerify",tag:"IVT Tag"},blockedSite:{doubleVerify:"BlockedSite DoubleVerify",teads:"Teads Blacklist"},warning:"warning"},o={placementCall:"f11",noSlot:"f21",incompatibility:"f22",slotAvailable:"f24",adReceived:"f30",adNotAvailable:"f31","adAvailable-error":"f32","adAvailable-success":"f33",adCall:"f41",errorBeforeAdReached:"f42",adReached:"f43",noAd:"f51"},a=(0,s.Wm)(document.currentScript),l=null===a?"https://a.teads.tv/media/flavors/nativeClassic.js":`https://a.teads.tv/static/${a}/media/flavors/nativeClassic.js`,d="teads_internal_passback_no_passback"},2912:()=>{const e=window.teads||{};e.vastDomains=[],e.gdprPayload={},window.teads=e},9516:(e,t,i)=>{"use strict";i.d(t,{GO:()=>P,Yn:()=>R,Yp:()=>E,_6:()=>y,__:()=>M,eU:()=>C,iE:()=>w,kD:()=>k,kT:()=>S,mc:()=>T});var s=i(480),n=i(1228),r=i(8036),o=i(1040),a=i(6084),l=i(2488),d=i(6300);const c=4/3;let h,u,p,g,m,f,v=[];const A=new s.Y("helper.Amp");let b={noContentAvailable:!1,renderStart:!1,reportRenderedEntityIdentifier:!1};function y(){!n.isAmp()||!x()||m&&h&&window._teads_amp.change.rootBounds.width===m.width||(m=x().rootBounds,u=n.isDesktop()?window.innerWidth:Math.min(Math.min(m.width,m.height),window.innerWidth),u!==window.innerWidth&&(u-=2*window.context.initialIntersection.boundingClientRect.left),h||(window.context.onResizeDenied(((e,t)=>O(e,t,!1))),window.context.onResizeSuccess(((e,t)=>O(e,t,!0))),x().boundingClientRect.height>10&&(E(),o.c.error("AMP tag malformed "+window.context.location.href)),h=!0),2!==g&&2!==p||C())}function w(e=(()=>{}),t=!1){p=0,h&&L(0,e,p,t)}function E(e=(()=>{}),t=!1){p=1,h&&L(1,e,p,t)}function C(e=null,t=(()=>{}),i=!1){p=2,h&&L(e||I(),t,p,i)}function I(){return Math.ceil(u/c)}function S(){return 2===g}function T(e){let t="teads-";e?(t+=e.id?e.id:"0",t+="-",t+=e.creativeId?e.creativeId:"0"):t+="0",f=t}function k(){if(window.context&&(0,a.isFunction)(window.context.renderStart)&&!b.renderStart){b.renderStart=!0;let e={height:I(),width:u};A.debug("renderStart",e),window.context.renderStart(e)}}function P(){if(f&&window.context&&(0,a.isFunction)(window.context.reportRenderedEntityIdentifier)&&!b.reportRenderedEntityIdentifier){b.reportRenderedEntityIdentifier=!0;let e=`teads-${f}`;A.debug("reportRenderedEntityIdentifier",e),window.context.reportRenderedEntityIdentifier(e)}}function x(){return window._teads_amp.change&&window.context.initialIntersection?window._teads_amp.change:null}function L(e,t,i,s){!function(e,t){n.isAmp()&&window.context.requestResize&&h&&(v.push({width:u,height:e,done:!1,callback:t}),window.context.requestResize(u,e),A.warn("amp request resize",u,e))}(e,(n=>{let r="function"==typeof s?s():s;n||r?(p=null,g=n?i:null,t(n),S()&&P()):p===i&&setTimeout((()=>L(e,t,i,r)),100)}))}function _(e,t,i){return e>=t-i&&e<=t+i}function O(e,t,i){r.forEach(v,(s=>{_(e,s.height,2)&&_(t,s.width,2)&&!s.done&&(s.done=!0,s.callback(i))})),i?A.warn("amp request resize success",t,e):A.error("amp request resize denied",t,e)}const V=e=>(0,l.Y9)(e)&&function(e){return"accepted"===e.consentStateValue||"rejected"===e.consentStateValue}(e)&&(0,l.ct)(e.consentString)?(0,d.sx)(e.consentString):d.MB,R=()=>{var e;return d.cb.fromNullable(null===(e=window.context)||void 0===e?void 0:e.initialConsentValue).orElse((()=>{var e;return V(null===(e=window.context)||void 0===e?void 0:e.consentSharedData)})).map((e=>{var t,i;return{status:12,reason:127,consent:e,apiVersion:d.cb.fromNullable(null===(i=null===(t=window.context)||void 0===t?void 0:t.initialConsentMetadata)||void 0===i?void 0:i.consentStringType).flatMap((e=>2===e?(0,d.sx)(2):1===e?(0,d.sx)(1):d.MB)),cmpId:d.MB}})).getOrValue({status:25,reason:250,consent:"",apiVersion:d.MB,cmpId:d.MB})},D=e=>{var t;return 3===(null===(t=e.initialConsentMetadata)||void 0===t?void 0:t.consentStringType)},N=e=>/^[1-9][YN-]{3}$/.test(e),M=e=>{const t=e.flatMap((e=>d.cb.fromNullable(e.initialConsentValue))).orElse((()=>e.flatMap((e=>V(e.consentSharedData)))));return e.filter(D).flatMap((()=>t)).orElse((()=>t.filter(N)))}},7236:(e,t,i)=>{"use strict";i.d(t,{k:()=>r,q:()=>o});var s=i(6300);const n=120;function r(e){return s.cb.fromNullable(e.message).getOrElse((()=>JSON.stringify(e))).substr(0,n)}function o(e){return s.cb.fromNullable(e.getFullMessage()).getOrElse((()=>JSON.stringify(e))).substr(0,n)}},6568:(e,t,i)=>{"use strict";i.d(t,{AT:()=>g,G0:()=>f,Ht:()=>n,UV:()=>m,a4:()=>p,ii:()=>s,wB:()=>v});var s,n,r=i(2488),o=i(7404),a=i(480),l=i(6084);!function(e){e.Global="global",e.PostMessage="post-message"}(s||(s={})),function(e){e.ExcludeWithGlobale="exclude-with-globale-before-RAS",e.ExcludeWithPostMessage="exclude-with-post-message-before-RAS",e.PostMessageAfterRAS="post-message-received-after-RAS",e.ExcludeAfterRAS="exclude-after-RAS"}(n||(n={}));const d=new a.Y("helper.ExclusivityPixelInfo");let c=[],h=null,u=!1;const p=()=>{const e=(0,o.findTopWindow)(document.body);try{c=e.teads.exclusivity.badv.domains,h=s.Global}catch(e){d.debug("cant access to globale teads.exclusivity.badv.domains and get the error: ",e),new Promise(((e,t)=>{const i=t=>{var s,n;try{const o=null!==(s=JSON.parse(t.data))&&void 0!==s?s:null;n=o,(0,r.Y9)(n)&&(0,l.hasOwnProperty)(n,"exclusivity")?(e(o.exclusivity.badv.domains),window.removeEventListener("message",i)):d.debug("not a valid ExclusivityPixelInfo message: ",t)}catch(e){d.debug("error - cant parse ExclusivityPixelInfo message: ",e)}};window.addEventListener("message",i);try{window.top.postMessage("teads-get-exclusivity-pixel-info","*")}catch(e){window.removeEventListener("message",i),t(e)}})).then((e=>{c=e,h=s.PostMessage}))}},g=()=>c,m=()=>h,f=e=>{u=e},v=()=>u},708:(e,t,i)=>{"use strict";i.d(t,{IL:()=>d,Sw:()=>w,Yp:()=>I,_6:()=>y,eU:()=>C,oV:()=>E});var s=i(480),n=i(4092),r=i(1228),o=i(2488),a=i(8036),l=i(1040);let d,c=0;const h=new s.Y("helper.IABSafeFrame");let u,p=[];const g=[],m=[],f=[];let v,A,b;function y(){let e=(0,r.isIABSafeFrame)()?(b=(0,r.getIABSafeFrameWindow)(),(0,o.Y3)(b)?"IABSafeFrame window not found":b.$sf.ext.geom?(d=b.$sf.ext.geom())?b.$sf.ext.supports?void 0:"window.$sf.ext.supports not present":"window.$sf.ext.geom() return falsy value":"window.$sf.ext.geom not present"):"not in IABSafeFrame context";if(e)return h.error("init","failed",e),l.c.error("SF "+e),e;v=new n.C;const t=d.self.w;return b.$sf.ext.register(t||b.innerWidth,1,((e,t)=>function(e,t){switch(h.debug("event received",e,t),e){case"expanded":case"collapsed":case"failed":u&&u.callback&&u.callback(e),u=null,S();break;case"geom-update":"focus-update"===(null==t?void 0:t.cmd)?(0,a.forEach)(m,(e=>e(t))):(0,a.forEach)(g,(e=>e(t)));break;case"focus-change":(0,a.forEach)(m,(e=>e(t)));break;case"cmpReturn":(0,a.forEach)(f,(e=>e(t)))}}(e,t))),h.debug("init - register (width-innerWidth-geom)",t,b.innerWidth,d),w((()=>d=b.$sf.ext.geom())),e}function w(e){const t=g.push(e);return()=>g[t-1]=()=>{}}function E(e=(()=>{})){h.debug("initSlot"),0===b.innerWidth?(h.debug("initSlot - window.innerWidth=0 so wait for resize"),k(e)):1===d.self.w&&1===d.self.h?function(e){if(b.$sf.ext.supports()["exp-push"]){h.debug("initSlot - 1x1 detected - need to wait to get the slot width available");const t=()=>{h.debug("initSlot - 1x1 detected - expand available - get width"),S({name:"initial expand",action:()=>b.$sf.ext.expand({r:d.exp.r,push:!0}),callback:t=>{const i="expanded"===t;c=i?1:0,i?(A=d.exp.r,h.debug("initSlot - 1x1 detected - initial expand done - width",A),e()):(h.error("initSlot - 1x1 detected - initial expand refused"),k(e))}})};if(d.exp.r)t();else{const e=w((()=>{d.exp.r&&(e(),t())}))}}else h.error("initSlot - 1x1 detected - but exp-push not supported"),k(e)}(e):e()}function C(e,t=(()=>{})){let i=e=>S({name:"open "+e,action:()=>b.$sf.ext.expand({b:e,r:A,push:!0}),callback:e=>{let i="expanded"===e;c=i?2:0,t(i)}}),s=d.self.h,n=e-s;2!==c&&n>0?b.$sf.ext.supports()["exp-push"]?n<=d.exp.b?(h.debug("open (askedHeight - currentHeight - allowed - requiredHeight)",e,s,d.exp.b,n),1===c?(h.debug("open - slot already open by init - close it before"),I((()=>{let e=Math.min(Math.floor(b.$sf.ext.geom().exp.b),n);i(e)}))):i(n)):(h.debug("open not allowed (askedHeight - currentHeight - allowed - requiredHeight)",e,s,d.exp.b,n),t(!1)):(h.error("open failed - exp-push not supported"),k((()=>t(!0))),t(!1)):(h.debug("already open (askedHeight - currentHeight - requiredHeight)",e,s,n),t(!0))}function I(e=(()=>{})){0!==c?(h.debug("close"),S({name:"close",action:()=>b.$sf.ext.collapse(),callback:()=>e(!0)}),c=0):e(!0)}function S(e){e&&(h.debug("processRequest add to list",e.name),p.push(e)),!u&&p.length&&(u=p.shift(),h.debug("processRequest - process",u.name),u.action())}function T(e,t){return e>=10&&t>=10}function k(e){h.debug("wait for auto expand");const t=e=>(0,a.forEach)(e,(e=>e())),i=(t,i)=>{h.debug(`slot has auto expanded with w: ${t}, h: ${i}`),c=2,e()};if(T(window.innerWidth,window.innerHeight))i(window.innerWidth,window.innerHeight);else{const e=w((()=>{T(d.self.w,d.self.h)&&(t([e,s]),i(d.self.w,d.self.h))})),s=()=>v.remove("resize");v.add("resize",b,(()=>{T(window.innerWidth,window.innerHeight)&&(t([e,s]),i(window.innerWidth,window.innerHeight))}))}}},1776:(e,t,i)=>{"use strict";i.d(t,{K:()=>a,c:()=>l});var s=i(6300),n=i(1228),r=i(708),o=i(4092);const a=(e,t,i)=>{const a={eventListenerManager:s.MB,unlistenAmp:s.MB};return(0,n.isIABSafeFrame)()?r.Sw((()=>e(new Event("touchmove")))):(0,n.isAmp)()?a.unlistenAmp=s.cb.fromNullable(i.observeIntersection((t=>e(new Event("touchmove"))))):(a.eventListenerManager=s.cb.fromNullable(new o.C),a.eventListenerManager.forEach((i=>i.add("scroll",t,(t=>e(t))))),a.eventListenerManager.forEach((i=>i.addMultiple(["touchstart","touchmove","touchend"],t,(t=>e(t)))))),a},l=e=>{e.unlistenAmp.forEach((e=>e())),e.eventListenerManager.forEach((e=>e.removeAll()))}},9632:(e,t,i)=>{"use strict";i.d(t,{I:()=>p,o:()=>g});var s=i(3588),n=i(8036),r=i(6932),o=i(480),a=i(7404),l=i(1476),d=i(3336);const c=new o.Y("helper.WigoIframe"),h="wigoiframe";let u;function p(){return d.AT.tryCatch((()=>(0,a.findTopWindow)(window.document.body))).orElse((e=>(c.warn("Cannot get top window",e),(0,d.Qz)(window)))).forEach((e=>{u=(0,a.createIframe)("wigo-helper"),u.id=h,u.src=l.E.wigoIframeUrl,u.style.setProperty("display","none","important"),e.document.body.appendChild(u)})),u}function g(){const e=s.kZ.getInstances();e.sort(((e,t)=>r.getBoundingClientRect(e.elementToFollow).top-r.getBoundingClientRect(t.elementToFollow).top));let t=e.length;n.forEach(e,(e=>{e.moveButton(t),t--}))}},3804:(e,t,i)=>{"use strict";i.d(t,{c:()=>r});var s=i(480),n=i(6420);class r{constructor(e){if(this.logger=new s.Y("option."+e),!e)throw new n.C(n.C.OPTION_NAME_REQUIRED)}}},2447:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>AbstractSelector});var funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3804),common_ArrayHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8036);class AbstractSelector extends funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__.c{constructor(e){super(e),this.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"}}checkScreenSelector(screen,win){var selectedScreenSelector=null,currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return common_ArrayHelper__WEBPACK_IMPORTED_MODULE_1__.forEach(screen.split("+"),(screenSelector=>{if(this.screenSizes[screenSelector])try{var screenSelectorPattern=this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,""+currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(e){this.logger.warn("screenSelector eval has failed")}})),selectedScreenSelector}}},9175:(e,t,i)=>{"use strict";i.d(t,{c:()=>r});var s=i(3804),n=i(2488);class r extends s.c{constructor(e=r.DEFAULT){super("ImageFilter"),this.value=e,this.checkValue()}checkValue(){(0,n.ct)(this.value)||(this.value=r.DEFAULT)}get(){return this.value}}r.VALUES={DISABLED:"disabled",SLOT:"slot"},r.DEFAULT=r.VALUES.DISABLED},4372:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>Selector});var funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3804),common_FormatException__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6420),common_Context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1228),common_Dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6932),common_ArrayHelper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8036),common_HTMLHelper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7404),_teads_shared__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2488),funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(156);class Selector extends funnel_option_AbstractOption__WEBPACK_IMPORTED_MODULE_0__.c{constructor(e,t){if(super("Selector"),this.value=e,this.win=t,this.default=null,this.screenSizes={mobile:"[WIDTH]<768",tablet:"[WIDTH]>=768 && [WIDTH]<992",desktop:"[WIDTH]>=992 && [WIDTH]<1200",large:"[WIDTH]>=1200"},!t)throw new common_FormatException__WEBPACK_IMPORTED_MODULE_1__.C(common_FormatException__WEBPACK_IMPORTED_MODULE_1__.C.OPTION_PARENTWINDOW_INVALID);this.checkValue()}checkValue(){(0,_teads_shared__WEBPACK_IMPORTED_MODULE_6__.ct)(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isNodeList(this.value)||common_Dom__WEBPACK_IMPORTED_MODULE_3__.isISlotSelector(this.value,this.screenSizes)||(this.value=this.default)}get(){return this.value}getSlots(){const e=[];let t=this.value;if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isISlotSelector(this.value,this.screenSizes)){let e;for(const i in this.value)if(this.value.hasOwnProperty(i)&&(e=this.checkScreenSelector(i,this.win),e)){t=this.value[i];break}e?this.logger.debug("Slot",e,"selected:",t):this.logger.warn("Slots by device not found: ",this.value)}if((0,_teads_shared__WEBPACK_IMPORTED_MODULE_6__.ct)(t)&&t){let i=[];const s=common_HTMLHelper__WEBPACK_IMPORTED_MODULE_5__.findAllWindows(document.body);common_ArrayHelper__WEBPACK_IMPORTED_MODULE_4__.forEach(s,(e=>{(0,_teads_shared__WEBPACK_IMPORTED_MODULE_6__.ct)(t)&&(i=i.concat(common_Dom__WEBPACK_IMPORTED_MODULE_3__.querySelectorAll(t,e)))}));for(let t=0;t<i.length;t++)e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.c(i[t],t))}else if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isHTMLElement(t))e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.c(t));else if(common_Dom__WEBPACK_IMPORTED_MODULE_3__.isNodeList(t))for(let i=0;i<t.length;i++)e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.c(t[i],i));return e.length||!(0,common_Context__WEBPACK_IMPORTED_MODULE_2__.isAmp)()&&!(0,common_Context__WEBPACK_IMPORTED_MODULE_2__.isIABSafeFrame)()||e.push(new funnel_placement_Slot__WEBPACK_IMPORTED_MODULE_7__.c(this.win.document.body)),e}checkScreenSelector(screen,win){let selectedScreenSelector=null;const currentWidth=Math.max(win.document.documentElement.clientWidth,win.innerWidth||0);return common_ArrayHelper__WEBPACK_IMPORTED_MODULE_4__.forEach(screen.split("+"),(screenSelector=>{if(this.screenSizes[screenSelector])try{const screenSelectorPattern=this.screenSizes[screenSelector].replace(/\[WIDTH\]/g,currentWidth);if(eval(screenSelectorPattern))return void(selectedScreenSelector=screenSelector)}catch(e){this.logger.warn("screenSelector eval has failed")}})),selectedScreenSelector}}},3008:(e,t,i)=>{"use strict";i.d(t,{c:()=>r});var s=i(3804),n=i(2488);class r extends s.c{constructor(e=r.DEFAULT){super("VideoFilter"),this.value=e,this.checkValue()}checkValue(){(0,n.ct)(this.value)||(this.value=r.DEFAULT)}get(){return this.value}}r.VALUES={DISABLED:"disabled",ARTICLE:"article",SLOT:"slot"},r.DEFAULT=r.VALUES.DISABLED},156:(e,t,i)=>{"use strict";i.d(t,{c:()=>o});var s=i(6932),n=i(3840),r=i(6464);class o{constructor(e,t=0){this.isSizeResolved=!1,this.scoreValues={WIDTH:20,HEIGTH:20,LENGTH:20,HIGH_MIN_SLOT:-5,LOW_MIN_SLOT:500,EQUAL_MIN_SLOT:1e3},this.element=e,this.index=t;const i=s.getSize(e);this.width=i.width,this.height=i.height}resolveSize(){if(!this.isSizeResolved){let e=this.element.style.overflow;this.element.style.setProperty("overflow","hidden");const t=s.getSize(this.element);this.element.style.setProperty("overflow",e),this.width=t.width,this.height=t.width/n.S,this.isSizeResolved=!0}}getElement(){return this.element}getElementRect(){return this.elementRect||(this.elementRect=s.getBoundingClientRect(this.element)),this.elementRect}getWidth(){return this.width}getHeight(){return this.height}getScore(){return this.score}getIndex(){return this.index}computeScore(e){let t=r.Un,i=0,n=e.minimum.get(),o=e.parentWindow.getWindow();this.width>e.minimumWidth.get()+t.WIDTH_MARGIN&&(i+=this.scoreValues.WIDTH),this.height>t.MIN_LONG_HEIGHT+t.HEIGHT_MARGIN&&(i+=this.scoreValues.HEIGTH),this.height>e.minimumTextLength.get()+t.LENGTH_MARGIN&&(i+=this.scoreValues.LENGTH),this.index>n+t.LENGTH_MARGIN?i+=this.scoreValues.EQUAL_MIN_SLOT:this.index>=0&&n?i+=this.scoreValues.HIGH_MIN_SLOT:i+=this.scoreValues.LOW_MIN_SLOT;let a=s.getBoundingClientRect(this.getElement()),l=o.document.body||o.document.documentElement;i-=(a.top+(o.pageYOffset||l.scrollTop))/20,this.score=i}}},6464:(e,t,i)=>{"use strict";i.d(t,{So:()=>z,m_:()=>j,Un:()=>$,CU:()=>Q});var s=i(8036),n=i(6932),r=i(2495),o=i(3336),a=i(480),l=i(952);class d{constructor(e){this.win=e,this.logger=new a.Y("helper.SmartSlot")}static findArticle(e,t,i,s){i.length=0,i.currentScore=0,i.childrenScore=0,i.isOverMinimumWidth=!1;const r=e.innerText||e.textContent||e.nodeValue,o=e.nodeName.toUpperCase();if(r&&(3===e.nodeType||d.textNodes[o]))i.length=r.replace(/\s+/g," ").length;else if(e===t.document.body||1===e.nodeType&&d.nodeScores[o]){let s=0,r=0;for(let o=0,a=e.childNodes.length;o<a;o++){const a=d.findArticle(e.childNodes[o],t,i);s+=a.length,r+=a.currentScore,(a.isOverMinimumWidth||n.getSize(e).width>=d.MINIMUM_WIDTH)&&(i.isOverMinimumWidth=!0)}i.currentScore=s,i.childrenScore=r}if(i.childrenScore&&i.isOverMinimumWidth&&i.childrenScore>d.MINIMUM_CHARS){const t=d.nodeScores[o]||0,n=e.className.split(" ");let r,a=1;for(let e=0,t=n.length;e<t;e++)r=n[e].replace(/^\s+|\s+$/g,""),a+=d.classBonuses[r]||0;let l=1;for(let t in d.attributeBonuses)if(d.attributeBonuses.hasOwnProperty(t)){const i=d.attributeBonuses[t],s=void 0===i.value&&void 0!==e.getAttribute(t),n=i.value===e.getAttribute(t);(s||n)&&(l+=i.bonus||0)}const c=i.childrenScore*t*a*l;c>i.article.score&&(i.article.score=c,i.article.node=e,s&&s.debug("found a better node scoring ",i.article.score,i.article.node))}return i}find(){this.logger.info("Auto slot is finding a slot");const e=d.findArticle(this.win.document.body,this.win,{length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}},this.logger);return e.article&&e.article.node?this.findParagraph(e.article.node):null}findParagraph(e){let t;const i=["P","DIV"];for(let s=0;s<i.length&&(t=e.getElementsByTagName(i[s]),!t.length);s++);return t}}d.MINIMUM_SCORE=5e3,d.MINIMUM_CHARS=500,d.MINIMUM_WIDTH=200,d.nodeScores={DIV:10,P:4,ARTICLE:20,SECTION:5,SPAN:2,FORM:4,STRONG:2,EM:3,B:1,I:1,U:1,MAIN:2},d.textNodes={SPAN:!0,STRONG:!0,EM:!0,B:!0,I:!0,U:!0},d.classBonuses={article:4,"ob-text":6,"ob-section-html":4,contenuArticle:6},d.attributeBonuses={itemprop:{value:"articleBody",bonus:1e3}};var c=i(156),h=i(2132);function u(e,t,i){if(h._("teadsDebugInPage").toOption().existsIf((e=>"true"===e))){var s=document.createElement("div");s.setAttribute("id","teadsGhostAvoid"),s.style.position="absolute",s.style.top=t.top+"px",s.style.bottom=t.bottom+"px",s.style.left=t.left+"px",s.style.right=t.right+"px",s.style.width=t.width+"px",s.style.height=t.height+"px",s.style.background="rgba(255, 0, 0, 0.10)",s.style.pointerEvents="none",s.style.color="#F79C9C",s.style.zIndex="9999",s.style.padding="10px",s.innerText="avoidSlot",i.document.body.appendChild(s),e.style.backgroundColor="rgba(255, 0, 0, 0.20)"}}const p=e=>z(l.Gs.noSlot.avoid,e),g=(0,r.c)(((e,t,i)=>{const s=e.avoid.getSlots();if(s){const t=i.getElementRect();let n=0;for(const r of s){if(i.getElement()===r.getElement())return p("AvoidSlot === Slot");const s=r.getElementRect(),o=e.avoid.getDistance(),a={top:s.top-o,left:s.left-o,bottom:s.bottom+o,right:s.right+o,height:s.height+2*o,width:s.width+2*o};if(u(r.getElement(),a,e.parentWindow.getWindow()),t.top!==t.bottom){const e={x:Math.max(0,Math.min(t.right,a.right)-Math.max(t.left,a.left)),y:Math.max(0,Math.min(t.bottom,a.bottom)-Math.max(t.top,a.top))};if(n=e.x*e.y,n)return p(`Avoid - ${Math.ceil(n)}px2`)}else if(t.top>a.top&&t.top<a.bottom)return p("Avoid - slot inside avoid area")}}return j(i)})),m=(0,r.c)(((e,{scrollTop:t,waterline:i},s)=>{if(!e.btf.isEnabled())return j(s);const n=s.getElementRect();e.belowSelector.get()&&e.belowSelector.getFirstElement()&&(i=Math.max(i,e.belowSelector.getFirstElementRect().bottom));const r=t+(e.insertBefore.isEnabled()?n.top:n.bottom);return r>=i?j(s):z(l.Gs.noSlot.btf,`lineToCheck: ${Math.round(r)}px >= waterline: ${i}px`)}));var f=i(6300);const v=["P","DIV","BR"],A=(0,r.c)(((e,t,i)=>{const n=i.getElement();return f.cb.fromNullable(n.children).orElse((()=>f.cb.fromNullable(n.childNodes))).map(s.fromArrayLike).filter(s.isNotEmpty).match({some:e=>{const t=s.find(e,(e=>s.includes(v,e.nodeName)));return t?z(l.Gs.noSlot.content,t.nodeName):j(i)},none:()=>j(i)})})),b=(0,r.c)(((e,{elements:t},i)=>{i.resolveSize();const n={i:i.getIndex(),elt:i.getElement(),elts:(0,s.map)(t,(e=>e.getElement())),wrappedSizes:{width:i.getWidth(),height:i.getWidth()/16*9}};return e.filter.trigger(n)?j(i):z(l.Gs.noSlot.filter)}));var y=i(3840);const w=(0,r.c)(((e,{beforeHeightCheck:t,afterHeightCheck:i},s)=>{const r=650/y.S,o=t(s);if(!n.isHTMLElement(o))return z(l.Gs.noSlot.position);o.style.setProperty("height","0"),o.style.setProperty("text-align","center"),""===o.style.getPropertyValue("max-width")&&o.style.setProperty("max-width","100%"),o.offsetLeft;const a=o.offsetTop;o.style.setProperty("overflow","hidden"),o.offsetLeft;const d=o.offsetTop;o.style.setProperty("margin-top",.33*r+"px"),o.offsetLeft;const c=o.offsetTop;o.style.setProperty("margin-top","0");const h=Math.abs(a-d)<8&&Math.abs(a-c)<.33*r+8;return i(o),h?j(s):z(l.Gs.noSlot.position,"Check height failed")}));function E(e,t=window){let i=s.includes(["video","embed"],e.tagName.toLowerCase());if(!i){const t=e.getAttribute("src");i=t&&S(t)}if(i||(i=n.querySelectorAll("video",t,e).length>0),!i){const r=n.querySelectorAll("[src]",t,e),o=s.map(r,(e=>e.getAttribute("src"))),a=e=>S(e);i=s.filter(o,a).length>0}return i}function C(e,t=window){let i=null;const s=d.findArticle(t.document.body,t,{length:0,currentScore:0,childrenScore:0,isOverMinimumWidth:!1,article:{score:0,node:null}});return s&&s.article&&s.article.node&&(i=I(e,s.article.node,0)),i||(i=e.parentElement),E(i,t)}function I(e,t,i){if(!e||10===i)return;const s=e.parentElement;return s===t?s:I(s,t,i+1)}function S(e){return/youtube|youtu\.be|dailymotion|day\.ly|vimeo|instagram|vine-videos/i.test(e)}function T(e=[]){const t=s.map(e,(e=>n.getSize(e).width));return s.filter(t,(e=>e>75)).length>0}function k(e,t=0){if(!e||3===t)return e;const i=e.previousElementSibling;return i&&!n.isEmpty(i)?i:k(i,t+1)}function P(e,t=0){if(!e||3===t)return e;const i=e.nextElementSibling;return i&&!n.isEmpty(i)?i:P(i,t+1)}var x=i(9175);const L=(0,r.c)(((e,t,i)=>{const s=e.parentWindow.getWindow();return e.imageFilter.get()===x.c.VALUES.SLOT&&function(e,t=window){if(!e)return!1;let i,s=!1;if("img"===e.tagName.toLowerCase()?s=T([e]):(i=n.querySelectorAll("img",t,e),s=T(i)),!s){const r=k(e);r&&("img"===r.tagName.toLowerCase()?s=T([r]):(i=n.querySelectorAll("img",t,r),s=i.length>0&&T(i)))}if(!s){const r=P(e);r&&("img"===r.tagName.toLowerCase()?s=T([r]):(i=n.querySelectorAll("img",t,r),s=i.length>0&&T(i)))}return s}(i.getElement(),s)?z(l.Gs.noSlot.imageSlot,"slot is too close to an image"):j(i)})),_=(0,r.c)(((e,t,i)=>{const s=i.getIndex()+1,n=e.minimum.get();return s>=n?j(i):z(l.Gs.noSlot.minimum,`slot: ${s} < config: ${n}`)})),O=(0,r.c)(((e,{elements:t},i)=>{if(!e.belowSelector.get()||null===e.minimumBelow.get())return j(i);const s=e.belowSelector.getFirstNodeBelowIndex(t),n=i.getIndex();return n>=e.minimumBelow.get()+s-1?j(i):z(l.Gs.noSlot.minimumBelow,`slot: ${n} < config: ${e.minimumBelow.get()}`)})),V=(0,r.c)(((e,{scrollTop:t},i)=>{if(!e.selector.get())return j(i);const s=i.getElementRect().top;return s+t>=$.MIN_POSITION_TOP&&s+t<=$.MAX_POSITION_TOP?j(i):z(l.Gs.noSlot.position,`positionTop: ${$.MIN_POSITION_TOP} <= ${s+t} <= ${$.MAX_POSITION_TOP}`)}));var R=i(1228),D=i(708);const N=(0,r.c)(((e,t,i)=>{if((0,R.isIABSafeFrame)()){const e=D._6();return e?z(l.Gs.noSlot.safeFrame,e):j(i)}return j(i)})),M=(0,r.c)(((e,t,i)=>{if(i.resolveSize(),n.isSelfClosingTag(i.getElement()))return j(i);const r={">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t},o=[{name:"minimumHeight",property:i.getHeight(),score:$.MIN_LONG_HEIGHT,operator:">="},{name:"minimumWidth",property:i.getWidth(),score:e.minimumWidth.get(),operator:">="},{name:"maximumHeight",property:i.getHeight(),score:$.MAX_LONG_HEIGHT,operator:"<="},{name:"maximumWidth",property:i.getWidth(),score:e.maximumWidth.get(),operator:"<="}],a=({name:e,property:t,score:s,operator:n})=>r[n](t,s)?j(i):z(l.Gs.noSlot.size,`${e}: ${t} ${n} ${s}`),d=(e,t)=>e.flatMap((()=>t.length>0?d(a((0,s.head)(t)),(0,s.tail)(t)):e));return d(a((0,s.head)(o)),(0,s.tail)(o))})),B=(0,r.c)(((e,t,i)=>{const s=i.getElement(),r=[];n.getTextContent(s,r);const o=r.join("");return n.isSelfClosingTag(s)||o.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").length>=e.minimumTextLength.get()?j(i):z(l.Gs.noSlot.content)}));var F=i(3008);const U=(0,r.c)(((e,t,i)=>{const s=e.parentWindow.getWindow();if(e.videoFilter.get()===F.c.VALUES.SLOT){if(function(e,t=window){if(!e)return!1;let i=E(e,t);if(!i){const s=k(e);s&&(i=E(s,t))}if(!i){const s=P(e);s&&(i=E(s,t))}return i}(i.getElement(),s))return z(l.Gs.noSlot.videoSlot,"slot is too close to a video")}else if(e.videoFilter.get()===F.c.VALUES.ARTICLE&&C(i.getElement(),s))return z(l.Gs.noSlot.videoSlot,"slot container (article) has a video");return j(i)}));class W extends o.AT{constructor(e){super(e,"right")}}class H extends o.AT{constructor(e){super(e,"left")}}function j(e){return new W({slot:e})}function z(e,t){return new H({reason:e,information:t})}const G=new a.Y("SlotChecker"),Y={btf:m,minimum:_,minimumBelow:O,height:w,avoid:g,size:M,filter:b,positionTop:V,textLength:B,children:A,video:U,image:L,safeFrame:N},$={MIN_POSITION_TOP:100,MAX_POSITION_TOP:18e3,MIN_LONG_HEIGHT:30,MAX_LONG_HEIGHT:2e3,WIDTH_MARGIN:40,HEIGHT_MARGIN:20,LENGTH_MARGIN:150,LEVEL_POSITION:200};function q(e,t,i){return"inread"===e&&t?[i.safeFrame,i.image,i.video,i.minimum,i.btf,i.positionTop,i.height,i.avoid,i.textLength,i.children,i.size,i.filter]:[i.safeFrame,i.image,i.video,i.minimum,i.btf,i.avoid,i.filter]}function K(e,t,i){const n=(n,r)=>function(e,t){const i=(t,n)=>t.flatMap((()=>n.length>0?i((0,s.head)(n)(e),(0,s.tail)(n)):t));return i((0,s.head)(t)(e),(0,s.tail)(t))}(n,t).fold(((t,i)=>({reason:s,information:n})=>(G.info(`Invalid slot [${i} / ${e.length}] ${s} => ${n}`,t),z(s,n)))(n,r),((t,s)=>({slot:t})=>(G.info(`Elected slot [${s} / ${e.length}]`,t),i.valid(1,1),j(t)))(0,r)),r=(e,t,i)=>e.orElse((()=>t.length>0?r(n((0,s.head)(t),i),(0,s.tail)(t),i+1):e));return e.length>0?r(n((0,s.head)(e),0),(0,s.tail)(e),1):z(l.Gs.noSlot.selector)}function Q(e,t,i=K,n=K){const{placementConfig:r}=e,o=function(e,t,i=Y){const s={};for(const n in i)i.hasOwnProperty(n)&&(s[n]=t(n,i[n](e)));return s}(r,X(e)),a=r.selector.getSlots();return i(a,q(e.name,!1,o),t).orElse((i=>(({reason:i,information:a})=>{if("inread"===e.name&&r.auto.isEnabled()){const i=new d(r.parentWindow.getWindow()).find(),a=(0,s.map)(i?(0,s.fromArrayLike)(i):[],((e,t)=>{const i=new c.c(e,t);return i.computeScore(r),i}));return a.sort(((e,t)=>t.getScore()-e.getScore())),n(a,q(e.name,!0,o),t)}return z(i,a)})(i))).fold((({reason:e,information:i})=>(G.info("No slot available"),(0,s.isEmpty)(a)&&!r.auto.isEnabled()?(t.valid(1,1,l.Gs.noSlot.selector,"error"),z(r.headerBiddingProvider.nonEmpty()?l.Gs.noSlot.hbSelector:l.Gs.noSlot.selector)):(t.valid(1,1,e,"error"),z(e,i)))),(({slot:e})=>(G.info("Slot available",e),j(e))))}const X=(0,r.c)(((e,t,i)=>{const{placementConfig:s}=e,r=n.getScrollTop(s.parentWindow.getWindow());switch(t){case"btf":return i({scrollTop:r,waterline:n.getWindowSize(s.parentWindow.getWindow()).height});case"height":return i({beforeHeightCheck:t=>e.initDom(t),afterHeightCheck:e=>{e&&e.parentNode&&e.parentNode.removeChild(e)}});case"positionTop":return i({scrollTop:r});case"minimumBelow":case"filter":return i({elements:s.selector.getSlots()});default:return i({})}}))},9168:(e,t,i)=>{"use strict";i.d(t,{A9:()=>A,E3:()=>C,Qj:()=>E,wB:()=>I,yJ:()=>v});var s=i(8036),n=i(6716),r=i(6084),o=i(2488),a=i(3463),l=i(7960),d=i(4040),c=i(6040),h=i(7768),u=i(6300),p=i(392),g=i(1476);const m=(e,t=d.k)=>(0,n.Sg)(e,(0,c.replaceStringsWithValue)(g.E.timestampMacroNames,t())),f=(0,s.reduce)(l.sV,((e,t)=>Object.assign(Object.assign({},e),{[t.toLowerCase()]:t})),{}),v=(0,n.cp)((0,r.prop)("event"),(0,s.isMemberOf)(Object.keys(f))),A=s.cArray.map((({event:e,url:t})=>({event:f[e],trackingUrl:(0,h._U)(m(t))}))),b=(0,s.reduce)((0,n.Sg)(a.E,s.cArray.filter((0,r.not)((0,r.equals)(a.c.Progress)))),((e,t)=>Object.assign(Object.assign({},e),{[t.toLowerCase()]:t})),{}),y=/progress-(\d+)/i,w=e=>y.test(e),E=(0,n.cp)((0,r.prop)("event"),(e=>w(e)||(0,s.isMemberOf)(Object.keys(b))(e))),C=(0,n.cp)((0,s.partition)((0,n.cp)((0,r.prop)("event"),w)),p.Q.bimap((0,n.cp)(s.cArray.map((({event:e,url:t})=>(0,n.Sg)(e,(e=>e.match(y)),u.cb.fromNullable,u.cv.map((([,e])=>parseInt(e,10))),u.cv.filter(o.Ib),u.cv.map((e=>({offset:e,trackingUrl:m(t)})))))),s.flattenOptions),s.cArray.map((({url:e,event:t})=>({event:b[t],trackingUrl:m(e)}))))),I=(0,n.cp)(s.cArray.filter((e=>(0,s.isMemberOf)(a.E)(e.event)&&(0,r.not)(w)(e.event))),s.cArray.map((({event:e,url:t})=>({event:e,trackingUrl:m(t)}))))},8532:(e,t,i)=>{"use strict";i.d(t,{A3:()=>h,M5:()=>c,X0:()=>d,yk:()=>l});var s=i(8036),n=i(1228),r=i(2304),o=i(952);function a(e){const t=function(e){if(null===o.m4)return e;const t="debug_metadata",i=new URLSearchParams(e.split("?")[1]).get(t),s=`b=${o.m4}`,n=i?`${s};${i}`:s;return(0,r.oV)(e,t,encodeURIComponent(n))}(e);n.isFacebookWebview()?fetch(t,{keepalive:!0,mode:"no-cors",headers:{accept:"image/webp,image/avif,video/*;q=0.8,image/png,image/svg+xml,image/*;q=0.8,*/*;q=0.5"},credentials:"include",redirect:"follow"}):(new Image).src=t}const l="1342",d=s.cArray.forEach(a),c=s.cArray.forEach(a),h=(e,t,i)=>`${e}-${t}-${i}`},5460:(e,t,i)=>{"use strict";i.d(t,{GE:()=>b,GM:()=>f,IF:()=>v,YJ:()=>y,_m:()=>I,i8:()=>A,jr:()=>g,kL:()=>m,oT:()=>S,qo:()=>C,sT:()=>w});var s=i(8036),n=i(6300),r=i(6716),o=i(392),a=i(6084),l=i(8532),d=i(6712),c=i(1584),h=i(8076),u=i(8548);const p=e=>Object.assign({formatVersion:l.yk,trackStrategy:l.X0},e);function g(e){return(t,i)=>(0,r.Sg)([(0,d.l9)(e),(0,d.l9)(e)],o.Q.sndMap((s=>(0,r.Sg)(c.cp.track(t,p(i),s),(0,d.Ou)(e)))))}function m(e){return(t,i)=>(0,r.Sg)([(0,d.Og)(e),(0,d.Og)(e)],o.Q.sndMap((s=>(0,r.Sg)(u.c.track(t,p(i),s),(0,d._k)(e)))))}function f(e){return(t,i,s=n.MB)=>(0,r.Sg)([[(0,d.l9)(e),(0,d.Y5)(e)],[(0,d.l9)(e),(0,d.Y5)(e)]],o.Q.sndMap((([n,a])=>(0,r.Sg)(h.o$(t,{trackStrategy:l.M5},p(i),s)(n,a),o.Q.bimap((0,d.Ou)(e),(0,d.oP)(e))))),o.Q.zip)}function v(e){return(t,i,s=n.MB)=>(0,r.Sg)([[(0,d.Og)(e),(0,d.Y5)(e)],[(0,d.Og)(e),(0,d.Y5)(e)]],o.Q.sndMap((([n,a])=>(0,r.Sg)(h.YF(t,{trackStrategy:l.M5},p(i),s)(n,a),o.Q.bimap((0,d._k)(e),(0,d.oP)(e))))),o.Q.zip)}const A=e=>(t,i)=>(0,r.Sg)([(0,d.l9)(e),(0,d.l9)(e)],o.Q.sndMap((s=>(0,r.Sg)(c.cp.trackFormatError(t,p(i),s),(0,d.Ou)(e))))),b=e=>(t,i)=>(0,r.Sg)([(0,d.Og)(e),(0,d.Og)(e)],o.Q.sndMap((s=>(0,r.Sg)(u.c.trackFormatError(t,p(i),s),(0,d._k)(e))))),y=e=>(t,i,s)=>(0,r.Sg)([[(0,d.l9)(e),(0,d.Y5)(e)],[(0,d.l9)(e),(0,d.Y5)(e)]],o.Q.sndMap((([n,a])=>(0,r.Sg)(h.wr(t,{trackStrategy:l.M5},p(i),s)(n,a),o.Q.bimap((0,d.Ou)(e),(0,d.oP)(e))))),o.Q.zip),w=e=>(t,i,s,n)=>(0,r.Sg)([[(0,d.Og)(e),(0,d.Y5)(e)],[(0,d.Og)(e),(0,d.Y5)(e)]],o.Q.sndMap((([t,a])=>(0,r.Sg)(h.sM(i,{trackStrategy:l.M5},p(s),n)(t,a),o.Q.bimap((0,d._k)(e),(0,d.oP)(e))))),o.Q.zip),E=(0,r.cp)((0,a.prop)("trackedEvents"),s.cArray.map((0,a.prop)("event"))),C=([e,t])=>(0,s.difference)(E(e))(E(t)),I=o.Q.bimap(C,C),S=e=>({event:t,trackingUrl:i})=>(0,r.Sg)((0,d.l9)(e),(e=>Object.assign(Object.assign({},e),{customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]})),(0,d.Ou)(e))},8536:(e,t,i)=>{"use strict";i.d(t,{Ax:()=>I,GD:()=>C,I3:()=>x,ID:()=>S,IZ:()=>y,K:()=>j,Ke:()=>z,Mx:()=>$,OG:()=>D,OU:()=>V,SC:()=>E,WM:()=>M,Ws:()=>U,_Q:()=>F,aE:()=>_,eg:()=>R,iC:()=>q,ob:()=>B,ol:()=>W,q_:()=>H,s4:()=>N,sX:()=>L,sb:()=>O,yC:()=>G,yM:()=>Y});var s=i(8036),n=i(1228),r=i(4616),o=i(8708),a=i(6300),l=i(6716),d=i(2304),c=i(6084),h=i(3588),u=i(1476),p=i(952),g=i(4136),m=i(3463),f=i(7960),v=i(6388),A=i(3336),b=i(2488);const y=({pageId:e,placementId:t,auctionId:i,sumologicLogger:s},o,l)=>{const d={baseUrl:u.E.trackingUrl,referer:S(),queryParameters:{env:n.getEnv(),auctid:i.getOrValue((0,r.S)("")),pageId:e.toString(),pid:t.toString()}};return Object.assign(Object.assign({},d),{queryParameters:Object.assign(Object.assign({},d.queryParameters),o),trackingUrl:a.MB})},w=({pageId:e,placementId:t,auctionId:i,viewerId:s,hbProvider:l,sumologicLogger:d},c,h)=>{const p={baseUrl:u.E.trackingUrl,referer:S(),queryParameters:{env:n.getEnv(),auctid:i.getOrValue((0,r.S)("")),pageId:e.toString(),pid:t.toString(),hb_provider:l,vid:s.getOrValue((0,o.Y)(""))}};return Object.assign(Object.assign({},p),{queryParameters:Object.assign(Object.assign({},p.queryParameters),c),trackingUrl:a.MB})},E=({sumologicLogger:e,wigo:t,logger:i,placementKey:n})=>(r,o,a)=>(0,l.Sg)(a(r),(0,c.tap)((r=>(0,l.Sg)(v.c.format.getNewTrackedEvents(r),s.cArray.forEach((0,l.cp)((0,c.tap)((e=>i.info(`[${n}][${o}] ${e}`,r[1]))),(0,c.tap)(k(e)),T(t))))))),C=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,durationPlayed:r,totalDuration:o})=>(a,u)=>(0,l.Sg)(u(a),(([a,u])=>{const p=v.c.vast.getNewTrackedVastEvents(a),g=v.c.vast.getNewTrackedVastEvents(u);return(0,s.forEach)(v.c.vast.trackedEventsToEventsWithTrackingUrls(g),(({event:e,trackingUrls:i})=>{(0,s.forEach)(i,(i=>{const s=A.AT.tryCatch((()=>(0,d.K0)(i).hostname)).getOrValue("<invalid>");e===m.c.Billable?(0,b.C6)({fromHour:7,toHour:7})?t.info(`3p-billable-track ${e} ${s}`,40):t.info(`3p-billable-track ${e} ${s}`,5):t.info(`3p-vast-track ${e} ${s}`,1e3)}))})),(0,l.Sg)([...p,...g],v.c.vast.trackedEventsToEventsWithTrackingUrls,s.cArray.forEach((0,l.cp)((0,c.tap)((({event:t,trackingUrls:i})=>n.info(`[${e}][vast] ${t}`,i))),(0,h.gt)({wigo:i,durationPlayed:r,totalDuration:o}))))})),I=({placementKey:e,sumologicLogger:t,wigo:i,logger:n,durationPlayed:r=a.MB,totalDuration:o=a.MB,errorCode:l,errorCause:d,slotType:c,creativeSize:u,macros:p})=>{const[g,m]=v.c.vast.trackErrorWithCause(e)(l,d,{slotType:c,macros:p,referer:S(),creativeSize:u});t.error(`vast-error ${l}`);const f=v.c.vast.trackedEventsToEventsWithTrackingUrls([...v.c.vast.getNewTrackedVastEvents(g),...v.c.vast.getNewTrackedVastEvents(m)]);(0,s.forEach)(f,(({event:t,trackingUrls:s})=>{n.info(`[${e}][vast] ${t} ${l}`,s),(0,h.gt)({wigo:i,durationPlayed:r,totalDuration:o})({event:t,trackingUrls:s})}))},S=()=>(0,d.Ae)().flatMap((e=>a.cb.fromNullable(e.windowReferrerUrl))).getOrValue(""),T=e=>t=>{((0,s.isMemberOf)([g.IR.AdNotAvailableNetworkError,g.IR.AdNotAvailableServerError,g.IR.AdAvailableErrorParseTimeout,g.IR.AdAvailableErrorSettings,g.IR.AdAvailableErrorBadResponse,g.IR.AdAvailableErrorSameAd,g.IR.NoAdIvtDoubleVerify,g.IR.NoAdIvtTag,g.IR.NoAdBlockedSiteDoubleVerify,g.IR.NoAdBlockedSiteTeads])(t)||(0,g.o5)(t)||(0,g.CB)(t))&&(e.valid(1,2,t,"error"),e.valid(1,1,t,"error"))},k=e=>(0,l.cp)(P,a.cv.map((e=>p.e2[e])),a.cv.forEach((t=>e.info(t,40)))),P=e=>(0,l.Sg)(a.cb.fromPredicate(e,(0,s.isMemberOf)([g.IR.PlacementCall,g.IR.SlotAvailable,g.IR.AdReceived,g.IR.AdAvailableSuccess,g.IR.AdCall,g.IR.ErrorBeforeAdReached,g.IR.AdReached])),a.cv.orElse((()=>/^noSlot-/.test(e)?a.cb.of("noSlot"):a.MB)),a.cv.orElse((()=>/^incompatibility-/.test(e)?a.cb.of("incompatibility"):a.MB)),a.cv.orElse((()=>/^adNotAvailable-/.test(e)?a.cb.of("adNotAvailable"):a.MB)),a.cv.orElse((()=>/^adAvailable-error-/.test(e)?a.cb.of("adAvailable-error"):a.MB)),a.cv.orElse((()=>/^noAd-/.test(e)?a.cb.of("noAd"):a.MB))),x=({pageId:e,placementId:t,placementKey:i,sumologicLogger:s,logger:n,wigo:r,auctionId:o,randomString:a})=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(g.IR.PlacementCall,"classic",(n=>v.c.format.classic.track(i)(n,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:s},{debug_metadata:a},n)))),L=({pageId:e,placementId:t,placementKey:i,sumologicLogger:s,logger:n,wigo:r,auctionId:o,viewerId:d,headerBiddingProvider:c})=>(0,l.Sg)(c,a.cv.fold((()=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(g.IR.IncompatibilityFormat,"classic",(n=>v.c.format.classic.track(i)(n,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:s},{slot:"native"},n))))),(a=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(g.IR.IncompatibilityFormat,"header-bidding",(n=>v.c.format.headerBidding.track(i)(n,w({pageId:e,placementId:t,auctionId:o,sumologicLogger:s,hbProvider:a,viewerId:d},{slot:"native",pfid:""}))))))),_=({pageId:e,placementId:t,placementKey:i,sumologicLogger:s,logger:n,wigo:r,auctionId:o,viewerId:d,headerBiddingProvider:c},h)=>(0,l.Sg)(c,a.cv.fold((()=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(h,"classic",(n=>v.c.format.classic.track(i)(n,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:s},{slot:"native"},n))))),(a=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(h,"header-bidding",(n=>v.c.format.headerBidding.track(i)(n,w({pageId:e,placementId:t,auctionId:o,sumologicLogger:s,hbProvider:a,viewerId:d},{slot:"native",pfid:""}))))))),O=({pageId:e,placementId:t,placementKey:i,sumologicLogger:s,logger:n,wigo:r,auctionId:o,viewerId:d,headerBiddingProvider:c})=>(0,l.Sg)(c,a.cv.fold((()=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(g.IR.FallbackIntegration,"classic",(n=>v.c.format.classic.track(i)(n,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:s},{slot:"native"},n))))),(a=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(g.IR.FallbackIntegration,"header-bidding",(n=>v.c.format.headerBidding.track(i)(n,w({pageId:e,placementId:t,auctionId:o,sumologicLogger:s,hbProvider:a,viewerId:d},{slot:"native",pfid:""}))))))),V=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,headerBiddingProvider:n,viewerId:r,pageId:d,placementId:c,auctionId:h})=>{const u={sumologicLogger:t,wigo:i,logger:s,placementKey:e};(0,l.Sg)(n,a.cv.fold((()=>E(u)(g.IR.LimitedCapabilities,"classic",(e=>v.c.format.classic.track(u.placementKey)(e,y({pageId:d,placementId:c,auctionId:h,sumologicLogger:t},{vid:r.getOrValue((0,o.Y)(""))},e))))),(e=>E(u)(g.IR.LimitedCapabilities,"header-bidding",(i=>v.c.format.headerBidding.track(u.placementKey)(i,w({pageId:d,placementId:c,auctionId:h,sumologicLogger:t,hbProvider:e,viewerId:r},{pfid:""})))))))},R=e=>({headerBiddingProvider:t,pageId:i,placementId:s,slotType:n,auctionId:r,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u,scenarioId:p,adSourceId:m,errorCause:A,creativeId:b,dspCampaignId:C,dspCreativeId:I,studioCreativeId:S})=>{const T={slot:n,gid:(0,f.e4)(c),sid:(0,f.e4)(h),pfid:(0,f.e4)(u),scid:(0,f.e4)(p),ad_source_id:(0,f.e4)(m),error_cause:A,cid:b,dsp_campaign_id:null!=C?C:"",dsp_creative_id:null!=I?I:"",studio_cid:S.getOrValue("")};(0,l.Sg)(t,a.cv.fold((()=>E(e)(g.IR.Warning,"classic",(t=>v.c.format.classic.track(e.placementKey)(t,y({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger},Object.assign(Object.assign({},T),{vid:d.getOrValue((0,o.Y)(""))}),t))))),(t=>E(e)(g.IR.Warning,"header-bidding",(n=>v.c.format.headerBidding.track(e.placementKey)(n,w({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},T)))))))},D=({pageId:e,placementId:t,placementKey:i,sumologicLogger:s,logger:n,wigo:r,auctionId:o,viewerId:d,headerBiddingProvider:c},h)=>(0,l.Sg)(c,a.cv.fold((()=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(h,"classic",(n=>v.c.format.classic.track(i)(n,y({pageId:e,placementId:t,auctionId:o,sumologicLogger:s},{},n))))),(a=>E({sumologicLogger:s,wigo:r,logger:n,placementKey:i})(h,"header-bidding",(n=>v.c.format.headerBidding.track(i)(n===g.IR.NoSlotSelector?g.IR.HbNoSlotSelector:n,w({pageId:e,placementId:t,auctionId:o,sumologicLogger:s,hbProvider:a,viewerId:d},{pfid:""}))))))),N=e=>({placementKey:t,sumologicLogger:i,wigo:s,logger:n,queryParameters:r})=>E({sumologicLogger:i,wigo:s,logger:n,placementKey:t})(e,"classic",(e=>v.c.format.classic.track(t)(e,{baseUrl:u.E.trackingUrl,referer:S(),queryParameters:r,trackingUrl:a.MB}))),M=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,queryParameters:n})=>E({sumologicLogger:t,wigo:i,logger:s,placementKey:e})(g.IR.AdAvailableErrorBadResponse,"classic",(t=>v.c.format.classic.track(e)(t,{baseUrl:u.E.trackingUrl,referer:S(),queryParameters:n,trackingUrl:a.MB}))),B=({placement:{key:e,pageId:t,pid:i,slotType:s,wigo:n},sumologicLogger:r,logger:d,auctionId:c,viewerId:h,headerBiddingProvider:u,portfolioItemId:p})=>{const m={sumologicLogger:r,wigo:n,logger:d,placementKey:e},A=(0,f.Ip)(p);(0,l.Sg)(u,a.cv.fold((()=>E(m)(g.IR.AdReceived,"classic",(n=>v.c.format.classic.track(e)(n,y({pageId:t,placementId:i,auctionId:c,sumologicLogger:r},{slot:s,vid:h.getOrValue((0,o.Y)("")),pfid:A},n))))),(n=>E(m)(g.IR.AdReceived,"header-bidding",(o=>v.c.format.headerBidding.track(e)(o,w({pageId:t,placementId:i,auctionId:c,sumologicLogger:r,hbProvider:n,viewerId:h},{slot:s,pfid:A})))))))},F=({placement:{key:e,pageId:t,pid:i,slotType:s,wigo:n},sumologicLogger:r,logger:d,auctionId:c,viewerId:h,headerBiddingProvider:u,portfolioItemId:p,insertionId:m,connectionId:A})=>{const b={sumologicLogger:r,wigo:n,logger:d,placementKey:e},C=(0,f.Ip)(p),I=(0,f.Ip)(m),S=(0,f.Ip)(A);(0,l.Sg)(u,a.cv.fold((()=>E(b)(g.IR.AdAvailableErrorSettings,"classic",(n=>v.c.format.classic.track(e)(n,y({pageId:t,placementId:i,auctionId:c,sumologicLogger:r},{slot:s,vid:h.getOrValue((0,o.Y)("")),pfid:C,gid:I,sid:S},n))))),(n=>E(b)(g.IR.AdAvailableErrorSettings,"header-bidding",(o=>v.c.format.headerBidding.track(e)(o,w({pageId:t,placementId:i,auctionId:c,sumologicLogger:r,hbProvider:n,viewerId:h},{slot:s,pfid:C,gid:I,sid:S})))))))},U=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,headerBiddingProvider:n,pageId:r,placementId:d,slotType:c,auctionId:h,viewerId:u,insertionId:p,connectionId:m,portfolioItemId:f})=>{const A={sumologicLogger:t,wigo:i,logger:s,placementKey:e},b="0"===p?"":p;(0,l.Sg)(n,a.cv.fold((()=>E(A)(g.IR.AdAvailableErrorParseTimeout,"classic",(e=>v.c.format.classic.track(A.placementKey)(e,y({pageId:r,placementId:d,auctionId:h,sumologicLogger:t},{slot:c,vid:u.getOrValue((0,o.Y)("")),gid:b,sid:m,pfid:f},e))))),(e=>E(A)(g.IR.AdAvailableErrorParseTimeout,"header-bidding",(i=>v.c.format.headerBidding.track(A.placementKey)(i,w({pageId:r,placementId:d,auctionId:h,sumologicLogger:t,hbProvider:e,viewerId:u},{slot:c,pfid:f,gid:b,sid:m})))))))},W=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,headerBiddingProvider:n,pageId:r,placementId:d,slotType:c,portfolioItemId:h,auctionId:u,viewerId:p})=>{(0,l.Sg)(n,a.cv.fold((()=>E({sumologicLogger:t,wigo:i,logger:s,placementKey:e})(g.IR.FallbackNoAd,"classic",(i=>v.c.format.classic.track(e)(i,y({pageId:r,placementId:d,auctionId:u,sumologicLogger:t},{slot:c,vid:p.getOrValue((0,o.Y)("")),pfid:(0,f.Ip)(h)},i))))),(n=>E({sumologicLogger:t,wigo:i,logger:s,placementKey:e})(g.IR.FallbackNoAd,"header-bidding",(i=>v.c.format.headerBidding.track(e)(i,w({pageId:r,placementId:d,auctionId:u,sumologicLogger:t,hbProvider:n,viewerId:p},{slot:c,pfid:(0,f.Ip)(h)})))))))},H=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,headerBiddingProvider:n,baseUrlWithQueryParameters:r})=>{const o={sumologicLogger:t,wigo:i,logger:s,placementKey:e},d=Object.assign(Object.assign({},r),{referer:S()});(0,l.Sg)(n,a.cv.fold((()=>E(o)(g.IR.AdCall,"classic",(e=>v.c.format.classic.track(o.placementKey)(e,d)))),(e=>E(o)(g.IR.AdCall,"header-bidding",(t=>v.c.format.headerBidding.track(o.placementKey)(t,Object.assign(Object.assign({},d),{queryParameters:Object.assign(Object.assign({},d.queryParameters),{hb_provider:e})})))))))},j=({placementKey:e,sumologicLogger:t,wigo:i,logger:s,headerBiddingProvider:n,code:r,pageId:d,placementId:c,slotType:h,auctionId:u,viewerId:p,insertionId:m,connectionId:f,portfolioItemId:A})=>{const b={sumologicLogger:t,wigo:i,logger:s,placementKey:e},C="0"===m?"":m;(0,l.Sg)(n,a.cv.fold((()=>E(b)(g.IR.AdAvailableErrorVast,"classic",(e=>v.c.format.classic.trackError(b.placementKey)(r,y({pageId:d,placementId:c,auctionId:u,sumologicLogger:t},{slot:h,vid:p.getOrValue((0,o.Y)("")),gid:C,sid:f,pfid:A},e))))),(e=>E(b)(g.IR.AdAvailableErrorVast,"header-bidding",(i=>v.c.format.headerBidding.trackError(b.placementKey)(r,w({pageId:d,placementId:c,auctionId:u,sumologicLogger:t,hbProvider:e,viewerId:p},{slot:h,pfid:A,gid:C,sid:f})))))))},z=({sumologicLogger:e,logger:t,wigo:i,placementKey:s})=>({pageId:n,placementId:r,auctionId:d,viewerId:c,portfolioItemId:h,slotType:u,insertionId:p,connectionId:m,headerBiddingProvider:A})=>{const b=(0,f.Ip)(h),C=(0,f.Ip)(p),I=(0,f.Ip)(m);(0,l.Sg)(A,a.cv.fold((()=>E({sumologicLogger:e,wigo:i,logger:t,placementKey:s})(g.IR.AdAvailableSuccess,"classic",(t=>v.c.format.classic.track(s)(t,y({pageId:n,placementId:r,auctionId:d,sumologicLogger:e},{slot:u,vid:c.getOrValue((0,o.Y)("")),pfid:b,gid:C,sid:I},t))))),(o=>E({sumologicLogger:e,wigo:i,logger:t,placementKey:s})(g.IR.AdAvailableSuccess,"header-bidding",(t=>v.c.format.headerBidding.track(s)(t,w({pageId:n,placementId:r,auctionId:d,sumologicLogger:e,hbProvider:o,viewerId:c},{slot:u,pfid:b,gid:C,sid:I})))))))},G=({sumologicLogger:e,logger:t,wigo:i,placementKey:s})=>({pageId:n,placementId:r,auctionId:d,viewerId:c,portfolioItemId:h,slotType:u,insertionId:p,connectionId:m,headerBiddingProvider:A})=>{const b=(0,f.Ip)(h),w=(0,f.Ip)(p),C=(0,f.Ip)(m);(0,l.Sg)(A,a.cv.fold((()=>E({sumologicLogger:e,wigo:i,logger:t,placementKey:s})(g.IR.AdAvailableErrorSameAd,"classic",(t=>v.c.format.classic.track(s)(t,y({pageId:n,placementId:r,auctionId:d,sumologicLogger:e},{slot:u,vid:c.getOrValue((0,o.Y)("")),pfid:b,gid:w,sid:C},t))))),(i=>{t.warn("Could not track adAvailable-error-sameAd, it should not be possible on Header-Bidding context",i),e.error(`hb-samead ${i}`)})))},Y=e=>({headerBiddingProvider:t,pageId:i,placementId:s,slotType:n,auctionId:r,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u,creativeId:p})=>{const m=d.getOrValue((0,o.Y)("")),A=(0,f.e4)(u),b=(0,f.e4)(c),C=(0,f.e4)(h);(0,l.Sg)(t,a.cv.fold((()=>E(e)(g.IR.EarlyClick,"classic",(t=>v.c.format.classic.track(e.placementKey)(t,y({auctionId:r,sumologicLogger:e.sumologicLogger,pageId:i,placementId:s},{slot:n,vid:m,pfid:A,gid:b,sid:C,cid:p},g.IR.EarlyClick))))),(t=>E(e)(g.IR.EarlyClick,"header-bidding",(o=>v.c.format.headerBidding.track(e.placementKey)(o,w({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},{slot:n,pfid:A,gid:b,sid:C,cid:p})))))))},$=e=>({headerBiddingProvider:t,pageId:i,placementId:s,slotType:n,auctionId:r,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u,notVisibleReason:p})=>{const m=(0,g.CS)(p),A=(0,g.oj)(p),b=d.getOrValue((0,o.Y)("")),C=(0,f.e4)(u),I=(0,f.e4)(c),S=(0,f.e4)(h);(0,l.Sg)(t,a.cv.fold((()=>E(e)(m,"classic",(t=>v.c.format.classic.track(e.placementKey)(t,y({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger},{slot:n,vid:b,pfid:C,gid:I,sid:S,debug_metadata:A},t))))),(t=>E(e)(m,"header-bidding",(o=>v.c.format.headerBidding.track(e.placementKey)(o,w({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},{slot:n,pfid:C,gid:I,sid:S,debug_metadata:A})))))))},q=e=>({headerBiddingProvider:t,pageId:i,placementId:s,slotType:n,auctionId:r,viewerId:d,insertionId:c,connectionId:h,portfolioItemId:u})=>{const p=d.getOrValue((0,o.Y)("")),m=(0,f.e4)(u),A=(0,f.e4)(c),b=(0,f.e4)(h);(0,l.Sg)(t,a.cv.fold((()=>E(e)(g.IR.ClickReplay,"classic",(t=>v.c.format.classic.track(e.placementKey)(t,y({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger},{slot:n,vid:p,pfid:m,gid:A,sid:b},t))))),(t=>E(e)(g.IR.ClickReplay,"header-bidding",(o=>v.c.format.headerBidding.track(e.placementKey)(o,w({pageId:i,placementId:s,auctionId:r,sumologicLogger:e.sumologicLogger,hbProvider:t,viewerId:d},{slot:n,pfid:m,gid:A,sid:b})))))))}},6388:(e,t,i)=>{"use strict";i.d(t,{A:()=>o.A3,c:()=>C});var s=i(4040),n=i(6300),r=i(6716),o=i(8532),a=i(6712),l=i(8076),d=i(7768),c=i(5460),h=i(8036),u=i(392),p=i(2304),g=i(6084),m=i(2488),f=i(3463),v=i(8768);const A=e=>(0,p.i2)(e),b=e=>!A(e),y=(e,t)=>i=>(0,r.Sg)(Object.keys(e),h.cArray.filter((t=>(0,h.isNotEmpty)(e[t]))),h.cArray.filter((0,h.isMemberOf)(f.E)),h.cArray.foldLeft(i,((i,s)=>s===f.c.Progress?(e=>(t,i)=>(0,r.Sg)(t,h.cArray.map((({url:e,data:t})=>(0,r.Sg)(e,n.cb.fromNullable,n.cv.filter(i),n.cv.map((e=>({url:e,offset:t})))))),h.flattenOptions,(0,h.groupByMap)((0,g.prop)("offset"),(0,g.prop)("url")),(t=>(0,r.Sg)(Object.keys(t),h.cArray.map((e=>parseInt(e,10))),h.cArray.foldLeft(e,((e,i)=>(0,r.Sg)(t[i],(e=>({offset:i,trackingUrls:e})),E(e))))))))(i)(e[s],t):(e=>(t,i,s)=>(0,r.Sg)(t,h.cArray.map((0,r.cp)((0,g.prop)("url"),n.cb.fromNullable,n.cv.filter((e=>""!==e)),n.cv.filter(i))),h.flattenOptions,(e=>({event:s,trackingUrls:e})),w(e)))(i)(e[s],t,s)))),w=e=>t=>Object.assign(Object.assign({},e),{trackings:[...e.trackings,t]}),E=e=>t=>Object.assign(Object.assign({},e),{progressTrackings:[...e.progressTrackings,t]}),C={format:{getNewTrackedEvents:c.qo,getNewTrackedEventsWithDebug:c._m,addFormatCustomTrackings:c.oT,classic:{track:c.jr,trackWithDebug:c.GM,trackError:c.i8,trackErrorWithDebug:c.YJ},headerBidding:{track:c.kL,trackWithDebug:c.IF,trackError:c.GE,trackErrorWithDebug:c.sT}},vast:{getNewTrackedVastEvents:([e,t])=>t.trackedEvents.slice(e.trackedEvents.length),addVastCustomTrackings:e=>({event:t,trackingUrl:i})=>(0,r.Sg)([(0,a.o7)(e),(0,a.uq)(e)],u.Q.bimap((e=>A(i)?Object.assign(Object.assign({},e),{customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}):e),(e=>b(i)?Object.assign(Object.assign({},e),{customTrackings:[...e.customTrackings,{event:t,trackingUrls:[i]}]}):e)),u.Q.bimap((0,a.UL)(e),(0,a.Gu)(e))),addVastCustomProgressTrackings:e=>({offset:t,trackingUrl:i})=>(0,r.Sg)([(0,a.o7)(e),(0,a.uq)(e)],u.Q.bimap((e=>A(i)?Object.assign(Object.assign({},e),{customProgressTrackings:[...e.customProgressTrackings,{offset:t,trackingUrls:[i]}]}):e),(e=>b(i)?Object.assign(Object.assign({},e),{customProgressTrackings:[...e.customProgressTrackings,{offset:t,trackingUrls:[i]}]}):e)),u.Q.bimap((0,a.UL)(e),(0,a.Gu)(e))),registerVastTrackings:e=>t=>(0,r.Sg)([(0,a.o7)(e),(0,a.uq)(e)],(e=>t=>(0,r.Sg)(t,u.Q.bimap(y(e,A),y(e,b))))(t),u.Q.bimap((0,a.UL)(e),(0,a.Gu)(e))),trackedEventsToEventsWithTrackingUrls:e=>(0,r.Sg)(e,(0,h.groupBy)((0,g.prop)("event")),(e=>(0,r.Sg)(Object.keys(e),h.cArray.foldLeft([],((t,i)=>[...t,{event:i,trackingUrls:(0,r.Sg)(e[i],h.cArray.map((0,g.prop)("trackingUrl")))}]))))),setStudioCreativeId:e=>t=>{const i=(0,a.o7)(e);return(0,a.UL)(e)(Object.assign(Object.assign({},i),{studioCreativeId:n.cb.fromPredicate(t,m.ct)}))},resetTrackedEvents:e=>(0,r.Sg)([[(0,a.o7)(e),(0,a.o7)(e)],[(0,a.uq)(e),(0,a.uq)(e)]],u.Q.bimap(u.Q.sndMap((t=>(0,r.Sg)(Object.assign(Object.assign({},t),{trackedEvents:a.m6.trackedEvents,trackedProgressOffsets:a.m6.trackedProgressOffsets,alreadyBilledAdvertiser:a.m6.alreadyBilledAdvertiser}),(0,a.UL)(e)))),u.Q.sndMap((t=>(0,r.Sg)(Object.assign(Object.assign({},t),{trackedEvents:a.yu.trackedEvents,trackedProgressOffsets:a.yu.trackedProgressOffsets}),(0,a.Gu)(e)))))),track:e=>(t,i)=>(0,r.Sg)([(0,a.o7)(e),(0,a.uq)(e)],(([s,n])=>(0,r.Sg)(v.GD(t,Object.assign(Object.assign({},i),{trackStrategy:o.X0,formatVersion:o.yk}))(s,n),(([e,t])=>[[s,e],[n,t]]),u.Q.bimap(u.Q.sndMap((0,a.UL)(e)),u.Q.sndMap((0,a.Gu)(e)))))),trackProgress:e=>(t,i)=>(0,r.Sg)([(0,a.o7)(e),(0,a.uq)(e)],(([s,n])=>(0,r.Sg)(v.wP(t,Object.assign(Object.assign({},i),{trackStrategy:o.X0,formatVersion:o.yk}))(s,n),(([e,t])=>[[s,e],[n,t]]),u.Q.bimap(u.Q.sndMap((0,a.UL)(e)),u.Q.sndMap((0,a.Gu)(e)))))),trackErrorWithCause:e=>(t,i,s)=>{const n=i.slice(0,128),r=(0,a.o7)(e),l=(0,a.uq)(e),[d,c]=v.Y9(t,n,Object.assign(Object.assign({},s),{trackStrategy:o.X0,formatVersion:o.yk}))(r,l);return(0,a.UL)(e)(d),(0,a.Gu)(e)(c),[[r,d],[l,c]]}},debug:{track:e=>(t,{baseUrl:i,referer:c,queryParameters:h},u=n.MB)=>(0,r.Sg)((0,d.uU)({baseUrl:i,queryParameters:Object.assign({referer:c,action:t,fv:o.yk,ts:(0,s.k)().toString()},h)},u),(i=>l.cp.track(t,{trackStrategy:o.M5,trackingUrl:i},(0,a.Y5)(e))),(0,a.oP)(e))}}},6712:(e,t,i)=>{"use strict";i.d(t,{Gu:()=>w,Og:()=>p,Ou:()=>v,UL:()=>y,Y5:()=>g,_k:()=>A,l9:()=>u,m6:()=>l,o7:()=>m,oP:()=>b,uq:()=>f,yu:()=>d});var s=i(6300),n=i(2488);const r={type:"ClassicFormatTrackingStore",trackedEvents:[],customTrackings:[]},o={type:"HeaderBiddingFormatTrackingStore",trackedEvents:[]},a={type:"DebugTrackingStore",trackedEvents:[]},l={type:"VastTrackingStore",trackings:[],progressTrackings:[],trackedEvents:[],trackedProgressOffsets:[],alreadyBilledAdvertiser:!1,studioCreativeId:s.MB,customTrackings:[],customProgressTrackings:[],trackBillable:!1},d={type:"ThirdPartyVastTrackingStore",trackings:[],progressTrackings:[],trackedEvents:[],trackedProgressOffsets:[],customTrackings:[],customProgressTrackings:[]},c={},h=e=>((0,n.Y3)(c[e])&&(c[e]={classicFormatStore:r,headerBiddingFormatStore:o,debugStore:a,vastStore:l,thirdPartyVastStore:d}),c[e]),u=e=>h(e).classicFormatStore,p=e=>h(e).headerBiddingFormatStore,g=e=>h(e).debugStore,m=e=>h(e).vastStore,f=e=>h(e).thirdPartyVastStore,v=e=>t=>(h(e).classicFormatStore=t,t),A=e=>t=>(h(e).headerBiddingFormatStore=t,t),b=e=>t=>(h(e).debugStore=t,t),y=e=>t=>(h(e).vastStore=t,t),w=e=>t=>(h(e).thirdPartyVastStore=t,t)},2456:(e,t,i)=>{"use strict";i.d(t,{cp:()=>v});var s=i(3064),n=i(724),r=i(3288);var o,a,l=i(480),d=i(6300),c=i(920),h=i(1228),u=i(2292),p=i(8036),g=i(8576),m=i(2304),f=i(3840);!function(e){e[e.VIDEO=0]="VIDEO",e[e.MPEG=1]="MPEG",e[e.TV=2]="TV",e[e.VPAIDJS=3]="VPAIDJS"}(o||(o={})),function(e){e.landscape="l",e.square="s",e.vertical="v"}(a||(a={}));class v{static getPreferredMediafileTypes(e){let t=[o.VIDEO,o.VPAIDJS,o.TV,o.MPEG];return h.isDesktop()||(t=(0,p.filter)(t,(e=>e!==o.VPAIDJS)).concat([o.VPAIDJS])),h.isIE()?t=(0,p.filter)(t,(e=>e!==o.TV&&e!==o.MPEG)):h.isSDK()?t=[o.VIDEO,o.VPAIDJS]:h.isIos()&&c.Cc(h.getIosVersion(),"8")?t=e===s.e.HTML5?[o.VIDEO]:h.isIpad()?[o.MPEG,o.TV]:[]:e===s.e.CANVAS&&(t=(0,p.filter)(t,(e=>e!==o.VIDEO))),t}static getElectedMediafiles(e,t){const i=v.getPreferredMediafileTypes(t);let s=[];(0,p.map)(e,(e=>{e.api&&e.api.toLowerCase&&(e.api=e.api.toLowerCase()),e.type&&e.type.toLowerCase&&(e.type=e.type.toLowerCase())}));let n=0;const r=i.length;for(;n<r&&0===s.length;){switch(i[n]){case o.VIDEO:s=(0,p.filter)(e,v.isPlayableVideo);break;case o.TV:s=(0,p.filter)(e,v.isTv);break;case o.MPEG:s=(0,p.filter)(e,v.isMpeg);break;case o.VPAIDJS:s=(0,p.filter)(e,v.isVpaidJS)}n++}return s}static getTargetedBitrate(e){return e>0?e/2:0}static extractMediafileFromBitrate(e,t){if(t){const i=(e,t,s)=>s.length>0?e.bitrate<t?e:i((0,p.head)(s),t,(0,p.tail)(s)):e;return i((0,p.head)(e),t,(0,p.tail)(e))}return e[Math.floor(e.length/2)]}static sortMediafilesByBitrate(e,t){const i=(0,p.map)(e,(e=>(e.bitrate=e.bitrate||2*t.max,e)));let s=(0,p.filter)(i,(e=>e.bitrate<=t.max&&e.bitrate>=t.min));return s=s.length?s:i,s.sort(((e,t)=>t.bitrate-e.bitrate))}static getMaxBitrateForContext(){return h.isMobile()?v.bitrates.mobile:v.bitrates.default}static getMediaProvider(e){switch(e.type){case"application/x-javascript":case"application/javascript":case"text/javascript":return n.S.VPAID;case"video/mpg":case"video/mpeg":case"video/tv":return h.cacheCanvasUsed(!0),n.S.CANVAS;default:return v.isPlayableVideo(e)?n.S.JS:n.S.UNSUPPORTED}}static getOptimalMediaFiles(e,t,i,n,r){if(0===t.length)return null;const o=v.getEncodingCandidate(t.slice()),a=v.getElectedMediafiles(t,r),l=v.getDownloadSpeed();if(r!==s.e.CANVAS&&!c.In(h.getIosVersion(),"8")||0!==a.length&&!v.isVpaidJS(a[0])||!o)if(a.length>1){const t=v.getTargetedBitrate(l),s=v.limitBitrateForHAI(e,t),n=v.extractMediafileFromBitrate(v.sortMediafilesByBitrate(a,v.getMaxBitrateForContext()),s);this.logger.debug(`Picked mediafile ${n.url} with bitrate ${n.bitrate}`),i(n,l)}else if(1===a.length)i(a[0],null);else{const e="No Mediafile for this context";i(null,null,e),v.logger.info("getOptimalMediaFiles",e)}else v.waitForProxy(o.url,v.getMediaProxyBitrate(v.getTargetedBitrate(l)),((e,t)=>{o.url=e,o.type="video/tv",i(e?o:null,l,t)}),n)}static limitBitrateForHAI(e,t){this.logger.debug(`limitBitrateForHAI called with duration ${e} and target bitrate ${t}`);const i=Math.max(30,Math.min(0|e,60)),s=Math.floor(30720/i);return this.logger.debug(`Maximum allowed bitrate ${s} for ${i} seconds`),Math.min(s,t)}static waitForProxy(e,t,i,s){const n=location.hostname.match(/.+\.sandbox\.teads\.net|localdocker/),r="https://[HOST]/transcode?url=[URL]&bitrate=[BITRATE]".replace(/\[HOST\]/,n?n[0]+":18088":"mp.teads.tv").replace(/\[URL\]/,encodeURIComponent(e)).replace(/\[BITRATE\]/,t.toString()),o=u.vQ();let a=!1;o.open("GET",r,!0),o.onreadystatechange=()=>{let e;if(4===o.readyState&&!a){switch(a=!0,o.status){case 200:i(o.responseText);break;case 202:e="Mediaproxy - encoding ongoing - need wait",i(null,e);break;case 201:e="Mediaproxy - encoding init - need one more call to encode",i(null,e);break;case 410:e="Mediaproxy - encoding failed",i(null,e);break;case 400:e="Mediaproxy - bad request",i(null,e);break;default:e="Mediaproxy - other error - "+o.status,i(null,e)}v.logger.debug("proxy resp",o.status),s.info(["proxy","resp",o.status].join(" "))}},o.send(),s.info("proxy call")}static getOptimalMediaFile(e,t,i,n,r){var o,a;h.isCanvasNeeded()&&(n.type=s.e.CANVAS,null===(a=null===(o=n.formatConfig)||void 0===o?void 0:o.allowedPlayer)||void 0===a||a.setValue(s.e.CANVAS)),v.getOptimalMediaFiles(e,t,((e,t,s)=>{if(e){const s=0;r.info("media "+e.type,s),i(e,t?` -> dlSpeed: ${t}kbit/s`:"")}else i(null,s)}),r,n.type)}static getOptimalHeight(e,t,i){return t?Math.ceil(t/v.getRatio(e,i)):0}static getRatio(e,t){const i=!(0,m.i2)(e.url);return!e.height||!e.width||!t&&i&&e.api&&"vpaid"===e.api.toLowerCase()&&e.width>e.height?f.S:e.width/e.height}static getAssetFromMediaProvider(e){let t;switch(e){case n.S.JS:t="teads-vpaid-video.min.js";break;case n.S.CANVAS:t="teads-vpaid-canvas.min.js";break;default:t=""}return t}static getEncodingCandidate(e){let t;return(0,p.forEach)(e,(e=>{let i=e.type||"";switch(e.weight=0,i.split("/").pop()){case"mov":e.weight=150;break;case"mp4":e.weight=100;break;case"webm":case"ogg":case"ogv":e.weight=50}(!t||t.weight<=e.weight)&&(t=t||e,(t.weight<e.weight||t.bitrate<e.bitrate)&&(t=e))})),t.weight?t:null}static getMediaProxyBitrate(e){return e>=1e3?1e3:e>=700?700:e>=500?500:300}static sendMediasToSumologic(e,t,i){try{let s={},n=(0,p.map)((0,p.filter)(e.mediaFiles,(e=>!s[e.type]&&(s[e.type]=!0,!0))),(e=>e.type));const r=(0,p.map)(e.wrappers,(e=>(0,m.K0)(e).hostname)),o=0;i.info(`[mf-${t}] ${n.join(" | ")}||${r.join(" > ")}`,o)}catch(e){v.logger.error("sendMediasToSumologic error",e)}}static getRatioCategory(e){return e.width>e.height?a.landscape:e.width===e.height?a.square:a.vertical}static isMpeg(e){return/^video\/mpe?g$/.test(e.type)}static isTv(e){return"video/tv"===e.type}static isVideo(e){return!v.isMpeg(e)&&!v.isTv(e)&&/^video\/*/.test(e.type)}static isPlayableVideo(e){return v.isVideo(e)&&r.gR(e.type)}static isVpaidJS(e){return"vpaid"===e.api&&e.type.indexOf("javascript")>-1}static getDownloadSpeed(e=window.navigator){var t;return d.cb.fromNullable(null===(t=null==e?void 0:e.connection)||void 0===t?void 0:t.downlink).match({some:e=>1024*e,none:()=>(0,g.CQ)().map((e=>e.sort(((e,t)=>t.transferSize-e.transferSize)))).map((e=>(0,g.sD)(e.slice(0,Math.round(e.length*v.percentResourcesAmount))))).getOrValue(0)})}}v.logger=new l.Y("player.MediaFileHelper"),v.bitrates={mobile:{min:200,max:5e3},default:{min:200,max:1e4}},v.percentResourcesAmount=.1},3288:(e,t,i)=>{"use strict";i.d(t,{gR:()=>o});var s=i(1228),n=i(3336);function r(e){return"video/mp4"===e}function o(e){return(0,s.isSDK)()?(0,s.isIos)()?r(e):!!(0,s.isAndroid)()&&(r(e)||function(e){return"video/webm"===e}(e)):function(e){return n.AT.tryCatch((()=>!!document.createElement("video").canPlayType(e))).getOrElse((()=>!1))}(e)}},3064:(e,t,i)=>{"use strict";var s;i.d(t,{e:()=>s}),function(e){e[e.CANVAS=0]="CANVAS",e[e.HTML5=1]="HTML5",e[e.ANY=2]="ANY"}(s||(s={}))},724:(e,t,i)=>{"use strict";var s;i.d(t,{S:()=>s}),function(e){e[e.UNSUPPORTED=0]="UNSUPPORTED",e[e.JS=1]="JS",e[e.VPAID=2]="VPAID",e[e.CANVAS=3]="CANVAS"}(s||(s={}))},5180:(e,t,i)=>{"use strict";i.d(t,{A:()=>o,a:()=>r});var s=i(5696),n=i(9548);const r={error:s.c.AdError,click:s.c.AdClickThru,pause:s.c.AdPaused,resume:s.c.AdPlaying,skip:s.c.AdSkipped,creativeView:s.c.AdStarted,start:s.c.AdVideoStart,firstQuartile:s.c.AdVideoFirstQuartile,midpoint:s.c.AdVideoMidpoint,thirdQuartile:s.c.AdVideoThirdQuartile,complete:s.c.AdVideoComplete,impression:s.c.AdImpression,close:s.c.AdUserClose,closeLinear:s.c.AdUserClose,progress:s.c.AdRemainingTimeChange,otherAdInteraction:s.c.AdInteraction},o={adChoices:n.c.AdChoicesClickRequest}},9696:(e,t,i)=>{"use strict";i.d(t,{AP:()=>T,C4:()=>f,Ej:()=>w,Qf:()=>k,Sq:()=>C,Y9:()=>E,YN:()=>S,_8:()=>I,_u:()=>b,kD:()=>A,zD:()=>y});var s=i(8036),n=i(6300),r=i(6716),o=i(6040),a=i(6084),l=i(5072);const d=["[","]"],c=["${","}"],h=e=>({type:"StaticPatternBit",pattern:e}),u=e=>({ignoreCase:!1,supportMultipleOccurrences:!1,supportUriEncoded:!1,patternBits:[h(e)],delimiters:[d]}),p={CacheBusting:u("CACHEBUSTING"),ImpressionId:u("impressionId"),ContentPlayHead:u("CONTENTPLAYHEAD"),ErrorCode:u("ERRORCODE"),AssetUri:u("ASSETURI"),MediaFileType:u("MEDIAFILETYPE"),Viewability:u("VIEWABILITY"),BundleId:u("BUNDLEID"),DeviceId:u("DEVICEID"),LimitTracking:u("LIMIT_TRACKING"),StudioCid:u("STUDIO_CID"),SlotType:u("slotType"),DebugFormat:u("DEBUG_FORMAT"),Gdpr:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[h("GDPR")],delimiters:[d,c]},GdprConsent:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[h("GDPR_CONSENT")],delimiters:[d,c]},GdprConsentWithVendorId:{ignoreCase:!0,supportMultipleOccurrences:!0,supportUriEncoded:!0,patternBits:[h("GDPR_CONSENT_"),("\\d+",{type:"DynamicPatternBit",pattern:"\\d+"})],delimiters:[c]}};const g=e=>t=>(0,r.Sg)(t,s.cArray.map((({type:t,pattern:i})=>"StaticPatternBit"===t?e(i):i)),(e=>e.join(""))),m=e=>e.replace(/[[\]{}$]/g,"\\$&"),f=(e,t)=>[e,t],v=(e,[t,i])=>e.replace((({ignoreCase:e,supportMultipleOccurrences:t,delimiters:i,supportUriEncoded:n,patternBits:o})=>{const l=`${e?"i":""}${t?"g":""}`,d=(0,r.Sg)(i,s.cArray.foldLeft([],((e,[t,i])=>{const s=[h(t),...o,h(i)];return[...e,g(a.identity)(s)].concat(n?[g(encodeURIComponent)(s)]:[])})),s.cArray.map((e=>`(${e})`)),(e=>e.join("|")),m);return new RegExp(d,l)})(p[t]),i),A=e=>t=>(0,r.Sg)(e,s.cArray.foldLeft(t,v)),b=()=>[y(0),I(),E(n.MB),C(n.MB),w(0)],y=e=>{const t=e>0?(0,a.offset)(e):"0";return f("ContentPlayHead",t)},w=e=>f("Viewability",String(e)),E=e=>(0,r.Sg)(e,n.cv.map((e=>e.url.toString())),n.cv.fold((()=>""),encodeURIComponent),(e=>f("AssetUri",e))),C=e=>(0,r.Sg)(e,n.cv.map((e=>e.type)),n.cv.fold((()=>"unknown"),a.getExtensionFromMimeType),(e=>f("MediaFileType",e))),I=(e=(0,o.rand)(8))=>f("CacheBusting",e),S=e=>{const t=(0,l.E)(e);return f("Gdpr",(0,l.A)(t))},T=e=>[f("GdprConsent",e),f("GdprConsentWithVendorId",e)],k=e=>f("DebugFormat","[new|"+e.options.getFullContext()+"]")},4136:(e,t,i)=>{"use strict";i.d(t,{CB:()=>v,CS:()=>l,IR:()=>s,MV:()=>u,S6:()=>c,c1:()=>g,gi:()=>m,o5:()=>f,oP:()=>p,oj:()=>d});var s,n=i(8036),r=i(3336),o=i(6716),a=i(6084);!function(e){e.LimitedCapabilities="limitedCapabilities",e.PlacementCall="placementCall",e.FallbackIntegration="passback-integration",e.FallbackNoAd="passback-noAd",e.NoSlotSelector="noSlot-selector",e.HbNoSlotSelector="hbNoSlot-selector",e.NoSlotFilter="noSlot-filter",e.NoSlotAvoid="noSlot-avoid",e.NoSlotSize="noSlot-size",e.NoSlotBtf="noSlot-BTF",e.NoSlotMinimum="noSlot-minimum",e.NoSlotMinimumBelow="noSlot-minimumBelow",e.NoSlotContent="noSlot-content",e.NoSlotPosition="noSlot-position",e.NoSlotVideoArticle="noSlot-videoArticle",e.NoSlotVideoSlot="noSlot-videoSlot",e.NoSlotImageSlot="noSlot-imageSlot",e.NoSlotSafeFrame="noSlot-safeFrame",e.IncompatibilityBrowser="incompatibility-browser",e.IncompatibilityContext="incompatibility-context",e.IncompatibilityFormat="incompatibility-format",e.IncompatibilityVideo="incompatibility-video",e.SlotAvailable="slotAvailable",e.HbSlotAvailable="hbSlotAvailable",e.AdReceived="adReceived",e.AdNotAvailableNetworkError="adNotAvailable-networkError",e.AdNotAvailableServerError="adNotAvailable-serverError",e.AdAvailableErrorParseTimeout="adAvailable-error-parseTimeout",e.AdAvailableErrorBadResponse="adAvailable-error-badResponse",e.AdAvailableErrorVast="adAvailable-error-vast-{code}",e.AdAvailableErrorSettings="adAvailable-error-settings",e.AdAvailableErrorSameAd="adAvailable-error-sameAd",e.AdAvailableSuccess="adAvailable-success",e.AdCall="adCall",e.ErrorBeforeAdReached="errorBeforeAdReached",e.AdReached="adReached",e.NoAdServerError="noAd-serverError",e.NoAdNetworkError="noAd-networkError",e.NoAdVastError="noAd-vastError-{code}",e.NoAdParseTimeout="noAd-parseTimeout",e.NoAdSettingsError="noAd-settingsError",e.NoAdBadResponse="noAd-badResponse",e.NoAdSameAd="noAd-sameAd",e.NoAdIvtDoubleVerify="noAd-ivt-doubleVerify",e.NoAdIvtTag="noAd-ivt-tag",e.NoAdBlockedSiteDoubleVerify="noAd-blockedSite-doubleVerify",e.NoAdBlockedSiteTeads="noAd-blockedSite-teads",e.EarlyClick="early-click",e.ClickReplay="click-replay",e.SlotVisibilityTiny="slotVisibility-tiny",e.SlotVisibilityInvalidDom="slotVisibility-invalid-dom",e.SlotVisibilityHiddenDisplay="slotVisibility-hidden-display",e.SlotVisibilityHiddenOverflow="slotVisibility-hidden-overflow",e.Warning="warning",e.OtherAds="other-ads",e.OtherAdsAfterStart="other-ads-after-start",e.OtherAdsInViewportRange="other-ads-in-viewport-range",e.AdClosed="ad-closed",e.ClientAdCollision="client-ad-collision"}(s||(s={})),(0,o.cp)(r.AT.of,r.I.filterOrElse((0,n.isMemberOf)(["IVT DoubleVerify","IVT Tag","BlockedSite DoubleVerify","Teads Blacklist"]),(e=>`Got an unknown fraud reason: ${e}`)));const l=e=>{if("object"==typeof e)return s.SlotVisibilityHiddenOverflow;switch(e){case"tiny":return s.SlotVisibilityTiny;case"invalid-dom":return s.SlotVisibilityInvalidDom;case"hidden-display":return s.SlotVisibilityHiddenDisplay;case"hidden-overflow":return s.SlotVisibilityHiddenOverflow;default:return(0,a.exhaustive)(e)}},d=e=>"object"==typeof e&&"location"in e?e.location:"",c={[s.AdNotAvailableServerError]:s.NoAdServerError,[s.AdNotAvailableNetworkError]:s.NoAdNetworkError,[s.AdAvailableErrorVast]:s.NoAdVastError,[s.AdAvailableErrorParseTimeout]:s.NoAdParseTimeout,[s.AdAvailableErrorSettings]:s.NoAdSettingsError,[s.AdAvailableErrorBadResponse]:s.NoAdBadResponse,[s.AdAvailableErrorSameAd]:s.NoAdSameAd},h=Object.keys(c),u=(0,o.Sg)(h,n.cArray.filter((0,a.not)((0,a.equals)(s.AdAvailableErrorVast)))),p=(0,o.Sg)(h,n.cArray.map((e=>c[e]))),g=((0,o.Sg)(p,n.cArray.filter((0,a.not)((0,a.equals)(s.NoAdVastError)))),([e,t])=>e.replace("{code}",t.toString())),m=e=>(0,o.Sg)(e.split("-"),n.last,(e=>parseInt(e,10)),(t=>[f(e)?s.AdAvailableErrorVast:s.NoAdVastError,t])),f=e=>new RegExp(s.AdAvailableErrorVast.replace("{code}","\\d{3}")).test(e),v=e=>new RegExp(s.NoAdVastError.replace("{code}","\\d{3}")).test(e)},3540:(e,t,i)=>{"use strict";i.d(t,{a:()=>l,j:()=>s});var s,n=i(8036),r=i(6716),o=i(6084),a=i(2488);!function(e){e[e.XmlParsingError=100]="XmlParsingError",e[e.XmlInvalidSchema=101]="XmlInvalidSchema",e[e.UnsupportedVastVersion=102]="UnsupportedVastVersion",e[e.Trafficking=200]="Trafficking",e[e.PlayerExpectingDifferentLinearity=201]="PlayerExpectingDifferentLinearity",e[e.PlayerExpectingDifferentDuration=202]="PlayerExpectingDifferentDuration",e[e.PlayerExpectingDifferentSize=203]="PlayerExpectingDifferentSize",e[e.GeneralWrapper=300]="GeneralWrapper",e[e.WrapperTimeout=301]="WrapperTimeout",e[e.WrapperLimitReached=302]="WrapperLimitReached",e[e.NoAdsAfterWrappers=303]="NoAdsAfterWrappers",e[e.GeneralLinear=400]="GeneralLinear",e[e.MediaFileNotFound=401]="MediaFileNotFound",e[e.MediaFileTimeout=402]="MediaFileTimeout",e[e.UnsupportedMediaFile=403]="UnsupportedMediaFile",e[e.MediaFileDisplayProblem=405]="MediaFileDisplayProblem",e[e.GeneralNonLinear=500]="GeneralNonLinear",e[e.NonLinearCreativeDimensions=501]="NonLinearCreativeDimensions",e[e.NonLinearUnableFetch=502]="NonLinearUnableFetch",e[e.SupportedNonLinearNotFound=503]="SupportedNonLinearNotFound",e[e.GeneralCompanion=600]="GeneralCompanion",e[e.CompanionDimensions=601]="CompanionDimensions",e[e.CompanionDisplayProblem=602]="CompanionDisplayProblem",e[e.CompanionUnableFetch=603]="CompanionUnableFetch",e[e.SupportedCompanionNotFound=604]="SupportedCompanionNotFound",e[e.Undefined=900]="Undefined",e[e.GeneralVpaid=901]="GeneralVpaid"}(s||(s={}));const l=(0,r.Sg)(Object.keys(s),n.cArray.filter((0,r.cp)((e=>parseInt(e,10)),(0,o.not)(a.Ib))),n.cArray.map((e=>s[e])))},3463:(e,t,i)=>{"use strict";i.d(t,{E:()=>o,c:()=>s});var s,n=i(8036),r=i(6716);!function(e){e.Error="error",e.Click="click",e.Pause="pause",e.Resume="resume",e.Skip="skip",e.CreativeView="creativeView",e.Start="start",e.FirstQuartile="firstQuartile",e.Midpoint="midpoint",e.ThirdQuartile="thirdQuartile",e.Complete="complete",e.Impression="impression",e.Close="close",e.Progress="progress",e.Mute="mute",e.Unmute="unmute",e.Rewind="rewind",e.Fullscreen="fullscreen",e.ExitFullscreen="exitFullscreen",e.Expand="expand",e.Collapse="collapse",e.AcceptInvitationLinear="acceptInvitationLinear",e.AcceptInvitation="acceptInvitation",e.CloseLinear="closeLinear",e.NoAd="noAd",e.NoLinearAd="noLinearAd",e.CustomClicks="customClicks",e.Billable="billable",e.OtherAdInteraction="otherAdInteraction",e.ClickIcon="clickIcon"}(s||(s={}));const o=(0,r.Sg)(Object.keys(s),n.cArray.map((e=>s[e])))},1744:(e,t,i)=>{"use strict";i.d(t,{IR:()=>s.IR,MV:()=>s.MV,S6:()=>s.S6,c1:()=>s.c1,gi:()=>s.gi,o5:()=>s.o5});var s=i(4136);i(3463),i(3540),i(7768),i(7960)},7960:(e,t,i)=>{"use strict";i.d(t,{Ip:()=>u,SG:()=>g,e4:()=>p,gv:()=>c,sV:()=>h});var s=i(8036),n=i(6300),r=i(6716),o=i(2304),a=i(3540),l=i(7768),d=i(4136);const c=["f","ts","fv","action","referer","pageId","pid","auctid","env","pfid","gid","sid","vid","slot","gdpr_status","gdpr_consent","gdpr_reason","gdpr_api_version","gdpr_cmp_id","hb_provider","ad_source_id","error_cause","cid","dsp_campaign_id","dsp_creative_id","scid","studio_cid","hb_h","hb_w"],h=(0,r.Sg)(Object.keys(d.IR),s.cArray.map((e=>d.IR[e])),(0,s.exclude)(d.oP),s.cArray.foldLeft([],((e,t)=>t===d.IR.AdAvailableErrorVast?[...e,...(0,r.Sg)(a.a,s.cArray.map((e=>(0,d.c1)([t,e]))))]:[...e,t]))),u=(0,r.cp)(n.cv.map(String),n.cv.getOrValue("")),p=(0,r.cp)(n.cb.fromNullable,u),g=e=>t=>(0,n.sx)(e).map(Object.keys).map(s.cArray.filter((e=>!t.match(new RegExp(`${e}=[^&]`))))).filter(s.isNotEmpty).match({none:()=>t,some:(0,r.cp)(s.cArray.foldLeft((0,l.UX)(t),((t,i)=>Object.assign(Object.assign({},t),{queryParameters:Object.assign(Object.assign({},t.queryParameters),{[i]:e[i]})}))),(({baseUrl:e,queryParameters:t})=>(0,o.e0)(e,t)))})},1584:(e,t,i)=>{"use strict";i.d(t,{KS:()=>m,QA:()=>w,SC:()=>v,cp:()=>C});var s=i(7960),n=i(7768),r=i(8036),o=i(4040),a=i(480),l=i(6716),d=i(6084),c=i(392),h=i(6300),u=i(3743),p=i(1744);const g=new a.Y("tracker-v2 formatTracker"),m=(e,{trackedEvents:t})=>!(0,r.some)(t,(t=>t.event===e)),f=(e,t)=>i=>{const s=(i,s)=>(0,l.Sg)(p.S6[s],(s=>v(s,s,t,e,i,w(s,e)))),n=(0,l.Sg)(i.trackedEvents,r.cArray.map((0,d.prop)("event")));return(0,l.Sg)(n,(0,l.cp)(r.cArray.filter(p.o5),r.cArray.foldLeft(i,((i,s)=>(0,l.Sg)(s,p.gi,c.Q.fstMap((e=>p.S6[e])),p.c1,(s=>v(s,p.IR.NoAdVastError,t,e,i,w(s,e))))))),(e=>(0,l.Sg)(n,r.cArray.filter((0,r.isMemberOf)(p.MV)),r.cArray.foldLeft(e,s))))},v=(e,t,i,n,a,c,m=d.identity)=>{const{trackStrategy:v,baseUrl:A,formatVersion:b,referer:y,timestamp:w=(0,o.k)()}=n;if(!i(e,a))return e!==p.IR.SlotVisibilityTiny&&e!==p.IR.SlotVisibilityInvalidDom&&e!==p.IR.SlotVisibilityHiddenDisplay&&e!==p.IR.SlotVisibilityHiddenOverflow&&g.debug(`Could not track format event ${e}, tracked events: `,a.trackedEvents),a;const E=["gdpr_status","gdpr_consent","gdpr_reason","gdpr_api_version","gdpr_cmp_id","rpm_reason"],C=({queryParameters:e,businessIds:{insertionId:t,connectionId:i}})=>Object.assign(Object.assign({},(0,u.UV)(e,(e=>(0,r.includes)(s.gv,e)&&!(0,r.includes)(E,e)))),{gid:t,sid:i});return v([c]),(0,l.Sg)(Object.assign(Object.assign({},a),{trackedEvents:[...a.trackedEvents,{event:e,time:w,trackingUrl:c}]}),m,(e=>t===p.IR.AdCall?f({trackStrategy:v,baseUrl:A,formatVersion:b,referer:y,timestamp:w,queryParameters:C(n),trackingUrl:h.MB},i)(e):t===p.IR.AdAvailableSuccess?f(n,i)(e):e))},A=(e,{trackStrategy:t,timestamp:i=(0,o.k)()})=>s=>(0,r.isEmpty)(s.customTrackings)?s:(0,l.Sg)(s.customTrackings,r.cArray.filter((0,l.cp)((0,d.prop)("event"),(0,d.equals)(e))),r.cArray.flatMap((0,d.prop)("trackingUrls")),(0,d.tap)(t),(t=>Object.assign(Object.assign({},s),{trackedEvents:[...s.trackedEvents,...(0,r.map)(t,(t=>({event:e,time:i,trackingUrl:t})))]}))),b=(e,t)=>()=>{const{baseUrl:i,formatVersion:s,referer:r,timestamp:a=(0,o.k)(),queryParameters:l}=t;return(0,n.YQ)((0,n.Sq)(i,Object.assign(Object.assign({},l),{action:e,fv:s,ts:a.toString(),referer:r})))},y=e=>t=>{const{formatVersion:i,referer:s,timestamp:r=(0,o.k)()}=e;return(0,n.YQ)({baseUrl:t,queryParameters:{fv:i,ts:r.toString(),referer:s}})},w=(e,t)=>t.trackingUrl.match({some:y(t),none:b(e,t)}),E={track:(e,t,i)=>v(e,e,E.canTrack,t,i,w(e,t),A(e,t)),trackFormatError:(e,t,i)=>(0,l.Sg)((0,p.c1)([p.IR.AdAvailableErrorVast,e]),(e=>v(e,p.IR.AdAvailableErrorVast,E.canTrack,t,i,w(e,t),A(e,t)))),canTrack:m},C=E},8076:(e,t,i)=>{"use strict";i.d(t,{YF:()=>m,cp:()=>v,o$:()=>p,sM:()=>f,wr:()=>g});var s=i(8036),n=i(6300),r=(i(3463),i(8548)),o=i(4040),a=i(6716),l=i(1584),d=(i(8768),i(7768));const c=e=>(0,s.filter)(Object.keys(e),(e=>!(0,s.includes)(["cs","revenue_advertising","revenue_fee","hb_bid_response_price_usd"],e)&&!/(e|s|c|_|rpm_)?(cost|revenue|hb_bid_response_price)(_fp)?(_curr)?/.test(e)&&!/publisher_platform_fee(_curr|_waived)?/.test(e))),h={track:(e,t,i)=>{const{trackStrategy:s,trackingUrl:n,timestamp:r=(0,o.k)()}=t,a=(e=>(0,d.YQ)((0,d.UX)(e),c))(n);return s([a]),Object.assign(Object.assign({},i),{trackedEvents:[...i.trackedEvents,{event:e,time:r,trackingUrl:a}]})}},u=(e,t,i,n)=>(0,a.Sg)(e,s.cArray.foldLeft(t,((e,{event:t,trackingUrl:s})=>h.track(t,Object.assign(Object.assign({},i),{trackingUrl:(0,d.aw)(s,n)}),e)))),p=(e,t,i,r=n.MB)=>(n,o)=>{const a=l.cp.track(e,i,n);return[a,u((0,s.difference)(n.trackedEvents)(a.trackedEvents),o,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),r)]},g=(e,t,i,r=n.MB)=>(n,o)=>{const a=l.cp.trackFormatError(e,i,n);return[a,u((0,s.difference)(n.trackedEvents)(a.trackedEvents),o,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),r)]},m=(e,t,i,o=n.MB)=>(n,a)=>{const l=r.c.track(e,i,n);return[l,u((0,s.difference)(n.trackedEvents)(l.trackedEvents),a,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),o)]},f=(e,t,i,o=n.MB)=>(n,a)=>{const l=r.c.trackFormatError(e,i,n);return[l,u((0,s.difference)(n.trackedEvents)(l.trackedEvents),a,Object.assign(Object.assign({},t),{timestamp:i.timestamp}),o)]},v=h},8548:(e,t,i)=>{"use strict";i.d(t,{c:()=>a});var s=i(1744),n=i(6716),r=i(1584);const o={track:(e,t,i)=>(0,r.SC)(e,e,o.canTrack,t,i,(0,r.QA)(e,t)),trackFormatError:(e,t,i)=>(0,n.Sg)((0,s.c1)([s.IR.AdAvailableErrorVast,e]),(e=>(0,r.SC)(e,s.IR.AdAvailableErrorVast,o.canTrack,t,i,(0,r.QA)(e,t)))),canTrack:r.KS},a=o},8768:(e,t,i)=>{"use strict";i.d(t,{Y9:()=>_,wP:()=>L,GD:()=>x});var s=i(6300),n=i(6716),r=i(3463),o=i(9696),a=i(4040),l=i(6084),d=i(480),c=i(8036);const h=[r.c.Progress,r.c.Click,r.c.Resume,r.c.Pause,r.c.Mute,r.c.Unmute,r.c.Expand,r.c.Collapse],u=(e,t,i)=>s=>0===s.customTrackings.length?s:(0,n.Sg)(s.customTrackings,c.cArray.filter((0,n.cp)((0,l.prop)("event"),(0,l.equals)(e))),c.cArray.flatMap((0,l.prop)("trackingUrls")),(n=>n.length>0?i(e,(()=>!0),n,t,s):s)),p=(e,t,i)=>s=>0===s.customTrackings.length?s:(0,n.Sg)(s.customProgressTrackings,c.cArray.filter((0,n.cp)((0,l.prop)("offset"),(0,l.equals)(e))),c.cArray.flatMap((0,l.prop)("trackingUrls")),(e=>e.length>0?i(r.c.Progress,(()=>!0),e,t,s):s)),g=(e,t,i,s)=>o=>1===e?o:(0,n.Sg)((0,n.Sg)([...Array(e-1)],c.cArray.mapWithIndex(((e,t)=>t+1))),(0,c.difference)(o.trackedProgressOffsets),c.cArray.map((e=>{var t,i;return[e,null!==(i=null===(t=(0,c.find)(o.progressTrackings,(t=>t.offset===e)))||void 0===t?void 0:t.trackingUrls)&&void 0!==i?i:[]]})),c.cArray.filter((([,e])=>e.length>0)),c.cArray.foldLeft(o,((e,[n,o])=>s(r.c.Progress,((e,t)=>i(e,t)&&!(0,c.includes)(t.trackedProgressOffsets,n)),o,t,e,(e=>Object.assign(Object.assign({},e),{trackedProgressOffsets:[...e.trackedProgressOffsets,n]})))))),m=new d.Y("tracker-v2 thirdPartyVastTracker"),f=(e,t,i,s,n,r=l.identity)=>{const{trackStrategy:d,macros:u,timestamp:p=(0,a.k)()}=s;return t(e,n)?r((0,c.reduce)(i,((t,i)=>{const s=(0,o.kD)(u)(i);return d([s]),Object.assign(Object.assign({},t),{trackedEvents:[...t.trackedEvents,{event:e,time:p,trackingUrl:s}]})}),n)):(m.debug(`Could not track third-party VAST event ${e}, tracked events: `,n.trackedEvents,"multiple-allowed events: ",h),n)},v={track:(e,t,i)=>{var s,r;return(0,n.Sg)(f(e,v.canTrack,null!==(r=null===(s=(0,c.find)(i.trackings,(t=>t.event===e)))||void 0===s?void 0:s.trackingUrls)&&void 0!==r?r:[],t,i),u(e,t,f))},trackProgress:(e,t,i)=>(0,n.Sg)(i,g(e,t,v.canTrack,f),(i=>{var s,n;return f(r.c.Progress,((t,i)=>v.canTrack(t,i)&&!(0,c.includes)(i.trackedProgressOffsets,e)),null!==(n=null===(s=(0,c.find)(i.progressTrackings,(t=>t.offset===e)))||void 0===s?void 0:s.trackingUrls)&&void 0!==n?n:[],t,i,(t=>Object.assign(Object.assign({},t),{trackedProgressOffsets:[...t.trackedProgressOffsets,e]})))}),p(e,t,f)),trackVastError:(e,t,i)=>{var s,a;const l=Object.assign(Object.assign({},t),{macros:[...t.macros,(0,o.C4)("ErrorCode",e.toString())]});return(0,n.Sg)(f(r.c.Error,v.canTrack,null!==(a=null===(s=(0,c.find)(i.trackings,(e=>e.event===r.c.Error)))||void 0===s?void 0:s.trackingUrls)&&void 0!==a?a:[],l,i),u(r.c.Error,l,f))},canTrack:(e,{trackedEvents:t})=>!(0,c.some)(t,(t=>t.event===e))||(0,c.isMemberOf)(h)(e)},A=v;var b=i(1228),y=i(2304),w=i(7768);const E=new d.Y("tracker-v2 teadsVastTracker"),C=e=>Object.assign(Object.assign({},e),{alreadyBilledAdvertiser:!0,trackBillable:!0}),I=e=>{const t=b.canAutoplay()?"apa":"apna",i=b.isVideo()&&b.isCanvasUsed()?"apf":"apnf";return(0,w.eI)((0,y.aE)(e,"plft",[t,i].join(",")))},S=(e,t,i,d,u,p=l.identity)=>{const{trackStrategy:g,formatVersion:m,referer:f,timestamp:v=(0,a.k)(),macros:A,slotType:b,creativeSize:S}=d;return t(e,u)?(0,n.Sg)(i,c.cArray.foldLeft(u,((t,i)=>{const[a,l]=(d=t,c=i,(0,y.YD)(c,"revenue")?d.alreadyBilledAdvertiser&&c.indexOf("?dr=0")<0&&c.indexOf("&dr=0")<0?[d,(0,w.eI)(c+"&dr=1")]:[C(d),c]:[d,c]);var d,c;const h=(0,n.cp)((0,o.kD)(A),(e=>t=>(0,w.eI)((0,y.aE)(t,"slot",encodeURIComponent(e))))(b),(e=>t=>(0,w.eI)((0,y.aE)(t,"fv",encodeURIComponent(e))))(m),(u=t.studioCreativeId,e=>(0,n.Sg)(u,s.cv.fold((()=>e),(t=>(0,w.eI)((0,y.aE)(e,"studio_cid",encodeURIComponent(t))))))),I,((e,t)=>i=>e===r.c.Click||e===r.c.Impression?t.match({some:e=>{const t=(0,y.aE)(i,"hb_w",encodeURIComponent(e.width));return(0,w.eI)((0,y.aE)(t,"hb_h",encodeURIComponent(e.height)))},none:()=>(0,w.eI)(i)}):(0,w.eI)(i))(e,S),(e=>t=>(0,w.eI)((0,y.aE)(t,"referer",encodeURIComponent(e))))(f))(l);var u;return g([h]),Object.assign(Object.assign({},a),{trackedEvents:[...a.trackedEvents,{event:e,time:v,trackingUrl:h}]})})),p):(E.debug(`Could not track VAST event ${e}, tracked events: `,u.trackedEvents,"multiple-allowed events: ",h),u)},T={track:(e,t,i)=>{var s,r;return(0,n.Sg)(S(e,T.canTrack,null!==(r=null===(s=(0,c.find)(i.trackings,(t=>t.event===e)))||void 0===s?void 0:s.trackingUrls)&&void 0!==r?r:[],t,i),u(e,t,S))},trackProgress:(e,t,i)=>(0,n.Sg)(i,g(e,t,T.canTrack,S),(i=>{var s,n;return S(r.c.Progress,((t,i)=>T.canTrack(t,i)&&!(0,c.includes)(i.trackedProgressOffsets,e)),null!==(n=null===(s=(0,c.find)(i.progressTrackings,(t=>t.offset===e)))||void 0===s?void 0:s.trackingUrls)&&void 0!==n?n:[],t,i,(t=>Object.assign(Object.assign({},t),{trackedProgressOffsets:[...t.trackedProgressOffsets,e]})))}),p(e,t,S)),trackVastError:(e,t,i)=>{var s,a;const l=Object.assign(Object.assign({},t),{macros:[...t.macros,(0,o.C4)("ErrorCode",e.toString())]});return(0,n.Sg)(S(r.c.Error,T.canTrack,(0,n.Sg)(null!==(a=null===(s=(0,c.find)(i.trackings,(e=>e.event===r.c.Error)))||void 0===s?void 0:s.trackingUrls)&&void 0!==a?a:[],c.cArray.map((d=t.errorCause,e=>d.match({some:t=>(0,w.eI)((0,y.aE)(e,"error_cause",encodeURIComponent(t))),none:()=>e})))),l,i),u(r.c.Error,l,S));var d},canTrack:(e,{trackedEvents:t})=>(e===r.c.Pause?(0,c.some)(t,(e=>e.event===r.c.Start)):e!==r.c.Resume||(0,c.some)(t,(e=>e.event===r.c.Pause)))&&(!(0,c.some)(t,(t=>t.event===e))||(0,c.isMemberOf)(h)(e))},k=T,P=(k.track,k.trackProgress,k.trackVastError,A.track,A.trackProgress,A.trackVastError,e=>([t,i])=>[Object.assign(Object.assign({},t),{trackBillable:!1}),t.trackBillable?A.track(r.c.Billable,e,i):i]),x=(e,t)=>(i,s)=>(0,n.Sg)([k.track(e,t,i),A.track(e,t,s)],P(t)),L=(e,t)=>(i,s)=>(0,n.Sg)([k.trackProgress(e,t,i),A.trackProgress(e,t,s)],P(t)),_=(e,t,i)=>(r,o)=>(0,n.Sg)([k.trackVastError(e,Object.assign(Object.assign({},i),{errorCause:s.cb.of(t)}),r),A.trackVastError(e,i,o)],P(i))},7768:(e,t,i)=>{"use strict";i.d(t,{Sq:()=>u,UX:()=>g,YQ:()=>y,_U:()=>c,aw:()=>h,eI:()=>d,uU:()=>p});var s=i(8036),n=i(3743),r=i(6300),o=i(6716),a=i(2304),l=i(6040);const d=e=>e,c=e=>e,h=(e,t=r.MB)=>{const i=g(e);return y(Object.assign(Object.assign({},i),{queryParameters:Object.assign(Object.assign(Object.assign({},i.queryParameters),{action:`debug-${i.queryParameters.action}`}),t.map((e=>({debug_metadata:encodeURIComponent(e)}))).getOrValue({}))}))},u=(e,t)=>({baseUrl:e,queryParameters:Object.assign(Object.assign({},t),{f:"1"})}),p=(e,t=r.MB)=>y(Object.assign(Object.assign({},e),{queryParameters:Object.assign(Object.assign(Object.assign({},e.queryParameters),{action:`debug-${e.queryParameters.action}`,f:"1"}),t.map((e=>({debug_metadata:e}))).getOrValue({}))})),g=e=>{const t=a.K0(e),i=(0,o.Sg)(t.search.substring(1).split("&"),s.cArray.filter(l.isNotEmpty),s.cArray.map((e=>e.split("="))),(e=>(0,s.reduce)(e,((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:decodeURIComponent(i)})),{})));return{baseUrl:`${t.protocol}//${t.host}${/^\//.test(t.pathname)?t.pathname:`/${t.pathname}`}`,queryParameters:i}},m=["gdpr_api_version","gdpr_cmp_id","gdpr_consent"],f=e=>(0,s.filter)(Object.keys(e),(t=>""!==e[t]||(0,s.isMemberOf)(m)(t))),v=e=>Object.keys(e),A=e=>e.sort(((e,t)=>"action"===t?1:"action"===e||"referer"===t?-1:0)),b=e=>/\?/.test(e)?`${e}&`:`${e}?`;function y({baseUrl:e,queryParameters:t},i=v){return(0,o.cp)(f,(e=>n.UV(t,(t=>(0,s.includes)(e,t)))),i,A,(i=>`${b(e)}${(0,s.map)(i,(e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")}`))(t)}},152:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});const s=e=>e},3092:(e,t,i)=>{"use strict";i.d(t,{c:()=>m});var s=i(4188),n=i(2508),r=i(304),o=i(688),a=i(480),l=i(6896),d=i(8808),c=i(1228),h=i(2292),u=i(9312),p=i(2928),g=i(2304);class m extends s.c{constructor(e,t,i,s={}){super(e,t,i),this.parameters=s,this.defaultVolume=0,this.logger=new a.Y("canvas.player.CanvasPlayer"),this.audioSyncDiff=.5,this.waitForPlay=!1,this.logger.debug("constructor()",e,t,i,s.assetsPath),this.parameters.assetsPath&&this.parameters.assetsPath.match(/http:|https:/)||(this.logger.warn("assetsPath replace with default (relative path not allow)"),this.parameters.assetsPath=window.location.protocol+"//a.teads.tv/media/player")}load(e,t=!1,i=u.I.NO_STREAM){this.logger.debug("load()",e,t,i),e?(this.url=(0,g.iI)(e),this.dispatch(d.g.LOAD_START),this.getMeta(this.url,(e=>{var s=this.url.split("/");s.pop(),this.video=new o.E(s.join("/"),e,i,this),this.audio=new n.c(s.join("/"),e,i,this),this.buffer=new r.c(this),t&&this.listen(d.g.CAN_PLAY,(()=>this.play())),this.buffer.show(),this.listen(d.g.CAN_PLAY,(()=>this.buffer.hide())),this.listen(d.g.ENDED,(()=>this.audio.release())),this.video.listen(d.g.STALLED,(()=>this.dispatch(d.g.STALLED))),this.video.listen(d.g.STALLED,(()=>this.pause(!0))),this.video.listen(d.g.RESUME_AFTER_STALLED,(()=>this.dispatch(d.g.RESUME_AFTER_STALLED))),this.video.listen(d.g.RESUME_AFTER_STALLED,(()=>this.play())),this.video.listen(d.g.TIME_UPDATE,(()=>this.onVideoProgress())),this.video.listen(d.g.CAN_PLAY,(()=>this.canPlayAll())),this.audio.listen(d.g.CAN_PLAY,(()=>this.canPlayAll())),this.video.listen(d.g.ENDED,(()=>this.dispatch(d.g.ENDED))),this.video.listen(d.g.LOADED,(()=>this.dispatch(d.g.LOADED))),this.video.listen(d.g.ERROR,(()=>this.dispatch(d.g.ERROR,{error:"An error occured with the video."})))}))):this.video.state===p.K.PLAYING&&this.pause()}play(){this.logger.info("play()"),this.canplay()?(this.waitForPlay=!1,this.video.play(),this.audio.play(),this.dispatch(d.g.PLAY),this.dispatch(d.g.PLAYING)):this.waitForPlay||(this.waitForPlay=!0,this.dispatch(d.g.STALLED),this.dispatch(d.g.PAUSE),this.listen(d.g.CAN_PLAY,(()=>{this.dispatch(d.g.RESUME_AFTER_STALLED),this.play()})))}pause(e=!1){this.video&&this.audio&&this.video.state!==p.K.ENDED?(this.video.pause(),this.audio.pause(),this.dispatch(d.g.PAUSE),this.logger.info("pause()"),e||this.video.state!==p.K.STALLED||(this.video.cleanStallTimeout(),this.buffer.hide())):(this.muteEvent(d.g.CAN_PLAY),this.waitForPlay=!1)}canplay(){return!(!this.video||!this.audio)&&this.video.canplay()&&this.audio.canplay()}get src(){return this.url}set src(e){this.load(e,!1,u.I.FULL)}get currentTime(){return this.video?this.video.getCurrentTime():0}set currentTime(e){this.video&&(this.logger.info("set currentTime",e),this.dispatch(d.g.SEEKING),this.video.setCurrentTime(e)&&(this.audio.currentTime=e),this.dispatch(d.g.SEEKED))}get duration(){return this.video&&this.audio?this.video.duration||this.audio.duration:0}get volume(){return this.audio?this.audio.volume:0}set volume(e){this.logger.debug("set volume",e),this.audio?(this.audio.volume=e,this.audio.canplay()&&this.video.state===p.K.PLAYING&&(()=>{this.audio.play(this.currentTime)})(),this.dispatch(d.g.VOLUME_CHANGE,{value:e})):this.defaultVolume=e}onVideoProgress(){if(this.audio.api&&this.audio.playing()){var e=this.audio.currentTime-this.currentTime,t=Math.abs(e);t>=this.audioSyncDiff&&(e>0||this.video.meta.tv?this.video.setCurrentTime(this.audio.currentTime)||this.video.setCurrentTime(this.currentTime+this.audioSyncDiff):this.audio.currentTime=this.currentTime,this.logger.debug("sync audio (diff/audioTime)",t,this.audio.currentTime),this.dispatch(d.g.AUDIO_SYNC,{value:t}))}this.dispatch(d.g.TIME_UPDATE)}canPlayAll(){this.canplay()&&(this.dispatch(d.g.CAN_PLAY),this.dispatch(d.g.LOADED_METADATA))}getMeta(e,t){var i=(0,h.vQ)();i.open("GET",e.replace(/(\.mpg|\.mpeg|\.tv)(?!\/)/gi,".meta?v2"),!0),i.responseType="json",i.addEventListener("load",(e=>{if(i.response){var s="string"==typeof i.response?JSON.parse(i.response):i.response;!s.tv&&((0,c.isChromeIos)()||(0,c.isUIWebview)()||(0,c.isFacebookWebview)()||(0,c.isIpad)())?this.dispatch(d.g.ERROR,{error:"The metadata are missing."}):t(s)}else this.dispatch(d.g.ERROR,{error:"No response from the HTTPRequest, did the file exist?"})})),i.addEventListener("error",(e=>{this.dispatch(d.g.ERROR,{error:"An error occured with the HTTPRequest."}),(0,l.m)(this.logger.error,this.logger)})),i.send()}}},2508:(e,t,i)=>{"use strict";i.d(t,{c:()=>c});var s=i(3419),n=i(3176),r=i(8904),o=i(8808),a=i(1228),l=i(6084),d=i(920);class c extends s.c{constructor(e,t,i,s){super(),this.baseUrl=e,this.meta=t,this.stream=i,this.player=s,t.audio.length&&this.init()}authorizeAudio(e){this.api?this.api.authorizeAudio(e):e()}play(e=0){this.api&&this.api.play(e)}pause(){this.api&&this.api.pause()}get duration(){return this.api?this.api.duration:0}set currentTime(e){this.api&&(this.api.currentTime=e)}get currentTime(){return this.api?this.api.currentTime:0}get volume(){return this.api?this.api.volume:0}set volume(e){this.api&&(this.api.volume=e)}get authorized(){return!this.api||this.api.authorized}canplay(){return!this.api||this.api.canplay()}playing(){return!!this.api&&this.api.playing()}release(){this.api&&this.api.release()}init(){((0,a.isAndroid)()||(0,d.In)((0,a.getIosVersion)(),"9.1")&&this.meta.infos.audio_size<4e5)&&(0,l.getAudioContext)()?this.api=new n.c(this.baseUrl,this.meta,this.stream,this.player.defaultVolume):this.api=new r.c(this.baseUrl,this.meta,this.player.defaultVolume),this.api.listen(o.g.CAN_PLAY,(()=>this.dispatch(o.g.CAN_PLAY)))}}},304:(e,t,i)=>{"use strict";i.d(t,{c:()=>o});var s=i(8808),n=i(2936),r=i.n(n);class o{constructor(e){this.player=e,this.initBufferDiv(),this.player.video.listen(s.g.STALLED,(()=>this.show())),this.player.video.listen(s.g.RESUME_AFTER_STALLED,(()=>this.hide())),this.player.video.listen(s.g.TIME_UPDATE,(()=>this.hide())),this.player.listen(s.g.RESIZE,(e=>this.resize(e)))}show(){this.player.container.insertBefore(this.container,this.player.html5video||this.player.canvas||null)}hide(){this.container.parentNode&&this.player.container.removeChild(this.container)}resize(e){this.container.style.setProperty("top",e.height/2-this.container.offsetHeight+"px"),this.container.style.setProperty("left",e.width/2-this.container.offsetWidth/2+"px")}initBufferDiv(){var e=document.createElement("div");e.innerHTML=o.TEMPLATE,this.container=e.firstChild}}o.TEMPLATE=r()},4188:(e,t,i)=>{"use strict";i.d(t,{c:()=>c});var s=i(5584),n=i(3419),r=i(8808),o=i(684),a=i(480),l=i(6300);const d=new a.Y("Canvas");class c extends n.c{constructor(e,t,i){super(),this.container=e,this.cWidth=t,this.cHeight=i,this.totalPrintingTime=0,this.totalPrintedFrame=0,this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.canvas.style.setProperty("background","#000"),this.canvasContext=this.canvas.getContext("2d"),e.appendChild(this.canvas),this.initWebGL()}get width(){return this.cWidth}set width(e){this.cWidth=e,this.resize()}get height(){return this.cHeight}set height(e){this.cHeight=e,this.resize()}get videoHeight(){return this._videoHeight}set videoHeight(e){this._videoHeight=e}get videoWidth(){return this._videoWidth}set videoWidth(e){this._videoWidth=e}get parentNode(){return this.html5video?this.html5video.parentNode:this.canvas.parentNode}get style(){return this.html5video?this.html5video.style:this.canvas.style}useCustomDisplay(e){this.html5video=e,l.cb.fromNullable(this.canvas.parentNode).forEach((t=>t.replaceChild(e,this.canvas))),this.resize()}resize(e,t){l.cb.fromNullable(this.html5video).match({some:()=>this.resizeHtml5(e,t),none:()=>this.resizeCanvas(e,t)}),this.dispatch(r.g.RESIZE,{width:this.width,height:this.height})}resizeCanvas(e,t){e&&(this.canvas.width=this.decoderWidth=e),t&&(this.canvas.height=this.decoderHeight=t);let i=this.cWidth/this.canvas.width,s=this.cHeight/this.canvas.height,n=parseInt(Math.max((this.cHeight-this.canvas.height*i)/2,0).toFixed(2),10),r=parseInt(Math.max((this.cWidth-this.canvas.width*s)/2,0).toFixed(2),10),a=Math.min(i,s);(0,o.applyVendorProperties)(this.canvas,"transformOrigin","0 0"),(0,o.applyVendorProperties)(this.canvas,"transform","translateX("+r+"px) translateY("+n+"px) scale("+a+")"),e&&t&&(this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,e,t)):this.canvasContext&&(this.currentRGBA=this.canvasContext.getImageData(0,0,e,t),(0,o.fillArray)(this.currentRGBA.data,255)))}resizeHtml5(e,t){this.html5video.style.setProperty("width",`${this.width}px`),this.html5video.style.setProperty("height",`${this.height}px`)}renderFrame(e){var t=(0,o.now)();this.gl?this.renderFrameGL(e):this.renderFrame2D(e),this.totalPrintingTime+=(0,o.now)()-t,this.totalPrintedFrame++}renderHtmlImageElement(e){var t=(0,o.now)();this.canvasContext&&this.canvasContext.drawImage(e,0,0),this.totalPrintingTime+=(0,o.now)()-t,this.totalPrintedFrame++}averagePrintingTime(){return this.totalPrintingTime/this.totalPrintedFrame}initWebGL(){try{this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(e){return d.error(`Unable to get a WebGL context: "${e}"`),!1}if(!this.gl)return!1;var e=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),this.gl.STATIC_DRAW),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.compileShader(this.gl.VERTEX_SHADER,s.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.program,this.compileShader(this.gl.FRAGMENT_SHADER,s.SHADER_FRAGMENT_YCBCRTORGBA)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw new Error(this.gl.getProgramInfoLog(this.program));this.gl.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var t=this.gl.getAttribLocation(this.program,"vertex");return this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0),this.loadingProgram=this.gl.createProgram(),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.VERTEX_SHADER,s.SHADER_VERTEX_IDENTITY)),this.gl.attachShader(this.loadingProgram,this.compileShader(this.gl.FRAGMENT_SHADER,s.SHADER_FRAGMENT_LOADING)),this.gl.linkProgram(this.loadingProgram),this.gl.useProgram(this.loadingProgram),t=this.gl.getAttribLocation(this.loadingProgram,"vertex"),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0),!0}renderFrameGL(e){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.YTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.codedWidth,this.canvas.height,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e.currentY),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CBTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e.currentCr),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.CRTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e.halfWidth,this.canvas.height/2,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,e.currentCb),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}compileShader(e,t){var i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw new Error(this.gl.getShaderInfoLog(i));return i}createTexture(e,t){var i=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),e),i}YCbCrToRGBA(e){for(var t,i,s,n,r,o=e.currentY,a=e.currentCb,l=e.currentCr,d=this.currentRGBA.data,c=0,h=e.codedWidth,u=e.codedWidth+(e.codedWidth-this.decoderWidth),p=0,g=e.halfWidth-(this.decoderWidth>>1),m=0,f=4*this.decoderWidth,v=4*this.decoderWidth,A=this.decoderWidth>>1,b=this.decoderHeight>>1,y=0;y<b;y++){for(var w=0;w<A;w++){t=a[p],i=l[p],p++,s=i+(103*i>>8)-179,n=(88*t>>8)-44+(183*i>>8)-91,r=t+(198*t>>8)-227;var E=o[c++],C=o[c++];d[m]=E+s,d[m+1]=E-n,d[m+2]=E+r,d[m+4]=C+s,d[m+5]=C-n,d[m+6]=C+r,m+=8;var I=o[h++],S=o[h++];d[f]=I+s,d[f+1]=I-n,d[f+2]=I+r,d[f+4]=S+s,d[f+5]=S-n,d[f+6]=S+r,f+=8}c+=u,h+=u,m+=v,f+=v,p+=g}}renderFrame2D(e){this.YCbCrToRGBA(e),this.canvasContext&&this.canvasContext.putImageData(this.currentRGBA,0,0)}}},3419:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});var s=i(480);class n{constructor(){this.loggerED=new s.Y("canvas.player.components.EventDispatcher"),this.cb={},this.addEventListener=this.listen,this.removeEventListener=this.muteEvent}listen(e,t,i=!1){this.cb[e]||(this.cb[e]=[]),this.cb[e].push(t)}muteEvent(e,t){this.cb[e]?t&&-1!==this.cb[e].indexOf(t)?this.cb[e].splice(this.cb[e].indexOf(t),1):t?this.loggerED.error("call muteEvent for",e,"but handler ",t," does not exist for this event"):this.cb[e]=[]:this.loggerED.error("call muteEvent for",e,"but handlers for this event are empty")}dispatch(e,t){this.cb[e]&&(t?t.type=e:t={type:e},this.cb[e].forEach((function(e,i){e(t)})))}dispatchEvent(e){return this.loggerED.debug("dispatchEvent method is not implemented",e),!0}}},9972:(e,t,i)=>{"use strict";i.d(t,{c:()=>d});var s=i(3419),n=i(2928),r=i(480),o=i(6896),a=i(8808),l=i(2292);class d extends s.c{constructor(e,t,i){super(),this.baseUrl=e,this.chunkUrls=t,this.streamType=i,this.chunkLoaded=0,this.chunkLength=0,this.loggerF=new r.Y("canvas.player.components.File"),this.chunkNumStart=1,this.chunkNumCanPlay=3,this.chunkLength=this.chunkUrls.length,this.streamLoad()}canplay(){return this.state===n.K.CAN_PLAY||this.state===n.K.PLAYING||this.state===n.K.PAUSED||this.state===n.K.LOADED||this.state===n.K.ENDED}streamLoad(){const e=this.baseUrl+"/"+this.chunkUrls.shift(),t=(0,l.vQ)();t.open("GET",e,!0),t.responseType="arraybuffer",t.addEventListener("load",(e=>{this.chunkLoaded++,this.chunkLoaded===this.chunkNumStart?this.dispatch(a.g.LOADED_DATA,t.response):this.dispatch(a.g.PROGRESS,t.response),(this.chunkLoaded===this.chunkNumCanPlay||this.chunkLength<this.chunkNumCanPlay)&&this.dispatch(a.g.CAN_PLAY),this.chunkLoaded===this.chunkLength&&this.dispatch(a.g.LOADED),this.chunkUrls.length&&this.streamLoad()})),t.addEventListener("error",(0,o.m)(this.loggerF.error,this.loggerF)),t.send()}}},8904:(e,t,i)=>{"use strict";i.d(t,{c:()=>a});var s=i(1228),n=i(3419),r=i(2928),o=i(8808);class a extends n.c{constructor(e,t,i=0){super(),this.baseUrl=e,this.meta=t,this.fakeVolume=i,this.touchOk=!1,this.node=document.createElement("audio"),this.node.src=this.baseUrl+"/"+this.meta.audio[0].replace(/\.mp3\.\w\w\w/gi,".mp3"),this.node.preload="auto",this.dispatch(o.g.CAN_PLAY),s.isIos()&&(this.fakeVolume=0)}authorizeAudio(e=(()=>{})){(!this.touchOk||this.node.readyState<=2)&&(this.touchOk=!0,this.node.play(),this.node.pause(),e())}play(e=0){0!==this.fakeVolume&&this.state!==r.K.PLAYING&&(this.node.readyState<=2?setTimeout((()=>this.play(e+.1)),100):(e&&(this.currentTime=e),this.node.play(),this.state=r.K.PLAYING))}pause(){this.node.pause(),this.state=r.K.PAUSED}get duration(){return this.node.duration}set currentTime(e){this.node.currentTime=e}get currentTime(){return this.node.currentTime}get volume(){return this.fakeVolume}set volume(e){0===e&&this.pause(),this.fakeVolume=e,this.node.volume=e}get authorized(){return this.touchOk&&this.node.readyState>=3}canplay(){return!0}playing(){return this.state===r.K.PLAYING}release(){}}},5924:(e,t,i)=>{"use strict";i.d(t,{c:()=>p});var s=i(3419),n=i(2928),r=i(2292),o=i(684),a=i(8808),l=i(1228),d=i(6300),c=i(4456),h=i(6896),u=i(2488);class p extends s.c{constructor(e,t,i,s){super(),this.meta=t,this.player=s,this.videoFrames=[],this.headBuffer=0,this.head=0,this.frameWait=1e3/24,this.frameRate=24,this.frameCachedLimit=24,this.reading=!1,this.decodingTime=0,this.extractTime=0,this.extractCount=0,this.load(e+"/"+t.tv)}canplay(){return this.head+this.frameCachedLimit<=this.videoFrames.length}play(){this.state!==n.K.PLAYING&&(this.state=n.K.PLAYING,this.isTickTimerStarted()||this.initTickTimer())}pause(){this.state!==n.K.STALLED&&(this.state=n.K.PAUSED)}getCurrentTime(){return this.state===n.K.INIT?0:this.head/this.frameRate}setCurrentTime(e){const t=Math.ceil(e*this.frameRate);return!!this.videoFrames[t]&&(this.head=t,this.player.renderHtmlImageElement(this.videoFrames[this.head]),!0)}get duration(){return parseFloat(this.meta.infos.duration)}get averageDecodingTime(){return this.decodingTime/this.videoFrames.length}get averageExtractTime(){return this.extractTime/this.extractCount}cleanStallTimeout(){}load(e){this.xhr=(0,r.vQ)(),this.xhr.open("GET",e,!0),this.xhr.responseType="text",this.xhr.onreadystatechange=(0,h.m)(this.onStateChange,this),this.xhr.onload=(0,h.m)(this.onload,this),this.xhr.send()}onStateChange(){this.xhr.responseText&&this.xhr.readyState>=3&&!this.reading&&(this.slidingWindowSize=d.cb.fromNullable(this.meta.infos.maxFrameSize).filter(u.Ib).map((e=>e+26)).getOrValue(10*this.meta.infos.averageFrameSize),this.readResponseRecursive())}readResponseRecursive(){if(this.reading){const e=(0,o.now)(),t=this.xhr.responseText.substr(this.headBuffer,this.slidingWindowSize),i=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)frame\\["+(this.videoFrames.length+1)+"\\]").exec(t);if(this.extractTime+=(0,o.now)()-e,this.extractCount++,i)this.headBuffer+=7+this.videoFrames.length.toString().length+i[2].length,this.extractFrame(i);else{if(this.loaded){const e=new RegExp("frame\\[("+this.videoFrames.length+")\\](.*)").exec(t);e&&(this.headBuffer+=7+this.videoFrames.length.toString().length+e[2].length,this.extractFrame(e))}this.headBuffer>=this.xhr.responseText.length&&(this.reading=!1,this.frameCachedLimit=0)}}else this.reading=!0,this.initTickTimer()}initTickTimer(){const e=()=>{this.reading&&this.readResponseRecursive(),this.state===n.K.PLAYING&&this.loopPlay()};try{this.timer=c.q(e,1,(0,l.isAmpInABox)()||(0,l.isAmp)()||(0,l.isFacebookWebview)())}catch(t){this.tickInterval=setInterval(e,1)}}stopTickTimer(){this.timer?(this.timer.clear(),this.timer=null):this.tickInterval&&(clearInterval(this.tickInterval),this.tickInterval=null)}onload(){this.loaded=!0,this.dispatch(a.g.LOADED)}oninit(){this.state=n.K.INIT_VIDEO,this.player.resize(this.videoFrames[0].width,this.videoFrames[0].height),this.player.videoWidth=this.videoFrames[0].width,this.player.videoHeight=this.videoFrames[0].height,this.player.dispatch(a.g.LOADED_METADATA),this.player.dispatch(a.g.DURATION_CHANGE),this.player.dispatch(a.g.LOADED_DATA),this.player.renderHtmlImageElement(this.videoFrames[0])}oncanplay(){this.state===n.K.INIT_VIDEO&&(this.state=n.K.CAN_PLAY,this.dispatch(a.g.CAN_PLAY))}onstalled(){this.state=n.K.STALLED,this.dispatch(a.g.STALLED),this.listen(a.g.LOADED,(()=>this.onresumestalled()))}onresumestalled(){this.state===n.K.STALLED&&this.dispatch(a.g.RESUME_AFTER_STALLED)}ondecodeframe(){this.state!==n.K.ENDED&&this.dispatch(a.g.TIME_UPDATE)}onfinish(){this.state=n.K.ENDED,this.dispatch(a.g.ENDED)}extractFrame(e){const t=(0,o.now)(),i=this.videoFrames[e[1]]=new Image;i.src="data:image/jpeg;base64,"+e[2],i.onload=()=>this.decodingTime+=(0,o.now)()-t,1===this.videoFrames.length?i.onload=()=>this.oninit():this.videoFrames.length>=this.frameCachedLimit&&this.oncanplay(),this.head+this.frameCachedLimit<=this.videoFrames.length&&this.onresumestalled()}loopPlay(){if((0,o.now)()<this.targetTime)return;this.head++;const e=this.targetTime?Math.max(-this.frameWait/2,this.targetTime-(0,o.now)()):0;this.head>=this.videoFrames.length-1?(this.loaded&&!this.reading?(this.stopTickTimer(),this.onfinish()):this.onstalled(),this.targetTime=0):this.state===n.K.PLAYING&&(this.targetTime=(0,o.now)()+this.frameWait+e),this.head&&this.videoFrames&&this.videoFrames[this.head]&&this.player.renderHtmlImageElement(this.videoFrames[this.head]),this.head%this.frameRate==0&&this.ondecodeframe()}isTickTimerStarted(){return!this.timer&&!this.tickInterval}}},884:(e,t,i)=>{"use strict";i.d(t,{c:()=>p});var s=i(3419),n=i(2928),r=i(8808),o=i(1228),a=i(684),l=i(6932),d=i(6896),c=i(688),h=i(5984),u=i.n(h);class p extends s.c{constructor(e,t,i,s){super(),this.meta=t,this.player=i,this.targetTime=0,this.frameWait=1e3/24,this.frameWaitS=1/24;let r=e+"/"+t.mp4;this.authorized=!!c.I[r]||!(0,o.isMobile)()&&!(0,o.isTablet)(),this.state=n.K.INIT_VIDEO,this.load(r),this.authorized||(0,l.addEventListener)("touchstart",s,(0,d.m)(this.authorize,this));var a=document.createElement("div");a.innerHTML=p.TEMPLATE,this.player.container.appendChild(a.firstChild)}canplay(){return!0}play(){this.state!==n.K.PLAYING&&this.authorized?(this.state=n.K.PLAYING,this.loopPlay()):this.authorized||this.listen(r.g.CAN_PLAY,(()=>this.play()))}pause(){this.state!==n.K.STALLED&&(this.state=n.K.PAUSED,this.timer&&(clearTimeout(this.timer),this.timer=null))}getCurrentTime(){return this.video.currentTime}setCurrentTime(e){return!!(this.video.currentTime=e)}get duration(){return parseFloat(this.meta.infos.duration)}get averageDecodingTime(){return 0}get averageExtractTime(){return 0}cleanStallTimeout(){}authorize(){this.authorized||(this.video.play(),this.video.pause(),this.authorized=!0,this.oncanplay())}load(e){let t=!!c.I[e];this.video=c.I[e]=c.I[e]||document.createElement("video"),this.video.muted=!0,t||(this.video.src=e),this.player.useCustomDisplay(this.video),this.video.onload=()=>this.onload(),this.video.ontimeupdate=()=>this.ondecodeframe(),this.video.onloadedmetadata=()=>{this.player.videoWidth=this.video.videoWidth,this.player.videoHeight=this.video.videoHeight,this.player.dispatch(r.g.LOADED_METADATA),this.player.dispatch(r.g.DURATION_CHANGE),this.player.dispatch(r.g.LOADED_DATA),this.oncanplay()}}onload(){this.dispatch(r.g.LOADED)}oncanplay(){this.state===n.K.INIT_VIDEO&&this.authorized&&(this.state=n.K.CAN_PLAY,this.dispatch(r.g.CAN_PLAY))}ondecodeframe(){this.state!==n.K.ENDED&&this.dispatch(r.g.TIME_UPDATE)}onfinish(){this.pause(),this.video.currentTime=0,this.state=n.K.ENDED,this.dispatch(r.g.ENDED)}loopPlay(){if(this.video.currentTime+this.frameWaitS>this.video.duration)return this.video.currentTime=this.video.duration,this.onfinish();this.video.currentTime+=this.frameWaitS;var e=this.targetTime?Math.max(-this.frameWait/2,this.targetTime-(0,a.now)()):0;this.state===n.K.PLAYING&&(this.targetTime=(0,a.now)()+this.frameWait+e,this.timer=window.setTimeout((()=>this.loopPlay()),this.frameWait+e))}}p.TEMPLATE=u()},3620:(e,t,i)=>{"use strict";i.d(t,{c:()=>d});var s=i(3419),n=i(2928),r=i(8808),o=i(6932),a=i(6896),l=i(688);class d extends s.c{constructor(e,t,i,s){super(),this.meta=t,this.player=i;let r=e+"/"+t.mp4;this.authorized=!!l.I[r],this.state=n.K.INIT_VIDEO,this.load(r),this.authorized||(0,o.addEventListener)("touchstart",s,(0,a.m)(this.authorize,this))}canplay(){return!0}play(){this.state!==n.K.PLAYING&&(this.state=n.K.PLAYING,this.video.play())}pause(){this.state!==n.K.STALLED&&(this.state=n.K.PAUSED,this.video.pause())}getCurrentTime(){return this.video.currentTime}setCurrentTime(e){return!!(this.video.currentTime=e)}get duration(){return parseFloat(this.meta.infos.duration)}get averageDecodingTime(){return 0}get averageExtractTime(){return 0}cleanStallTimeout(){}authorize(){this.authorized||(this.authorized=!0,this.video.play(),this.state!==n.K.PLAYING&&this.video.pause(),this.oncanplay())}load(e){this.video=l.I[e]=l.I[e]||document.createElement("video"),this.video.setAttribute("webkit-playsinline","true"),this.video.src=e,this.video.onload=()=>this.onload(),this.video.onended=()=>this.onfinish(),this.video.ontimeupdate=()=>this.ondecodeframe(),this.video.onloadedmetadata=()=>{this.player.videoWidth=this.video.videoWidth,this.player.videoHeight=this.video.videoHeight,this.player.dispatch(r.g.LOADED_METADATA),this.player.dispatch(r.g.DURATION_CHANGE),this.player.dispatch(r.g.LOADED_DATA),this.oncanplay()},this.player.useCustomDisplay(this.video)}onload(){this.dispatch(r.g.LOADED)}oncanplay(){this.state===n.K.INIT_VIDEO&&this.authorized&&(this.state=n.K.CAN_PLAY,this.dispatch(r.g.CAN_PLAY))}ondecodeframe(){this.state!==n.K.ENDED&&this.dispatch(r.g.TIME_UPDATE)}onfinish(){this.state=n.K.ENDED,this.dispatch(r.g.ENDED)}}},9843:(e,t,i)=>{"use strict";i.d(t,{c:()=>h});var s=i(3419),n=i(2928),r=i(480),o=i(8808),a=i(684),l=i(3383),d=i(6896),c=i(6300);class h extends s.c{constructor(e,t,i,s){super(),this.meta=t,this.player=s,this.logger=new r.Y("canvas.player.components.Video"),this.head=0,this.targetTime=0,this.decodeFinish=!1,this.benchFps=0,this.benchFpsRetained=0,this.benchFpsCount=0,this.fpsLimit=0,this.frameRate=24,this.frameStart=1,this.frameCachedLimit=24,this.videoFrames=[],this.frameWait=Math.floor(1e3/this.frameRate);const o=(0,l.gx)('importScripts("'+this.player.parameters.assetsPath+'/teads-mpeg-decoder.min.js")');this.worker=(0,l.YV)().map((i=>{const s=new Worker(i.createObjectURL(o));return s.onmessage=(0,d.m)(this.onmessage,this),s.postMessage(["init",e,t]),s})),this.state=n.K.INIT}canplay(){return this.state===n.K.CAN_PLAY||this.state===n.K.PLAYING||this.state===n.K.PAUSED||this.state===n.K.LOADED||this.state===n.K.ENDED}play(){this.state!==n.K.PLAYING&&(this.state=n.K.PLAYING,this.loopPlay())}pause(){this.state!==n.K.STALLED&&(this.state=n.K.PAUSED)}getCurrentTime(){return this.state===n.K.INIT?0:this.head/this.frameRate}setCurrentTime(e){var t=Math.ceil(e*this.frameRate);return!!this.videoFrames[t]&&(this.cleanFrame(this.head,t),this.head=t,!0)}get duration(){return this.decodeFinish?this.videoFrames.length/this.frameRate:parseFloat(this.meta.infos.duration)}cleanStallTimeout(){c.cb.fromNullable(this.timeoutStalled).forEach((e=>{clearTimeout(e),this.timeoutStalled=null,this.state=n.K.PAUSED}))}onload(){this.dispatch(o.g.LOADED),this.decodeFinish=!0}oninit(){this.benchFps=(0,a.now)(),this.state=n.K.INIT_VIDEO,this.renderFrame()}oncanplay(){this.state=n.K.CAN_PLAY,this.dispatch(o.g.CAN_PLAY)}onstalled(){this.state=n.K.STALLED,this.dispatch(o.g.STALLED),this.listen(o.g.LOADED,(()=>this.onresumestalled()))}onresumestalled(){this.state===n.K.STALLED&&(this.cleanStallTimeout(),this.dispatch(o.g.RESUME_AFTER_STALLED))}ondecodeframe(){this.state!==n.K.ENDED&&this.dispatch(o.g.TIME_UPDATE)}onfinish(){this.state=n.K.ENDED,this.dispatch(o.g.ENDED)}onmessage(e){switch(e.data[0]){case"frame":this.appendFrames(e.data),this.videoFrames.length===this.frameStart?this.oninit():this.videoFrames.length===this.frameCachedLimit&&this.oncanplay();break;case"initCanvas":this.player.resize(e.data[1],e.data[2]);break;case"finish":this.averageDecodingTime=e.data[1],this.onload();break;default:this.logger.debug(e.data)}}appendFrames(e){if(this.videoFrames.push({codedWidth:e[1],halfWidth:e[2],currentY:new Uint8Array(e[3]),currentCr:new Uint8Array(e[4]),currentCb:new Uint8Array(e[5])}),this.averageDecodingTime=e[6],this.benchFpsCount++,this.benchFpsCount===this.frameCachedLimit){this.benchFpsRetained=(0,a.now)()-this.benchFps;var t=Math.ceil(this.frameRate*this.benchFpsRetained/1e3);this.fpsLimit=Math.max(3,Math.min(this.frameCachedLimit,t+1))}this.state===n.K.STALLED&&this.head+this.frameCachedLimit<=this.videoFrames.length&&(this.averageDecodingTime<=1e3/this.frameRate?this.timeoutStalled||(this.logger.warn("We are stalled and have",this.frameCachedLimit,"in memory, but stalled for download, so wait",2*this.benchFpsRetained,"ms"),this.timeoutStalled=setTimeout((()=>this.onresumestalled()),2*this.benchFpsRetained),this.dispatch(o.g.BENCH_FPS,2*this.benchFpsRetained)):this.onresumestalled())}loopPlay(){this.head++;var e=this.targetTime?Math.max(-this.frameWait/2,Math.min(0,this.targetTime-(0,a.now)())):0;this.head>=this.videoFrames.length-1?(this.decodeFinish?this.onfinish():this.onstalled(),this.targetTime=0):this.state===n.K.PLAYING&&(this.targetTime=(0,a.now)()+this.frameWait,window.setTimeout((()=>this.loopPlay()),this.frameWait+e)),this.renderFrame(),this.head%this.frameRate==0&&this.ondecodeframe()}renderFrame(){this.videoFrames[this.head]&&(this.player.renderFrame(this.videoFrames[this.head]),this.videoFrames[this.head]=null,this.videoFrames.length<this.head+this.fpsLimit&&(this.benchFps=(0,a.now)(),this.benchFpsCount=0,this.worker.forEach((e=>e.postMessage(["resume"])))))}cleanFrame(e,t){for(var i=e;i<t;i++)this.videoFrames[i]=null}}},688:(e,t,i)=>{"use strict";i.d(t,{E:()=>f,I:()=>m});var s=i(1228),n=i(1040),r=i(7404),o=i(920),a=i(6300),l=i(2488),d=i(8808),c=i(3419),h=i(5924),u=i(884),p=i(3620),g=i(9843),m=m||{};class f extends c.c{constructor(e,t,i,c){super(),this.meta=t,this.player=c;const m=(0,r.findTopWindow)(document.body),f=m===window.top,v=((0,s.isSafari)()||(0,s.isFacebookWebview)())&&o.In((0,s.getIosVersion)(),"10");this.sumologic=n.c.copy({collectorUrl:"https://s8t.teads.tv/logs/player/http-source",placementId:a.cb.fromNullable(this.player.parameters.pid).map((e=>parseInt(e,10))).filter(l.Ib)}),f&&this.meta.mp4&&("HTML5"===this.player.parameters.type||(0,s.isIpad)()&&o.In((0,s.getIosVersion)(),"9.2")&&"CANVAS"!==this.player.parameters.type)?(this.api=new p.c(e,t,c,m),this.sumologic.info("canvas video mp4")):f&&this.meta.mp4&&"CANVAS"!==this.player.parameters.type&&(o.AL((0,s.getIosVersion)(),"9.1")&&o.Cc((0,s.getIosVersion)(),"10")||v)?(this.api=new u.c(e,t,c,m),this.sumologic.info("canvas video mp4CT")):this.meta.tv?(this.api=new h.c(e,t,i,c),this.sumologic.info("canvas video tv")):(this.api=new g.c(e,t,i,c),this.sumologic.info("canvas video mpeg")),this.api.listen(d.g.CAN_PLAY,(()=>this.dispatch(d.g.CAN_PLAY))),this.api.listen(d.g.LOADED,(()=>this.dispatch(d.g.LOADED))),this.api.listen(d.g.STALLED,(()=>this.dispatch(d.g.STALLED))),this.api.listen(d.g.RESUME_AFTER_STALLED,(()=>this.dispatch(d.g.RESUME_AFTER_STALLED))),this.api.listen(d.g.TIME_UPDATE,(()=>this.dispatch(d.g.TIME_UPDATE))),this.api.listen(d.g.ENDED,(()=>this.dispatch(d.g.ENDED))),this.api.listen(d.g.BENCH_FPS,(e=>this.dispatch(d.g.BENCH_FPS,e)))}canplay(){return this.api.canplay()}play(){this.api.play()}pause(){this.api.pause()}getCurrentTime(){return this.api.getCurrentTime()}setCurrentTime(e){return this.api.setCurrentTime(e)}get duration(){return this.api.duration}get state(){return this.api.state}get videoFrames(){return this.api.videoFrames}get averageDecodingTime(){return this.api.averageDecodingTime}cleanStallTimeout(){this.api.cleanStallTimeout()}}},3176:(e,t,i)=>{"use strict";i.d(t,{c:()=>h});var s=i(1228),n=i(6896),r=i(480),o=i(6084),a=i(3419),l=i(8808),d=i(9972),c=i(2928);class h extends a.c{constructor(e,t,i,a=0){super(),this.baseUrl=e,this.meta=t,this.stream=i,this.aVolume=a,this.estimatedDuration=0,this.iosReady=!1,this.logger=new r.Y("canvas.player.components.Audio"),this.file=new d.c(this.baseUrl,this.meta.audio,this.stream);const h=(0,o.getAudioContext)();this.context=new h,this.file.listen(l.g.LOADED_DATA,(0,n.m)(this.oninit,this)),this.file.listen(l.g.PROGRESS,(0,n.m)(this.onloadprogress,this)),this.file.listen(l.g.LOADED,(0,n.m)(this.onload,this)),this.file.listen(l.g.CAN_PLAY,(0,n.m)(this.oncanplay,this)),this.file.state=c.K.INIT,(0,s.isIos)()&&(this.aVolume=0),this.iosReady=!(0,s.getIosVersion)()}static decodeAudioData(e,t,i,s){e.decodeAudioData(t.slice(0,t.byteLength),i,s)}authorizeAudio(e=(()=>{})){if(!this.iosReady){const t=(0,o.getAudioContext)(),i=this.context.createBuffer(1,1,44100),s=this.context.createBufferSource();s.buffer=i,s.connect(this.context.destination),s.start(0),s.disconnect(),this.context.close&&this.context.close(),this.context=new t,this.iosReady=!0,e()}}play(e=0){if(this.file.state!==c.K.PLAYING&&this.volume&&this.iosReady){if(!this.buffer)return void setTimeout((()=>this.play(e+.05)),50);this.resetAudio(),this.source&&(this.noteOnAt&&!e?(this.source.start(0,this.noteOnAt/1e3),this.noteOnAt=Date.now()-this.noteOnAt):(this.noteOnAt=Date.now()-1e3*e,this.source.start(0,e))),this.file.state=c.K.PLAYING}}pause(){this.file.state!==c.K.PAUSED&&this.source&&(this.noteOnAt=Date.now()-this.noteOnAt,this.source.stop(0),this.file.state!==c.K.STALLED&&(this.file.state=c.K.PAUSED))}canplay(){return this.file.canplay()}playing(){return this.file.state===c.K.PLAYING}release(){this.context.close&&this.context.close().then((()=>{this.buffer=null,this.gainNode&&this.gainNode.disconnect&&(this.gainNode.disconnect(),this.gainNode=null),this.source&&this.source.disconnect&&(this.source.disconnect(),this.source=null)})),this.file.state=c.K.ENDED}get duration(){return this.estimatedDuration}set currentTime(e){this.file.state===c.K.PLAYING&&(this.pause(),this.noteOnAt=1e3*e,this.play())}get currentTime(){return(this.file.state===c.K.PLAYING?Date.now()-this.noteOnAt:this.noteOnAt)/1e3}get volume(){return this.aVolume}set volume(e){this.aVolume=e,this.gainNode&&(this.gainNode.gain.value=e)}get authorized(){return this.iosReady}oninit(e){this.data=e,h.decodeAudioData(this.context,e,(e=>{const t=Math.ceil(this.meta.infos.audio_size/this.meta.infos.chunk_size)*e.length;this.estimatedDuration=t/e.sampleRate,this.buffer=this.context.createBuffer(e.numberOfChannels,t,e.sampleRate),this.setToMainBuffer(e)}),(0,n.m)(this.logger.error,this.logger))}onloadprogress(e){e&&(this.appendFileToData(e),this.decodeData())}onload(){this.source&&this.source.buffer?this.estimatedDuration=this.source.buffer.duration:setTimeout((()=>this.onload()),50)}appendFileToData(e){const t=new Uint8Array(this.data.byteLength+e.byteLength);t.set(new Uint8Array(this.data),0),t.set(new Uint8Array(e),this.data.byteLength),this.data=t.buffer.slice(0,t.buffer.byteLength)}decodeData(){h.decodeAudioData(this.context,this.data,(e=>{this.setToMainBuffer(e)}),(0,n.m)(this.logger.error,this.logger))}setToMainBuffer(e){if(this.buffer)for(let t=0;t<e.numberOfChannels;t++)this.buffer.getChannelData(t).set(e.getChannelData(t),0)}oncanplay(){this.file.state=c.K.CAN_PLAY,this.dispatch(l.g.CAN_PLAY)}resetAudio(){if(this.source)try{this.source.stop(0)}catch(e){this.logger.debug("Error when resetting audio",e)}this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.source&&(this.source.buffer=this.buffer,this.gainNode&&this.source.connect(this.gainNode)),this.gainNode&&this.gainNode.connect(this.context.destination),this.volume=this.aVolume}}},684:(e,t,i)=>{"use strict";function s(e,t,i){e.style[t]=i,t=n(t),e.style["Moz"+t]=i,e.style["webkit"+t]=i,e.style["O"+t]=i,e.style["ms"+t]=i}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(){return window.performance?window.performance.now():Date.now()}function o(e,t){for(var i=0,s=e.length;i<s;i++)e[i]=t}function a(e){return e<1?parseFloat(e.toString().substr(0,4)):Math.round(e)}i.r(t),i.d(t,{applyVendorProperties:()=>s,capitalize:()=>n,fillArray:()=>o,formatBenchTime:()=>a,now:()=>r})},8808:(e,t,i)=>{"use strict";i.d(t,{g:()=>s});const s={ABORT:"abort",CAN_PLAY:"canplay",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",LOADED:"loaded",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",RESUME_AFTER_STALLED:"resumeafterstalled",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",AUDIO_SYNC:"audiosync",BENCH_FPS:"benchFps",RESIZE:"resize"}},2928:(e,t,i)=>{"use strict";var s;i.d(t,{K:()=>s}),function(e){e[e.INIT=0]="INIT",e[e.INIT_VIDEO=1]="INIT_VIDEO",e[e.INIT_AUDIO=2]="INIT_AUDIO",e[e.CAN_PLAY=3]="CAN_PLAY",e[e.PLAYING=4]="PLAYING",e[e.PAUSED=5]="PAUSED",e[e.LOADED=6]="LOADED",e[e.STALLED=7]="STALLED",e[e.ENDED=8]="ENDED"}(s||(s={}))},5584:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SHADER_FRAGMENT_LOADING:()=>n,SHADER_FRAGMENT_YCBCRTORGBA:()=>s,SHADER_VERTEX_IDENTITY:()=>r});const s=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),n=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),r=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n")},9312:(e,t,i)=>{"use strict";var s;i.d(t,{I:()=>s}),function(e){e[e.FULL=0]="FULL",e[e.SMART=1]="SMART",e[e.NO_STREAM=2]="NO_STREAM"}(s||(s={}))},9548:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});var s=i(5696);class n extends s.c{}n.FullscreenRequest="FullscreenRequest",n.PlayPauseRequest="PlayPauseRequest",n.SkipRequest="SkipRequest",n.UIButtonRequest="UIButtonRequest",n.ClickToPlayRequest="ClickToPlayRequest",n.ClickRequest="ClickRequest",n.CallRequest="CallRequest",n.SoundToggleRequest="SoundToggleRequest",n.ReplayRequest="ReplayRequest",n.EndscreenInit="EndscreenInit",n.CollapseRequest="CollapseRequest",n.AdChoicesClickRequest="AdChoicesClickRequest",n.EarlyClickRequest="EarlyClickRequest"},5624:(e,t,i)=>{"use strict";i(5764);var s=i(3092),n=i(2508),r=i(304),o=i(4188),a=i(3419),l=i(9972),d=i(8904),c=i(5924),h=i(884),u=i(3620),p=i(9843),g=i(688),m=i(3176),f=i(684),v=i(2928),A=i(5584),b=i(9312),y=i(8808);const w=window.teads||{};w.canvas=w.canvas||{},w.canvas.player={CanvasPlayer:s.c,components:{Audio:n.c,Buffering:r.c,Canvas:o.c,EventDispatcher:a.c,File:l.c,HtmlAudioElement:d.c,JpegVideo:c.c,Mp4CTVideo:h.c,Mp4Video:u.c,MpegVideo:p.c,Video:g.E,WebAudioApi:m.c,PLAYERS:g.I},helper:{Utils:f},model:{MediaState:v.K,Shader:A,StreamType:b.I,mediaEvents:y.g}},window.teads=w;var E,C,I=i(7264),S=i(896),T=i(5696),k=i(6932),P=i(8036),x=i(41),L=i(3720);!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(E||(E={})),function(e){e[e.NETWORK_EMPTY=0]="NETWORK_EMPTY",e[e.NETWORK_IDLE=1]="NETWORK_IDLE",e[e.NETWORK_LOADING=2]="NETWORK_LOADING",e[e.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(C||(C={}));var _=i(1228),O=i(3840),V=i(7404),R=i(8172);let D;class N{constructor(){this.status=S.c.READY,this.eventHandler=new R.c,this.trackingRaised={AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1},this.parameters={},this.skippable=!1,this.expanded=!1}getVPAID(){return this}handshakeVersion(e){return"2.0"}subscribe(e,t,i){this.eventHandler.subscribe(e,t,i)}unsubscribe(e,t){this.eventHandler.unsubscribe(e,t)}initAd(e,t,i,s,n,r){this.status=S.c.LOADING,this.width=e,this.height=t,this.viewMode=i,I.YP(n).fold((e=>{this.dispatchVpaidEvent(T.c.AdError,"invalid creative data: "+n)}),(e=>{for(let t in e)e.hasOwnProperty(t)&&(this.parameters[t]=e[t]);this.environmentVars=r,this.environmentVars.videoSlot||(this.environmentVars.videoSlot=D=D||document.createElement("video")),this.environmentVars.videoSlot.setAttribute&&(this.environmentVars.videoSlot.setAttribute("webkit-playsinline","true"),this.environmentVars.videoSlot.setAttribute("playsinline","true"),_.isAndroid()&&_.isChromeWebView()&&this.environmentVars.videoSlot.getAttribute&&null===this.environmentVars.videoSlot.getAttribute("poster")&&this.environmentVars.videoSlot.setAttribute("poster",O.M),this.environmentVars.videoSlot.getAttribute&&null===this.environmentVars.videoSlot.getAttribute("muted")&&this.environmentVars.videoSlot.setAttribute("muted","true")),this.environmentVars.slot?(this.video=this.environmentVars.videoSlot,this.createContainer(this.environmentVars.slot)):this.dispatchVpaidEvent(T.c.AdError,"no slot provided in environmentVars")}))}startAd(){this.status=S.c.STARTING}skipAd(){this.status=S.c.SKIPPING}stopAd(){this.status=S.c.STOPPING}resizeAd(e,t,i){this.width=e,this.height=t,this.viewMode=i}expandAd(){return!1}collapseAd(){return!1}getAdLinear(){return!0}getAdWidth(){return this.width}getAdHeight(){return this.height}getAdExpanded(){return V.isFullscreen()||this.expanded}getAdSkippableState(){return this.skippable}getAdCompanions(){return""}getAdIcons(){return!1}getAdDuration(){throw"not implemented"}getAdRemainingTime(){throw"not implemented"}getStatus(){return this.status}createContainer(e){this.container||(this.container=document.createElement("div"),this.container.style.setProperty("position","relative"),e.appendChild(this.container))}onAdVideoCompleteDispatched(){this.parameters.noAutoStop?(this.video.addEventListener("seeked",(()=>{this.video.pause()}),!1),this.video.currentTime=1):this.stopAd()}dispatchVpaidEvent(e,t){this.handleVPAIDEvent(new T.c(e,t))}handleVPAIDEvent(e){if(!(this.status===S.c.SKIPPING&&e.type!==T.c.AdSkipped||this.status===S.c.STOPPING&&e.type!==T.c.AdStopped||this.status<=S.c.STOPPED||this.status===S.c.STOPPING&&e.type!==T.c.AdStopped)){switch(e.type){case T.c.AdLoaded:this.status=S.c.LOADED;break;case T.c.AdStarted:this.status=S.c.STARTED;break;case T.c.AdVideoStart:case T.c.AdPlaying:this.status=S.c.PLAYING;break;case T.c.AdPaused:this.status=S.c.PAUSED;break;case T.c.AdVideoComplete:this.status=S.c.COMPLETE;break;case T.c.AdSkipped:this.status=S.c.SKIPPED;break;case T.c.AdStopped:this.status=S.c.STOPPED;break;case T.c.AdDurationChange:case T.c.AdRemainingTimeChange:var t=this.getAdDuration(),i=t-this.getAdRemainingTime();t>0&&i>=.25*t&&!this.trackingRaised.AdVideoFirstQuartile?this.dispatchVpaidEvent(T.c.AdVideoFirstQuartile):t>0&&i>=.5*t&&!this.trackingRaised.AdVideoMidpoint?this.dispatchVpaidEvent(T.c.AdVideoMidpoint):t>0&&i>=.75*t&&!this.trackingRaised.AdVideoThirdQuartile&&this.dispatchVpaidEvent(T.c.AdVideoThirdQuartile);break;case T.c.AdVideoFirstQuartile:case T.c.AdVideoMidpoint:case T.c.AdVideoThirdQuartile:case T.c.AdError:if(this.trackingRaised[e.type])return;this.trackingRaised[e.type]=!0}this.eventHandler.handleEvent(e),this.status===S.c.SKIPPED&&this.stopAd(),e.type===T.c.AdVideoComplete&&this.onAdVideoCompleteDispatched()}}handleException(e,t){var i='method "'+t+'" threw an exception: '+e.toString();this.dispatchVpaidEvent(T.c.AdLog,i),this.dispatchVpaidEvent(T.c.AdError,i)}}class M{constructor(e,t,i){this.id=i,this.layer=document.createElement("div"),this.layer.className+="vpaid-clickthrough",this.layer.style.setProperty("cursor","pointer"),this.layer.style.setProperty("opacity","0"),this.layer.style.setProperty("background-color","#FFFFFF"),this.layer.style.setProperty("position","absolute"),this.layer.style.setProperty("z-index","65000"),this.layer.addEventListener("click",(function(s){e(t,i,!0)}),!1)}resize(e,t){this.layer.style.setProperty("width",`${e}px`),this.layer.style.setProperty("height",`${t}px`)}remove(){this.layer.parentNode&&this.layer.parentNode.removeChild(this.layer)}append(e){e.firstChild?e.insertBefore(this.layer,e.firstChild):e.appendChild(this.layer)}}var B=i(2304);class F extends N{constructor(){super(...arguments),this.config={url:"",skippable:!0,skipoffset:0,gradients:!0},this.eventMap={durationchange:"AdDurationChange",resize:"AdSizeChange",volumechange:"AdVolumeChange",ended:"AdVideoComplete",play:"AdPlaying",playing:"AdPlaying",pause:"AdPaused",timeupdate:"AdRemainingTimeChange",error:"AdError"}}initAd(e,t,i,s,n,r){if(this.status===S.c.READY)try{this.parameters=this.config,super.initAd(e,t,i,s,n,r),k.addEventListener("error",this.video,(e=>{this.handleVideoError(e)})),k.addEventListener("loadedmetadata",this.video,(e=>this.dispatchVpaidEvent(L.c.AdVideoMetadata,{width:this.video.videoWidth,height:this.video.videoHeight}))),this.beginingTimestamp=Date.now(),this.video.preload="metadata",this.video.src=(0,B.iI)(this.parameters.url),this.appendVideo(),this.dispatchVpaidEvent(T.c.AdLoaded)}catch(e){this.handleException(e,"initAd")}else this.dispatchVpaidEvent(T.c.AdLog,"creative is not in ready state, cannot call initAd")}startAd(){if(this.status>S.c.LOADED)this.dispatchVpaidEvent(T.c.AdLog,"try to call startAd but ad is starting or is already started");else if(this.status<S.c.LOADED)this.dispatchVpaidEvent(T.c.AdLog,"Ad is not loaded, use initAd first");else try{super.startAd(),this.parameters.gradients&&this.appendGradients(),this.clickThrough=new M(((e,t,i)=>{this.dispatchVpaidEvent(T.c.AdClickThru,{url:e,id:t,playerHandles:i})}),this.parameters.clickThrough),this.clickThrough.append(this.container),this.clickThrough.resize(this.width,this.height),this.setSize(this.width,this.height),this.initListeners(),this.video.play(),this.dispatchVpaidEvent(T.c.AdStarted),this.dispatchVpaidEvent(T.c.AdImpression)}catch(e){this.handleException(e,"startAd")}}skipAd(){if(this.status<=S.c.SKIPPING)this.dispatchVpaidEvent(T.c.AdLog,"Ad is already stopped or is skipping");else try{this.skippable?(super.skipAd(),this.video.pause(),this.video.style.setProperty("display","none"),this.dispatchVpaidEvent(T.c.AdSkipped)):this.dispatchVpaidEvent(T.c.AdLog,"skipAd() called, but creative is not skippable")}catch(e){this.handleException(e,"skipAd")}}resizeAd(e,t,i){try{this.setSize(e,t),this.dispatchVpaidEvent(T.c.AdSizeChange)}catch(e){this.handleException(e,"resizeAd")}}stopAd(){if(this.status<=S.c.STOPPING)this.dispatchVpaidEvent(T.c.AdLog,"Ad is already stopped");else try{super.stopAd(),this.removeVideo(),this.clickThrough.remove(),this.dispatchVpaidEvent(T.c.AdStopped),this.eventHandler.clearListeners()}catch(e){this.handleException(e,"stopAd")}}pauseAd(){try{this.video.pause()}catch(e){this.handleException(e,"pauseAd")}}resumeAd(){try{this.video.play()}catch(e){this.handleException(e,"resumeAd")}}getAdRemainingTime(){return this.video?this.video.duration-this.video.currentTime:0}getAdDuration(){return this.video?this.video.duration:0}getAdVolume(){return this.video?this.video.muted?0:this.video.volume:0}setAdVolume(e){return this.video?(this.video.muted=0===e,this.video.volume=e,this.video.muted?0:this.video.volume):0}appendGradients(){P.forEach(["top","bottom"],(e=>{let t=document.createElement("div");t.style.setProperty("background","transparent url(data:image/png;base64,"+F["GRADIENT_"+e.toUpperCase()]+")"),t.style.setProperty("position","absolute"),t.style.setProperty("left","0"),t.style[e]="0",t.style.setProperty("z-index","2"),t.style.setProperty("height","30px"),t.style.setProperty("width","100%"),this.container.appendChild(t)}))}appendVideo(){this.video.parentNode||(this.dispatchVpaidEvent(T.c.AdLog,"Video slot got no parent node, appending to container"),this.container.appendChild(this.video))}removeVideo(){try{this.video.parentNode.removeChild(this.video)}catch(e){this.dispatchVpaidEvent(T.c.AdLog,"teads-vpaid-video, cannot remove video from DOM")}}sendAdVideoStartEvent(){this.videoHasStarted||(this.videoHasStarted=!0,this.dispatchVpaidEvent(T.c.AdVideoStart))}setSize(e,t){this.width=e,this.height=t,this.video&&(this.video.width=this.width,this.video.height=this.height),this.clickThrough&&this.clickThrough.resize(e,t),this.container.style.setProperty("width",`${e}px`),this.container.style.setProperty("height",`${t}px`)}initListeners(){for(var e in this.eventMap)this.video.addEventListener(e,(e=>{this.handleVideoEvent(e)}),!1)}handleVideoError(e){if("error"===e.type){let e=this.video.error;if(e)switch(e.code){case 1:break;case 2:this.dispatchVpaidEvent(T.c.AdError,{message:"video error : A network error caused the ressource to stop being fetched",id:x.C.MEDIAFILE_TIMEOUT.id});break;case 3:this.dispatchVpaidEvent(T.c.AdError,{message:"video error : A decoding error caused the ressource to stop being fetched",id:x.C.MEDIAFILE_DISPLAY.id});break;case 4:let e={message:"video error : The associated ressource has been detected to be not suitable",id:x.C.GENERAL_LINEAR.id};this.video.readyState===E.HAVE_NOTHING&&(e.id=x.C.FILE_NOT_FOUND.id),this.dispatchVpaidEvent(T.c.AdError,e)}else this.dispatchVpaidEvent(T.c.AdError,{message:"video error : unkown error",id:x.C.GENERAL.id})}}handleVideoEvent(e){try{var t=this.eventMap[e.type];switch(e.type){case"pause":if(this.video.currentTime===this.video.duration||this.status<=S.c.SKIPPING||this.status===S.c.COMPLETE)return;break;case"play":case"playing":if(this.status===S.c.STARTED)return this.sendAdVideoStartEvent();if(this.status!==S.c.PAUSED)return;break;case"timeupdate":this.parameters.skippable&&!this.skippable&&this.video.currentTime>=Number(this.parameters.skipoffset)&&(this.skippable=!0,this.dispatchVpaidEvent(T.c.AdSkippableStateChange)),(this.status===S.c.STARTED||this.video.currentTime>0)&&this.sendAdVideoStartEvent()}this.dispatchVpaidEvent(t)}catch(t){var i='Creative threw an exception when handling "'+e.type+'" HTML5 video event: '+t.toString();this.dispatchVpaidEvent(T.c.AdLog,i),this.dispatchVpaidEvent(T.c.AdError,{message:i,id:x.C.GENERAL.id})}}}F.GRADIENT="iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM0ODU0RjM1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM0ODU0RjQ1QkFEMTFFNUE5RDI5OTE4QkFCM0I3NzciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzQ4NTRGMTVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzQ4NTRGMjVCQUQxMUU1QTlEMjk5MThCQUIzQjc3NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/",F.GRADIENT_TOP=F.GRADIENT+"Psk0S98AAAAgSURBVHjaYmBgYJBiAhIMIOI/nEDj0oNgYGaAAYAAAwAH4xg8FtOkrgAAAABJRU5ErkJggg==",F.GRADIENT_BOTTOM=F.GRADIENT+"PkIta+gAAAAaSURBVHjaYmBABoxMMIKBCYVLDwLJSoAAAwAWTwBRQ43+sgAAAABJRU5ErkJggg==";const U=window.teads||{};U.video=U.video||{},U.video.VPAIDCanvas=class extends F{initAd(e,t,i,n,r,o){o.videoSlot&&o.videoSlot.parentNode&&o.videoSlot.parentNode.removeChild(o.videoSlot),o.slot&&this.createContainer(o.slot),I.YP(r).fold((e=>this.handleException(e,"initAd")),(r=>{o.videoSlot=new s.c(this.container,e,t,r),o.videoSlot.addEventListener(y.g.ERROR,(e=>this.dispatchVpaidEvent(this.eventMap[e.type]))),super.initAd(e,t,i,n,r,o)}))}startAd(){if(this.status>S.c.LOADED)this.dispatchVpaidEvent(T.c.AdLog,"try to call startAd but ad is starting or is already started");else if(this.status<S.c.LOADED)this.dispatchVpaidEvent(T.c.AdLog,"Ad is not loaded, use initAd first");else try{super.startAd(),this.dispatchVpaidEvent(T.c.AdDurationChange)}catch(e){this.handleException(e,"startAd")}}appendVideo(){}removeVideo(){this.video.pause(),this.video.html5video&&this.container.removeChild(this.video.html5video),this.video.canvas&&this.container.removeChild(this.video.canvas)}},U.video.VPAIDVideo=F,window.teads=U},896:(e,t,i)=>{"use strict";var s;i.d(t,{c:()=>n}),function(e){e[e.REMOVED=-6]="REMOVED",e[e.REMOVING=-5]="REMOVING",e[e.ERROR=-4]="ERROR",e[e.STOPPED=-3]="STOPPED",e[e.STOPPING=-2]="STOPPING",e[e.SKIPPED=-1]="SKIPPED",e[e.SKIPPING=0]="SKIPPING",e[e.READY=1]="READY",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED",e[e.STARTING=5]="STARTING",e[e.STARTED=6]="STARTED",e[e.PAUSING=7]="PAUSING",e[e.PAUSED=8]="PAUSED",e[e.RESUMING=9]="RESUMING",e[e.PLAYING=10]="PLAYING",e[e.COMPLETE=11]="COMPLETE"}(s||(s={}));const n=s},3720:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});class s{}s.AdVideoMetadata="AdVideoMetadata",s.AdRemovedHeavyAdIntervention="AdRemovedHeavyAdIntervention",s.AdWarningHeavyAdIntervention="AdWarningHeavyAdIntervention"},8172:(e,t,i)=>{"use strict";i.d(t,{c:()=>o});var s=i(8036),n=i(5696),r=i(3720);class o{constructor(){this.listeners={},this.listenersScope={}}subscribe(e,t,i){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),this.listenersScope[t]=this.listenersScope[t]||[],this.listenersScope[t].push(i||null)}unsubscribe(e,t){if(this.listeners[t]){var i=(0,s.indexOf)(this.listeners[t],e);i>=0&&(this.listeners[t][i]=function(){})}}clearListeners(){this.listeners={},this.listenersScope={}}handleEvent(e,t){for(var i=this.listeners[e.type]||[],s=0,o=i.length;s<o;s++)try{var a=[];if(e.data)switch(e.type){case n.c.AdClickThru:a=[e.data.url,e.data.id,!!e.data.playerHandles];break;case n.c.AdLog:case n.c.AdError:case r.c.AdRemovedHeavyAdIntervention:case r.c.AdWarningHeavyAdIntervention:a="string"==typeof e.data?[e.data,null]:"object"==typeof e.data&&e.data.message?[e.data.message,e.data.id]:[String(e.data),null];break;case n.c.AdInteraction:a=[e.data.id];break;case r.c.AdVideoMetadata:a=[e.data]}i[s].apply(this.listenersScope[e.type][s],a)}catch(i){if(t)throw"failed to log error on callback: "+e.data;this.handleEvent({type:n.c.AdLog,data:"Callback #"+s+" on event "+e.type+" throws an exception: "+i},!0)}}}},5696:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});class s{constructor(e,t=null){this.type=e,this.data=t}}s.AdLoaded="AdLoaded",s.AdStarted="AdStarted",s.AdStopped="AdStopped",s.AdSkipped="AdSkipped",s.AdLinearChange="AdLinearChange",s.AdSizeChange="AdSizeChange",s.AdExpandedChange="AdExpandedChange",s.AdSkippableStateChange="AdSkippableStateChange",s.AdRemainingTimeChange="AdRemainingTimeChange",s.AdDurationChange="AdDurationChange",s.AdVolumeChange="AdVolumeChange",s.AdImpression="AdImpression",s.AdVideoStart="AdVideoStart",s.AdVideoFirstQuartile="AdVideoFirstQuartile",s.AdVideoMidpoint="AdVideoMidpoint",s.AdVideoThirdQuartile="AdVideoThirdQuartile",s.AdVideoComplete="AdVideoComplete",s.AdClickThru="AdClickThru",s.AdInteraction="AdInteraction",s.AdUserAcceptInvitation="AdUserAcceptInvitation",s.AdUserMinimize="AdUserMinimize",s.AdUserClose="AdUserClose",s.AdPaused="AdPaused",s.AdPlaying="AdPlaying",s.AdLog="AdLog",s.AdError="AdError"},9387:(e,t,i)=>{"use strict";i(5624);const s=window.teads||{};s.vpaid=s.vpaid||{},window.teads=s},2488:(e,t,i)=>{"use strict";i.d(t,{C6:()=>s.C6,Ib:()=>s.Ib,Wm:()=>s.Wm,Y3:()=>s.Y3,Y9:()=>s.Y9,am:()=>s.am,cX:()=>n.c,ct:()=>s.ct});var s=i(9056),n=i(8480)},8480:(e,t,i)=>{"use strict";i.d(t,{c:()=>o});var s=i(5544),n=i(548),r=i(9056);const o=({fledgeSettings:e,placementCss:t,insertionPosition:i={insertBefore:!0,insertInside:!0},slot:o,creativeSize:a})=>{return l=void 0,d=void 0,h=function*(){var l;if(void 0===e)throw new Error("FledgeSettings is undefined");const d=null!==(l=window.teads.FLEDGE_DOMAIN)&&void 0!==l?l:n.c,c=((e,t)=>{var i;if(!(0,r.Y9)(null==e?void 0:e.buyerSignals))throw new Error("BuyerSignals is undefined in fledgeSettings");const s=null!==(i=window.teads.FLEDGE_DECISION_LOGIC_URL)&&void 0!==i?i:`${n.c}/v1/bidding/decision-logic.js`;return{seller:t,perBuyerSignals:{[t]:e.buyerSignals},interestGroupBuyers:[t],decisionLogicUrl:s}})(e,d),h=yield navigator.runAdAuction(c);if(null===h)throw new Error("runAdAuction failed");const u=(0,s.A9)(o,i);t&&(0,s.iW)(u,t);const{width:p,height:g}=null!=a?a:{width:1,height:1},m=(0,s.gv)("native-fledge",!1);m.style.width=1===p?"100%":`${p}px`,m.style.height=1===g?"100%":`${g}px`,m.width=p.toString(),m.height=g.toString(),u.appendChild(m),m.src=h,m.onload=()=>{var e;window.addEventListener("message",(e=>{var t;e.origin===d&&(t=e.data,(0,r.Y9)(t)&&"string"==typeof t.heightToResize)&&(m.style.height=`${e.data.heightToResize}px`,m.height=e.data.heightToResize)})),null===(e=m.contentWindow)||void 0===e||e.postMessage({type:"message"},d)}},new((c=void 0)||(c=Promise))((function(e,t){function i(e){try{n(h.next(e))}catch(e){t(e)}}function s(e){try{n(h.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof c?n:new c((function(e){e(n)}))).then(i,s)}n((h=h.apply(l,d||[])).next())}));var l,d,c,h}},9056:(e,t,i)=>{"use strict";function s(e){return"boolean"==typeof e}function n(e){return"number"==typeof e&&!isNaN(e)}function r(e){return"string"==typeof e}function o(e){return void 0===e}function a(e){return"object"==typeof e&&null!==e}function l(e){const t=new Date,i=t.getUTCHours(),s=t.getUTCDay(),n=t.getUTCDate(),r=1===s&&n<=7;return e.fromHour<=i&&e.toHour>=i&&r}function d(e){var t;return(null===(t=((null==e?void 0:e.getAttribute("src"))||"").match(/\/static\/([^/]+)\//))||void 0===t?void 0:t[1])||null}i.d(t,{C6:()=>l,Ib:()=>n,Wm:()=>d,Y3:()=>o,Y9:()=>a,am:()=>s,ct:()=>r})},5544:(e,t,i)=>{"use strict";i.d(t,{A9:()=>n,gv:()=>r,iW:()=>o});const s="teads0";function n(e,t,i){const n=document.createElement("div");return n.className="teads-player native",n.id=s,n.style.setProperty("display","flex","important"),n.style.setProperty("justify-content","center","important"),void 0!==i&&n.style.setProperty("height",`${i}px`,"important"),e.insertAdjacentElement(function(e){const{insertBefore:t,insertInside:i}=e;switch(!0){case i&&t:return"afterbegin";case i&&!t:return"beforeend";case t:return"beforebegin";default:return"afterend"}}(t),n),0===a(n).width&&n.style.setProperty("width","100%","important"),n}function r(e,t=!0){const i=document.createElement("iframe");return i.style.setProperty("margin","0"),i.style.setProperty("padding","0"),i.style.setProperty("width","0"),i.style.setProperty("height","0"),i.style.setProperty("border","none"),i.style.setProperty("overflow","hidden"),i.style.setProperty("display","block"),i.style.setProperty("float","none"),t&&i.setAttribute("allow","autoplay; attribution-reporting 'src' https://cm.teads.tv"),i.setAttribute("scrolling","no"),i.setAttribute("title",e),i}const o=(e,t)=>{e.style.cssText+=t},a=e=>{const{width:t,height:i}=e.getBoundingClientRect();return{width:t,height:i}}},548:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});const s="https://fledge.teads.tv"},6884:e=>{e.exports='<div class="teads-wigo-btn"><div style="position: absolute; left:0;top:0;padding: 0 4%; border: 1px solid white; color: white; font-size: 10px; text-align: center; font-family: Arial; line-height:16px;"></div><div style="border: 6px solid #f3f3f3; border-top: 6px solid #3498db; border-radius: 50%; position: absolute; left: 60%; width: 32%; height: 32%; -webkit-animation: wigospin 2s linear infinite; animation: wigospin 2s linear infinite"></div> <style type="text/css"> .teads-wigo-btn { position: fixed; bottom: 10px; right: 10px; z-index: 2147483647; width: 75px; height: 75px; cursor: pointer; background-image: url(\'https://a.teads.tv/media/format/v3/assets/default/img/wigo.png?v2\'); transition: right ease 0.2s; } @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) { /* Retina */ .teads-wigo-btn { background-size: 75px 75px; background-image: url(\'https://a.teads.tv/media/format/v3/assets/default/img/wigo-2x.png\'); } } @-webkit-keyframes wigospin { 0% { -webkit-transform: rotate(0deg);} 100% { -webkit-transform: rotate(360deg);} } @keyframes wigospin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } </style> </div> '},3044:(e,t,i)=>{e.exports="/** This will include vpaid-ui assets */ "+i(5298)+" "+i(8680)+" .teads-expand { position: relative; } .teads-expand-closebutton { padding: 5px; text-align:center; color:white; cursor:pointer; position:absolute; z-index: 2147483646; top:5px; right:5px; width: 15px; height: 15px; padding: 0px; } .teads-expand-iframe { width: 100%; height: 100%; } .teads-expand-iframe iframe { border: 0px; width: 100%; height: 100%; background: #FFFFFF url({{assetsPath}}/default/img/loading.gif) no-repeat center center } .teads-expand-overlay { position: fixed; opacity: 0; background: #000000; border: 0; top: 0; left: 0; z-index: 2147483646; overflow: hidden; width: 100%; height: 100%; transition-property: opacity; -webkit-transition-property: opacity; -moz-transition-property: opacity; -o-transition-property: opacity; -ms-transition-property: opacity; transition-duration: {{transitionDuration}}ms; -webkit-transition-duration: {{transitionDuration}}ms; -moz-transition-duration: {{transitionDuration}}ms; -o-transition-duration: {{transitionDuration}}ms; -ms-transition-duration: {{transitionDuration}}ms; } .teads-expand-overlay.opened { opacity: 0.6 } .teads-expand-container.opened { opacity: 1 } .teads-expand-container { opacity: 0; position: fixed; background: #FFFFFF; border: 0; left: 0px; top: 0px; z-index: 2147483647; transition-property: opacity width height left top; -webkit-transition-property: opacity width height left top; -moz-transition-property: opacity width height left top; -o-transition-property: opacity width height left top; -ms-transition-property: opacity width height left top; transition-duration: {{transitionDuration}}ms; -webkit-transition-duration: {{transitionDuration}}ms; -moz-transition-duration: {{transitionDuration}}ms; -o-transition-duration: {{transitionDuration}}ms; -ms-transition-duration: {{transitionDuration}}ms; } body.noscroll { overflow:hidden; } "},6148:e=>{e.exports='<div class="teads-expand"> <div class="teads-expand-label"></div> <div class="teads-expand-iframe"> <iframe src="{{iframeurl}}"></iframe> </div> <div class="teads-expand-closebutton"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 15 15" style="enable-background:new 0 0 15 15;" xml:space="preserve"> <g> <path style="fill:#000000;" d="M8.883,7.5l5.83-5.83c0.382-0.382,0.382-1.001,0-1.383c-0.382-0.382-1.002-0.382-1.383,0L7.5,6.117 l-5.83-5.83c-0.382-0.382-1.002-0.382-1.383,0c-0.382,0.382-0.382,1.001,0,1.383l5.83,5.83l-5.83,5.83 c-0.382,0.382-0.382,1.001,0,1.383C0.478,14.904,0.728,15,0.978,15c0.25,0,0.501-0.096,0.692-0.287l5.83-5.83l5.83,5.83 C13.521,14.904,13.771,15,14.022,15c0.25,0,0.501-0.096,0.692-0.287c0.382-0.382,0.382-1.001,0-1.383L8.883,7.5z"/> </g> </svg> </div> </div> '},9740:e=>{e.exports='<div class="smart-header-content"> <div class="close-button-smart"></div> <div class="adChoices-button-smart"></div> <div class="sound-button-smart"> <div class="icon-muteon"></div> </div> </div> '},2936:e=>{e.exports="<div class=\"loader\"> <style> .loader:before, .loader:after, .loader { border-radius: 50%; width: 1.5em; height: 1.5em; -webkit-animation-fill-mode: both; animation-fill-mode: both; -webkit-animation: load7 1.8s infinite ease-in-out; animation: load7 1.8s infinite ease-in-out; } .loader { font-size: 8px; margin-left: -8px; position: absolute; left: 50%; top: 30%; z-index: 10; text-indent: -9999em; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation-delay: -0.16s; animation-delay: -0.16s; } .loader:before { left: -2em; -webkit-animation-delay: -0.32s; animation-delay: -0.32s; } .loader:after { left: 2em; } .loader:before, .loader:after { content: ''; position: absolute; top: 0; } @-webkit-keyframes load7 { 0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em #ffffff; } 40% { box-shadow: 0 2.5em 0 0 #ffffff; } } @keyframes load7 { 0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em #ffffff; } 40% { box-shadow: 0 2.5em 0 0 #ffffff; } } </style> loading...</div> "},5984:e=>{e.exports="<style> /* This used to work for parent element of button divs */ /* But it is not enough now, below dont hide play button parent div */ *::-webkit-media-controls-panel { display: none!important; -webkit-appearance: none; } /* Old shadow dom for play button */ *::--webkit-media-controls-play-button { display: none!important; -webkit-appearance: none; } /* New shadow dom for play button */ /* This one works */ *::-webkit-media-controls-start-playback-button { display: none!important; -webkit-appearance: none } </style> "},7356:e=>{e.exports='<style> #{{countdown-id}} svg:nth-child(2) path { -webkit-animation: load {{countdown-duration}}s linear; -moz-animation: load {{countdown-duration}}s linear; -o-animation: load {{countdown-duration}}s linear; animation: load {{countdown-duration}}s linear; } </style> \x3c!-- Container --\x3e <ul class="countdown-circle" id="{{countdown-id}}"> \x3c!-- Item --\x3e <li data-countdown="{{countdown-duration}}" class="countdown-timer"> <svg viewBox="-10 -10 220 220"> <g fill="none" stroke-width="20" transform="translate(100,100)"> <path d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#cl1)"/> <path d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#cl1)"/> <path d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#cl1)"/> <path d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cl1)"/> <path d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#cl1)"/> <path d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#cl1)"/> </g> </svg> <svg viewBox="-10 -10 220 220"> <path d="M200,100 C200,44.771525 155.228475,0 100,0 C44.771525,0 0,44.771525 0,100 C0,155.228475 44.771525,200 100,200 C155.228475,200 200,155.228475 200,100 Z" stroke-dashoffset="629"></path> </svg> </li> </ul> \x3c!-- Defining Angle Gradient Colors --\x3e <svg width="0" height="0"> <defs> <linearGradient id="cl1" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1"> <stop stop-color="#FFFFFF"/> <stop offset="100%" stop-color="#FFFFFF"/> </linearGradient> </defs> </svg> '},4192:e=>{e.exports='<div class="button-container"> <div class="button replay-button"> <div class="icon"> <span class="icon-replay"></span> </div> <div class="text"></div> </div> <div class="button call-button"> <div class="icon"> <span></span> </div> <div class="text"></div> </div> </div> <div class="close-button"> <div class="icon-closeendscreen"></div> </div> <div class="adchoices adchoices-icon"> <span>AdChoices</span> </div> <div class="countdown"></div> '},5992:(e,t,i)=>{e.exports="<!DOCTYPE html> <html> <head> "+i(9840)+' </head> <body> <div id="main-container"> <style> '+i(6652)+' </style> <div id="layout-video-component"> <div class="teads-ui-component-startscreen"></div> <div id="vpaid-container"></div> <div class="teads-ui-component-fullscreenbutton"> <div class="icon-collapse"></div> </div> <div class="teads-ui-component-earlyclickoverlay"></div> <div class="teads-ui-component-progressbar"> <div class="progress"></div> </div> <div class="teads-ui-component-hourglass"></div> <div class="teads-ui-component-soundbutton"></div> <div class="teads-ui-component-closebutton"> <div class="close-button icon-close hide"></div> </div> <div class="teads-ui-component-adchoices adchoices-icon"> <span>AdChoices</span> </div> <div class="teads-ui-component-clickbutton"></div> <div class="teads-ui-component-brandlogo"></div> <div class="teads-ui-component-clicktoplay gradient"> <div class="icon-watchmore"></div> </div> <div class="teads-ui-component-bannervideobottom"></div> <div class="teads-ui-component-endscreen"></div> </div> </div> </body> </html> '},9840:e=>{e.exports="<script type='text/javascript'> var source; window.addEventListener('message', function(event) { if (event.data && event.data.event === 'reportingObserverSource') { source = event.source; } }, true); if (\"ReportingObserver\" in window) { try { const observer = new ReportingObserver(function (reports) { reports.forEach(function (report) { if (source) { source.postMessage({ event: 'heavyAdIntervention', report: JSON.stringify(report) }, '*'); } }) }, {buffered: true}); observer.observe(); } catch (e) { } } <\/script> "},8872:()=>{!function(e,t,i,s){"use strict";if(!(s in t)){var n,r,o,a,l,d,c,h="__"+s+(1e5*Math.random()>>0),u="attached",p="detached",g="extends",m="ADDITION",f="MODIFICATION",v="REMOVAL",A="DOMAttrModified",b="DOMContentLoaded",y="<",w="=",E=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,C=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],I=[],S=[],T="",k=t.documentElement,P=I.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},x=i.prototype,L=x.hasOwnProperty,_=x.isPrototypeOf,O=i.defineProperty,V=i.getOwnPropertyDescriptor,R=i.getOwnPropertyNames,D=i.getPrototypeOf,N=i.setPrototypeOf,M=!!i.__proto__,B=i.create||function e(t){return t?(e.prototype=t,new e):this},F=N||(M?function(e,t){return e.__proto__=t,e}:R&&V?function(){function e(e,t){for(var i,s=R(t),n=0,r=s.length;n<r;n++)i=s[n],L.call(e,i)||O(e,i,V(t,i))}return function(t,i){do{e(t,i)}while((i=D(i))&&!_.call(i,t));return t}}():function(e,t){for(var i in t)e[i]=t[i];return e}),U=e.MutationObserver||e.WebKitMutationObserver,W=(e.HTMLElement||e.Element||e.Node).prototype,H=!1,j=H?function(e){return 1===e.nodeType}:function(e){return _.call(W,e)},z=H&&[],G=W.cloneNode,Y=W.setAttribute,$=W.removeAttribute,q=t.createElement,K=U&&{attributes:!0,characterData:!0,attributeOldValue:!0},Q=U||function(e){J=!1,k.removeEventListener(A,Q)},X=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,10)},Z=!1,J=!0,ee=!0,te=!0;N||M?(d=function(e,t){_.call(t,e)||ce(e,t)},c=ce):c=d=function(e,t){e[h]||(e[h]=i(!0),ce(e,t))},H?(J=!1,function(){var e=V(W,"addEventListener"),t=e.value,i=function(e){var t=new CustomEvent(A,{bubbles:!0});t.attrName=e,t.prevValue=this.getAttribute(e),t.newValue=null,t[v]=t.attrChange=2,$.call(this,e),this.dispatchEvent(t)},s=function(e,t){var i=this.hasAttribute(e),s=i&&this.getAttribute(e),n=new CustomEvent(A,{bubbles:!0});Y.call(this,e,t),n.attrName=e,n.prevValue=i?s:null,n.newValue=t,i?n[f]=n.attrChange=1:n[m]=n.attrChange=0,this.dispatchEvent(n)},n=function(e){var t,i=e.currentTarget,s=i[h],n=e.propertyName;s.hasOwnProperty(n)&&(s=s[n],(t=new CustomEvent(A,{bubbles:!0})).attrName=s.name,t.prevValue=s.value||null,t.newValue=s.value=i[n]||null,null==t.prevValue?t[m]=t.attrChange=0:t[f]=t.attrChange=1,i.dispatchEvent(t))};e.value=function(e,r,o){e===A&&this.attributeChangedCallback&&this.setAttribute!==s&&(this[h]={className:{name:"class",value:this.className}},this.setAttribute=s,this.removeAttribute=i,t.call(this,"propertychange",n)),t.call(this,e,r,o)},O(W,"addEventListener",e)}()):U||(k.addEventListener(A,Q),k.setAttribute(h,1),k.removeAttribute(h),J&&(r=function(e){var t,i,s,n=this;if(n===e.target){for(s in t=n[h],n[h]=i=a(n),i){if(!(s in t))return o(0,n,s,t[s],i[s],m);if(i[s]!==t[s])return o(1,n,s,t[s],i[s],f)}for(s in t)if(!(s in i))return o(2,n,s,t[s],i[s],v)}},o=function(e,t,i,s,n,r){var o={attrChange:e,currentTarget:t,attrName:i,prevValue:s,newValue:n};o[r]=e,oe(o)},a=function(e){for(var t,i,s={},n=e.attributes,r=0,o=n.length;r<o;r++)"setAttribute"!==(i=(t=n[r]).name)&&(s[i]=t.value);return s})),t[s]=function(e,i){if(s=e.toUpperCase(),Z||(Z=!0,U?(l=function(e,t){function i(e,t){for(var i=0,s=e.length;i<s;t(e[i++]));}return new U((function(s){for(var n,r,o,a=0,l=s.length;a<l;a++)"childList"===(n=s[a]).type?(i(n.addedNodes,e),i(n.removedNodes,t)):(r=n.target,te&&r.attributeChangedCallback&&"style"!==n.attributeName&&(o=r.getAttribute(n.attributeName))!==n.oldValue&&r.attributeChangedCallback(n.attributeName,n.oldValue,o))}))}(se(u),se(p)),l.observe(t,{childList:!0,subtree:!0})):(n=[],X((function e(){for(;n.length;)n.shift().call(null,n.shift());X(e)})),t.addEventListener("DOMNodeInserted",ae(u)),t.addEventListener("DOMNodeRemoved",ae(p))),t.addEventListener(b,le),t.addEventListener("readystatechange",le),t.createElement=function(e,i){var s=q.apply(t,arguments),n=""+e,r=P.call(I,(i?w:y)+(i||n).toUpperCase()),o=-1<r;return i&&(s.setAttribute("is",i=i.toLowerCase()),o&&(o=re(n.toUpperCase(),i))),te=!t.createElement.innerHTMLHelper,o&&c(s,S[r]),s},W.cloneNode=function(e){var t=G.call(this,!!e),i=ne(t);return-1<i&&c(t,S[i]),e&&function(e){for(var t,i=0,s=e.length;i<s;i++)t=e[i],c(t,S[ne(t)])}(t.querySelectorAll(T)),t}),-2<P.call(I,w+s)+P.call(I,y+s)&&he(e),!E.test(s)||-1<P.call(C,s))throw new Error("The type "+e+" is invalid");var s,r,o=function(){return d?t.createElement(h,s):t.createElement(h)},a=i||x,d=L.call(a,g),h=d?i[g].toUpperCase():s;return d&&-1<P.call(I,y+h)&&he(h),r=I.push((d?w:y)+s)-1,T=T.concat(T.length?",":"",d?h+'[is="'+e.toLowerCase()+'"]':h),o.prototype=S[r]=L.call(a,"prototype")?a.prototype:B(W),ie(t.querySelectorAll(T),u),o}}function ie(e,t){for(var i=0,s=e.length;i<s;i++)ue(e[i],t)}function se(e){return function(t){j(t)&&(ue(t,e),ie(t.querySelectorAll(T),e))}}function ne(e){var t=e.getAttribute("is"),i=e.nodeName.toUpperCase(),s=P.call(I,t?w+t.toUpperCase():y+i);return t&&-1<s&&!re(i,t)?-1:s}function re(e,t){return-1<T.indexOf(e+'[is="'+t+'"]')}function oe(e){var t=e.currentTarget,i=e.attrChange,s=e.attrName,n=e.target;!te||n&&n!==t||!t.attributeChangedCallback||"style"===s||e.prevValue===e.newValue||t.attributeChangedCallback(s,i===e[m]?null:e.prevValue,i===e[v]?null:e.newValue)}function ae(e){var t=se(e);return function(e){n.push(t,e.target)}}function le(e){ee&&(ee=!1,e.currentTarget.removeEventListener(b,le)),ie((e.target||t).querySelectorAll(T),e.detail===p?p:u),H&&function(){for(var e,t=0,i=z.length;t<i;t++)e=z[t],k.contains(e)||(i--,z.splice(t--,1),ue(e,p))}()}function de(e,t){var i=this;Y.call(i,e,t),r.call(i,{target:i})}function ce(e,t){F(e,t),l?l.observe(e,K):(J&&(e.setAttribute=de,e[h]=a(e),e.addEventListener("DOMSubtreeModified",r)),e.addEventListener(A,oe)),e.createdCallback&&te&&(e.created=!0,e.createdCallback(),e.created=!1)}function he(e){throw new Error("A "+e+" type is already registered")}function ue(e,t){var i,s=ne(e);-1<s&&(d(e,S[s]),s=0,t!==u||e[u]?t!==p||e[p]||(e[u]=!1,e[p]=!0,s=1):(e[p]=!1,e[u]=!0,s=1,H&&P.call(z,e)<0&&z.push(e)),s&&(i=e[t+"Callback"])&&i.call(e))}}(window,document,Object,"registerElement")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__(2912),__webpack_require__(5764),__webpack_require__(8544),__webpack_require__(9387);const e=window.teads||{};e.player=e.player||{},window.teads=e;var t=__webpack_require__(1040),i=__webpack_require__(2488),s=__webpack_require__(8036),n=__webpack_require__(3840),r=__webpack_require__(1228),o=__webpack_require__(6932),a=__webpack_require__(4616),l=__webpack_require__(8708),d=__webpack_require__(6420),c=__webpack_require__(3336),h=__webpack_require__(6300),u=__webpack_require__(6716),p=__webpack_require__(392),g=__webpack_require__(480),m=__webpack_require__(6040),f=__webpack_require__(6556),v=__webpack_require__(2304),A=__webpack_require__(6084),b=__webpack_require__(5880),y=__webpack_require__(5351),w=__webpack_require__(1476),E=__webpack_require__(952);function C({ccpaIab:e}){return h.cb.fromNullable(e).filter((e=>(0,i.Y9)(e)&&(0,A.hasOwnProperty)(e,"consent")&&(0,i.ct)(e.consent)))}function I({gdprIab:e}){return h.cb.fromNullable(e).filter((e=>(0,i.Y9)(e)&&(0,A.hasOwnProperties)(e,["status","consent"])&&(0,i.Ib)(e.status)&&(0,i.ct)(e.consent))).map((({status:e,consent:t,reason:i,apiVersion:s,cmpId:n})=>({status:e,consent:t,reason:h.cb.fromNullable(i),apiVersion:h.cb.fromNullable(s),cmpId:h.cb.fromNullable(n)})))}const S=({reason:e,status:t,consent:i,apiVersion:s,cmpId:n})=>({reason:e,status:t,consent:i,apiVersion:s.getOrNull(),cmpId:n.getOrNull()});var T=__webpack_require__(920),k=__webpack_require__(7236);class P{static updateTeadsGDPRPayload(e){P.payload=e,window.teads.gdprPayload.status=e.status,window.teads.gdprPayload.consent=e.consent,window.teads.gdprPayload.reason=e.reason,window.teads.gdprPayload.apiVersion=e.apiVersion.getOrValue(""),window.teads.gdprPayload.cmpId=e.cmpId.getOrValue(""),P.logger.info(`payload: { status: ${e.status}, consent: ${e.consent}, reason: ${e.reason}}, apiVersion: ${e.apiVersion}, cmpId: ${e.cmpId}`)}}P.logger=new g.Y("GDPR");var x=__webpack_require__(7404),L=__webpack_require__(8576),_=__webpack_require__(3588);function O(e){return h.cb.fromNullable(null==e?void 0:e.headerBiddingProvider).filter(i.ct)}const V=e=>({type:"Timeout",reason:230,status:23,consent:null!=e?e:"",apiVersion:(0,h.sx)(2),cmpId:h.MB}),R=(e,t,i,s=(0,h.sx)(2))=>({type:"Error",message:e,reason:t,status:i,consent:"",apiVersion:s,cmpId:h.MB}),D=e=>e.map((e=>{switch(e){case"cmpuishown":return 121;case"tcloaded":return 126;case"useractioncomplete":return 125;default:return 120}})).getOrValue(120),N=new g.Y("IAB TCF v2");function M(e,t,i,s,n){c.AT.tryCatch((()=>e.call(null,t,i,s,n))).fold((e=>N.error("Calling __tcfapi function threw an exception",e)),(()=>N.debug("Successfully called __tcfapi function")))}const B=e=>(0,A.hasOwnProperty)(e,"cmpLoaded")&&(0,i.am)(e.cmpLoaded),F=e=>(0,A.hasOwnProperty)(e,"gdprApplies")&&((0,i.Y3)(e.gdprApplies)||(0,i.am)(e.gdprApplies)),U=e=>(0,A.hasOwnProperty)(e,"cmpStatus")&&(0,i.ct)(e.cmpStatus)&&(0,s.includes)(["error","loaded","stub"],e.cmpStatus.toLowerCase()),W=e=>(0,A.hasOwnProperty)(e,"gdprApplies")&&((0,i.Y3)(e.gdprApplies)||(0,i.am)(e.gdprApplies)),H=e=>(0,A.hasOwnProperty)(e,"tcString")&&(0,i.ct)(e.tcString),j=e=>h.cb.fromNullable(e).match({none:()=>(0,c.Yl)("Expected tcData to be an object but got null or undefined"),some:e=>(0,c.s5)(e)}).filterOrElse(i.Y9,(e=>"Expected tcData to be an object but got "+typeof e)).filterOrElse(W,(e=>`Expected tcData to contain gdprApplies but got ${e.gdprApplies}`)).flatMap((e=>e.gdprApplies?(0,c.s5)(e).filterOrElse(H,(e=>`Expected tcData to contain a valid tcString but got ${e.tcString}`)):(0,c.s5)(e)));var z=__webpack_require__(4456);const G=(e,t)=>new Promise((s=>{var n;(n=e,n()?(0,c.s5)(n()):(0,c.Yl)("Couldn't find tcfApi in given context")).fold((e=>s(R(e,220,22,h.MB))),(n=>(e=>(0,A.isFunction)(e)?(0,c.s5)(e):(0,c.Yl)("Expected __tcfapi to be a valid function but got "+typeof e))(e()).fold((e=>s(R(e,240,21))),(n=>{const r=(0,z.y2)((()=>s(V())),t+10);M(e(),"ping",2,(n=>{(e=>h.cb.fromNullable(e).match({none:()=>(0,c.Yl)("Expected pingReturn to be an object but got null or undefined"),some:e=>(0,c.s5)(e)}).filterOrElse(i.Y9,(e=>"Expected pingReturn to be an object but got "+typeof e)).filterOrElse(B,(e=>`Expected pingReturn to have a valid cmpLoaded but got ${e.cmpLoaded}`)).filterOrElse(F,(e=>`Expected pingReturn to have a valid gpdrApplies but got ${e.gdprApplies}`)).filterOrElse(U,(()=>`Expected pingReturn to have a valid cmpStatus but got ${e.cmpStatus}`)))(n).fold((i=>{r.clear(),t-10<=0?s(R(i,240,21)):(0,z.y2)((()=>{s(G(e,t-50))}),50)}),(()=>{r.clear(),Y(e,s,t)}))}))}))))})),Y=(e,t,i,s)=>{const n=(0,z.y2)((()=>$(e,t,i)),i);M(e(),"addEventListener",2,(s=>j(s).flatMap((t=>((0,z.y2)((()=>{M(e(),"removeEventListener",2,A.noop,t.listenerId)}),i),(0,c.s5)(t)))).fold((e=>{n.clear(),t(R(e,240,21))}),(e=>{switch(n.clear(),e.gdprApplies){case!0:return t((i=e.tcString,s=e.cmpId,r=e.eventStatus,{type:"AddEventListener",consent:i,reason:D(h.cb.fromNullable(r)),status:12,apiVersion:(0,h.sx)(2),cmpId:(0,h.sx)(s)}));case!1:return t((e=>({type:"AddEventListenerDoesNotApply",reason:0,status:0,consent:"",apiVersion:(0,h.sx)(2),cmpId:(0,h.sx)(e)}))(e.cmpId));default:return t({type:"AddEventListenerUnknown",reason:250,status:25,consent:"",apiVersion:(0,h.sx)(2),cmpId:h.MB})}var i,s,r}))))},$=(e,t,i)=>{const s=(0,z.y2)((()=>t(V())),i);M(e(),"getTCData",2,(e=>j(e).fold((e=>{s.clear(),t(R(e,240,21))}),(e=>{switch(s.clear(),e.gdprApplies){case!0:return t((i=e.tcString,n=e.cmpId,r=e.eventStatus,{type:"GetTCData",consent:i,reason:D(h.cb.fromNullable(r)),status:12,apiVersion:(0,h.sx)(2),cmpId:(0,h.sx)(n)}));case!1:return t((e=>({type:"GetTCDataDoesNotApply",reason:0,status:0,consent:"",apiVersion:(0,h.sx)(2),cmpId:(0,h.sx)(e)}))(e.cmpId));default:return t({type:"GetTCDataUnknown",reason:250,status:25,consent:"",apiVersion:(0,h.sx)(2),cmpId:h.MB})}var i,n,r}))))},q=(e,t)=>c.AT.tryCatch((()=>e(t))).fold((e=>(0,c.Yl)("Error while trying to evaluate the predicate.")),(i=>i?(0,c.s5)(t):(0,x.isChildWindow)(t)?q(e,t.parent):(0,c.Yl)("Could not find any window matching the predicate."))),K=e=>(0,i.Y9)(e)&&(0,A.hasOwnProperty)(e,"__tcfapiReturn")&&(0,i.Y9)(e.__tcfapiReturn)&&(0,A.hasOwnProperty)(e.__tcfapiReturn,"returnValue")&&(0,A.hasOwnProperty)(e.__tcfapiReturn,"success")&&(0,A.hasOwnProperty)(e.__tcfapiReturn,"callId"),Q=(e,t,i)=>h.cb.fromNullable(i).filter((t=>t.source===e)).map((({data:e})=>e)).filter(K).map((({__tcfapiReturn:e})=>e)).filter((({callId:e})=>e===t)),X=(e,t,i,s)=>n=>Q(t,i,n).forEach((({success:n,returnValue:r})=>{s(n?r:void 0,n),(0,o.removeEventListener)("message",e,X(e,t,i,s))})),Z=(e,t,s,n)=>r=>Q(t,s,r).forEach((({success:r,returnValue:a})=>{(e=>(0,i.Y3)(e)||e)(r)?n(a):n(void 0),(0,o.removeEventListener)("message",e,Z(e,t,s,n))})),J=(e,t,i,s)=>n=>Q(t,i,n).forEach((({success:n,returnValue:r})=>{s(n?r:void 0,n),(0,o.removeEventListener)("message",e,J(e,t,i,s))})),ee=(e,t,i,s)=>n=>Q(t,i,n).forEach((({success:n})=>{s(n),(0,o.removeEventListener)("message",e,ee(e,t,i,s))}));function te(e){return(0,i.Y9)(e)&&(0,A.hasOwnProperty)(e,"version")&&(0,A.hasOwnProperty)(e,"uspString")&&(0,i.ct)(e.uspString)}var ie=__webpack_require__(9516);const se=ie.__,ne=({success:e,returnValue:t})=>({success:e,usPrivacyString:te(t)?h.cb.of(t.uspString):(0,i.ct)(t)?h.cb.of(t):h.MB}),re=e=>h.cb.fromNullable(e.frames.__uspapiLocator).nonEmpty(),oe=(e,t)=>c.AT.tryCatch((()=>e(t))).fold((e=>(0,c.Yl)("Error while trying to evaluate the predicate.")),(i=>i?(0,c.s5)(t):(0,x.isChildWindow)(t)?oe(e,t.parent):(0,c.Yl)("Could not find any window matching the predicate."))),ae=e=>(0,i.Y9)(e)&&(0,i.Y9)(e.__uspapiReturn)&&e.__uspapiReturn.hasOwnProperty("returnValue")&&e.__uspapiReturn.hasOwnProperty("success")&&e.__uspapiReturn.hasOwnProperty("callId"),le={uspApi:{getUsPrivacyData:(e,t)=>new Promise((i=>{const s=(0,z.y2)((()=>i({_tag:"timeout"})),t,z.qe.Standard);h.cb.fromNullable(e).filter(A.isFunction).match({none:()=>(s.clear(),i({_tag:"not-found"})),some:e=>e("getUSPData",1,((e,t)=>{s.clear(),t&&te(e)?i({_tag:"successful",usPrivacyString:e.uspString}):i({_tag:"unsuccessful"})}))})})),matcher:({onLocatorNotFound:e,onUnsuccessful:t,onSuccessful:i,onTimeout:s})=>n=>{switch(n._tag){case"not-found":return e();case"timeout":return s();case"unsuccessful":return t();case"successful":return i(n.usPrivacyString);default:(0,A.exhaustive)(n)}}},amp:{getUsPrivacyData:se},postMessageApi:{getUsPrivacyData:(e,t,i)=>c.AT.tryCatch((()=>new Promise((s=>{oe(re,e).fold((e=>s({_tag:"not-found"})),(n=>{const r=(0,m.rand)(10),a=({data:t,source:i})=>{i===n&&h.cb.of(t).filter(ae).map((({__uspapiReturn:e})=>e)).filter((({callId:e})=>e===r)).map(ne).forEach((({success:t,usPrivacyString:i})=>{(0,o.removeEventListener)("message",e,a),t?i.match({some:e=>s({_tag:"successful",usPrivacyString:e}),none:()=>s({_tag:"malformed-response"})}):s({_tag:"unsuccessful"})}))};(0,z.y2)((()=>{c.AT.tryCatch((()=>{(0,o.removeEventListener)("message",e,a),s({_tag:"timeout"})})).tapLeft((e=>i.forEach((t=>t.error(`ccpa-error 1 ${e}`,1)))))}),t,z.qe.Standard),(0,o.addEventListener)("message",e,a),n.postMessage({__uspapiCall:{command:"getUSPData",parameter:void 0,version:1,callId:r}},"*")}))})))).fold((e=>(i.forEach((t=>t.error(`ccpa-error 2 ${e}`,1))),Promise.resolve({_tag:"unsuccessful"}))),(e=>e)),matcher:({onLocatorNotFound:e,onTimeout:t,onUnsuccessful:i,onMalformedResponse:s,onSuccessful:n})=>r=>{switch(r._tag){case"not-found":return e();case"timeout":return t();case"unsuccessful":return i();case"malformed-response":return s();case"successful":return n(r.usPrivacyString);default:(0,A.exhaustive)(r)}}}};var de=__webpack_require__(2495);const ce=(0,de.c)(((e,t)=>{if((0,A.hasOwnProperty)(t,"placementMetadata")){const s=t.placementMetadata;if((0,i.Y9)(s)&&(0,i.Y9)(s[e])){const{adCallTrackingUrl:t,auctionId:n}=s[e];return(0,h.sx)({adCallTrackingUrl:h.cb.fromNullable(t).filter(i.ct),auctionId:h.cb.fromNullable(n).filter(a.Q)})}}return h.MB})),he=e=>{if((0,A.hasOwnProperty)(e,"wigo")){const t=e.wigo;if((0,i.Y9)(t)&&(0,A.hasOwnProperty)(t,"reportEvent")&&(0,A.hasOwnProperty)(t,"reportName")){const{reportEvent:e,reportName:s}=t;if((0,i.ct)(e)&&(0,i.ct)(s))return(0,h.sx)({reportEvent:e,reportName:s})}}return h.MB};var ue=__webpack_require__(8536),pe=__webpack_require__(4136);const ge=e=>(0,A.isArray)(e)&&e.every((e=>(0,i.ct)(e)&&(0,i.Ib)(parseInt(e,10)))),me=e=>c.AT.tryCatch((()=>e.localStorage.getItem("_pdfps"))).toOption().flatMap((e=>c.AT.tryCatch((()=>JSON.parse(e))).toOption())).filter(ge);var fe=__webpack_require__(2132);let ve=h.MB;const Ae=new g.Y("helper.ViewerInfo"),be=e=>e&&e.hasOwnProperty("teadsViewerInfo");var ye=__webpack_require__(6568),we=__webpack_require__(6388),Ee=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};const Ce=e=>e.match({some:e=>({us_privacy:e}),none:()=>({})}),Ie=e=>{var t,s;return h.cb.fromPredicate(null===(s=null===(t=null==e?void 0:e.settings)||void 0===t?void 0:t.values)||void 0===s?void 0:s.placementId,i.Ib)};class Se{constructor(e,t,i,s,n){this.placementAd=e,this.pageId=t,this.initialAuctionId=i,this.initialViewerId=s,this.sumologicLogger=n,this.logger=new g.Y("helper.RASRequest"),this.gdprIabObject=h.MB,this.uspString=h.MB,this.fraudReason=h.cb.empty(),this.adCallTrackingUrl=h.cb.empty(),this.rasAuctionId=h.MB,this.viewerId=h.MB,this.mrgReason=h.MB}initRequest(e,t){if(!this.placementAd.ad&&w.E.isRichAdServerRequestEnabled){this.page=Object.assign(Object.assign({},t),{gdpr_iab:S(t.gdpr_iab)});const i=r.getClientSideDeviceProperties(),s=Object.assign(Object.assign(Object.assign({},this.initialAuctionId.map((e=>({auctid:e}))).getOrValue({})),{autoplay:r.canAutoplay(),formatVersion:encodeURIComponent("1342"),env:r.getEnv()}),i.map(encodeURIComponent).map((e=>({clientSideDeviceProperties:e}))).getOrValue({}));r.getNetworkBandwidthInMbps().forEach((e=>s.netBw=e)),(0,L.uk)().forEach((e=>s.ttfb=e)),this.rasUrl=(0,v.e0)(e,s)}}fetchRas(){return Ee(this,void 0,void 0,(function*(){const e={body:JSON.stringify(this.page),method:"POST",headers:{Accept:"application/json; charset=UTF-8"},credentials:"include",redirect:"follow"};return window.isSecureContext&&(e.browsingTopics=!0),Promise.race([fetch(this.rasUrl,e),new Promise(((e,t)=>setTimeout((()=>{t(new Error("RAS request: timeout"))}),w.E.richAdServerRequestTimeout)))])}))}send(e){return Ee(this,void 0,void 0,(function*(){O(this.placementAd.ad).filter((e=>"debugFormat"!==e)).isEmpty()?yield this.onNonHeaderBidding(e,this.placementAd.placement.pid):yield this.onHeaderBidding();try{const e=yield this.getAdPromiseFromWigo();this.logger.warn("ad has been successfully loaded from a WIGO report",e),this.placementAd.ad=e,_.kZ.isCeltraParameterSet((0,v.ui)())&&(this.placementAd.ad.portfolio_item_id=36),this.placementAd.placement.wigo.enableWigo("enableFromReport")}catch(e){}if(this.placementAd.ad);else try{const e=yield this.fetchRas();e.ok?this.onload(yield e.json()):(this.logger.error("Request error - Status:",e.status),this.onerror(pe.IR.AdNotAvailableServerError))}catch(e){this.sumologicLogger.error(`ras-request-error ${this.pageId} ${(0,k.k)(e)}`),this.logger.error("Request error - Status:",pe.IR.AdNotAvailableNetworkError),this.onerror(pe.IR.AdNotAvailableNetworkError)}const t=this.fraudReason.getOrNull();return{adResponse:{adCallTrackingUrl:this.adCallTrackingUrl,auctionId:this.rasAuctionId.orElse((()=>this.initialAuctionId)),viewerId:this.viewerId.orElse((()=>this.initialViewerId)),fraudReason:t},gdprIabObject:this.gdprIabObject,usPrivacyString:this.uspString,mrgReasonFromRas:this.mrgReason}}))}onHeaderBidding(){this.logger.debug("Header Bidding detected: did not try to retrieve CCPA US Privacy string and GDPR consent string as it's been done in the Prebid adapter.")}onNonHeaderBidding(e,t){const i=this.fetchUSPrivacyString(50),s=this.fetchGdprConsent(),{userAgentData:n}=navigator,o=void 0===n?Promise.resolve(null):function(e){return t=this,i=void 0,n=function*(){return e.getHighEntropyValues(["architecture","bitness","model","platformVersion","fullVersionList"]).catch((t=>Object.assign(Object.assign({},e),{source:1}))).then((e=>{var t;const{architecture:i,bitness:s,brands:n,fullVersionList:r,mobile:o,model:a,platform:l,platformVersion:d}=e;return{architecture:null!=i?i:null,bitness:null!=s?s:null,browsers:(null!==(t=null!=r?r:n)&&void 0!==t?t:[]).map((({brand:e,version:t})=>({brand:e,version:t.split(".")}))),mobile:o?1:0,model:null!=a?a:null,platform:l&&d?{brand:l,version:d.split(".")}:null,source:"source"in e?e.source:2}}))},new((s=void 0)||(s=Promise))((function(e,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(o,a)}l((n=n.apply(t,i||[])).next())}));var t,i,s,n}(n),a=((e,t,i,s,n)=>{if(!((e,t)=>h.cb.fromNullable(t.teadsPermutive).existsIf((t=>t[e])))(e,t))return h.MB;const r=s?me(t.top).orElse((()=>me(t))):me(t);return i.info(`permutive ${n} ${r.map((e=>e.length)).getOrValue("N/A")}`),r})(t,window,this.sumologicLogger,(0,x.isChildWindow)(window)&&!(0,x.isInCrossDomainIframe)(window.document.body),(0,v.Ae)().flatMap((e=>h.cb.fromNullable(e.windowReferrerUrl))).map(v.K0).map((e=>e.hostname)).getOrValue("N/A"));return(0,ye.UV)()===ye.ii.Global?we.c.debug.track(this.placementAd.placement.key)(pe.IR.ClientAdCollision,{baseUrl:w.E.trackingUrl,referer:(0,ue.ID)(),queryParameters:{env:r.getEnv(),pageId:this.pageId.toString(),pid:t.toString(),hb_provider:"",auctid:this.initialAuctionId.getOrValue("")},trackingUrl:h.MB},h.cb.of(ye.Ht.ExcludeWithGlobale)):(0,ye.UV)()===ye.ii.PostMessage?((0,ye.G0)(!0),we.c.debug.track(this.placementAd.placement.key)(pe.IR.ClientAdCollision,{baseUrl:w.E.trackingUrl,referer:(0,ue.ID)(),queryParameters:{env:r.getEnv(),pageId:this.pageId.toString(),pid:t.toString(),hb_provider:"",auctid:this.initialAuctionId.getOrValue("")},trackingUrl:h.MB},h.cb.of(ye.Ht.ExcludeWithPostMessage))):this.logger.debug("no exclusivityPixel infos before RAS"),Promise.all([s,i,o]).then((([t,i,s])=>{this.makeAdRequest(e)(t,i,s,a,ve,(0,ye.AT)())}))}fetchUSPrivacyString(e){return c.AT.tryCatch((()=>{const t=this.sumologicLogger,i=le.postMessageApi.matcher({onLocatorNotFound:()=>(this.logger.debug("No parent window with a child iframe named __uspapiLocator was found"),h.MB),onTimeout:()=>(this.logger.debug("Timeout reached when trying to retrieve US Privacy string via iframes"),h.MB),onUnsuccessful:()=>(this.logger.debug("Could not successfully retrieve US Privacy string via iframes"),h.MB),onMalformedResponse:()=>(this.logger.debug("Got a malformed response for US Privacy string via iframes"),h.MB),onSuccessful:e=>(this.logger.debug(`Got a US Privacy string via iframes: ${e}`),(0,h.sx)(e))}),s=le.uspApi.matcher({onTimeout:()=>(this.logger.debug("Timeout reached when trying to retrieve US Privacy string with __uspapi function"),h.MB),onLocatorNotFound:()=>(this.logger.debug("__uspapi value provided is not a function, fallback to iframe mechanism",window.__uspapi),h.MB),onUnsuccessful:()=>(this.logger.warn("Calling __uspapi with getUSPData command was unsuccessful"),h.MB),onSuccessful:e=>(this.logger.debug(`Got a US Privacy string by calling __upsapi: ${e}`),(0,h.sx)(e))}),n=()=>le.postMessageApi.getUsPrivacyData(window,e,(0,h.sx)(t)).then(i),o=(0,x.isInCrossDomainIframe)(document.body)||(0,x.isChildWindow)(window);return r.isAmp()?(()=>le.amp.getUsPrivacyData(h.cb.fromNullable(window.context)).match({some:e=>(this.logger.debug(`Got a US Privacy string using AMP context: ${e}`),Promise.resolve((0,h.sx)(e))),none:()=>(this.logger.warn("Could not retrieve US Privacy string using AMP context",window.context),n())}))():o?n():le.uspApi.getUsPrivacyData(window.__uspapi,e).then(s)})).fold((e=>(this.sumologicLogger.error(`ccpa-error 0 ${e}`,1),Promise.resolve(h.MB))),(e=>e))}fetchGdprConsent(){if(r.isAmp())return Promise.resolve((0,ie.Yn)());const e=(0,x.isInCrossDomainIframe)(document.body)||(0,x.isChildWindow)(window);return(()=>{const t=({consent:e,status:t,reason:i,apiVersion:s,cmpId:n})=>({status:t,consent:e,reason:i,apiVersion:s,cmpId:n});return q(e?e=>h.cb.fromNullable(e.frames.__tcfapiLocator).nonEmpty():e=>h.cb.fromNullable(e.__tcfapi).nonEmpty(),window).fold((e=>new Promise((t=>t(R(e,220,22,h.MB)))).then(t)),(i=>{if(e){const e=(s=i,n=window,(e,t,i,r)=>{const a=(0,m.rand)(10),l={__tcfapiCall:{command:e,parameter:r,version:t,callId:a}};let d;switch(e){case"removeEventListener":d=ee(n,s,a,i);break;case"ping":d=Z(n,s,a,i);break;case"getTCData":d=X(n,s,a,i);break;case"addEventListener":d=J(n,s,a,i)}(0,o.addEventListener)("message",n,d),s.postMessage(l,"*")});return G((()=>e),250).then(t)}return G((()=>window.__tcfapi),250).then(t);var s,n}))})().then((e=>(P.updateTeadsGDPRPayload(e),e)))}makeAdRequest(e){return(t,i,s,n,r,o)=>{this.gdprIabObject=h.cb.fromNullable(t),this.uspString=i;const a=Object.assign(Object.assign({id:this.pageId,placements:[this.placementAd.report],gdpr_iab:t},Ce(i)),{segments:{permutive:n.getOrNull()},first_party_data:{firstPartyCookieTeadsId:r.map((e=>e.teadsViewerInfo.tfpvi)).getOrNull(),sharedIds:r.map((e=>e.teadsViewerInfo.sharedIds)).getOrNull()},ua_ch:s,pageTitle:this.getPageTitle().slice(0,300),pageDescription:this.getPageDescription().slice(0,300),badv:o,fledgeEnabled:"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator});this.initRequest(e,a)}}getAdPromiseFromWigo(){return h.cb.fromNullable(_.kZ.reportPromise).map((e=>e.then((e=>this.getAdFromWigoReport(e).match({some:e=>Promise.resolve(e),none:()=>Promise.reject("ad not available in the report")}))).catch((e=>(this.logger.error("ad Promise from WIGO failed",e),Promise.reject()))))).getOrElse((()=>Promise.reject()))}getPageTitle(){var e,t;try{return window.top.document.title||(null===(e=window.top.document.querySelector('meta[property="og:title"]'))||void 0===e?void 0:e.getAttribute("content"))||""}catch(e){return document.title||(null===(t=document.querySelector('meta[property="og:title"]'))||void 0===t?void 0:t.getAttribute("content"))||""}}getPageDescription(){let e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return(null==e?void 0:e.getAttribute("content"))||""}getAdFromWigoReport(e){return h.cb.fromNullable(e.steps).map((e=>s.filter(e,(e=>0===e.step&&1===e.substep)))).filter(s.isNotEmpty).map((e=>e.pop())).flatMap((e=>c.AT.tryCatch((()=>(0,i.ct)(e.info.store)?JSON.parse(e.info.store):e.info.store)).toOption())).flatMap((e=>h.cb.fromNullable(e.tta))).map((e=>(e[this.pageId]&&(0,A.isArray)(e[this.pageId])&&(e=e[this.pageId].shift()),e.handled=!1,e)))}onload(e){this.logger.info("Successful request",this.rasUrl);const t={placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger},i={env:r.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.rasAuctionId.getOrValue((0,a.S)("")),vid:this.viewerId.getOrValue((0,l.Y)("")),slot:this.placementAd.placement.slotType};try{this.logger.info("RAS response",e),Array.isArray(e.ads)||(this.sumologicLogger.error("ras-request-ads-not-array"),this.placementAd.placement&&this.placementAd.report.validity.status&&(0,ue.WM)(Object.assign(Object.assign({},t),{queryParameters:i})),e.ads=[],this.mrgReason=(0,h.sx)("18"),this.logger.debug("Ads property from ad response is not an array",e)),e.ads.length>1&&(this.logger.warn("Received more than one ad, WTF?"),e.ads=[e.ads[0]]),!0===e.wigoEnabled&&this.placementAd.placement.wigo.enableWigo(),this.placementAd.placement.wigo.settings=he(e),ce(this.placementAd.placement.pid,e).forEach((({auctionId:e,adCallTrackingUrl:t})=>{this.logger.debug(`PID ${this.placementAd.placement.pid} has auction id `,e),this.rasAuctionId=e,this.adCallTrackingUrl=t})),n=e,(0,A.hasOwnProperty)(n,"viewerId")&&(0,l.E)(n.viewerId)&&(this.logger.debug(`Setting viewerId for PID ${this.placementAd.placement.pid} to `,e.viewerId),this.viewerId=h.cb.of(e.viewerId)),(0,s.isEmpty)(e.ads)?this.placementAd.placement&&this.placementAd.report.validity.status?"string"==typeof e.noAdReason?-1!==["IVT DoubleVerify","IVT Tag","BlockedSite DoubleVerify","Teads Blacklist"].indexOf(e.noAdReason)?this.fraudReason=(0,h.sx)(e.noAdReason):this.logger.debug("Error while parsing noAdReason from ad response: Got an unknown fraud reason"):(this.placementAd.placement.wigo.valid(1,2,"noAd-notFilled","error"),this.logger.debug("Ads list is empty and noAdReason is missing in ad response",e)):this.logger.debug("Ads list is empty and placement validity status is falsy",e.ads,this.placementAd.report.validity):Ie(e.ads[0]).match({some:t=>{this.placementAd.placement.pid===t?(this.placementAd.ad?this.logger.debug(`The ad for the PID ${t} has already been loaded`,e.ads[0]):this.placementAd.ad=e.ads[0],this.logger.debug(`Found an ad for placement ${t} in response.ads`,e.ads)):(this.mrgReason=(0,h.sx)("18"),this.logger.debug(`Could not find an ad for placement ${t} in response.ads`,e.ads))},none:()=>{this.mrgReason=(0,h.sx)("18"),this.logger.warn("Placement from ad response does not exist in the tag",this.placementAd.placement,e.ads[0])}}),window._tta&&window._tta[this.pageId]&&s.forEach(window._tta[this.pageId],(e=>{Ie(e).match({some:t=>{this.placementAd.placement.pid===t&&(this.placementAd.ad?this.placementAd.ad=function(e,t){let i={settings:{}};return t.type&&t.content?(i.type=t.type,i.content=t.content):(i.type=e.type,i.content=e.content),i.settings=e.settings,i.insertion_id=e.insertion_id,i.connection_id=e.connection_id,i}(this.placementAd.ad,e):this.placementAd.ad=e)},none:()=>{this.logger.warn(`Trying to process _tta object but could not find the related _ttp object (PID: ${this.placementAd.placement.pid})`,this.placementAd.placement,e)}})}))}catch(s){this.sumologicLogger.error(`ras-request-invalid-response ${this.pageId} ${(0,k.k)(s)}`),this.placementAd.placement&&this.placementAd.report.validity.status&&(0,ue.WM)(Object.assign(Object.assign({},t),{queryParameters:i})),this.logger.error("Invalid response",s,e),this.mrgReason=(0,h.sx)("18")}var n}onerror(e){this.placementAd.placement&&this.placementAd.report.validity.status&&(0,ue.s4)(e)({placementKey:this.placementAd.placement.key,sumologicLogger:this.sumologicLogger,wigo:this.placementAd.placement.wigo,logger:this.logger,queryParameters:{env:r.getEnv(),pageId:this.placementAd.placement.pageId.toString(),pid:this.placementAd.placement.pid.toString(),auctid:this.rasAuctionId.getOrValue((0,a.S)("")),vid:this.viewerId.getOrValue((0,l.Y)("")),slot:this.placementAd.placement.slotType}}),this.mrgReason=(0,h.sx)("18")}}var Te=__webpack_require__(4040);const ke=new g.Y("helper.UserSync");let Pe;function xe(e,t,i,s,n,o){let a;const l=i.match({some:e=>({env:"js-web",hb_provider:e}),none:()=>({env:r.getEnv()})});if(!Pe){try{a=(0,x.findTopWindow)(window.document.body)}catch(e){ke.warn("Cannot get top window"),a=window}(i=>{const r={pid:e,gdprIab:JSON.stringify(S(t)),fromFormat:!0},a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),l),n.match({some:e=>({auctid:e}),none:()=>({})})),o.match({some:e=>({vid:e}),none:()=>({})})),Ce(s));Pe=(0,x.createIframe)("user-sync"),Pe.id="teadsusersync",Pe.src=(0,v.e0)(w.E.userSyncUrl,a)+"&"+(0,Te.k)(),Pe.style.setProperty("display","none"),i.document.body.appendChild(Pe)})(a)}return Pe}var Le=__webpack_require__(9632),_e=__webpack_require__(1776);const Oe=(e,t,i,s)=>{i?s&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t):s&&e.parentNode?e.parentNode.insertBefore(t,e):e.parentNode&&e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.appendChild(t)};var Ve=__webpack_require__(156);class Re{constructor(e,t,i,s,n){this.pageId=e,this.key=t,this.placementConfig=i,this.placementSetting=s,this.wigo=n,this.slotType="native",this.logger=new g.Y("placement"),this.sliderEnabled=!1,this.pid=i.pid.get(),this.win=i.parentWindow.getWindow(),this.initContainer(),h.cb.fromNullable(window._ttp).forEach((t=>{var i,s,n,r,o,a,l,d;this.wigo.valid(0,1,{ttp:null!==(s=null===(i=t[e])||void 0===i?void 0:i[0])&&void 0!==s?s:null,tta:null!==(o=null===(r=null===(n=window._tta)||void 0===n?void 0:n[e])||void 0===r?void 0:r[0])&&void 0!==o?o:null,tts:null!==(d=null===(l=null===(a=window._tts)||void 0===a?void 0:a[e])||void 0===l?void 0:l[0])&&void 0!==d?d:null},"modal")})),this.wigo.valid(1,0)}canEnableSlider(){var e,t;return!!this.placementConfig.formatName.isInRead()&&(null===(t=null===(e=this.placementSetting)||void 0===e?void 0:e.slider)||void 0===t?void 0:t.allowCorner())}enableSlider(){this.sliderEnabled=!0,this.electedSlot=new Ve.c(this.placementConfig.parentWindow.getWindow().document.body),this.placementConfig.btf.set(!1),this.placementConfig.minimum.set(0),this.placementConfig.auto.set(!1),this.placementConfig.insertBefore.set(!1),this.placementConfig.insertInside.set(!0)}handleNoAd({markId:e,sumologicLogger:t,headerBiddingProvider:i,portfolioItemId:s,adCallTrackOpts:n,auctionId:a,viewerId:l}){if(this.placementConfig.fallback.trigger()){const{key:e,logger:n,wigo:r,slotType:o,pageId:d,pid:c}=this;(0,ue.ol)({placementKey:e,sumologicLogger:t,wigo:r,logger:n,headerBiddingProvider:i,pageId:d,placementId:c,slotType:o,portfolioItemId:s,auctionId:a,viewerId:l}),this.logger.info(E.Gs.fallback.noAd),this.wigo.valid(1,2,E.Gs.fallback.noAd,"error")}else r.isAmp()&&ie.Yp();this.sliderEnabled||((e,t,i,s)=>{const n=((e,t,i)=>{const s=t.document.createElement("div");return s.className="teads-adCall",s.style.setProperty("height","Opx","important"),Oe(e,s,i.insertInside.isEnabled(),i.insertBefore.isEnabled()),s})(e,t,s);return i.setElementToFollow(n),(0,_e.K)((()=>i.followElement()),s.scrollSelector.getSlot(),t.context),new Promise((r=>{let a=(0,o.getClientRectRelativeToDocument)((0,o.getBoundingClientRect)(n),{x:(0,o.getScrollLeft)(t),y:(0,o.getScrollTop)(t)});if(!(0,x.isDisplayNoneOverParents)(h.cb.fromNullable(n)))if((0,x.isInView)({element:n,elementAncestors:(0,x.findParentElements)(n),elementClientRect:(0,o.getClientRectFromClientRectRelativeToDocument)(a,{x:(0,o.getScrollLeft)(t),y:(0,o.getScrollTop)(t)}),mainWindow:(0,x.findTopWindow)(e),thresholdCoefficient:1,elementHeight:1})&&!(0,x.isRectZeroFilled)(a))r();else{const l=(0,_e.K)((()=>{const s=(0,o.getBoundingClientRect)(n);a=(0,o.isEmptyBoundingClientRect)(s)?a:(0,o.getClientRectRelativeToDocument)(s,{x:(0,o.getScrollLeft)(t),y:(0,o.getScrollTop)(t)}),(0,x.isInView)({element:n,elementAncestors:(0,x.findParentElements)(n),elementClientRect:(0,o.getClientRectFromClientRectRelativeToDocument)(a,{x:(0,o.getScrollLeft)(t),y:(0,o.getScrollTop)(t)}),mainWindow:(0,x.findTopWindow)(e),thresholdCoefficient:1,elementHeight:1})&&!(0,x.isRectZeroFilled)(a)&&((0,_e.c)(l),i.isActivated()||(e=>{h.cb.fromNullable(e.parentElement).forEach((t=>t.removeChild(e)))})(n),r())}),s.scrollSelector.getSlot(),t.context)}}))})(this.electedSlot.getElement(),this.win,this.wigo,this.placementConfig).then((()=>{(0,ue.q_)({placementKey:this.key,sumologicLogger:t,wigo:this.wigo,logger:this.logger,headerBiddingProvider:i,baseUrlWithQueryParameters:n})}))}getParentContainer(){return this.parentContainer}getPlayerContainer(){return this.playerContainer}getInnerContainer(){return this.innerContainer}isSliderEnabled(){return this.sliderEnabled}initContainer(){this.parentContainer=this.win.document.createElement("div"),this.parentContainer.className="teads-"+this.placementConfig.formatName.get(),this.innerContainer=this.win.document.createElement("div"),this.innerContainer.style.setProperty("position","relative"),this.innerContainer.style.setProperty("margin-bottom","0","important"),this.parentContainer.appendChild(this.innerContainer),this.playerContainer=this.win.document.createElement("div"),this.playerContainer.className="teads-player",this.playerContainer.style.setProperty("display","block","important"),this.playerContainer.style.setProperty("margin-bottom","0","important"),this.playerContainer.id="teads"+Mi++,this.innerContainer.appendChild(this.playerContainer)}}var De=__webpack_require__(6464);class Ne extends Re{constructor(){super(...arguments),this.name="inread"}checkSlot(){return(0,De.CU)(this,this.wigo).fold((({reason:e})=>({status:!1,reasons:[e]})),(({slot:e})=>(this.electedSlot=e,{status:!0,reasons:[]})))}getElectedSlot(){return this.electedSlot}initDom(e){const t=e.getElement(),i=this.parentContainer;return"PR"!==t.nodeName&&"BR"!==t.nodeName||i.style.setProperty("margin","10px 0"),Oe(t,this.parentContainer,this.placementConfig.insertInside.isEnabled(),this.placementConfig.insertBefore.isEnabled()),i}}var Me=__webpack_require__(3804);class Be extends Me.c{constructor(e=Be.DEFAULT){super("Pid"),this.value=e,this.checkValue()}checkValue(){if(!(0,i.Ib)(this.value)||this.value<=0)throw new d.C(d.C.OPTION_PID_INVALID)}get(){return this.value}}Be.DEFAULT=null;class Fe extends Me.c{constructor(e=Fe.DEFAULT){super("AllowedRatio"),this.value=e,this.checkValue()}static isInternalHostname(e){return/(teads\.(tv|net|com))|(ebuzzing\.(com|github\.io)|(localhost)|(\.pantheonsite\.io))$/i.test(e)}static forceValueIfNeeded(e){const t=c.AT.tryCatch((()=>top.location.hostname)).getOrValue(location.hostname);return(0,r.isDesktop)()&&!Fe.isInternalHostname(t)?["LANDSCAPE"]:e}static filterInvalidValues(e){return s.filter(e,(e=>e in Fe.AvailableRatio))}checkValue(){this.value=h.cb.fromNullable(this.value).map(Fe.forceValueIfNeeded).filter(A.isArray).map(Fe.filterInvalidValues).filter(s.isNotEmpty).getOrValue(Fe.DEFAULT)}get(){return this.value}getRatioFilters(){return s.map(this.value,(e=>Fe.AvailableRatio[e]))}mediafileRatioIsValid(e,t){return s.isNotEmpty(s.filter(this.getRatioFilters(),(i=>i(t(e)))))}}Fe.AvailableRatio={LANDSCAPE:e=>e>1,SQUARE:e=>1===e,VERTICAL:e=>e<1,ALL:e=>!0},Fe.DEFAULT=["ALL"];var Ue=__webpack_require__(4372);class We extends Me.c{constructor(e=We.DEFAULT){super("Desktop"),this.value=e,this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=We.DEFAULT)}isEnabled(){return this.value}}We.DEFAULT=!0;class He extends Me.c{constructor(e=He.DEFAULT){super("Mobile"),this.value=e,this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=He.DEFAULT)}isEnabled(){return this.value}}He.DEFAULT=!0;class je extends Me.c{constructor(e=je.DEFAULT){super("Tablet"),this.value=e,this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=je.DEFAULT)}isEnabled(){return this.value}}je.DEFAULT=!0;class ze extends Me.c{constructor(e=ze.DEFAULT){super("Format"),this.value=e,this.checkValue()}checkValue(){if(!(0,i.ct)(this.value)||!ze.VALUES[this.value.toUpperCase()]||(0,r.isAmp)()&&!this.isInRead())throw new d.C(d.C.OPTION_FORMAT_INVALID)}get(){return this.value}isInRead(){return this.value===ze.VALUES.INREAD}isInterstitial(){return this.value===ze.VALUES.INTERSTITIAL}isRewarded(){return this.value===ze.VALUES.REWARDED}}ze.VALUES={INREAD:"inread",INTERSTITIAL:"interstitial",REWARDED:"rewarded"},ze.DEFAULT=null;class Ge extends Me.c{constructor(e=Ge.DEFAULT){super("Btf"),this.value=e,((0,r.isAmp)()||(0,r.isIABSafeFrame)())&&(this.value=!1),this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=Ge.DEFAULT)}set(e){this.value=e}isEnabled(){return this.value}}Ge.DEFAULT=!0;class Ye extends Me.c{constructor(e=Ye.DEFAULT){super("Css"),this.originalRules=e,this.checkValue(),this.originalRules&&(this.rules=Ye.transformStringToObject(this.originalRules))}static transformStringToObject(e){let t={};if(!e)return t;let i=e.split(";");return s.forEach(i,(e=>{let[i,s]=e.split(":");i&&s&&(i=m.trim(i),s=m.trim(s),t[i]=s,"float"===i&&(t.cssFloat=s,t.styleFloat=s))})),t}checkValue(){(0,i.ct)(this.originalRules)||(this.originalRules=Ye.DEFAULT)}getOriginal(){return this.originalRules}applyRulesOn(e){this.applyCssRulesOn(e,this.rules)}applyCssRulesOn(e,t){let i,s=!1;for(let n in t)t.hasOwnProperty(n)&&(s=Ye.IMPORTANT_REGEX.test(t[n]),i=t[n].replace(Ye.IMPORTANT_REGEX,"").trim(),e.style.setProperty(n,i,s?"important":null))}}Ye.DEFAULT=null,Ye.IMPORTANT_REGEX=/!\s*important/i;class $e extends Me.c{constructor(e){super("Filter"),this.placement=e,this.func=e&&e.slot?e.slot.filter:null,this.checkValue()}checkValue(){(0,A.isFunction)(this.func)||(this.func=$e.DEFAULT)}trigger(e){var i=!0;if("function"==typeof this.func){try{i=this.func.call(this.placement,e)}catch(e){t.c.error(`filter-threw-err ${(0,k.k)(e)}`),this.logger.error("the filter function threw an error:",e,this.func)}"boolean"!=typeof i&&(i=!0)}return i}}$e.DEFAULT=null;class qe extends Me.c{constructor(e=qe.DEFAULT){super("InsertBefore"),this.value=e,this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=qe.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}qe.DEFAULT=!1;class Ke extends Me.c{constructor(e=Ke.DEFAULT){super("InsertInside"),this.value=e,this.checkValue()}checkValue(){(0,r.isAmp)()?this.value=Ke.DEFAULT_AMP:(0,i.am)(this.value)||(this.value=Ke.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}Ke.DEFAULT=!1,Ke.DEFAULT_AMP=!0;class Qe extends Me.c{constructor(e=Qe.DEFAULT){super("Minimum"),this.value=e,((0,r.isAmp)()||(0,r.isIABSafeFrame)())&&(this.value=1),this.checkValue()}checkValue(){(0,i.Ib)(this.value)||(this.value=Qe.DEFAULT)}set(e){this.value=e}get(){return this.value}}Qe.DEFAULT=1;class Xe extends Me.c{constructor(e=Xe.DEFAULT){super("MinimumBelow"),this.value=e,this.checkValue()}checkValue(){(0,i.Ib)(this.value)||(this.value=Xe.DEFAULT)}get(){return this.value}}Xe.DEFAULT=null;class Ze extends Me.c{constructor(e=Ze.DEFAULT){if(super("ParentWindow"),this.value=e,this.win=window,this.checkValue(),this.value)try{window.top.document&&(this.win=window.top)}catch(e){this.logger.warn("parentWindow option is enabled but parent window is not accessible",e)}}checkValue(){(0,i.am)(this.value)||(this.value=Ze.DEFAULT)}getWindow(){return this.win}getValue(){return this.value}}Ze.DEFAULT=!0;class Je extends Me.c{constructor(e=Je.DEFAULT){super("Fallback"),this.value=e,this.called=!1,this.checkValue()}checkValue(){(0,A.isFunction)(this.value)||(this.value=Je.DEFAULT)}trigger(e){if(!this.value||this.called)return!1;try{let t=this.value.call(e);if(this.called=!0,t===E.cA)return this.value=null,!1}catch(e){r.isAmp()&&ie.iE(),this.logger.error("the fallback threw an error:",e)}return!0}hasValue(){return!!this.value}}Je.DEFAULT=null;class et extends Me.c{constructor(e=et.DEFAULT){super("RpmFallback"),this.value=e,this.called=!1,this.checkValue()}checkValue(){(0,A.isFunction)(this.value)||(this.value=et.DEFAULT)}trigger(e){if(!this.value||this.called)return!1;try{this.value.call(e),this.called=!0}catch(e){this.logger.error("the rpmFallback threw an error:",e)}return!0}}et.DEFAULT=null;var tt=__webpack_require__(3008),it=__webpack_require__(9175);class st extends Me.c{constructor(e=st.DEFAULT){super("MinimumTextLength"),this.value=e,this.checkValue()}checkValue(){(0,i.Ib)(this.value)||(this.value=st.DEFAULT)}get(){return this.value}}st.DEFAULT=100;class nt extends Me.c{constructor(e=nt.DEFAULT){super("MinimumWidth"),this.value=e,this.checkValue()}checkValue(){(0,i.Ib)(this.value)||(this.value=nt.DEFAULT)}get(){return this.value}}nt.DEFAULT=100;class rt extends Me.c{constructor(e=rt.DEFAULT){super("MaximumWidth"),this.value=e,this.checkValue()}checkValue(){(0,i.Ib)(this.value)||(this.value=rt.DEFAULT)}get(){return this.value}}rt.DEFAULT=2e3;var ot=__webpack_require__(2447);class at extends ot.c{constructor(e,t){if(super("BelowSelector"),void 0===t)throw new d.C(d.C.OPTION_PARENTWINDOW_INVALID);this.win=t,e||(e=at.DEFAULT),this.value=e,this.checkValue()}checkValue(){this.value===at.DEFAULT||(0,i.ct)(this.value)||o.isHTMLElement(this.value)||o.isNodeList(this.value)||(this.value=at.DEFAULT)}get(){return this.value}getFirstElement(){if(!this.hasCachedElement){var e,t=this.value;if("object"==typeof this.value){var s;for(var n in this.value)if(this.value.hasOwnProperty(n)&&(s=this.checkScreenSelector(n,this.win),t=this.value[n],s))break;s?this.logger.debug("Below Selector",s,"selected:",t):this.logger.warn("Below Selector by device not found: ",this.value)}(0,i.ct)(t)&&t.length>0?e=o.querySelectorAll(t,this.win)[0]:o.isHTMLElement(t)?e=t:o.isNodeList(t)&&(e=t[0]),this.cacheElement(e)}return this.firstElement}getFirstElementRect(){return this.firstElementRect||(this.firstElementRect=o.getBoundingClientRect(this.getFirstElement())),this.firstElementRect}getFirstNodeBelowIndex(e){if(!this.firstNodeBelowIndex&&0!==this.firstNodeBelowIndex){for(var t=!1,i=0;!t&&e[i];)e[i++].getElementRect().top>=this.getFirstElementRect().bottom&&(t=!0);this.firstNodeBelowIndex=i-1}return this.firstNodeBelowIndex}cacheElement(e){this.firstElement=e,this.hasCachedElement=!0}}at.DEFAULT=null;class lt extends Me.c{constructor(e=lt.DEFAULT,t=null){super("Auto"),this.value=e,t&&null!==t.get()&&(this.value=!1),this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=lt.DEFAULT)}isEnabled(){return this.value}set(e){this.value=e}}lt.DEFAULT=!0;class dt extends Me.c{constructor(e=dt.DEFAULT,t=window){super("Avoid"),this.value=e,this.win=t,this.checkValue()}checkValue(){(0,A.containsKeys)(dt.VALUES,this.value)||(this.value=dt.DEFAULT)}get(){return this.value}getSlots(){if(!this.value)return;const e=[],t=this.value.selector;if("string"==typeof t&&t.length>0){const s=o.querySelectorAll(t,this.win);for(var i=0;i<s.length;i++)e.push(new Ve.c(s[i],i))}else o.isHTMLElement(t)&&e.push(new Ve.c(t));return e}getDistance(){return this.value.distance}}dt.VALUES={SELECTOR:"selector",DISTANCE:"distance"},dt.DEFAULT=null;class ct extends Me.c{constructor(e,t){var i;super("ScrollSelector");const s=null!==(i=t.FORCE_DEMO)&&void 0!==i&&i;this.win=s?window:t,this.value=void 0===e?ct.DEFAULT:e,this.checkValue()}checkValue(){(0,i.ct)(this.value)||o.isHTMLElement(this.value)||(this.value=ct.DEFAULT)}getSlot(){let e=this.win;const t=this.value;if("string"==typeof t&&t.length>0){const i=o.querySelectorAll(t,this.win);i&&1===i.length?e=i[0]:this.logger.warn("Parameter must be a string (CSS Selector) or a DOM Element")}else o.isHTMLElement(t)&&(e=t);return e}}ct.DEFAULT=null;class ht{constructor(e,t=h.MB){this.raw=e,this.headerBiddingProvider=t,e.slot||(e.slot={}),this.pid=new Be(e.pid),this.formatName=new ze(e.format),this.btf=new Ge(e.slot.btf),this.css=new Ye(e.css),this.filter=new $e(e),this.insertBefore=new qe(e.slot.insertBefore),this.insertInside=new Ke(e.slot.insertInside),this.minimum=new Qe(e.slot.minimum),this.minimumBelow=new Xe(e.slot.minimumBelow),this.parentWindow=new Ze(e.parentWindow),this.fallback=new Je(e.fallback),this.rpmFallback=new et(e.rpmFallback),this.videoFilter=new tt.c(e.slot.videoFilter),this.imageFilter=new it.c(e.slot.imageFilter),this.minimumTextLength=new st(e.slot.minimumTextLength),this.minimumWidth=new nt(e.slot.minimumWidth),this.maximumWidth=new rt(e.slot.maximumWidth),this.belowSelector=new at(e.slot.belowSelector,this.parentWindow.getWindow()),this.selector=new Ue.c(e.slot.selector,this.parentWindow.getWindow()),this.auto=new lt(e.slot.auto,this.selector),this.avoid=new dt(e.slot.avoid,this.parentWindow.getWindow()),this.scrollSelector=new ct(e.slot.scrollSelector,this.parentWindow.getWindow()),this.callbacks=e.callbacks,this.mobile=new He(e.mobile),this.tablet=new je(e.tablet),this.desktop=new We(e.desktop),this.allowedRatio=new Fe}isMobile(){return this.mobile.isEnabled()}isTablet(){return this.tablet.isEnabled()}isDesktop(){return this.desktop.isEnabled()}}class ut extends Me.c{constructor(e){super("Slider"),this.value=Object.assign(Object.assign({},ut.DEFAULT),e),this.checkValue()}checkValue(){(0,A.containsKeys)(ut.VALUES,this.value)||(this.value=ut.DEFAULT)}allowCorner(){return this.value.allow_corner_position}}ut.VALUES={allow_top_position:"top",allow_corner_position:"corner"},ut.DEFAULT={allow_top_position:!1,allow_corner_position:!1};class pt{constructor(e){this.rawConfig=e,e&&(this.slider=new ut(e.slider))}static getPlacementSetting(e){if(window._tts&&window._tts[e.get()])return window._tts[e.get()]}}var gt=__webpack_require__(3743),mt=__webpack_require__(8520);const ft=new g.Y("TtpHandler");function vt({ttpObject:e,pageInstance:t}){return c.AT.tryCatch((()=>e.filter(At).match({some:e=>gt.Ar(bt(t),e),none:()=>ft.warn("The provided ttp object is not valid",e)})))}function At(e){return(0,i.Y9)(e)}const bt=(0,de.c)(((e,n,r)=>{const o=function(e){return(0,i.ct)(e)?parseInt(e,10):e}(n);if(!function(e){return Ni===e||0===Ni||0===e}(o))throw t.c.error(`multi-page ${Ni} ${o} ${(0,s.map)(r,(e=>e.pid)).join(";")}`),new d.C(d.C.MULTIPLE_PAGE_PROCESS);s.forEach(r,yt(e,o)),Ni=Ni||o})),yt=(0,de.c)(((e,i,s)=>{c.AT.tryCatch((()=>new Be(s.pid))).map((e=>e.get())).fold((e=>{ft.warn("Invalid placement ID value provided",s.pid,s,e)}),(n=>{const r=t.c.copy({collectorUrl:"https://s8t.teads.tv/logs/format/http-source",placementId:(0,h.sx)(n)}),o=(0,mt.getUuid)(),l=o.toOption().map(a.S),d=new _.kZ;o.tapLeft((e=>{r.error(`limitedCapabilities ${(0,k.k)(e)}`),(0,ue.OU)({placementKey:(0,we.A)(i,n,0),sumologicLogger:r,wigo:d,logger:ft,headerBiddingProvider:h.MB,viewerId:h.MB,pageId:i,placementId:n,auctionId:l})})),e.placementAd=e.checkPlacement({rawPlacement:s,pageId:i,placementId:n,pageIndex:0,auctionId:l,wigo:d,sumologicLogger:r,headerBiddingProvider:h.MB,adSettings:h.MB}),e.placementAd&&(e.placementAd=e.checkSlot({placementAd:e.placementAd,wigo:d,auctionId:l,sumologicLogger:r,headerBiddingInfo:h.MB,placementIsFirst:!0,adSettings:h.MB}),e.placementAd&&e.callRAS({placementAd:e.placementAd,auctionId:l,viewerId:h.MB,sumologicLogger:r,onRASResponse:()=>{},tagManagerPackage:h.MB}).then((()=>{Le.o()})))}))}));var wt=__webpack_require__(41);class Et extends Me.c{constructor(e,t){super("Vast"),this.type=e.type,this.content=e.content,this.pid=t,this.appendPID(),this.checkValue()}checkValue(){if(!(0,i.ct)(this.type)||!Et.VALUES[this.type.toUpperCase()])throw new d.C(d.C.OPTION_VAST_INVALID);if(!(0,i.ct)(this.content))throw new d.C(d.C.OPTION_VAST_INVALID)}isVastUrl(){return this.type===Et.VALUES.VASTURL}isVastXml(){return this.type===Et.VALUES.VASTXML}getContent(){return this.content}appendPID(){var e=(0,v.K0)(this.content);this.isVastUrl()&&"a.teads.tv"===e.hostname&&this.pid&&(this.content+=-1===this.content.indexOf("?")?"?":"&",this.content+=`pid=${this.pid}`)}}Et.VALUES={VASTURL:"VastUrl",VASTXML:"VastXml"};class Ct extends Me.c{constructor(e=Ct.DEFAULT){super("Threshold"),this.value=e,this.checkValue()}checkValue(){if(!(0,i.Ib)(this.value)||this.value<=0||this.value>100)throw new d.C(d.C.OPTION_THRESHOLD_MISSING)}get(){return this.value}percentage(){return this.value/100}}Ct.DEFAULT=null;class It extends Me.c{constructor(e=It.DEFAULT){super("Volume"),T.In((0,r.getIosVersion)(),"10")?this.value=It.DEFAULT_IOS10:this.value=Object.assign(Object.assign({},It.DEFAULT),e),this.checkValue()}checkValue(){(0,A.containsKeys)(It.VALUES,this.value)||(this.value=It.DEFAULT)}getMain(){return this.value.main}}It.VALUES={MAIN:"main"},It.DEFAULT={main:.35},It.DEFAULT_IOS10={main:1};class St extends Me.c{constructor(e=St.DEFAULT){super("Animations"),this.value=Object.assign(Object.assign({},St.DEFAULT),e),this.checkValue()}checkValue(){(0,A.containsKeys)(St.VALUES,this.value)||(this.value=St.DEFAULT)}setExpandDuration(e){s.forEach(St.PROPERTIES,(t=>{e.style.setProperty(t,`${this.value.expand}s`)}))}setCollapseDuration(e){s.forEach(St.PROPERTIES,(t=>{e.style.setProperty(t,`${this.value.collapse}s`)}))}getExpandDuration(){return this.value.expand}getCollapseDuration(){return this.value.collapse}}St.PROPERTIES=["-webkit-transition-duration","-o-transition-duration","-moz-transition-duration","transition-duration"],St.VALUES={EXPAND:"expand",COLLAPSE:"collapse"},St.DEFAULT={expand:0,collapse:.5};class Tt extends Me.c{constructor(e=Tt.DEFAULT){super("AdType"),this.value=e,this.checkValue()}checkValue(){(0,i.ct)(this.value)&&Tt.VALUES[this.value]||(this.value=Tt.DEFAULT)}get(){return this.value}isVideo(){return this.value===Tt.VALUES.video}isDisplay(){return this.value===Tt.VALUES.display}isNative(){return this.value===Tt.VALUES.native}}Tt.VALUES={video:"video",display:"display",native:"native"},Tt.DEFAULT=Tt.VALUES.video;var kt=__webpack_require__(5696),Pt=__webpack_require__(5180);class xt extends Me.c{constructor(e=""){if(super("VtpEvent"),this.event=xt.DEFAULT_EVENT,this.offset=xt.DEFAULT_OFFSET,(0,i.ct)(e)){const[t,i]=e.split("-");t&&Pt.a[t]&&(this.event=Pt.a[t]),this.event===kt.c.AdRemainingTimeChange&&(this.offset=parseInt(i,10))}this.checkValue()}checkValue(){(0,i.ct)(this.event)&&(0,i.Ib)(this.offset)&&!isNaN(this.offset)||(this.event=xt.DEFAULT_EVENT,this.offset=xt.DEFAULT_OFFSET)}getEvent(){return this.event}getOffset(){return this.offset}}xt.DEFAULT_EVENT=null,xt.DEFAULT_OFFSET=0;class Lt extends Me.c{constructor(e,t=null){super("SmartPosition"),this.formatName=t,this.value=Object.assign(Object.assign({},Lt.DEFAULT),e),(T.uw(r.getIosVersion(),Lt.MIN_IOS_VERSION)||r.isAmp()||r.isIABSafeFrame())&&(this.value.top=!1,this.value.corner=!1),this.checkValue()}checkValue(){(0,A.containsKeys)(Lt.VALUES,this.value)||(this.value=Lt.DEFAULT)}isEnabled(){var e;return window.DO_BYPASS_DO_FORCE_SMART&&(null===(e=this.formatName)||void 0===e?void 0:e.isInRead())||this.value.mustBypassWhitelist&&(this.value.corner||this.value.top)}isCorner(){return this.value.corner&&this.isEnabled()}isTop(){return this.value.top&&this.isEnabled()&&!r.isDesktop()}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}Lt.MIN_IOS_VERSION="7",Lt.VALUES={top:"top",corner:"corner"},Lt.DEFAULT={top:!1,corner:!1,mustBypassWhitelist:!1};class _t extends Me.c{constructor(e){super("SliderBehavior"),this.value=Object.assign(Object.assign({},_t.DEFAULT),e),this.checkValue()}checkValue(){(0,A.containsKeys)(_t.VALUES,this.value)||(this.value=_t.DEFAULT)}isEnabled(){return this.value.enable}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}_t.VALUES={enable:"enable"},_t.DEFAULT={enable:!1};class Ot extends Me.c{constructor(e){super("Smart6Behavior"),this.value=Object.assign(Object.assign({},Ot.DEFAULT),e),this.checkValue()}checkValue(){(0,A.containsKeys)(Ot.VALUES,this.value)||(this.value=Ot.DEFAULT)}isEnabled(){return this.value.corner||this.value.top}isTop(){return this.value.top&&this.isEnabled()&&!r.isDesktop()}isCorner(){return this.value.corner&&this.isEnabled()&&r.isDesktop()}getValue(){return this.value}setValue(e){this.value=e,this.checkValue()}}Ot.VALUES={top:"top",corner:"corner"},Ot.DEFAULT={top:!1,corner:!1};class Vt extends Me.c{constructor(e){super("CloseButton"),this.getValueFromVast=!e||(0,i.Y3)(e.display),this.value=Object.assign(Object.assign({},Vt.DEFAULT),(0,gt.IF)(e,(0,A.not)(i.Y3))),this.checkValue()}checkValue(){(0,A.containsKeys)(Vt.VALUES,this.value)?(this.value.countdown=+this.value.countdown,(0,i.Ib)(this.value.countdown)||(this.value.countdown=0)):this.value=Vt.DEFAULT}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}hasToGetValueFromVast(){return this.getValueFromVast}}Vt.VALUES={DISPLAY:"display",COUNTDOWN:"countdown"},Vt.DEFAULT={display:!0,countdown:0};class Rt extends Me.c{constructor(e){super("SoundButton");const{display:t,countdown:i,type:s}=Rt.sanitize(e);this.isEnabled=t,this.countdown=i,this.type=s}static sanitize(e){return h.cb.fromNullable(e).map((e=>Object.assign(Object.assign({},Rt.defaultValues),(0,gt.IF)(e,(0,A.not)(A.isNull))))).filter(A.matchesCheckers(Rt.checkers)).getOrValue(Rt.defaultValues)}checkValue(){}toString(){return`SoundButton(${this.isEnabled}, ${this.countdown}, ${this.type})`}}Rt.defaultValues={display:!0,countdown:0,type:"mute"},Rt.checkers={display:i.am,countdown:i.Ib,type:e=>"mute"===e};class Dt extends Me.c{constructor(e=Dt.DEFAULT){super("CallButton"),this.value=Object.assign(Object.assign({},Dt.DEFAULT),e),this.checkValue()}checkValue(){(0,A.containsKeys)(Dt.VALUES,this.value)||(this.value=Dt.DEFAULT)}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}getText(){return this.value.text}}Dt.VALUES={DISPLAY:"display",COUNTDOWN:"countdown",TEXT:"text"},Dt.DEFAULT={display:!0,countdown:3,text:"Learn More"};class Nt extends Me.c{constructor(e=Nt.DEFAULT){super("Timer"),this.value=e,this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=Nt.DEFAULT)}isEnabled(){return this.value}}Nt.DEFAULT=!1;class Mt extends Me.c{constructor(e=Mt.DEFAULT){super("ProgressBar"),this.value=e,this.checkValue()}checkValue(){(0,i.am)(this.value)||(this.value=Mt.DEFAULT)}isEnabled(){return this.value}}Mt.DEFAULT=!0;class Bt{constructor(e){this.lang=e,this.translations={ar:{label:"إعلان"},cs:{label:"REKLAMA"},de:{label:"WERBUNG"},da:{label:"ANNONCE"},en:{label:"ADVERTISING"},es:{label:"PUBLICIDAD"},fr:{label:"PUBLICITÉ"},fi:{label:"MAINONTA"},hr:{label:"OGLAS"},hu:{label:"HIRDETÉS"},id:{label:"Iklan"},it:{label:"PUBBLICITÀ"},ja:{label:"広告"},jamobile:{label:"タップして音声が流れます"},jamobilePR:{label:"[PR]タップして音が流れます"},ko:{label:"광고"},kr:{label:"광고"},mo:{label:"ADVERTISING"},nl:{label:"ADVERTENTIE"},no:{label:"ANNONSERING"},pl:{label:"REKLAMA"},pt:{label:"PUBLICIDADE"},ro:{label:"PUBLICITATE"},ru:{label:"РЕКЛАМА"},sr:{label:"ОГЛАШАВАЊЕ"},sk:{label:"REKLAMA"},sl:{label:"OGLAŠAVANJE"},sv:{label:"ANNONS"},sw:{label:"REKLAM"},tr:{label:"ILAN"},zh:{label:"广告"},"zh-hk":{label:"廣告"},"zh-tw":{label:"廣告"},vi:{label:"ADVERTISING"},"fil-ph":{label:"ADVERTISING"},ms:{label:"ADVERTISING"},"hi-in":{label:"विज्ञापन"}}}translate(e){return(this.translations[this.lang]||{})[e]}}class Ft extends Me.c{constructor(e=Ft.DEFAULT){super("Label"),this.value=Object.assign(Object.assign({},Ft.DEFAULT),e),this.checkValue()}static getTranslation(){const e=r.getLanguage().toLowerCase();let t=new Bt(e).translate("label");return t||5!==e.length||(t=new Bt(e.substr(0,2)).translate("label")),t||(t=new Bt("en").translate("label")),t}checkValue(){(0,A.containsKeys)(Ft.VALUES,this.value)||(this.value=Ft.DEFAULT)}getHTML(){return this.value.html}getText(){return this.value.text}isEnabled(){return this.value.display}}Ft.VALUES={DISPLAY:"display",TEXT:"text",HTML:"html"},Ft.TEXT=Ft.getTranslation(),Ft.DEFAULT={display:!0,text:Ft.TEXT,html:Ft.TEXT};class Ut extends Me.c{constructor(e,t){var i;super("Credits"),this.value=Object.assign(Object.assign({},Ut.DEFAULT_INREAD),e),t.isEnabled()&&(this.value.display=!1),this.checkValue(),this.value.display=(i=this.value.display,!!w.E.isQA&&i)}checkValue(){(0,A.containsKeys)(Ut.VALUES,this.value)||(this.value=Ut.DEFAULT_INREAD)}isEnabled(){return this.value.display}getText(){return this.value.text}getLink(){return this.value.link}}Ut.VALUES={DISPLAY:"display",TEXT:"text",LINK:"link"},Ut.DEFAULT_INREAD={display:!0,text:"Ads by [Teads]",link:"https://hp.teads.com/?utm_source=inread&utm_medium=credits&utm_campaign=invented%20by%20teads"};class Wt extends Me.c{constructor(e=Wt.DEFAULT){super("EndScreen"),this.value=Object.assign(Object.assign(Object.assign({},Wt.DEFAULT),(0,gt.IF)(e,(0,A.not)(i.Y3))),{callButton:Object.assign(Object.assign({},Wt.DEFAULT.callButton),(0,gt.IF)(null==e?void 0:e.callButton,(0,A.not)(i.Y3))),replayButton:Object.assign(Object.assign({},Wt.DEFAULT.replayButton),(0,gt.IF)(null==e?void 0:e.replayButton,(0,A.not)(i.Y3)))}),(0,r.isAmp)()&&(this.value.display=!0,this.value.autoClose=!1),!1===this.value.autoClose&&(this.value.countdown=0),this.checkValue()}checkValue(){(0,A.containsKeys)(Wt.VALUES,this.value)||(this.value=Wt.DEFAULT)}isEnabled(){return this.value.display}getCountdown(){return this.value.countdown}getCallButton(){return this.value.callButton}getReplayButton(){return this.value.replayButton}getAutoClose(){return this.value.autoClose}}Wt.VALUES={DISPLAY:"display",CALLBUTTON:"callButton",REPLAYBUTTON:"replayButton",AUTOCLOSE:"autoClose",COUNTDOWN:"countdown",TYPE:"type"},Wt.DEFAULT={display:!0,callButton:{text:"Learn More",type:"learnMore"},replayButton:{text:"Replay"},autoClose:!1,countdown:0,type:"simple"};class Ht extends Me.c{constructor(e=null,t=""){super("BrandLogo");let i={display:!!e&&e.display,url:t};this.value=Object.assign(Object.assign({},Ht.DEFAULT),i),this.checkValue()}checkValue(){(0,A.containsKeys)(Ht.VALUES,this.value)||(this.value=Ht.DEFAULT)}getUrl(){return this.value.url}isEnabled(){return this.value.display}}Ht.VALUES={DISPLAY:"display",URL:"url"},Ht.DEFAULT={display:!1,url:""};class jt extends Me.c{constructor(e){super("SmartPosition"),this.value=e,this.checkValue()}checkValue(){A.containsKeys(jt.VALUES,this.value)||(this.value=jt.DEFAULT)}closeButtonEnabled(){return this.value.closeButtonDisplay}}jt.VALUES={closeButtonDisplay:"closeButtonDisplay"},jt.DEFAULT={closeButtonDisplay:!1};class zt extends Me.c{constructor(e=zt.DEFAULT){super("Launch"),(0,r.isAmp)()?this.value=zt.VALUES.AUTO:this.value=e,this.checkValue()}checkValue(){(0,i.ct)(this.value)&&zt.VALUES[this.value.toUpperCase()]||(this.value=zt.DEFAULT)}isAuto(){return this.value===zt.VALUES.AUTO}isThreshold(){return this.value===zt.VALUES.THRESHOLD}}zt.VALUES={AUTO:"auto",THRESHOLD:"threshold"},zt.DEFAULT=zt.VALUES.AUTO;var Gt=__webpack_require__(188);class Yt extends Me.c{constructor(e=Yt.DEFAULT){super("SoundStart"),this.value=Object.assign(Object.assign({},Yt.DEFAULT),e),!(0,r.isMobile)()&&!(0,r.isTablet)()||(0,r.isSDK)()||(this.value.type="mute"),this.checkValue()}checkValue(){(0,A.containsKeys)(Yt.VALUES,this.value)||(this.value=Yt.DEFAULT)}isMute(){return this.value.type===Yt.VALUES_TYPE.MUTE}isUnmute(){return this.value.type===Yt.VALUES_TYPE.UNMUTE}isCountdown(){return this.value.type===Yt.VALUES_TYPE.COUNTDOWN}getCountdown(){return this.value.countdown}getType(){return this.value.type}}Yt.VALUES={TYPE:"type",COUNTDOWN:"countdown"},Yt.VALUES_TYPE={MUTE:"mute",UNMUTE:"unmute",COUNTDOWN:"countdown"},Yt.DEFAULT={type:"mute",countdown:0};class $t extends Me.c{constructor(e=$t.VALUES.THRESHOLD){super("VideoPause"),this.value=e,this.checkValue()}checkValue(){(0,i.ct)(this.value)&&$t.VALUES[this.value.toUpperCase()]||(this.value=$t.DEFAULT)}isNo(){return this.value===$t.VALUES.NO}isThreshold(){return this.value===$t.VALUES.THRESHOLD}getValue(){return this.value}setToNo(){return this.value=$t.VALUES.NO}}$t.VALUES={NO:"no",THRESHOLD:"threshold"},$t.DEFAULT=$t.VALUES.THRESHOLD;class qt extends Me.c{constructor(e=qt.DEFAULT){super("SoundMute"),this.value=e,this.checkValue()}checkValue(){(0,i.ct)(this.value)&&qt.VALUES[this.value.toUpperCase()]||(this.value=qt.DEFAULT)}isNo(){return this.value===qt.VALUES.NO}isThreshold(){return this.value===qt.VALUES.THRESHOLD}}qt.VALUES={NO:"no",THRESHOLD:"threshold"},qt.DEFAULT=qt.VALUES.THRESHOLD;class Kt extends Me.c{constructor(e=Kt.DEFAULT){super("PlayerClick"),this.value=e,(0,r.isDesktop)()&&(this.value=Kt.VALUES.CLICK),this.checkValue()}checkValue(){(0,i.ct)(this.value)&&Kt.VALUES[this.value.toUpperCase()]||(this.value=Kt.DEFAULT)}isClick(){return this.value===Kt.VALUES.CLICK}isFullscreen(){return this.value===Kt.VALUES.FULLSCREEN}}Kt.VALUES={CLICK:"click",FULLSCREEN:"fullscreen"},Kt.DEFAULT=(0,r.isDesktop)()?Kt.VALUES.CLICK:Kt.VALUES.FULLSCREEN;class Qt extends Me.c{constructor(e=Qt.DEFAULT){super("End"),this.value=(0,r.isAmp)()?Qt.VALUES.ENDSCREEN:e,this.checkValue()}checkValue(){(0,i.ct)(this.value)&&Qt.VALUES[this.value.toUpperCase()]||(this.value=Qt.DEFAULT)}isCollapse(){return this.value===Qt.VALUES.COLLAPSE}isEndScreen(){return this.value===Qt.VALUES.ENDSCREEN}}Qt.VALUES={COLLAPSE:"collapse",ENDSCREEN:"endscreen"},Qt.DEFAULT=Qt.VALUES.ENDSCREEN;class Xt extends Me.c{constructor(e=Xt.DEFAULT,t){super("Callbacks"),this.callbacks=e,this.volume=t,this.checkValue()}checkValue(){(0,i.Y9)(this.callbacks)||(this.callbacks=Xt.DEFAULT)}trigger(e,i,s){if(this.last===e)return this.logger.debug("Callbacks already triggered",e),!1;if(e===kt.c.AdVolumeChange&&i&&(i.getVolume()===this.volume.getMain()?this.trigger("unmute"):i.isMuted()&&this.trigger("mute")),e===kt.c.AdExpandedChange&&s&&(s.isActive()?this.trigger("enterFullscreen"):this.trigger("exitFullscreen")),(0,A.isFunction)(this.callbacks[e]))try{return this.callbacks[e](),this.last=e,!0}catch(i){t.c.error(`cb-threw-err ${e} ${(0,k.k)(i)}`),this.logger.error('the "'+e+'" callback threw an error:',i)}else this.callbacks[e]&&this.logger.error('the "'+e+'" callback is not a function:',this.callbacks[e]);return!1}}Xt.DEFAULT={};var Zt=__webpack_require__(3064);class Jt extends Me.c{constructor(e){super("AllowedPlayer"),this.setValue(Jt.VALUES[e]),this.checkValue()}checkValue(){let e=!1;for(let t in Jt.VALUES)Jt.VALUES.hasOwnProperty(t)&&(e=e||this.value===Jt.VALUES[t]);e||(this.value=Jt.DEFAULT)}getValue(){return this.value}setValue(e){this.value=e,r.cacheCanvasUsed(this.value===Zt.e.CANVAS)}}Jt.VALUES={html5:Zt.e.HTML5,canvas:Zt.e.CANVAS,any:Zt.e.ANY},Jt.DEFAULT=Zt.e.ANY;class ei extends Me.c{constructor(e=ei.DEFAULT_VALUE){super("BannerVideoBottom"),this.value=Object.assign(Object.assign({},ei.DEFAULT_VALUE),e)}checkValue(){}isEnabled(){return this.value.display}getText(){return this.value.text}}ei.DEFAULT_VALUE={display:!1,text:"Learn more"};const ti=[4,31,45,61,1,2,3,7,20,28,30,39,44,50,65,66,67,70,74,52,73,80,81,21,29,5,32,38,46,62,72,76,78];class ii{constructor(e){if(!e.settings)throw new d.C(d.C.INCOMPLETE_OBJECT);const t={type:e.type,content:e.content};this.vast=new Et(t,e.settings.values.placementId),e.settings.values=e.settings.values||{placementFormat:null,pageId:null,placementId:null,threshold:null},e.settings.components=e.settings.components||{},e.settings.behaviors=e.settings.behaviors||{},this.adSourceId=e.ad_source_id,this.connectionId=e.connection_id,this.insertionId=e.insertion_id,this.dspCampaignId=e.dsp_campaign_id,this.dspCreativeId=e.dsp_creative_id,this.earlyClickProtectionDuration=e.early_click_protection_duration,this.scenarioId=e.scenario_id,this.portfolioItemId=e.portfolio_item_id,r.setIsVideo(-1!==ti.indexOf(this.portfolioItemId)),this.creativeSize=e.creativeSize,this.formatName=new ze(e.settings.values.placementFormat),this.pageId=e.settings.values.pageId,this.placementId=e.settings.values.placementId,this.threshold=new Ct(e.settings.values.threshold),this.volume=new It(e.settings.values.volume),this.animations=new St(e.settings.values.animations),this.adType=new Tt(e.settings.values.adType),this.vtpEvent=new xt(e.settings.values.vtpEvent),this.smartPosition=new Lt(e.settings.behaviors.smartPosition,this.formatName),this.sliderBehavior=new _t(e.settings.behaviors.slider),this.smart6Behavior=new Ot(e.settings.behaviors.smart6Position),this.friendly=h.cb.fromNullable(e.settings.behaviors.friendly).getOrValue(!1),this.closeButton=new Vt(e.settings.components.closeButton),this.soundButton=new Rt(e.settings.components.soundButton),this.callButton=new Dt(e.settings.components.callButton),this.timer=new Nt(e.settings.components.timer),this.progressBar=new Mt(e.settings.components.progressBar),this.label=new Ft(e.settings.components.label),this.credits=new Ut(e.settings.components.credits,this.smartPosition),this.endScreen=new Wt(e.settings.components.endScreen),this.brandLogo=new Ht(e.settings.components.brandLogo,e.settings.values.brandLogoUrl),this.slider=new jt(e.settings.components.slider),this.bannerVideoBottom=new ei(e.settings.components.bannerVideoBottom),this.launch=new zt(e.settings.behaviors.launch),this.videoStart=new Gt.c(e.settings.behaviors.videoStart),this.soundStart=new Yt(e.settings.behaviors.soundStart),this.videoPause=new $t(e.settings.behaviors.videoPause),this.soundMute=new qt(e.settings.behaviors.soundMute),this.playerClick=new Kt(Kt.VALUES.CLICK),this.end=new Qt(e.settings.behaviors.end),this.callbacks=new Xt(e.callbacks,this.volume),this.allowedPlayer=new Jt(e.settings.values.allowedPlayer),this.exclusiveAdOnScreen=!!e.exclusiveAdOnScreen}}var si=__webpack_require__(3540),ni=__webpack_require__(7960);class ri{constructor(){this.error=[],this.click=[],this.pause=[],this.resume=[],this.skip=[],this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.impression=[],this.close=[],this.progress=[],this.mute=[],this.unmute=[],this.rewind=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.closeLinear=[],this.noAd=[],this.noLinearAd=[],this.customClicks=[],this.billable=[],this.otherAdInteraction=[],this.clickIcon=[]}}class oi{}oi.error="error",oi.click="click",oi.pause="pause",oi.resume="resume",oi.skip="skip",oi.creativeView="creativeView",oi.start="start",oi.firstQuartile="firstQuartile",oi.midpoint="midpoint",oi.thirdQuartile="thirdQuartile",oi.complete="complete",oi.impression="impression",oi.close="close",oi.progress="progress",oi.mute="mute",oi.unmute="unmute",oi.rewind="rewind",oi.fullscreen="fullscreen",oi.exitFullscreen="exitFullscreen",oi.expand="expand",oi.collapse="collapse",oi.acceptInvitationLinear="acceptInvitationLinear",oi.acceptInvitation="acceptInvitation",oi.closeLinear="closeLinear",oi.noAd="noAd",oi.noLinearAd="noLinearAd",oi.customClicks="customClicks",oi.billable="billable",oi.otherAdInteraction="otherAdInteraction",oi.clickIcon="clickIcon";class ai{constructor(){this.version=2,this.tracking=new ri,this.clickThrough=[],this.adChoicesIconClickThrough=h.MB,this.mediaFiles=[],this.title="",this.wrappers=[],this.skippable=!1,this.skipDelay=0,this.extensions=[]}merge(e){var t,i;for(var s in e.version&&this.version<e.version&&(this.version=e.version),!this.url&&e.url&&(this.url=e.url),!this.title&&e.title&&(this.title=e.title),!this.adSystem&&e.adSystem&&(this.adSystem=e.adSystem),!this.id&&e.id&&(this.id=e.id),!this.creativeId&&e.creativeId&&(this.creativeId=e.creativeId),!this.duration&&e.duration&&(this.duration=e.duration),!this.adParameters&&e.adParameters&&(this.adParameters=e.adParameters),e.adTagUri&&this.wrappers.push(e.adTagUri),e.tracking)for(t=0,i=e.tracking[s].length;t<i;t++)"clickIcon"!==s&&this.tracking[s].push(e.tracking[s][t]);for(this.adChoicesIconClickThrough.isEmpty()&&!e.adChoicesIconClickThrough.isEmpty()&&(this.adChoicesIconClickThrough=e.adChoicesIconClickThrough,this.tracking.clickIcon=e.tracking.clickIcon),t=0,i=e.mediaFiles.length;t<i;t++)this.mediaFiles.push(e.mediaFiles[t]);for(t=0,i=e.clickThrough.length;t<i;t++)this.clickThrough.push(e.clickThrough[t]);for(t=0,i=e.extensions.length;t<i;t++)this.extensions.push(e.extensions[t]);!this.skippable&&e.skippable&&(this.skippable=!0,this.skipDelay=e.skipDelay)}}var li=__webpack_require__(2292);const di=[1,2],ci=new g.Y("vast.VASTLoader");function hi(e,t,i,s,n=!0){const r=(e=function(e){return c.AT.tryCatch((()=>decodeURIComponent(e))).fold((()=>function(e){return e.replace(/%/g,"")}(e)),(()=>e))}(e=function(e,t=di,i="Teadstv"){try{let s=m.rand(8);return e.replace(/\[timestamp\]/gi,String(Date.now())).replace(/\[(random|cachebusting|random_number|TTD_CACHEBUSTER)\]/gi,s).replace(/ord=(%n|\{RANDOMNUM\}|%25%25TTD_CACHEBUSTER%25%25)/gi,"ord="+s).replace(/\[APIFRAMEWORKS\]/gi,t.join(",")).replace(/%APIFRAMEWORKS%/gi,t.join(",")).replace(/\[OMIDPARTNER\]/gi,i).replace(/%OMIDPARTNER%/gi,i)}catch(e){ci.warn("updateUrlPlaceholder threw an exception: "+e)}return e}(e,t.apiFrameworkList))).match(/\/\/.*/);r&&(e=t.forceHTTPS?"https:"+r[0]:A.getProtocol()+r[0]),ci.debug("Loading VAST file URL:",e," - credentials:",n);let o,a=!1;var l=r=>{if(clearTimeout(o),!a&&n)return ci.warn("load file with credentials failed, try without credentials"),void hi(e,t,i,s,!1);ci.warn("load file with javascript failed",e),s(r,new ai)};try{const s=li.vQ();s.open("GET",e,!0),s.withCredentials=n;var d=()=>{if(clearTimeout(o),!a){var e;if(d=A.noop,"string"==typeof s.responseXML)e=s.responseXML;else if("string"==typeof s.responseText)e=s.responseText;else{if("string"!=typeof s.response)return void l(wt.U.get(wt.C.WRAPPER_TIMEOUT.id,"empty xhr response"));e=s.response}i(m.trim(e))}};li.U3(s)?s.onreadystatechange=()=>{if(4===s.readyState){if(s.status<200||s.status>=400){let e=wt.U.get(wt.C.WRAPPER_TIMEOUT.id,"invalid XHR status code "+s.status);return ci.warn("server return an invalid status code : "+e.toString()),404===s.status&&(a=!0),l(e)}d()}}:(s.onerror=()=>l(wt.U.get(wt.C.WRAPPER_TIMEOUT.id,"XHR onerror")),s.onprogress=()=>{},s.onload=()=>d()),c.AT.tryCatch((()=>s.send())).fold((e=>{l(wt.U.get(wt.C.WRAPPER.id,"Error on XHR send method",e))}),(()=>{const e=t.timeout||Ii.TIMEOUT;o=setTimeout((()=>{a=!0,l(wt.U.get(wt.C.WRAPPER_TIMEOUT.id,"no response after "+e+"ms"))}),e)}))}catch(e){ci.warn("Could not load XML file directly",e),a=!0,l(wt.U.get(wt.C.UNDEFINED.id,"VASTLoader.load error "+e,e))}}function ui(e){if(e)try{var t=function(e){let t=e.firstChild;for(;t;){if(!gi(t))return t;t=t.nextSibling}return null}(e);return t?function(e){var t;let i=null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.trim();return" "===i.charAt(0)&&(i=i.substring(1,i.length))," "===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)),i}(t):""}catch(t){yi.error(`Couldn't get content for node ${e.nodeName}: "${t}"`)}}function pi(e,t){try{if(e.attributes[t])return String(e.attributes[t].value)}catch(e){yi.error(`Couldn't get attribute "${t}" value: "${e}"`)}}function gi(e){return 8===e.nodeType||3===e.nodeType&&function(e){return!/[^\t\n\r ]/.test(e.textContent)}(e)}var mi=__webpack_require__(9696);const fi=e=>e;var vi=__webpack_require__(152),Ai=__webpack_require__(5512);const bi=e=>e.includes("[PAGEURL]")?(0,Ai.qq)(e)(["[PAGEURL]",(0,v.eU)()]):e,yi=new g.Y("vast.VASTParser"),wi=["acceptInvitation","acceptInvitationLinear","billable","click","clickIcon","close","closeLinear","collapse","complete","creativeView","customClicks","error","exitFullscreen","expand","firstQuartile","fullscreen","impression","midpoint","mute","noAd","noLinearAd","otherAdInteraction","pause","progress","resume","rewind","skip","start","thirdQuartile","unmute"];function Ei(e,t){const i=s.fromArrayLike(t.getElementsByTagName(e));return s.map(i,(e=>({url:ui(e),data:null})))}function Ci(e){return s.includes(wi,e)}class Ii{constructor(e,t,i){this.config=e,this.gdprIab=t,this.wigo=i,this.logger=new g.Y("vast.VASTLib"),this.logger.debug("new",this),this.wrappersLimit=this.config.wrappersLimit||Ii.WRAPPERS_LIMIT}load(e,t,i){this.processVast(!0,e,t,i)}parse(e,t,i){this.processVast(!1,e,t,i)}processVast(e,t,i,s){let n=e=>{i(e)},r=(e,t)=>{s(e,t)};e?this.loadXml(new ai,t,n,r):this.parseXml(new ai,t,n,r)}loadXml(e,t,i,s){e.url||(e.url=t),this.wigo.filter((e=>!!e.report)).forEach((e=>t=e.getVastUrl(t))),hi(t,this.config,(n=>{this.wigo.forEach((e=>e.setVast(t,n))),this.parseXml(e,n,i,s)}),s)}parseXml(e,t,n,r){!function(e,t,n,r){const o=new ai;try{const a=function(e){return(new DOMParser).parseFromString(e,"text/xml")}(e).documentElement;if("VAST"!==a.tagName)return n(new wt.C(wt.C.XML_PARSE),o);o.tracking.error=o.tracking.error.concat(function(e){const t=s.map(s.fromArrayLike(e.getElementsByTagName("Error")),(e=>({url:ui(e),data:null})));return s.filter(t,(e=>!!e.url))}(a)),function(e){return h.cb.fromNullable(e.getElementsByTagName("Ad")[0])}(a).match({none:()=>{n(new wt.C(wt.C.NO_ADS),o)},some:e=>{if(o.version=function(e){return parseInt(pi(e,"version"),10)}(a),o.version<2)return n(new wt.C(wt.C.UNSUPPORTED_VERSION),o);o.creativeId=function(e){return h.cb.fromNullable(e.getElementsByTagName("Creative")[0]).flatMap((e=>h.cb.fromNullable(pi(e,"id")).orElse((()=>h.cb.fromNullable(pi(e,"adID"))))))}(e).getOrValue("");const l=function(e){return h.cb.fromNullable(e.getElementsByTagName("Linear")[0])}(e);if(!function(e){return!!e.getElementsByTagName("Wrapper").length}(e)&&l.isEmpty())return n(new wt.C(wt.C.LINEARITY),o);o.id=function(e){return pi(e,"id")}(e),o.adTagUri=function(e){return h.cb.fromNullable(e.getElementsByTagName("VASTAdTagURI")[0]).flatMap((e=>h.cb.fromNullable(ui(e)).map(fi)))}(e).map((e=>r.map((t=>(({status:e,consent:t})=>{const i=[(0,mi.YN)(e),...(0,mi.AP)(t)];return(0,mi.kD)(i)})(t)(e))).map(bi).getOrValue(e))).getOrValue(void 0),o.title=function(e){return ui(e.getElementsByTagName("AdTitle")[0])}(e),o.adSystem=function(e){return ui(e.getElementsByTagName("AdSystem")[0])}(e);const d=s.map(Ei("ClickThrough",e),(e=>(0,vi.A)(e.url)));o.clickThrough=o.clickThrough.concat(d),o.tracking.impression=o.tracking.impression.concat(Ei("Impression",e)),o.tracking.click=o.tracking.click.concat(Ei("ClickTracking",e)),l.forEach((e=>{const t=function(e){return h.cb.fromNullable(e.getElementsByTagName("Icon")[0]).flatMap((e=>h.cb.fromNullable(e.getElementsByTagName("IconClicks")[0]))).map((e=>({iconClick:e,iconClickThrough:e.getElementsByTagName("IconClickThrough")[0]}))).map((({iconClick:e,iconClickThrough:t})=>({clickThrough:h.cb.fromNullable(ui(t)),trackings:s.map(s.fromArrayLike(e.getElementsByTagName("IconClickTracking")),(e=>({url:ui(e),data:null})))}))).getOrValue({clickThrough:h.MB,trackings:[]})}(e);o.adChoicesIconClickThrough=t.clickThrough,o.tracking.clickIcon=o.tracking.clickIcon.concat(t.trackings);const n=function(e){return A.seconds(pi(e,"skipoffset"))}(e);o.skippable=function(e){return!isNaN(e)}(n),o.skipDelay=function(e){return e||0}(n),o.duration=function(e){return A.seconds(ui(e.getElementsByTagName("Duration")[0]))}(e),o.adParameters=function(e){return ui(e.getElementsByTagName("AdParameters")[0])}(e);const r=function(e,t){const n=s.fromArrayLike(e.getElementsByTagName("Tracking")),r=s.filter(s.map(n,(e=>{const s=pi(e,"event");return"progress"===s?function(e,t){const s=pi(e,"offset");return function(e,t){return(0,i.ct)(e)?e.indexOf(":")>0?h.cb.fromNullable(A.seconds(e)):h.cb.fromNullable(m.trim(e).match(/^([0-9\.]+)%$/)).map((e=>t*parseInt(e[1],10)/100)):h.MB}(s,t).map((t=>({event:"progress",tracking:{url:ui(e),data:t}}))).orElse((()=>(yi.error(`Wrong offset for progress tracking: ${s}`),h.MB)))}(e,t):(0,h.sx)({event:s,tracking:{url:ui(e),data:null}})})),(e=>e.nonEmpty()));return s.reduce(r,((e,t)=>(t.forEach((t=>{e[t.event]||(e[t.event]=[]),e[t.event].push(t.tracking)})),e)),{})}(e,o.duration);for(const e in r)r.hasOwnProperty(e)&&(Ci(e)&&o.tracking.hasOwnProperty(e)?o.tracking[e]=o.tracking[e].concat(r[e]):yi.warn(`Could not add tracking resource as the VAST event "${e}" is not supported.`));o.mediaFiles=function(e,t){const i=s.fromArrayLike(e.getElementsByTagName("MediaFile"));return s.map(i,(e=>{const i=pi(e,"type");return{type:i,id:pi(e,"id"),url:ui(e),width:parseInt(pi(e,"width"),10),height:parseInt(pi(e,"height"),10),delivery:pi(e,"delivery"),bitrate:parseInt(pi(e,"bitrate"),10),api:pi(e,"apiFramework"),scalable:!!pi(e,"scalable"),minBitrate:parseInt(pi(e,"minBitrate"),10),maxBitrate:parseInt(pi(e,"maxBitrate"),10),maintainAspectRatio:!!pi(e,"maintainAspectRatio"),codec:pi(e,"codec"),adParameters:/javascript/g.test(i)?t:null}}))}(e,o.adParameters)})),o.extensions=function(e,t){const i=JSON.parse(JSON.stringify(t)),n=s.fromArrayLike(e.getElementsByTagName("Extension"));return s.map(n,(e=>({type:pi(e,"type"),content:ui(e),xml:e,definition:i})))}(e,o),t(o)}})}catch(e){const t=wt.U.get(wt.C.UNDEFINED.id,"VASTParser.parse error",e);n(t,o)}}(t,(t=>{if(e.merge(t),t.adTagUri)e.wrappers.length>this.wrappersLimit?r(new wt.C(wt.C.WRAPPER_LIMIT),e):(this.logger.info("load wrapper",t.adTagUri),this.loadXml(e,t.adTagUri,n,((t,i)=>{r(t,e)})));else if(0===e.mediaFiles.length){let t=wt.U.get(wt.C.WRAPPER.id,"empty mediafiles in VAST definition");this.logger.error(t.getFullMessage()),r(t,e)}else n(e)}),((t,i)=>{e.merge(i),r(t,e)}),this.gdprIab)}}Ii.TIMEOUT=7e3,Ii.WRAPPERS_LIMIT=10;const Si=new g.Y("VastHandler");function Ti(e){var t=e.adSettings,{vast:i}=t,n=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(t,["vast"]),{placement:r,gdprIab:o,sumologicLogger:a,auctionId:l,viewerId:d,regularVastHandler:c=ki}=e;const{pageId:u,wigo:p,slotType:g}=r;return c(i,u,o,p,a,g).catch((([e,t])=>{throw function(e,{insertionId:t,connectionId:i,portfolioItemId:n},r,o,a,l){const d="VASTParser.parse error"===l.getMessage()?(0,k.q)(l)+h.cb.fromNullable(l.error).map((e=>"|"+e.message)).getOrValue(""):(0,k.q)(l);r.error(`loading-vast ${d.substr(0,120)}`);const{key:c,pageId:u,pid:p,slotType:g,wigo:m,placementConfig:{headerBiddingProvider:f}}=e,v=l.getId()||0,A={placementKey:c,sumologicLogger:r,wigo:m,logger:Si,headerBiddingProvider:f,pageId:u,placementId:p,auctionId:o,viewerId:a,slotType:g,portfolioItemId:(0,ni.e4)(n),insertionId:(0,ni.e4)(t),connectionId:(0,ni.e4)(i)};v===wt.C.WRAPPER_TIMEOUT.id?(0,ue.Ws)(A):(0,ue.K)(Object.assign(Object.assign({},A),{code:(0,s.isMemberOf)(si.a)(v)?v:si.j.Undefined})),Si.error("VAST loading",l)}(r,n,a,l,d,e),[e,t]}))}function ki(e,t,i,s,n,r){return new Promise(((t,n)=>{const r=new Ii({assetsUrl:w.E.basePathUrl},(0,h.sx)(i),h.cb.fromNullable(s)),o=e=>{!function(e,t){Si.info("Ad is ready"),t.valid(1,2)}(0,s),t(e)},a=(e,t)=>n([e,t]),l=e.getContent();e.isVastUrl()?r.load(l,o,a):e.isVastXml()&&r.parse(l,o,a)}))}var Pi=__webpack_require__(7768),xi=__webpack_require__(5460);class Li{constructor(e,t,i,s,n,r,o,a){this.name=e,this.pageId=t,this.placementId=i,this.placementKey=s,this.sumologicLogger=n,this.logger=r,this.wigo=o,this.auctionId=a}}class _i extends Li{constructor(e,t,i,s,n,r,o){super("classic",e,t,i,s,n,r,o)}trackSlotAvailable(e){(0,ue.SC)({sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,placementKey:this.placementKey})(pe.IR.SlotAvailable,this.name,(t=>(0,xi.jr)(this.placementKey)(t,(0,ue.IZ)({pageId:this.pageId,placementId:this.placementId,auctionId:this.auctionId,sumologicLogger:this.sumologicLogger},{slot:e},t))))}}class Oi extends Li{constructor(e,t,i,s,n,r,o,a,l){super("header-bidding",e,t,i,s,n,r,o),this.creativeSize=a,this.hbSlotAvailableTrackUrl=l}trackSlotAvailable(e){const t=(0,v.aE)(this.hbSlotAvailableTrackUrl,"slot",e),i=this.creativeSize.match({some:e=>{const i=(0,v.aE)(t,"hb_w",encodeURIComponent(e.width));return(0,v.aE)(i,"hb_h",encodeURIComponent(e.height))},none:()=>t}),s={baseUrl:i,referer:(0,ue.ID)(),queryParameters:{slot:e,hb_w:this.creativeSize.map((e=>e.width.toString())).getOrValue(""),hb_h:this.creativeSize.map((e=>e.height.toString())).getOrValue("")},trackingUrl:(0,h.sx)(i)};(0,ue.SC)({sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,placementKey:this.placementKey})(pe.IR.HbSlotAvailable,this.name,(e=>(0,xi.kL)(this.placementKey)(e,s)))}}const Vi=(e,t)=>{const i=t.tagIsCampaignTag?"17":t.mrgReasonFromRas.getOrValue("19"),s=t.adCallTrackingUrl.map((e=>(0,Pi.UX)(e))),{baseUrl:n,insertionId:o,connectionId:d,pfid:c}=((e,t)=>({baseUrl:t.map((e=>e.baseUrl)).getOrValue(w.E.trackingUrl),insertionId:(0,ni.Ip)(e.map((e=>e.insertionId)).filter((e=>e>0))),connectionId:(0,ni.Ip)(e.map((e=>e.connectionId))),pfid:(0,ni.Ip)(e.map((e=>e.portfolioItemId)))}))(e,s),h=s.map((e=>e.queryParameters)).getOrValue({});return{baseUrl:n,businessIds:{insertionId:o,connectionId:d},queryParameters:Object.assign({env:r.getEnv(),pageId:t.placementAd.placement.pageId.toString(),pid:t.placementAd.placement.pid.toString(),auctid:t.auctionId.getOrValue((0,a.S)("")),vid:t.viewerId.getOrValue((0,l.Y)("")),slot:t.placementAd.placement.slotType,pfid:c,gdpr_api_version:(0,ni.Ip)(t.gdprIab.apiVersion),gdpr_cmp_id:(0,ni.Ip)(t.gdprIab.cmpId),gdpr_consent:t.gdprIab.consent,gdpr_status:t.gdprIab.status.toString(),gdpr_reason:t.gdprIab.reason.toString(),rpm_reason:i},h),trackingUrl:t.adCallTrackingUrl.map((0,ni.SG)({rpm_reason:"19"}))}};class Ri{constructor(){this.logger=new g.Y("Page"),this.hasSlider=!1}static getPlayerSize(e,t){let i={width:0,height:0};if(e){if(t.insertInside.isEnabled())i.width=e.getWidth();else if(e.getElement().parentNode){const t=o.getSize(e.getElement().parentNode);i.width=t.width}i.height=i.width/n.S}else{const e=y.C.findOptimalCreativeSizeBasedOnWindowSurface(h.MB,o.getWindowSize(t.parentWindow.getWindow()));i.height=e.height,i.width=e.width}return i.width=Math.round(i.width),i.height=Math.round(i.height),i}checkPlacement({rawPlacement:e,pageId:t,placementId:i,pageIndex:s,auctionId:n,wigo:o,sumologicLogger:a,headerBiddingProvider:l,adSettings:c}){const u=(0,we.A)(t,i,s);let p,g;if(e.launched)return void this.logger.warn("This format has already been launched");e.launched=!0;const f=(0,m.rand)(10,!1),v={pageId:t,placementId:i,placementKey:u,sumologicLogger:a,logger:this.logger,wigo:o,auctionId:n,randomString:f},b=c.map((0,A.prop)("viewerId"));l.filter((e=>"debugFormat"!==e)).match({none:()=>{(0,ue.I3)(v)},some:e=>{((e,t)=>{const i=((e,t)=>e.flatMap(I).match({some:({status:e,consent:t,reason:i,apiVersion:s,cmpId:n})=>({status:e,consent:t,reason:i.getOrValue(240),apiVersion:s,cmpId:n}),none:()=>({status:24,consent:"",reason:240,apiVersion:h.MB,cmpId:h.MB})}))(e);P.updateTeadsGDPRPayload(i)})(c)}});try{var y,w=new ht(e,l),C=e.slider?{slider:e.slider}:pt.getPlacementSetting(w.pid);C&&(y=new pt(C)),g=new Ne(t,u,w,y,o)}catch(e){return this.logger.error(e.getMessage()),e.getId()===d.C.OPTION_FORMAT_INVALID.id&&(0,ue.sX)(Object.assign(Object.assign({},v),{headerBiddingProvider:l,viewerId:b})),void a.error(`placement-config ${t} ${h.cb.fromNullable(i).getOrNull()} ${(0,k.k)(e)}`)}if(window._ttc&&window._ttc[t]&&window._ttc[t].rpm)return a.info("ttc-rpm"),void g.placementConfig.rpmFallback.trigger();p={status:!0,reasons:[]};const S=function(e){const t={status:!0,reasons:[]},i=e.parentWindow.getWindow();r.videoSupport(i.document)||(t.status=!1,t.reasons.push(E.Gs.incompatibility.video));const s=r.isMobile()&&e.isMobile(),n=r.isTablet()&&e.isTablet(),o=r.isDesktop()&&e.isDesktop();return s||n||o||(t.status=!1,t.reasons.push(E.Gs.incompatibility.context)),T.uw(r.getIEVersion(),"8")&&(t.status=!1,t.reasons.push(E.Gs.incompatibility.browser)),t}(g.placementConfig);if(this.logger.debug("Check environment",S),!S.status&&(p.status=!1,!r.isAmp()||r.isAmp()&&w.formatName.get()===E.q0.inread)){const e=S.reasons[0];e&&(0,ue.aE)(Object.assign(Object.assign({},v),{headerBiddingProvider:l,viewerId:b}),e),g.placementConfig.fallback.trigger()&&(0,ue.sb)(Object.assign(Object.assign({},v),{headerBiddingProvider:l,viewerId:b}))}return{placement:g,report:{id:i,validity:p,player:null,slotType:"native"},ad:null}}checkSlot({placementAd:e,wigo:t,sumologicLogger:i,auctionId:s,headerBiddingInfo:n,placementIsFirst:o,adSettings:a}){if(e.report.validity.status){e.report.validity=e.placement.checkSlot(),this.logger.debug("Slot availability",e.report.validity);const t=e.placement.getElectedSlot();e.report.player=Ri.getPlayerSize(t,e.placement.placementConfig)}const l=a.map((0,A.prop)("viewerId"));return(e=>{const{adSettings:t,slotIsFound:i,cornerPositionIsAllowed:s,placementIsFirst:n}=e;return t.filter((()=>i||s)).flatMap((e=>h.cb.fromNullable(e.slotType))).orElse((()=>r.isAmp()||r.isIABSafeFrame()||r.isAmpSF()||i&&!s&&n?(0,h.sx)("native"):i&&s&&n?(0,h.sx)("polymorph"):!i&&s&&n?(0,h.sx)("corner"):i&&!n?(0,h.sx)("multislot"):h.MB))})({adSettings:a,slotIsFound:(d=e.report.validity,!(!d.status&&d.reasons.length>0)),cornerPositionIsAllowed:e.placement.canEnableSlider(),placementIsFirst:o}).match({some:r=>{const o=a.flatMap((e=>h.cb.fromNullable(e.creativeSize)));return"corner"===r&&(this.hasSlider=!0,e.placement.enableSlider(),e.report.validity.reasons=[],e.report.validity.status=!0),e.placement.slotType=r,e.report.slotType=r,n.map((({provider:n,hbSlotAvailableTrackingUrl:r})=>new Oi(e.placement.pageId,e.placement.pid,e.placement.key,i,this.logger,t,s,o,r))).getOrElse((()=>new _i(e.placement.pageId,e.placement.pid,e.placement.key,i,this.logger,t,s))).trackSlotAvailable(r),e},none:()=>{(0,ue.OG)({pageId:e.placement.pageId,placementId:e.placement.pid,placementKey:e.placement.key,sumologicLogger:i,logger:this.logger,wigo:t,auctionId:s,headerBiddingProvider:e.placement.placementConfig.headerBiddingProvider,viewerId:l},e.report.validity.reasons[0]),Le.I()}});var d}callRAS(e){return t=this,n=void 0,l=function*(){const{placementAd:t,sumologicLogger:n,onRASResponse:o,tagManagerPackage:l}=e,d=l.map((e=>e.tagManagerInstance)).flatMap((e=>h.cb.fromNullable(e.getAd))).match({some:e=>!e.headerBiddingProvider,none:()=>!1}),{pageId:g}=t.placement,m=new Se(t,g,e.auctionId,e.viewerId,n),{adResponse:v,gdprIabObject:y,usPrivacyString:I,mrgReasonFromRas:S}=yield m.send(this.getAdRequestUrl(g)),{adCallTrackingUrl:T,auctionId:x,viewerId:L,fraudReason:_}=v,O=(e,i,s)=>{t.placement.handleNoAd({sumologicLogger:n,headerBiddingProvider:e,portfolioItemId:i,adCallTrackOpts:s,auctionId:x,viewerId:L}),l.forEach((({tagManagerInstance:e,onFormatLoaded:i,done:s})=>{h.cb.fromNullable(window.teads.tagManagerResourcesList).filter(A.isArray).forEach((i=>{i.push({tagManager:e,placementAd:t,vastPlayer:h.MB,tagIsCampaignTag:d})})),i(!1),s()}))},V=y.getOrElse((()=>P.payload)),R=Object.assign({gdprIab:V,adCallTrackingUrl:T,mrgReasonFromRas:S,tagIsCampaignTag:d},e),D={placementKey:t.placement.key,sumologicLogger:n,wigo:t.placement.wigo,logger:this.logger,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider};if(null!==_){const{headerBiddingProvider:e}=t.placement.placementConfig;return this.hasSlider&&(0,ue.q_)(Object.assign(Object.assign({},D),{headerBiddingProvider:e,baseUrlWithQueryParameters:Vi(h.MB,R)})),void O(e,h.MB,Vi(h.MB,R))}o(t);const N=h.cb.fromNullable(t.ad),M=I.orElse((()=>N.flatMap(C).map((({consent:e})=>e))));if(this.userSync(t.placement,x,L,V,M),this.hasSlider&&(0,ue.q_)(Object.assign(Object.assign({},D),{headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,baseUrlWithQueryParameters:Vi(h.MB,R)})),!t.ad)return void(t.report.validity.status&&O(h.MB,h.MB,Vi(h.MB,R)));if(t.ad.handled)return void this.logger.debug("Ad already handled for this placement");if(t.ad.handled=!0,t.ad.callbacks=t.placement.placementConfig.raw.callbacks,!t.placement.getElectedSlot())return void this.logger.debug("No elected slot -> not placing format");if(!(e=>(0,i.ct)(e.type)&&(0,i.ct)(e.content))(t.ad))return this.logger.warn("Will not be able to create a FormatConfig, invalid ad object",t),void O(t.placement.placementConfig.headerBiddingProvider,h.cv.map((0,A.prop)("portfolio_item_id"))(N),Vi(h.MB,R));const B=t.ad;(0,ue.ob)({placement:t.placement,sumologicLogger:n,logger:this.logger,auctionId:x,viewerId:L,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:h.cb.fromNullable(B.portfolio_item_id)});const F=t.placement.getElectedSlot().getElement();(0,i.cX)({fledgeSettings:B.fledgeSettings,placementCss:t.placement.placementConfig.raw.css,slot:F,creativeSize:B.creativeSize}).catch((()=>{if("NativeJson"!==B.type)(function(e,t,i){return c.AT.tryCatch((()=>{const e=new ii(i);return Si.debug("FormatConfig instance",e),e}))})(0,0,B).fold((e=>{this.logger.warn("Could not instantiate FormatConfig",e,t.ad),(0,ue._Q)({placement:t.placement,sumologicLogger:n,logger:this.logger,auctionId:x,viewerId:L,headerBiddingProvider:t.placement.placementConfig.headerBiddingProvider,portfolioItemId:h.cb.fromNullable(B.portfolio_item_id),insertionId:h.cb.fromNullable(B.insertion_id),connectionId:h.cb.fromNullable(B.connection_id)}),n.error(`formatconfig ${pe.IR.AdAvailableErrorSettings}|${(0,k.k)(e)}`),O(t.placement.placementConfig.headerBiddingProvider,h.cv.map((0,A.prop)("portfolio_item_id"))(N),Vi(h.MB,R))}),(e=>{const i=new f.m(e.adType.isDisplay()?"display":e.adType.isNative()?"native":"video",h.cb.fromNullable(e.insertionId),h.cb.fromNullable(e.connectionId),h.cb.fromNullable(e.portfolioItemId),n);Ti({adSettings:e,placement:t.placement,gdprIab:V,sumologicLogger:i,auctionId:x,viewerId:L}).then((s=>{(0,u.Sg)(s.tracking,we.c.vast.registerVastTrackings(D.placementKey),p.Q.biforeach((({trackings:e,progressTrackings:t})=>{this.logger.debug("Trackings registered to Teads VAST trackings store",e),this.logger.debug("Progress trackings registered to Teads VAST trackings store",t)}),(({trackings:e,progressTrackings:t})=>{this.logger.debug("Trackings registered to Third-Party VAST trackings store",e),this.logger.debug("Progress trackings registered to Third-Party VAST trackings store",t)}))),c.AT.tryCatch((()=>{(0,b.Yd)({sumologicLogger:i,placementAd:t,linearAdWithFormatConfig:{linearAd:s,formatConfig:e},tagIsCampaignTag:d,tagManagerPackage:l,adCallTrackOpts:Vi(h.cb.of(e),R),auctionId:x,viewerId:L,gdprIab:V}),(0,ye.wB)()||(0,ye.UV)()!==ye.ii.PostMessage||we.c.debug.track(D.placementKey)(pe.IR.ClientAdCollision,{baseUrl:w.E.trackingUrl,referer:(0,ue.ID)(),queryParameters:{env:r.getEnv(),pageId:g.toString(),pid:t.placement.pid.toString(),gid:(0,ni.e4)(e.insertionId),auctid:x.getOrValue((0,a.S)(""))},trackingUrl:h.MB},h.cb.of(ye.Ht.PostMessageAfterRAS))})).tapLeft((s=>{this.logger.error("Succesfully parsed/loaded the VAST, but an uncaught error was thrown when loading the ad.",s),i.error(`uncaught-error-loadvast ${(0,k.k)(s)}`);const{pageId:n,pid:r,slotType:o}=t.placement;(0,ue.K)(Object.assign(Object.assign({},D),{code:si.j.Undefined,pageId:n,placementId:r,auctionId:x,viewerId:L,slotType:o,portfolioItemId:(0,ni.e4)(e.portfolioItemId),insertionId:(0,ni.e4)(e.insertionId),connectionId:(0,ni.e4)(e.connectionId)})),(0,ue.Ax)({placementKey:D.placementKey,sumologicLogger:i,wigo:t.placement.wigo,logger:D.logger,errorCode:si.j.Undefined,errorCause:"load-ad-exception",slotType:t.placement.slotType,creativeSize:h.cb.fromNullable(e.creativeSize),macros:(0,mi._u)()}),l.forEach((({tagManagerInstance:e})=>{e.logger.debug("load -> loadAd","noAd")})),O(t.placement.placementConfig.headerBiddingProvider,h.cb.fromNullable(e.portfolioItemId),Vi(h.cb.of(e),R))}))})).catch((([n,r])=>{this.logger.error("Error when loading the VAST",n,t);const o=n.getId(),a=(0,s.isMemberOf)(si.a)(o)?o:si.j.Undefined;we.c.vast.registerVastTrackings(D.placementKey)(r.tracking),(0,ue.Ax)({placementKey:D.placementKey,sumologicLogger:i,wigo:t.placement.wigo,logger:D.logger,errorCode:a,errorCause:"load-vast-exception",slotType:t.placement.slotType,creativeSize:h.cb.fromNullable(e.creativeSize),macros:(0,mi._u)()}),l.forEach((({tagManagerInstance:e})=>{e.logger.debug("load -> loadAd","noAd")})),O(t.placement.placementConfig.headerBiddingProvider,h.cb.fromNullable(e.portfolioItemId),Vi(h.cb.of(e),R))}))}));else{const e=Object.assign(Object.assign({},B),{slotType:t.placement.slotType,referrer:(0,ue.ID)(),placementMetadata:{[B.settings.values.placementId]:{adCallTrackingUrl:T.getOrNull(),auctionId:x.getOrNull()}},templateType:"default",viewerId:L.getOrNull(),ccpIab:M.getOrNull(),gdprIab:V}),{raw:i}=t.placement.placementConfig,s=Object.assign(Object.assign({},i),{slot:Object.assign(Object.assign({},i.slot),{selector:F})});(window.teads.TRACKING_URL=w.E.trackingUrl,new Promise(((e,t)=>{var i;const s=document.createElement("script");s.src=null!==(i=window.teads.NATIVE_CLASSIC_URL)&&void 0!==i?i:E.WA,s.async=!0,s.onload=e,s.onerror=t,document.head.appendChild(s)}))).then((()=>window.teads.renderNativeCreative(r.getEnv(),e,s))).catch((e=>{n.error(`Native classic flavor integration Failed : ${e}`)}))}}))},new((o=void 0)||(o=Promise))((function(e,i){function s(e){try{a(l.next(e))}catch(e){i(e)}}function r(e){try{a(l.throw(e))}catch(e){i(e)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(s,r)}a((l=l.apply(t,n||[])).next())}));var t,n,o,l}reload(){h.cb.fromNullable(window.teads.clearInstances).forEach((e=>e()));const e=h.cb.fromNullable(window._ttp);!function(e){e.forEach((e=>{for(const t in e)e.hasOwnProperty(t)&&(0,s.forEach)(e[t],(e=>e.launched=!1))}))}(e),h.cb.fromNullable(window.teads.destroyPageRelatedVariables).forEach((e=>e())),vt({ttpObject:e,pageInstance:this}).tapLeft((e=>this.logger.error(e)))}userSync(e,t,i,s,n){if(e&&e.pid&&!this.isUserSyncIframeLoaded){const r=h.cb.fromNullable(e.placementConfig).flatMap((e=>e.headerBiddingProvider));let a=xe(e.pid,s,r,n,t,i);o.addEventListener("load",a,(e=>{this.isUserSyncIframeLoaded=!0}))}}getAdRequestUrl(e){const t=w.E.richAdServerUrl.replace("{id}",String(e));return this.getAdRequestMetadata().map((e=>(0,v.e0)(t,e))).getOrValue(t)}getAdRequestMetadata(){return(0,v.Ae)().map((({windowDepth:e,windowReferrerUrl:t})=>{const i=h.cb.fromNullable(t).map((e=>({windowReferrerUrl:encodeURIComponent(e)}))).getOrValue({});return Object.assign(Object.assign({windowWidth:window.innerWidth,windowHeight:window.innerHeight,windowDepth:e},function(e){const t=r.isAmp()||r.isAmpSF();return c.AT.tryCatch((()=>{const e=t?window.context.referrer:window.top.document.referrer;return new URL(e).origin})).fold((t=>(e.warn("Cannot get referrer",t),{})),(e=>({pageReferrerUrl:encodeURIComponent(e)})))}(this.logger)),i)}))}}let Di,Ni=0,Mi=0;const Bi=new g.Y("Main");var Fi=__webpack_require__(6896),Ui=__webpack_require__(3215),Wi=__webpack_require__(9168);const Hi=new g.Y("TagManager"),ji={},zi=(e,t)=>{const i=(0,s.fromStringToNumber)(Object.keys(ji));return 1===(0,s.flatten)((0,s.map)(i,(e=>{const t=Object.keys(ji[e]),i=(0,s.fromStringToNumber)((0,s.filter)(t,(e=>"placement"!==e))),n=(0,s.map)(i,(t=>ji[e][t]));return(0,s.filter)(n,(e=>(0,s.last)(e).state!==Yi.PASSBACKED))}))).length&&0===t},Gi={};var Yi;!function(e){e[e.INIT=0]="INIT",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.SERVED=3]="SERVED",e[e.ERRORED=4]="ERRORED",e[e.PASSBACKED=5]="PASSBACKED"}(Yi||(Yi={}));class $i{constructor(e,i,s,n=!1,r=0){this.pageId=e,this.pid=i,this.rawSettings=s,this.defer=n,this.pageIndex=r,this.doServe=!1,this.wigo=new _.kZ,this.formatInstance=h.MB,this.doPassback=!1,this.passbacks={beforeServe:[],afterServe:[]},this.scripts=[],this.headerBiddingProvider=h.MB,this.logger=new g.Y(`TagManager (pageId: ${e}, placementId: ${i})`),this.logger.debug("new placement",s),this.headerBiddingProvider=O(Gi[this.pid]),this.sumologicLogger=t.c.copy({collectorUrl:"https://s8t.teads.tv/logs/format/http-source",placementId:(0,h.sx)(i),options:Object.assign(Object.assign({},t.c.options),{isHeaderBiddingTag:()=>this.headerBiddingProvider.nonEmpty()})}),this.settings=Object.assign({},s||$i.defaultRawPlacement),this.settings.pid=i,this.settings.format=this.settings.format||"inread",this.settings.fallback=()=>(this.logger.debug("no ad to serve so exec passback"),this.execPassback()),this.state=Yi.INIT,this.headerBiddingProvider.nonEmpty()&&this.handleHeaderBiddingAd(),w.E.refresh(window.teads),this.handleDataInsertion(i).forEach((e=>{Le.I(),this.getAd=e}))}static getRawAdFromScript(e,t,i,s){return e.match({some:e=>o.getAndRemoveAttributeValue(e,t).match({some:e=>{const t=s((0,h.sx)({type:"VastUrl",content:`${w.E.buyingEngineUrl}/${e}`,insertion_id:parseInt(e,10)}));return i.debug("data-insertion handled",t),(0,h.sx)(t)},none:()=>(i.error(`${t} detected but the value is empty`),h.cb.empty())}),none:()=>h.cb.empty()})}static page(e){if(s=e,(0,i.Ib)(s)&&s>=0)return ji[e]||(ji[e]={placement:(t,i,s,n)=>$i.placement(e,t,i,s,n)});throw t.c.error(`teads-page-invalid-pageid ${e}`),new Error(`teads.page function called with invalid page ID: ${e}`);var s}static ad(e,t){return Gi[e]&&new g.Y(`TagManager placementId: ${e}`).warn("ad settings already exist and will be overwritten",Gi[e],t),Gi[e]=t,{page:$i.page}}static placement(e,t,i,s,n){const r=ji[e],o=r[t]||(r[t]=[]);n=h.cb.fromNullable(n).getOrValue(o.length?o.length-1:0),o[n]?i&&i!==o[n].rawSettings&&(o[n].rawSettings=i):c.AT.tryCatch((()=>new Be(t))).map((e=>e.get())).fold((e=>{Hi.warn("Invalid placement ID value provided",t,i,e)}),(t=>{o[n]=new $i(e,t,i,s,n)}));const a=o[n];return a.findMatchingScript()?(a.logger.debug("found script with serve attribute -> serve it"),a.serve()):s?a.logger.debug("tag deferred"):a.load(),a}load(){var e;if(this.state!==Yi.INIT)return this.logger.warn("tag already loaded, loading or served",this.state),this;const t=h.cb.fromNullable(null===(e=Gi[this.pid])||void 0===e?void 0:e.headerBiddingSlotAvailableTrackUrl);return this.state=Yi.LOADING,this.logger.debug("load: checkPlacement > checkSlot > callRAS > loadAd"),this.onReadyState((()=>{const e=h.cb.fromNullable(Gi[this.pid]),i=(0,we.A)(this.pageId,this.pid,this.pageIndex),s=e.flatMap(ce(this.pid)).flatMap((({auctionId:e})=>e.map(c.s5))).getOrElse((()=>(0,mt.getUuid)().map(a.S))),n=s.toOption(),r=e.flatMap((0,A.safeProp)("viewerId"));let o;window.teads.prebidReferer=e.flatMap((0,A.safeProp)("referrer")).getOrNull();try{o=((e,t)=>e.filter((e=>"debugFormat"!==e)).match({some:e=>t.match({some:t=>(0,h.sx)({provider:e,hbSlotAvailableTrackingUrl:t}),none:()=>{throw new Error("Missing headerBiddingSlotAvailableTrackingUrl")}}),none:()=>h.MB}))(this.headerBiddingProvider,t)}catch(e){return(0,ue.sX)({pageId:this.pageId,placementId:this.pid,placementKey:i,sumologicLogger:this.sumologicLogger,logger:this.logger,wigo:this.wigo,auctionId:n,viewerId:r,headerBiddingProvider:this.headerBiddingProvider}),this.logger.error(`load - ${e.message}`),this.sumologicLogger.error(`incompatibilityFormat - ${e.message}`),void(this.state=Yi.ERRORED)}this.wigo.settings=e.flatMap(he),s.tapLeft((e=>{this.sumologicLogger.error(`limitedCapabilities ${(0,k.k)(e)}`),(0,ue.OU)({placementKey:i,sumologicLogger:this.sumologicLogger,wigo:this.wigo,logger:this.logger,headerBiddingProvider:this.headerBiddingProvider,viewerId:r,pageId:this.pageId,placementId:this.pid,auctionId:n})})),this.fillCustomTracking(this.findCustomTracking(this.scripts)),this.adInfos=Di.checkPlacement({rawPlacement:this.settings,pageId:this.pageId,placementId:this.pid,pageIndex:this.pageIndex,auctionId:n,wigo:this.wigo,sumologicLogger:this.sumologicLogger,headerBiddingProvider:this.headerBiddingProvider,adSettings:e}),this.adInfos?(e.filter((e=>!0===e.wigoEnabled)).forEach((()=>this.wigo.enableWigo())),this.logger.debug("load -> checkPlacement ok"),this.adInfos=Di.checkSlot({placementAd:this.adInfos,wigo:this.wigo,sumologicLogger:this.sumologicLogger,auctionId:n,headerBiddingInfo:o,placementIsFirst:zi(this.pid,this.pageIndex),adSettings:e}),this.adInfos?(this.logger.debug("load -> checkSlot ok"),this.adInfos.ad=this.getAd,Di.callRAS({placementAd:this.adInfos,auctionId:n,viewerId:r,sumologicLogger:this.sumologicLogger,onRASResponse:e=>{this.logger.debug("load -> callRAS",this.getAd?"bypassed by data-insertion":"ok"),this.adInfos=e,this.sendTagToWigo()},tagManagerPackage:(0,h.sx)({tagManagerInstance:this,onFormatLoaded:()=>{this.state!==Yi.PASSBACKED&&(this.state=Yi.LOADED)},done:()=>{this.doServe?this.serve():this.logger.debug("waiting for serve")}})}).then((()=>{Le.o()}))):(this.logger.debug("load - checkSlot failure"),this.state=Yi.ERRORED)):(this.logger.debug("load - placement failure"),this.state=Yi.ERRORED)})),this}serve(){let e=this;switch(this.state){case Yi.ERRORED:this.state=Yi.SERVED,this.logger.warn("serve - this placement cannot be served - state = ERROR");break;case Yi.SERVED:this.logger.warn("already served - reload and serve it again"),e=this.reload().serve();break;case Yi.INIT:this.doServe=!0,this.logger.debug("load before serve (defer)",this.adInfos),this.load();break;case Yi.LOADING:this.logger.warn("serve - the tag is currently loading"),this.doServe=!0;break;case Yi.LOADED:this.state=Yi.SERVED,this.logger.debug("serve",this.adInfos),this.formatInstance.filter((()=>!(0,b.YN)(this))).forEach((e=>{e.start(),(0,Ui.wV)(this,e.player.getMediafile())})),this.logger.debug("ad successfully served"),this.adInfos.ad&&!(0,b.IN)(this)||(this.logger.debug("serve - no ad to serve so exec passback"),this.execPassback())}return e}reload(){return $i.page(this.pageId).placement(this.pid,this.rawSettings,this.defer,this.pageIndex+1)}passback(e,t=!1){return(0,s.includes)([Yi.SERVED,Yi.PASSBACKED],this.state)&&!t?this.reload().passback(e):((0,s.includes)(this.passbacks.afterServe,e)?this.logger.warn("passback - signature was already appended to the passback list",e,this.passbacks.afterServe):"function"==typeof e?(this.passbacks.afterServe.push(e),this.logger.debug("passback - pushed to the list",e),t&&(this.passbacks.beforeServe.push(e),this.logger.debug("passback - pushed to the *before serve* list too")),this.doPassback&&(this.logger.debug("passback - execPassback already called with no passback to exec, call it again"),this.doPassback=!1,this.execPassback())):this.logger.warn("passback - must be a function"),this)}fillCustomTracking(e){const t=(0,we.A)(this.pageId,this.pid,this.pageIndex),i=(0,u.cp)(Wi.A9,s.cArray.forEach((0,u.cp)((0,A.tap)(we.c.format.addFormatCustomTrackings(t)),(e=>this.logger.debug(`[${t}][classic] Add custom tracking`,e))))),n=(0,u.cp)(Wi.E3,p.Q.biforeach(s.cArray.forEach(we.c.vast.addVastCustomProgressTrackings(t)),s.cArray.forEach(we.c.vast.addVastCustomTrackings(t))));(0,u.Sg)(e,(0,A.tap)((0,u.cp)(s.cArray.filter(Wi.yJ),i)),(0,A.tap)((0,u.cp)(s.cArray.filter(Wi.Qj),n)),(0,u.cp)(s.cArray.filter((e=>!(0,Wi.yJ)(e)&&!(0,Wi.Qj)(e))),(e=>{e.length>0&&this.logger.warn("Could not add unsupported custom trackings",e)})))}execPassback(){let e;switch(this.state){case Yi.SERVED:case Yi.PASSBACKED:e=this.passbacks.afterServe,this.logger.debug("exec passback - after serve");break;default:e=this.passbacks.beforeServe,this.logger.debug("exec passback - before serve")}if(e.length){let t=e.shift();return this.logger.debug("exec passback -",t),this.state=Yi.PASSBACKED,t((()=>this.execPassback())),this.doPassback=!1,null}return this.logger.debug("exec passback - no passback to exec"),this.doPassback=!0,this.passbacks.afterServe.length?null:E.cA}findMatchingScript(){let e=!1;const t=x.findAllWindows(document.body);for(const i of t){const t=o.querySelectorAll("script.teads",i);for(let i=0;i<t.length;i++){this.scripts.push(t[i]);const s=t[i]?t[i].getAttribute("data-serve"):"";s&&s.match(this.pid.toString())&&(t[i].setAttribute("data-serve",s.replace(this.pid.toString(),"")),e=!0)}}return e}constructAdSettings(e=h.cb.empty()){var t,i;const s=$i.defaultAdsSettings,n=e.getOrValue({}),r=null!==(t=Gi[this.pid])&&void 0!==t?t:{};return Object.assign(Object.assign(Object.assign(Object.assign({},s),n),r),{settings:Object.assign(Object.assign(Object.assign({},s.settings),r.settings),{values:Object.assign(Object.assign(Object.assign({},s.settings.values),{pageId:this.pageId,placementId:this.pid,placementFormat:this.settings.format}),null===(i=r.settings)||void 0===i?void 0:i.values)})})}handleHeaderBiddingAd(){this.getAd=this.constructAdSettings()}handleDataInsertion(e){const t=`data-insertion-${e}`,i=x.findAllWindows(document.body),n=o.findMatchingElement((0,s.map)(i,(e=>e.document)),`script.teads[${t}]`);return $i.getRawAdFromScript(n,t,this.logger,(0,Fi.m)(this.constructAdSettings,this))}findCustomTracking(e){let t=[];for(let i of e){let e='data-tracking(?:-(\\d+))?-([^=]+)="([^"]+)"',s=(o.getOuterHTML(i)||"").match(new RegExp(e,"g"))||[];for(let n of s){let s=n.match(new RegExp(e));if(4===s.length){const[,e,n,r]=s;(e&&Number(e)===this.pid||!e)&&(this.logger.debug("find custom tracking (event, url, pid)",n,r,e),t.push({event:n,url:r}),e&&i.removeAttribute(`data-tracking-${e}-${n}`))}else this.logger.debug('error on data-tracking extraction, 3 args expected (["all", "key", "value"])',s)}}return t}sendTagToWigo(){this.wigo.valid(0,1,{ttp:this.settings,tta:this.adInfos.ad,tts:this.adInfos.placement.placementSetting},"modal")}onReadyState(e){let t;const i=x.findAllWindows(document.body);for(const e of i)t=t||e.document.querySelector("script.teads[data-readystate]");t&&"domcomplete"===t.getAttribute("data-readystate")?(this.logger.debug("waiting dom complete"),o.onDomComplete(e)):(this.logger.debug("waiting dom ready"),o.onDomReady(e))}}$i.defaultRawPlacement={pid:null,format:null,slot:null},$i.defaultAdsSettings={settings:{values:{pageId:0,placementFormat:"inread",placementId:1,threshold:50}}};const qi=window.teads||{};qi.ad=$i.ad,qi.page=$i.page,qi.TAG=ji,qi.TAG_STATUS=Yi,qi.TagManager=$i,qi.helper=qi.helper||{},qi.placement=qi.placement||{},qi.pageInstance=qi.pageInstance||Di,window.teads=qi,Bi.info("Init - Format initialization success"),r.startAutoplayTest(),(0,L.Yn)(["tag","format"],(0,x.findChildWindows)(document.body).concat(window)),h.cb.fromNullable(window.teads.PAGE_PROCESSED).forEach((e=>Ni=e)),h.cb.fromNullable(window.teads.currentPlayerId).forEach((e=>Mi=e)),r.isAmp()&&(window.context.observeIntersection((e=>{window._teads_amp.change=e.pop(),ie._6()})),ie._6()),(()=>{const e=(0,x.findTopWindow)(document.body);c.AT.tryCatch((()=>e.teads_analytics.getViewerInfo())).fold((()=>{var t;(t=e,(0,fe._)("_tfpvi",t).toOption().filter(m.isNotEmpty).map((e=>({teadsViewerInfo:{tfpvi:e,tcfv2:null,gdpr:null,ccpa:null,sharedIds:null}})))).match({some:e=>ve=(0,h.sx)(e),none:()=>Ae.debug("getViewerInfo cookie not accessible")}),new Promise(((e,t)=>{const i=t=>c.AT.tryCatch((()=>JSON.parse(t.data))).toOption().filter(be).match({some:t=>{e(t),window.removeEventListener("message",i)},none:()=>Ae.debug("not a valid ViewerInfo message",t)});window.addEventListener("message",i),c.AT.tryCatch((()=>window.top.postMessage("teads-get-viewer-info","*"))).tapLeft((e=>{window.removeEventListener("message",i),t(e)}))})).then((e=>{ve=(0,h.sx)(e)}))}),(e=>ve=(0,h.sx)(e)))})(),(0,ye.a4)(),_.kZ.loadAndStoreReportIfNeeded(t.c),Di=new Ri,o.onDomReady((()=>(r.activatePrivacySandboxRelevanceAndMeasurementFeatures(),vt({ttpObject:h.cb.fromNullable(window._ttp),pageInstance:Di}).tapLeft((e=>Bi.error(e))))))})()})();