package days02;

import java.sql.Connection;
import java.sql.Date;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Scanner;

import domain.EmpVO;

public class Ex03 {



	public static String [] menu = {"추가","수정","삭제","조회","종료","검색"};
	public static int selectedNumber;
	public static Connection conn ;
	private static Scanner scanner = new Scanner(System.in);
	public static void main(String[] args) {

		//6명
		//7명
		//[ 팀 문제 ]
		// emp 사원테이블 - 
		// 1)사원추가
		// 2)사원수정
		// 3)사원삭제
		// 4)사원검색
		// 5)사원조회

		/*
	      [실행결과]
	      1등급   (     700~1200 ) - 2명
	            20   RESEARCH   7369   SMITH   800
	            30   SALES         7900   JAMES   950
	      2등급   (   1201~1400 ) - 2명
	         30   SALES   7654   MARTIN   2650
	         30   SALES   7521   WARD      1750   
	      3등급   (   1401~2000 ) - 2명
	         30   SALES   7499   ALLEN      1900
	         30   SALES   7844   TURNER   1500
	      4등급   (   2001~3000 ) - 4명
	          10   ACCOUNTING   7782   CLARK   2450
	         20   RESEARCH   7902   FORD   3000
	         20   RESEARCH   7566   JONES   2975
	         30   SALES   7698   BLAKE   2850
	      5등급   (   3001~9999 ) - 1명   
	         10   ACCOUNTING   7839   KING   5000
		 */

		do {
			메뉴출력();
			메뉴선택();
			메뉴처리();


		} while (true);




	}//main



	private static void 메뉴처리() {

		switch (selectedNumber) {
		case 1:	//추가

			break;
		case 2://수정

			break;
		case 3://삭제

			break;
		case 4://조회
			부서조회();
			break;
		case 5://종료

			break;
		case 6://검색
			
			break;

		default:
			break;
		}

	}



	private static void 부서조회() {
		
		
		
		ArrayList<EmpVO> list = new ArrayList<EmpVO>();
		Statement stmt = null;
		ResultSet rs=  null;
		String sql = "SELECT * FROM emp";
		System.out.println(sql);
		int empno,deptno,mgr;
		double sal,comm;
		String ename,job;
		Date hiredate;
		
		domain.EmpVO vo = null;
		try {
			stmt = conn.createStatement();
			rs = stmt.executeQuery(sql);
		if (rs.next()) {
		
			
			do {
				empno = rs.getInt("empno");
				deptno = rs.getInt("deptno");
				sal = rs.getDouble("sal");
				comm= rs.getDouble("comm");
				mgr= rs.getInt("mgr");
				ename = rs.getString("ename");
				job = rs.getString("job");
				hiredate = rs.getDate("hiredate");
				
				vo = new domain.EmpVO(empno,ename,job,mgr,hiredate,sal,comm,deptno);
				list.add(vo);
										
			} while (rs.next());
			
			부서출력(list);
			
		}//	
			
			
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}finally {
			try {
				stmt.close();
				rs.close();
			} catch (SQLException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
		
		
		
		
		
		
	}



	private static void 부서출력(ArrayList<EmpVO> list) {
		
		Iterator<EmpVO> ir = list.iterator();
		while (ir.hasNext()) {
			EmpVO vo = ir.next();
			System.out.printf("%d\t%s\t%s\t%d\t%t\t%d\t%f\t%f\t%d"
					, vo.getEmpno(),vo.getEname(),vo.getJob(),vo.getMgr(),vo.getHiredate(),vo.getSal(),vo.getComm(),vo.getDeptno());
		}
		
	}



	private static void 메뉴선택() {

		try {
			selectedNumber = scanner.nextInt();
			scanner.nextLine();

		} catch (Exception e) {

		}


	}

	private static void 메뉴출력() {
		System.out.println("[메뉴]\n");
		for (int i = 0; i < menu.length; i++) {
			System.out.printf("%d. %s\n",i+1,menu[i]);
		}

	}

}//class
